var Ro=Object.defineProperty;var Po=(s,e,t)=>e in s?Ro(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var I=(s,e,t)=>Po(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=t(i);fetch(i.href,c)}})();const ps=new Map;function Lo(s){const e=Array.isArray(s)?s:[s],t=e.join(","),r=ps.get(t)??(()=>{const i=Xs(e),c=$o(i);return ps.set(t,c),c})();return i=>r(i)}function Xs(s){return Array.isArray(s)?s.map(e=>e.split(":")):[s.split(":")]}function $o(s){const e=s.flatMap(i=>xo(i,ei(i))),t=Uo(e),r=Wo(t);return i=>!!r(i.update,i)}function ei(s){const e=Ut,t=[s].flatMap(r=>{const[i,c,l]=r;if(!(i in Ss))return[r];if(!i&&!c&&!l)return[r];const d=Ss[i].map(g=>[g,c,l]);return c===void 0||c in vn&&(c||l)?d:d.filter(([g])=>{var C;return!!((C=e[g])!=null&&C[c])})}).flatMap(r=>{const[i,c,l]=r;if(!(c in vn))return[r];if(!c&&!l)return[r];const d=vn[c].map(g=>[i,g,l]);return l===void 0?d:d.filter(([,g])=>{var C,v;return!!((v=(C=e[i])==null?void 0:C[g])!=null&&v[l])})});if(t.length===0)throw new Error(`Shortcuts in '${s.join(":")}' do not expand to any valid filter query`);return t}function xo(s,e){if(e.length===0)throw new Error("Empty filter query given");const t=e.map(Bo).filter(r=>r!==!0);if(t.length===0)return e;throw t.length===1?new Error(t[0]):new Error(`Invalid filter query '${s.join(":")}'. There are ${t.length} errors after expanding the contained shortcuts: ${t.join("; ")}`)}function Bo(s){const[e,t,r,...i]=s;if(e===void 0)return"Empty filter query given";if(!(e in Ut)){const p=Object.keys(Ut);return`Invalid L1 filter '${e}' given in '${s.join(":")}'. Permitted values are: ${p.map(d=>`'${d}'`).join(", ")}.`}if(t===void 0)return!0;const c=Ut[e];if(!(t in c)){const p=Object.keys(c);return`Invalid L2 filter '${t}' given in '${s.join(":")}'. Permitted values are: ${p.map(d=>`'${d}'`).join(", ")}.`}if(r===void 0)return!0;const l=c[t];if(!(r in l)){const p=Object.keys(l);return`Invalid L3 filter '${r}' given in '${s.join(":")}'. ${p.length===0?`No further filtering is possible after '${e}:${t}'.`:`Permitted values are: ${p.map(d=>`'${d}'`).join(", ")}.`}`}return i.length===0?!0:`Cannot filter further than three levels, ':${i.join(":")}' is invalid!`}function Uo(s){const e={};for(const[t,r,i]of s){const c=e[t]??(e[t]={});if(r!==void 0){const l=c[r]??(c[r]=new Set);i!==void 0&&l.add(i)}}return e}function Cn(s,e){return(t,r)=>s(t,r)||e(t,r)}function gs(s,e){return(t,r)=>{const i=s(t,r);return i&&e(i,r)}}function ys(s){return(e,t)=>s(e,t)!=null}function Wo(s){const e=Object.entries(s).map(([t,r])=>{const i=l=>l[t],c=Object.entries(r).map(([l,p])=>{const d=C=>C[l],g=Array.from(p).map(C=>C==="me"?(T,A)=>{const _=A.me.id;return ws(T,k=>k.id===_)}:T=>ws(T,A=>A[C]||A.type===C));return g.length===0?ys(d):gs(d,g.reduce(Cn))});return c.length===0?ys(i):gs(i,c.reduce(Cn))});if(e.length===0)throw new Error("Cannot create filter function for empty query");return e.reduce(Cn)}function ws(s,e){const t=r=>r!=null&&e(r);return Array.isArray(s)?s.some(t):t(s)}const bs={mention:{},hashtag:{},cashtag:{},bot_command:{},url:{},email:{},phone_number:{},bold:{},italic:{},underline:{},strikethrough:{},spoiler:{},blockquote:{},expandable_blockquote:{},code:{},pre:{},text_link:{},text_mention:{},custom_emoji:{}},Dn={me:{},is_bot:{},is_premium:{},added_to_attachment_menu:{}},Vo={user:{},hidden_user:{},chat:{},channel:{}},jo={is_video:{},is_animated:{},premium_animation:{}},An={emoji:{},custom_emoji:{},paid:{}},ti={forward_origin:Vo,is_topic_message:{},is_automatic_forward:{},business_connection_id:{},text:{},animation:{},audio:{},document:{},paid_media:{},photo:{},sticker:jo,story:{},video:{},video_note:{},voice:{},contact:{},dice:{},game:{},poll:{},venue:{},location:{},entities:bs,caption_entities:bs,caption:{},effect_id:{},paid_star_count:{},has_media_spoiler:{},new_chat_title:{},new_chat_photo:{},delete_chat_photo:{},message_auto_delete_timer_changed:{},pinned_message:{},invoice:{},proximity_alert_triggered:{},chat_background_set:{},giveaway_created:{},giveaway:{only_new_members:{},has_public_winners:{}},giveaway_winners:{only_new_members:{},was_refunded:{}},giveaway_completed:{},gift:{},unique_gift:{},paid_message_price_changed:{},video_chat_scheduled:{},video_chat_started:{},video_chat_ended:{},video_chat_participants_invited:{},web_app_data:{}},$t={...ti,new_chat_members:Dn,left_chat_member:Dn,group_chat_created:{},supergroup_chat_created:{},migrate_to_chat_id:{},migrate_from_chat_id:{},successful_payment:{},refunded_payment:{},users_shared:{},chat_shared:{},connected_website:{},write_access_allowed:{},passport_data:{},boost_added:{},forum_topic_created:{},forum_topic_edited:{name:{},icon_custom_emoji_id:{}},forum_topic_closed:{},forum_topic_reopened:{},general_forum_topic_hidden:{},general_forum_topic_unhidden:{},sender_boost_count:{}},Cs={...ti,channel_chat_created:{}},qo={can_reply:{},is_enabled:{}},Go={old_reaction:An,new_reaction:An},Ho={reactions:An},zo={data:{},game_short_name:{}},vs={from:Dn},Ut={message:$t,edited_message:$t,channel_post:Cs,edited_channel_post:Cs,business_connection:qo,business_message:$t,edited_business_message:$t,deleted_business_messages:{},inline_query:{},chosen_inline_result:{},callback_query:zo,shipping_query:{},pre_checkout_query:{},poll:{},poll_answer:{},my_chat_member:vs,chat_member:vs,chat_join_request:{},message_reaction:Go,message_reaction_count:Ho,chat_boost:{},removed_chat_boost:{},purchased_paid_media:{}},Ss={"":["message","channel_post"],msg:["message","channel_post"],edit:["edited_message","edited_channel_post"]},vn={"":["entities","caption_entities"],media:["photo","video"],file:["photo","animation","audio","document","video","video_note","voice","sticker"]},le={filterQuery(s){const e=Lo(s);return t=>e(t)},text(s){const e=le.filterQuery([":text",":caption"]),t=ke(s);return r=>{if(!e(r))return!1;const i=r.message??r.channelPost,c=i.text??i.caption;return Ee(r,c,t)}},command(s){const e=le.filterQuery(":entities:bot_command"),t=new Set,r=new Set;return jt(s).forEach(i=>{if(i.startsWith("/"))throw new Error(`Do not include '/' when registering command handlers (use '${i.substring(1)}' not '${i}')`);(i.includes("@")?t:r).add(i)}),i=>{if(!e(i))return!1;const c=i.message??i.channelPost,l=c.text??c.caption;return c.entities.some(p=>{if(p.type!=="bot_command"||p.offset!==0)return!1;const d=l.substring(1,p.length);if(r.has(d)||t.has(d))return i.match=l.substring(d.length+1).trimStart(),!0;const g=d.indexOf("@");if(g===-1)return!1;const C=d.substring(g+1).toLowerCase(),v=i.me.username.toLowerCase();if(C!==v)return!1;const T=d.substring(0,g);return r.has(T)?(i.match=l.substring(d.length+1).trimStart(),!0):!1})}},reaction(s){const e=le.filterQuery("message_reaction"),t=typeof s=="string"?[{type:"emoji",emoji:s}]:(Array.isArray(s)?s:[s]).map(l=>typeof l=="string"?{type:"emoji",emoji:l}:l),r=new Set(t.filter(l=>l.type==="emoji").map(l=>l.emoji)),i=new Set(t.filter(l=>l.type==="custom_emoji").map(l=>l.custom_emoji_id)),c=t.some(l=>l.type==="paid");return l=>{if(!e(l))return!1;const{old_reaction:p,new_reaction:d}=l.messageReaction;for(const g of d){let C=!1;if(g.type==="emoji"){for(const v of p)if(v.type==="emoji"&&v.emoji===g.emoji){C=!0;break}}else if(g.type==="custom_emoji"){for(const v of p)if(v.type==="custom_emoji"&&v.custom_emoji_id===g.custom_emoji_id){C=!0;break}}else if(g.type==="paid"){for(const v of p)if(v.type==="paid"){C=!0;break}}if(!C)if(g.type==="emoji"){if(r.has(g.emoji))return!0}else if(g.type==="custom_emoji"){if(i.has(g.custom_emoji_id))return!0}else if(g.type==="paid"){if(c)return!0}else return!0}return!1}},chatType(s){const e=new Set(jt(s));return t=>{var r;return((r=t.chat)==null?void 0:r.type)!==void 0&&e.has(t.chat.type)}},callbackQuery(s){const e=le.filterQuery("callback_query:data"),t=ke(s);return r=>e(r)&&Ee(r,r.callbackQuery.data,t)},gameQuery(s){const e=le.filterQuery("callback_query:game_short_name"),t=ke(s);return r=>e(r)&&Ee(r,r.callbackQuery.game_short_name,t)},inlineQuery(s){const e=le.filterQuery("inline_query"),t=ke(s);return r=>e(r)&&Ee(r,r.inlineQuery.query,t)},chosenInlineResult(s){const e=le.filterQuery("chosen_inline_result"),t=ke(s);return r=>e(r)&&Ee(r,r.chosenInlineResult.result_id,t)},preCheckoutQuery(s){const e=le.filterQuery("pre_checkout_query"),t=ke(s);return r=>e(r)&&Ee(r,r.preCheckoutQuery.invoice_payload,t)},shippingQuery(s){const e=le.filterQuery("shipping_query"),t=ke(s);return r=>e(r)&&Ee(r,r.shippingQuery.invoice_payload,t)}},J=class J{constructor(e,t,r){I(this,"update");I(this,"api");I(this,"me");I(this,"match");this.update=e,this.api=t,this.me=r}get message(){return this.update.message}get editedMessage(){return this.update.edited_message}get channelPost(){return this.update.channel_post}get editedChannelPost(){return this.update.edited_channel_post}get businessConnection(){return this.update.business_connection}get businessMessage(){return this.update.business_message}get editedBusinessMessage(){return this.update.edited_business_message}get deletedBusinessMessages(){return this.update.deleted_business_messages}get messageReaction(){return this.update.message_reaction}get messageReactionCount(){return this.update.message_reaction_count}get inlineQuery(){return this.update.inline_query}get chosenInlineResult(){return this.update.chosen_inline_result}get callbackQuery(){return this.update.callback_query}get shippingQuery(){return this.update.shipping_query}get preCheckoutQuery(){return this.update.pre_checkout_query}get poll(){return this.update.poll}get pollAnswer(){return this.update.poll_answer}get myChatMember(){return this.update.my_chat_member}get chatMember(){return this.update.chat_member}get chatJoinRequest(){return this.update.chat_join_request}get chatBoost(){return this.update.chat_boost}get removedChatBoost(){return this.update.removed_chat_boost}get purchasedPaidMedia(){return this.update.purchased_paid_media}get msg(){var e;return this.message??this.editedMessage??this.channelPost??this.editedChannelPost??this.businessMessage??this.editedBusinessMessage??((e=this.callbackQuery)==null?void 0:e.message)}get chat(){var e;return(e=this.msg??this.deletedBusinessMessages??this.messageReaction??this.messageReactionCount??this.myChatMember??this.chatMember??this.chatJoinRequest??this.chatBoost??this.removedChatBoost)==null?void 0:e.chat}get senderChat(){var e;return(e=this.msg)==null?void 0:e.sender_chat}get from(){var e,t,r,i;return((r=this.businessConnection??this.messageReaction??((t=((e=this.chatBoost)==null?void 0:e.boost)??this.removedChatBoost)==null?void 0:t.source))==null?void 0:r.user)??((i=this.callbackQuery??this.msg??this.inlineQuery??this.chosenInlineResult??this.shippingQuery??this.preCheckoutQuery??this.myChatMember??this.chatMember??this.chatJoinRequest??this.purchasedPaidMedia)==null?void 0:i.from)}get msgId(){var e,t,r;return((e=this.msg)==null?void 0:e.message_id)??((t=this.messageReaction)==null?void 0:t.message_id)??((r=this.messageReactionCount)==null?void 0:r.message_id)}get chatId(){var e,t;return((e=this.chat)==null?void 0:e.id)??((t=this.businessConnection)==null?void 0:t.user_chat_id)}get inlineMessageId(){var e,t;return((e=this.callbackQuery)==null?void 0:e.inline_message_id)??((t=this.chosenInlineResult)==null?void 0:t.inline_message_id)}get businessConnectionId(){var e,t,r;return((e=this.msg)==null?void 0:e.business_connection_id)??((t=this.businessConnection)==null?void 0:t.id)??((r=this.deletedBusinessMessages)==null?void 0:r.business_connection_id)}entities(e){const t=this.msg;if(t===void 0)return[];const r=t.text??t.caption;if(r===void 0)return[];let i=t.entities??t.caption_entities;if(i===void 0)return[];if(e!==void 0){const c=new Set(jt(e));i=i.filter(l=>c.has(l.type))}return i.map(c=>({...c,text:r.substring(c.offset,c.offset+c.length)}))}reactions(){const e=[],t=[],r=[],i=[],c=[],l=[],p=[],d=[];let g=!1,C=!1;const v=this.messageReaction;if(v!==void 0){const{old_reaction:T,new_reaction:A}=v;for(const _ of A)_.type==="emoji"?e.push(_.emoji):_.type==="custom_emoji"?c.push(_.custom_emoji_id):_.type==="paid"&&(g=C=!0);for(const _ of T)_.type==="emoji"?i.push(_.emoji):_.type==="custom_emoji"?d.push(_.custom_emoji_id):_.type==="paid"&&(C=!1);t.push(...e),l.push(...c);for(let _=0;_<i.length;_++){const k=t.length;if(k===0)break;const R=i[_];for(let N=0;N<k;N++)if(R===t[N]){r.push(R),i.splice(_,1),t.splice(N,1),_--;break}}for(let _=0;_<d.length;_++){const k=l.length;if(k===0)break;const R=d[_];for(let N=0;N<k;N++)if(R===l[N]){p.push(R),d.splice(_,1),l.splice(N,1),_--;break}}}return{emoji:e,emojiAdded:t,emojiKept:r,emojiRemoved:i,customEmoji:c,customEmojiAdded:l,customEmojiKept:p,customEmojiRemoved:d,paid:g,paidAdded:C}}has(e){return J.has.filterQuery(e)(this)}hasText(e){return J.has.text(e)(this)}hasCommand(e){return J.has.command(e)(this)}hasReaction(e){return J.has.reaction(e)(this)}hasChatType(e){return J.has.chatType(e)(this)}hasCallbackQuery(e){return J.has.callbackQuery(e)(this)}hasGameQuery(e){return J.has.gameQuery(e)(this)}hasInlineQuery(e){return J.has.inlineQuery(e)(this)}hasChosenInlineResult(e){return J.has.chosenInlineResult(e)(this)}hasPreCheckoutQuery(e){return J.has.preCheckoutQuery(e)(this)}hasShippingQuery(e){return J.has.shippingQuery(e)(this)}reply(e,t,r){return this.api.sendMessage(w(this.chatId,"sendMessage"),e,{business_connection_id:this.businessConnectionId,...t},r)}forwardMessage(e,t,r){return this.api.forwardMessage(e,w(this.chatId,"forwardMessage"),w(this.msgId,"forwardMessage"),t,r)}forwardMessages(e,t,r,i){return this.api.forwardMessages(e,w(this.chatId,"forwardMessages"),t,r,i)}copyMessage(e,t,r){return this.api.copyMessage(e,w(this.chatId,"copyMessage"),w(this.msgId,"copyMessage"),t,r)}copyMessages(e,t,r,i){return this.api.copyMessages(e,w(this.chatId,"copyMessages"),t,r,i)}replyWithPhoto(e,t,r){return this.api.sendPhoto(w(this.chatId,"sendPhoto"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithAudio(e,t,r){return this.api.sendAudio(w(this.chatId,"sendAudio"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithDocument(e,t,r){return this.api.sendDocument(w(this.chatId,"sendDocument"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithVideo(e,t,r){return this.api.sendVideo(w(this.chatId,"sendVideo"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithAnimation(e,t,r){return this.api.sendAnimation(w(this.chatId,"sendAnimation"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithVoice(e,t,r){return this.api.sendVoice(w(this.chatId,"sendVoice"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithVideoNote(e,t,r){return this.api.sendVideoNote(w(this.chatId,"sendVideoNote"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithMediaGroup(e,t,r){return this.api.sendMediaGroup(w(this.chatId,"sendMediaGroup"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithLocation(e,t,r,i){return this.api.sendLocation(w(this.chatId,"sendLocation"),e,t,{business_connection_id:this.businessConnectionId,...r},i)}editMessageLiveLocation(e,t,r,i){const c=this.inlineMessageId;return c!==void 0?this.api.editMessageLiveLocationInline(c,e,t,{business_connection_id:this.businessConnectionId,...r},i):this.api.editMessageLiveLocation(w(this.chatId,"editMessageLiveLocation"),w(this.msgId,"editMessageLiveLocation"),e,t,{business_connection_id:this.businessConnectionId,...r},i)}stopMessageLiveLocation(e,t){const r=this.inlineMessageId;return r!==void 0?this.api.stopMessageLiveLocationInline(r,{business_connection_id:this.businessConnectionId,...e},t):this.api.stopMessageLiveLocation(w(this.chatId,"stopMessageLiveLocation"),w(this.msgId,"stopMessageLiveLocation"),{business_connection_id:this.businessConnectionId,...e},t)}sendPaidMedia(e,t,r,i){return this.api.sendPaidMedia(w(this.chatId,"sendPaidMedia"),e,t,{business_connection_id:this.businessConnectionId,...r},i)}replyWithVenue(e,t,r,i,c,l){return this.api.sendVenue(w(this.chatId,"sendVenue"),e,t,r,i,{business_connection_id:this.businessConnectionId,...c},l)}replyWithContact(e,t,r,i){return this.api.sendContact(w(this.chatId,"sendContact"),e,t,{business_connection_id:this.businessConnectionId,...r},i)}replyWithPoll(e,t,r,i){return this.api.sendPoll(w(this.chatId,"sendPoll"),e,t,{business_connection_id:this.businessConnectionId,...r},i)}replyWithDice(e,t,r){return this.api.sendDice(w(this.chatId,"sendDice"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithChatAction(e,t,r){return this.api.sendChatAction(w(this.chatId,"sendChatAction"),e,{business_connection_id:this.businessConnectionId,...t},r)}react(e,t,r){return this.api.setMessageReaction(w(this.chatId,"setMessageReaction"),w(this.msgId,"setMessageReaction"),typeof e=="string"?[{type:"emoji",emoji:e}]:(Array.isArray(e)?e:[e]).map(i=>typeof i=="string"?{type:"emoji",emoji:i}:i),t,r)}getUserProfilePhotos(e,t){return this.api.getUserProfilePhotos(w(this.from,"getUserProfilePhotos").id,e,t)}setUserEmojiStatus(e,t){return this.api.setUserEmojiStatus(w(this.from,"setUserEmojiStatus").id,e,t)}getUserChatBoosts(e,t){return this.api.getUserChatBoosts(e,w(this.from,"getUserChatBoosts").id,t)}getBusinessConnection(e){return this.api.getBusinessConnection(w(this.businessConnectionId,"getBusinessConnection"),e)}getFile(e){const t=w(this.msg,"getFile"),r=t.photo!==void 0?t.photo[t.photo.length-1]:t.animation??t.audio??t.document??t.video??t.video_note??t.voice??t.sticker;return this.api.getFile(w(r,"getFile").file_id,e)}kickAuthor(...e){return this.banAuthor(...e)}banAuthor(e,t){return this.api.banChatMember(w(this.chatId,"banAuthor"),w(this.from,"banAuthor").id,e,t)}kickChatMember(...e){return this.banChatMember(...e)}banChatMember(e,t,r){return this.api.banChatMember(w(this.chatId,"banChatMember"),e,t,r)}unbanChatMember(e,t,r){return this.api.unbanChatMember(w(this.chatId,"unbanChatMember"),e,t,r)}restrictAuthor(e,t,r){return this.api.restrictChatMember(w(this.chatId,"restrictAuthor"),w(this.from,"restrictAuthor").id,e,t,r)}restrictChatMember(e,t,r,i){return this.api.restrictChatMember(w(this.chatId,"restrictChatMember"),e,t,r,i)}promoteAuthor(e,t){return this.api.promoteChatMember(w(this.chatId,"promoteAuthor"),w(this.from,"promoteAuthor").id,e,t)}promoteChatMember(e,t,r){return this.api.promoteChatMember(w(this.chatId,"promoteChatMember"),e,t,r)}setChatAdministratorAuthorCustomTitle(e,t){return this.api.setChatAdministratorCustomTitle(w(this.chatId,"setChatAdministratorAuthorCustomTitle"),w(this.from,"setChatAdministratorAuthorCustomTitle").id,e,t)}setChatAdministratorCustomTitle(e,t,r){return this.api.setChatAdministratorCustomTitle(w(this.chatId,"setChatAdministratorCustomTitle"),e,t,r)}banChatSenderChat(e,t){return this.api.banChatSenderChat(w(this.chatId,"banChatSenderChat"),e,t)}unbanChatSenderChat(e,t){return this.api.unbanChatSenderChat(w(this.chatId,"unbanChatSenderChat"),e,t)}setChatPermissions(e,t,r){return this.api.setChatPermissions(w(this.chatId,"setChatPermissions"),e,t,r)}exportChatInviteLink(e){return this.api.exportChatInviteLink(w(this.chatId,"exportChatInviteLink"),e)}createChatInviteLink(e,t){return this.api.createChatInviteLink(w(this.chatId,"createChatInviteLink"),e,t)}editChatInviteLink(e,t,r){return this.api.editChatInviteLink(w(this.chatId,"editChatInviteLink"),e,t,r)}createChatSubscriptionInviteLink(e,t,r,i){return this.api.createChatSubscriptionInviteLink(w(this.chatId,"createChatSubscriptionInviteLink"),e,t,r,i)}editChatSubscriptionInviteLink(e,t,r){return this.api.editChatSubscriptionInviteLink(w(this.chatId,"editChatSubscriptionInviteLink"),e,t,r)}revokeChatInviteLink(e,t){return this.api.revokeChatInviteLink(w(this.chatId,"editChatInviteLink"),e,t)}approveChatJoinRequest(e,t){return this.api.approveChatJoinRequest(w(this.chatId,"approveChatJoinRequest"),e,t)}declineChatJoinRequest(e,t){return this.api.declineChatJoinRequest(w(this.chatId,"declineChatJoinRequest"),e,t)}setChatPhoto(e,t){return this.api.setChatPhoto(w(this.chatId,"setChatPhoto"),e,t)}deleteChatPhoto(e){return this.api.deleteChatPhoto(w(this.chatId,"deleteChatPhoto"),e)}setChatTitle(e,t){return this.api.setChatTitle(w(this.chatId,"setChatTitle"),e,t)}setChatDescription(e,t){return this.api.setChatDescription(w(this.chatId,"setChatDescription"),e,t)}pinChatMessage(e,t,r){return this.api.pinChatMessage(w(this.chatId,"pinChatMessage"),e,{business_connection_id:this.businessConnectionId,...t},r)}unpinChatMessage(e,t,r){return this.api.unpinChatMessage(w(this.chatId,"unpinChatMessage"),e,{business_connection_id:this.businessConnectionId,...t},r)}unpinAllChatMessages(e){return this.api.unpinAllChatMessages(w(this.chatId,"unpinAllChatMessages"),e)}leaveChat(e){return this.api.leaveChat(w(this.chatId,"leaveChat"),e)}getChat(e){return this.api.getChat(w(this.chatId,"getChat"),e)}getChatAdministrators(e){return this.api.getChatAdministrators(w(this.chatId,"getChatAdministrators"),e)}getChatMembersCount(...e){return this.getChatMemberCount(...e)}getChatMemberCount(e){return this.api.getChatMemberCount(w(this.chatId,"getChatMemberCount"),e)}getAuthor(e){return this.api.getChatMember(w(this.chatId,"getAuthor"),w(this.from,"getAuthor").id,e)}getChatMember(e,t){return this.api.getChatMember(w(this.chatId,"getChatMember"),e,t)}setChatStickerSet(e,t){return this.api.setChatStickerSet(w(this.chatId,"setChatStickerSet"),e,t)}deleteChatStickerSet(e){return this.api.deleteChatStickerSet(w(this.chatId,"deleteChatStickerSet"),e)}createForumTopic(e,t,r){return this.api.createForumTopic(w(this.chatId,"createForumTopic"),e,t,r)}editForumTopic(e,t){const r=w(this.msg,"editForumTopic"),i=w(r.message_thread_id,"editForumTopic");return this.api.editForumTopic(r.chat.id,i,e,t)}closeForumTopic(e){const t=w(this.msg,"closeForumTopic"),r=w(t.message_thread_id,"closeForumTopic");return this.api.closeForumTopic(t.chat.id,r,e)}reopenForumTopic(e){const t=w(this.msg,"reopenForumTopic"),r=w(t.message_thread_id,"reopenForumTopic");return this.api.reopenForumTopic(t.chat.id,r,e)}deleteForumTopic(e){const t=w(this.msg,"deleteForumTopic"),r=w(t.message_thread_id,"deleteForumTopic");return this.api.deleteForumTopic(t.chat.id,r,e)}unpinAllForumTopicMessages(e){const t=w(this.msg,"unpinAllForumTopicMessages"),r=w(t.message_thread_id,"unpinAllForumTopicMessages");return this.api.unpinAllForumTopicMessages(t.chat.id,r,e)}editGeneralForumTopic(e,t){return this.api.editGeneralForumTopic(w(this.chatId,"editGeneralForumTopic"),e,t)}closeGeneralForumTopic(e){return this.api.closeGeneralForumTopic(w(this.chatId,"closeGeneralForumTopic"),e)}reopenGeneralForumTopic(e){return this.api.reopenGeneralForumTopic(w(this.chatId,"reopenGeneralForumTopic"),e)}hideGeneralForumTopic(e){return this.api.hideGeneralForumTopic(w(this.chatId,"hideGeneralForumTopic"),e)}unhideGeneralForumTopic(e){return this.api.unhideGeneralForumTopic(w(this.chatId,"unhideGeneralForumTopic"),e)}unpinAllGeneralForumTopicMessages(e){return this.api.unpinAllGeneralForumTopicMessages(w(this.chatId,"unpinAllGeneralForumTopicMessages"),e)}answerCallbackQuery(e,t){return this.api.answerCallbackQuery(w(this.callbackQuery,"answerCallbackQuery").id,typeof e=="string"?{text:e}:e,t)}setChatMenuButton(e,t){return this.api.setChatMenuButton(e,t)}getChatMenuButton(e,t){return this.api.getChatMenuButton(e,t)}setMyDefaultAdministratorRights(e,t){return this.api.setMyDefaultAdministratorRights(e,t)}getMyDefaultAdministratorRights(e,t){return this.api.getMyDefaultAdministratorRights(e,t)}editMessageText(e,t,r){var c,l,p;const i=this.inlineMessageId;return i!==void 0?this.api.editMessageTextInline(i,e,{business_connection_id:this.businessConnectionId,...t},r):this.api.editMessageText(w(this.chatId,"editMessageText"),w(((c=this.msg)==null?void 0:c.message_id)??((l=this.messageReaction)==null?void 0:l.message_id)??((p=this.messageReactionCount)==null?void 0:p.message_id),"editMessageText"),e,{business_connection_id:this.businessConnectionId,...t},r)}editMessageCaption(e,t){var i,c,l;const r=this.inlineMessageId;return r!==void 0?this.api.editMessageCaptionInline(r,{business_connection_id:this.businessConnectionId,...e},t):this.api.editMessageCaption(w(this.chatId,"editMessageCaption"),w(((i=this.msg)==null?void 0:i.message_id)??((c=this.messageReaction)==null?void 0:c.message_id)??((l=this.messageReactionCount)==null?void 0:l.message_id),"editMessageCaption"),{business_connection_id:this.businessConnectionId,...e},t)}editMessageMedia(e,t,r){var c,l,p;const i=this.inlineMessageId;return i!==void 0?this.api.editMessageMediaInline(i,e,{business_connection_id:this.businessConnectionId,...t},r):this.api.editMessageMedia(w(this.chatId,"editMessageMedia"),w(((c=this.msg)==null?void 0:c.message_id)??((l=this.messageReaction)==null?void 0:l.message_id)??((p=this.messageReactionCount)==null?void 0:p.message_id),"editMessageMedia"),e,{business_connection_id:this.businessConnectionId,...t},r)}editMessageReplyMarkup(e,t){var i,c,l;const r=this.inlineMessageId;return r!==void 0?this.api.editMessageReplyMarkupInline(r,{business_connection_id:this.businessConnectionId,...e},t):this.api.editMessageReplyMarkup(w(this.chatId,"editMessageReplyMarkup"),w(((i=this.msg)==null?void 0:i.message_id)??((c=this.messageReaction)==null?void 0:c.message_id)??((l=this.messageReactionCount)==null?void 0:l.message_id),"editMessageReplyMarkup"),{business_connection_id:this.businessConnectionId,...e},t)}stopPoll(e,t){var r,i,c;return this.api.stopPoll(w(this.chatId,"stopPoll"),w(((r=this.msg)==null?void 0:r.message_id)??((i=this.messageReaction)==null?void 0:i.message_id)??((c=this.messageReactionCount)==null?void 0:c.message_id),"stopPoll"),{business_connection_id:this.businessConnectionId,...e},t)}deleteMessage(e){var t,r,i;return this.api.deleteMessage(w(this.chatId,"deleteMessage"),w(((t=this.msg)==null?void 0:t.message_id)??((r=this.messageReaction)==null?void 0:r.message_id)??((i=this.messageReactionCount)==null?void 0:i.message_id),"deleteMessage"),e)}deleteMessages(e,t){return this.api.deleteMessages(w(this.chatId,"deleteMessages"),e,t)}deleteBusinessMessages(e,t){return this.api.deleteBusinessMessages(w(this.businessConnectionId,"deleteBusinessMessages"),e,t)}setBusinessAccountName(e,t,r){return this.api.setBusinessAccountName(w(this.businessConnectionId,"setBusinessAccountName"),e,t,r)}setBusinessAccountUsername(e,t){return this.api.setBusinessAccountUsername(w(this.businessConnectionId,"setBusinessAccountUsername"),e,t)}setBusinessAccountBio(e,t){return this.api.setBusinessAccountBio(w(this.businessConnectionId,"setBusinessAccountBio"),e,t)}setBusinessAccountProfilePhoto(e,t,r){return this.api.setBusinessAccountProfilePhoto(w(this.businessConnectionId,"setBusinessAccountProfilePhoto"),e,t,r)}removeBusinessAccountProfilePhoto(e,t){return this.api.removeBusinessAccountProfilePhoto(w(this.businessConnectionId,"removeBusinessAccountProfilePhoto"),e,t)}setBusinessAccountGiftSettings(e,t,r){return this.api.setBusinessAccountGiftSettings(w(this.businessConnectionId,"setBusinessAccountGiftSettings"),e,t,r)}getBusinessAccountStarBalance(e){return this.api.getBusinessAccountStarBalance(w(this.businessConnectionId,"getBusinessAccountStarBalance"),e)}transferBusinessAccountStars(e,t){return this.api.transferBusinessAccountStars(w(this.businessConnectionId,"transferBusinessAccountStars"),e,t)}getBusinessAccountGifts(e,t){return this.api.getBusinessAccountGifts(w(this.businessConnectionId,"getBusinessAccountGifts"),e,t)}convertGiftToStars(e,t){return this.api.convertGiftToStars(w(this.businessConnectionId,"convertGiftToStars"),e,t)}upgradeGift(e,t,r){return this.api.upgradeGift(w(this.businessConnectionId,"upgradeGift"),e,t,r)}transferGift(e,t,r,i){return this.api.transferGift(w(this.businessConnectionId,"transferGift"),e,t,r,i)}postStory(e,t,r,i){return this.api.postStory(w(this.businessConnectionId,"postStory"),e,t,r,i)}editStory(e,t,r,i){return this.api.editStory(w(this.businessConnectionId,"editStory"),e,t,r,i)}deleteStory(e,t){return this.api.deleteStory(w(this.businessConnectionId,"deleteStory"),e,t)}replyWithSticker(e,t,r){return this.api.sendSticker(w(this.chatId,"sendSticker"),e,{business_connection_id:this.businessConnectionId,...t},r)}getCustomEmojiStickers(e){var t;return this.api.getCustomEmojiStickers((((t=this.msg)==null?void 0:t.entities)??[]).filter(r=>r.type==="custom_emoji").map(r=>r.custom_emoji_id),e)}replyWithGift(e,t,r){return this.api.sendGift(w(this.from,"sendGift").id,e,t,r)}giftPremiumSubscription(e,t,r,i){return this.api.giftPremiumSubscription(w(this.from,"giftPremiumSubscription").id,e,t,r,i)}replyWithGiftToChannel(e,t,r){return this.api.sendGiftToChannel(w(this.chat,"sendGift").id,e,t,r)}answerInlineQuery(e,t,r){return this.api.answerInlineQuery(w(this.inlineQuery,"answerInlineQuery").id,e,t,r)}savePreparedInlineMessage(e,t,r){return this.api.savePreparedInlineMessage(w(this.from,"savePreparedInlineMessage").id,e,t,r)}replyWithInvoice(e,t,r,i,c,l,p){return this.api.sendInvoice(w(this.chatId,"sendInvoice"),e,t,r,i,c,l,p)}answerShippingQuery(e,t,r){return this.api.answerShippingQuery(w(this.shippingQuery,"answerShippingQuery").id,e,t,r)}answerPreCheckoutQuery(e,t,r){return this.api.answerPreCheckoutQuery(w(this.preCheckoutQuery,"answerPreCheckoutQuery").id,e,typeof t=="string"?{error_message:t}:t,r)}refundStarPayment(e){var t;return this.api.refundStarPayment(w(this.from,"refundStarPayment").id,w((t=this.msg)==null?void 0:t.successful_payment,"refundStarPayment").telegram_payment_charge_id,e)}editUserStarSubscription(e,t,r){return this.api.editUserStarSubscription(w(this.from,"editUserStarSubscription").id,e,t,r)}verifyUser(e,t){return this.api.verifyUser(w(this.from,"verifyUser").id,e,t)}verifyChat(e,t){return this.api.verifyChat(w(this.chatId,"verifyChat"),e,t)}removeUserVerification(e){return this.api.removeUserVerification(w(this.from,"removeUserVerification").id,e)}removeChatVerification(e){return this.api.removeChatVerification(w(this.chatId,"removeChatVerification"),e)}readBusinessMessage(e){return this.api.readBusinessMessage(w(this.businessConnectionId,"readBusinessMessage"),w(this.chatId,"readBusinessMessage"),w(this.msgId,"readBusinessMessage"),e)}setPassportDataErrors(e,t){return this.api.setPassportDataErrors(w(this.from,"setPassportDataErrors").id,e,t)}replyWithGame(e,t,r){return this.api.sendGame(w(this.chatId,"sendGame"),e,{business_connection_id:this.businessConnectionId,...t},r)}};I(J,"has",le);let K=J;function w(s,e){if(s===void 0)throw new Error(`Missing information for API call to ${e}`);return s}function ke(s){return jt(s).map(e=>typeof e=="string"?t=>t===e?e:null:t=>t.match(e))}function Ee(s,e,t){for(const r of t){const i=r(e);if(i)return s.match=i,!0}return!1}function jt(s){return Array.isArray(s)?s:[s]}class Nn extends Error{constructor(t,r){super(Zo(t));I(this,"error");I(this,"ctx");this.error=t,this.ctx=r,this.name="BotError",t instanceof Error&&(this.stack=t.stack)}}function Zo(s){let e;if(s instanceof Error)e=`${s.name} in middleware: ${s.message}`;else{const t=typeof s;switch(e=`Non-error value of type ${t} thrown in middleware`,t){case"bigint":case"boolean":case"number":case"symbol":e+=`: ${s}`;break;case"string":e+=`: ${String(s).substring(0,50)}`;break;default:e+="!";break}}return e}function wt(s){return typeof s=="function"?s:(e,t)=>s.middleware()(e,t)}function Ts(s,e){return async(t,r)=>{let i=!1;await s(t,async()=>{if(i)throw new Error("`next` already called before!");i=!0,await e(t,r)})}}function Sn(s,e){return e()}const Yo=()=>Promise.resolve();async function ni(s,e){await s(e,Yo)}class ve{constructor(...e){I(this,"handler");this.handler=e.length===0?Sn:e.map(wt).reduce(Ts)}middleware(){return this.handler}use(...e){const t=new ve(...e);return this.handler=Ts(this.handler,wt(t)),t}on(e,...t){return this.filter(K.has.filterQuery(e),...t)}hears(e,...t){return this.filter(K.has.text(e),...t)}command(e,...t){return this.filter(K.has.command(e),...t)}reaction(e,...t){return this.filter(K.has.reaction(e),...t)}chatType(e,...t){return this.filter(K.has.chatType(e),...t)}callbackQuery(e,...t){return this.filter(K.has.callbackQuery(e),...t)}gameQuery(e,...t){return this.filter(K.has.gameQuery(e),...t)}inlineQuery(e,...t){return this.filter(K.has.inlineQuery(e),...t)}chosenInlineResult(e,...t){return this.filter(K.has.chosenInlineResult(e),...t)}preCheckoutQuery(e,...t){return this.filter(K.has.preCheckoutQuery(e),...t)}shippingQuery(e,...t){return this.filter(K.has.shippingQuery(e),...t)}filter(e,...t){const r=new ve(...t);return this.branch(e,r,Sn),r}drop(e,...t){return this.filter(async r=>!await e(r),...t)}fork(...e){const t=new ve(...e),r=wt(t);return this.use((i,c)=>Promise.all([c(),ni(r,i)])),t}lazy(e){return this.use(async(t,r)=>{const i=await e(t),c=Array.isArray(i)?i:[i];await wt(new ve(...c))(t,r)})}route(e,t,r=Sn){return this.lazy(async i=>{const c=await e(i);return(c===void 0||!t[c]?r:t[c])??[]})}branch(e,t,r){return this.lazy(async i=>await e(i)?t:r)}errorBoundary(e,...t){const r=new ve(...t),i=wt(r);return this.use(async(c,l)=>{let p=!1;const d=()=>(p=!0,Promise.resolve());try{await i(c,d)}catch(g){p=!1,await e(new Nn(g,c),d)}p&&await l()}),r}}var et=1e3,tt=et*60,nt=tt*60,Fe=nt*24,Qo=Fe*7,Jo=Fe*365.25,Ko=function(s,e){e=e||{};var t=typeof s;if(t==="string"&&s.length>0)return Xo(s);if(t==="number"&&isFinite(s))return e.long?tu(s):eu(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};function Xo(s){if(s=String(s),!(s.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(e){var t=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return t*Jo;case"weeks":case"week":case"w":return t*Qo;case"days":case"day":case"d":return t*Fe;case"hours":case"hour":case"hrs":case"hr":case"h":return t*nt;case"minutes":case"minute":case"mins":case"min":case"m":return t*tt;case"seconds":case"second":case"secs":case"sec":case"s":return t*et;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function eu(s){var e=Math.abs(s);return e>=Fe?Math.round(s/Fe)+"d":e>=nt?Math.round(s/nt)+"h":e>=tt?Math.round(s/tt)+"m":e>=et?Math.round(s/et)+"s":s+"ms"}function tu(s){var e=Math.abs(s);return e>=Fe?xt(s,e,Fe,"day"):e>=nt?xt(s,e,nt,"hour"):e>=tt?xt(s,e,tt,"minute"):e>=et?xt(s,e,et,"second"):s+" ms"}function xt(s,e,t,r){var i=e>=t*1.5;return Math.round(s/t)+" "+r+(i?"s":"")}function ri(){throw new Error("setTimeout has not been defined")}function si(){throw new Error("clearTimeout has not been defined")}var be=ri,Ce=si,Ke;typeof window<"u"?Ke=window:typeof self<"u"?Ke=self:Ke={};typeof Ke.setTimeout=="function"&&(be=setTimeout);typeof Ke.clearTimeout=="function"&&(Ce=clearTimeout);function ii(s){if(be===setTimeout)return setTimeout(s,0);if((be===ri||!be)&&setTimeout)return be=setTimeout,setTimeout(s,0);try{return be(s,0)}catch{try{return be.call(null,s,0)}catch{return be.call(this,s,0)}}}function nu(s){if(Ce===clearTimeout)return clearTimeout(s);if((Ce===si||!Ce)&&clearTimeout)return Ce=clearTimeout,clearTimeout(s);try{return Ce(s)}catch{try{return Ce.call(null,s)}catch{return Ce.call(this,s)}}}var de=[],Xe=!1,Ae,Wt=-1;function ru(){!Xe||!Ae||(Xe=!1,Ae.length?de=Ae.concat(de):Wt=-1,de.length&&ai())}function ai(){if(!Xe){var s=ii(ru);Xe=!0;for(var e=de.length;e;){for(Ae=de,de=[];++Wt<e;)Ae&&Ae[Wt].run();Wt=-1,e=de.length}Ae=null,Xe=!1,nu(s)}}function su(s){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];de.push(new oi(s,e)),de.length===1&&!Xe&&ii(ai)}function oi(s,e){this.fun=s,this.array=e}oi.prototype.run=function(){this.fun.apply(null,this.array)};var iu="browser",au="browser",ou=!0,uu=[],cu="",lu={},hu={},du={};function Re(){}var fu=Re,mu=Re,pu=Re,gu=Re,yu=Re,wu=Re,bu=Re;function Cu(s){throw new Error("process.binding is not supported")}function vu(){return"/"}function Su(s){throw new Error("process.chdir is not supported")}function Tu(){return 0}var Ye=Ke.performance||{},Iu=Ye.now||Ye.mozNow||Ye.msNow||Ye.oNow||Ye.webkitNow||function(){return new Date().getTime()};function _u(s){var e=Iu.call(Ye)*.001,t=Math.floor(e),r=Math.floor(e%1*1e9);return s&&(t=t-s[0],r=r-s[1],r<0&&(t--,r+=1e9)),[t,r]}var ku=new Date;function Eu(){var s=new Date,e=s-ku;return e/1e3}var Tn={nextTick:su,title:iu,browser:ou,env:{NODE_ENV:"production"},argv:uu,version:cu,versions:lu,on:fu,addListener:mu,once:pu,off:gu,removeListener:yu,removeAllListeners:wu,emit:bu,binding:Cu,cwd:vu,chdir:Su,umask:Tu,hrtime:_u,platform:au,release:hu,config:du,uptime:Eu};function Mu(s,e,t){return t={path:e,exports:{},require:function(r,i){return Ou(r,i??t.path)}},s(t,t.exports),t.exports}function Ou(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function Du(s){t.debug=t,t.default=t,t.coerce=d,t.disable=c,t.enable=i,t.enabled=l,t.humanize=Ko,t.destroy=g,Object.keys(s).forEach(C=>{t[C]=s[C]}),t.names=[],t.skips=[],t.formatters={};function e(C){let v=0;for(let T=0;T<C.length;T++)v=(v<<5)-v+C.charCodeAt(T),v|=0;return t.colors[Math.abs(v)%t.colors.length]}t.selectColor=e;function t(C){let v,T=null,A,_;function k(...R){if(!k.enabled)return;const N=k,G=Number(new Date),Y=G-(v||G);N.diff=Y,N.prev=v,N.curr=G,v=G,R[0]=t.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let V=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(ne,ae)=>{if(ne==="%%")return"%";V++;const rt=t.formatters[ae];if(typeof rt=="function"){const It=R[V];ne=rt.call(N,It),R.splice(V,1),V--}return ne}),t.formatArgs.call(N,R),(N.log||t.log).apply(N,R)}return k.namespace=C,k.useColors=t.useColors(),k.color=t.selectColor(C),k.extend=r,k.destroy=t.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>T!==null?T:(A!==t.namespaces&&(A=t.namespaces,_=t.enabled(C)),_),set:R=>{T=R}}),typeof t.init=="function"&&t.init(k),k}function r(C,v){const T=t(this.namespace+(typeof v>"u"?":":v)+C);return T.log=this.log,T}function i(C){t.save(C),t.namespaces=C,t.names=[],t.skips=[];let v;const T=(typeof C=="string"?C:"").split(/[\s,]+/),A=T.length;for(v=0;v<A;v++)T[v]&&(C=T[v].replace(/\*/g,".*?"),C[0]==="-"?t.skips.push(new RegExp("^"+C.slice(1)+"$")):t.names.push(new RegExp("^"+C+"$")))}function c(){const C=[...t.names.map(p),...t.skips.map(p).map(v=>"-"+v)].join(",");return t.enable(""),C}function l(C){if(C[C.length-1]==="*")return!0;let v,T;for(v=0,T=t.skips.length;v<T;v++)if(t.skips[v].test(C))return!1;for(v=0,T=t.names.length;v<T;v++)if(t.names[v].test(C))return!0;return!1}function p(C){return C.toString().substring(2,C.toString().length-2).replace(/\.\*\?$/,"*")}function d(C){return C instanceof Error?C.stack||C.message:C}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var Au=Du,Z=Mu(function(s,e){e.formatArgs=r,e.save=i,e.load=c,e.useColors=t,e.storage=l(),e.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;const g="color: "+this.color;d.splice(1,0,g,"color: inherit");let C=0,v=0;d[0].replace(/%[a-zA-Z%]/g,T=>{T!=="%%"&&(C++,T==="%c"&&(v=C))}),d.splice(v,0,g)}e.log=console.debug||console.log||(()=>{});function i(d){try{d?e.storage.setItem("debug",d):e.storage.removeItem("debug")}catch{}}function c(){let d;try{d=e.storage.getItem("debug")}catch{}return!d&&typeof Tn<"u"&&"env"in Tn&&(d=Tn.env.DEBUG),d}function l(){try{return localStorage}catch{}}s.exports=Au(e);const{formatters:p}=s.exports;p.j=function(d){try{return JSON.stringify(d)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}}});Z.colors;Z.destroy;Z.formatArgs;Z.load;Z.log;Z.save;Z.storage;Z.useColors;const Nu=s=>{const e=s[Symbol.asyncIterator]();return new ReadableStream({async pull(t){const r=await e.next();r.done?t.close():t.enqueue(r.value)}})},Fu=s=>({}),Is=Z("grammy:warn");class zn extends Error{constructor(t,r,i,c){super(`${t} (${r.error_code}: ${r.description})`);I(this,"method");I(this,"payload");I(this,"ok");I(this,"error_code");I(this,"description");I(this,"parameters");this.method=i,this.payload=c,this.ok=!1,this.name="GrammyError",this.error_code=r.error_code,this.description=r.description,this.parameters=r.parameters??{}}}function Ru(s,e,t){switch(s.error_code){case 401:Is("Error 401 means that your bot token is wrong, talk to https://t.me/BotFather to check it.");break;case 409:Is("Error 409 means that you are running your bot several times on long polling. Consider revoking the bot token if you believe that no other instance is running.");break}return new zn(`Call to '${e}' failed!`,s,e,t)}class ui extends Error{constructor(t,r){super(t);I(this,"error");this.error=r,this.name="HttpError"}}function Pu(s){return typeof s=="object"&&s!==null&&"status"in s&&"statusText"in s}function Lu(s,e){return t=>{let r=`Network request for '${s}' failed!`;throw Pu(t)&&(r+=` (${t.status}: ${t.statusText})`),e&&t instanceof Error&&(r+=` ${t.message}`),new ui(r,t)}}const $u=(()=>{var t,r,i;const{Deno:s}=globalThis;if(typeof((t=s==null?void 0:s.build)==null?void 0:t.os)=="string")return s.build.os;const{navigator:e}=globalThis;return(i=(r=e==null?void 0:e.appVersion)==null?void 0:r.includes)!=null&&i.call(r,"Win")?"windows":"linux"})(),xu=$u==="windows";function Bu(s){if(typeof s!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(s)}`)}function ci(s,e){if(e.length>=s.length)return s;const t=s.length-e.length;for(let r=e.length-1;r>=0;--r)if(s.charCodeAt(t+r)!==e.charCodeAt(r))return s;return s.slice(0,-e.length)}function li(s,e,t=0){let r=!1,i=s.length;for(let c=s.length-1;c>=t;--c)if(e(s.charCodeAt(c))){if(r){t=c+1;break}}else r||(r=!0,i=c+1);return s.slice(t,i)}function hi(s,e){if(Bu(s),s.length===0)return s;if(typeof e!="string")throw new TypeError(`Suffix must be a string. Received ${JSON.stringify(e)}`)}function di(s,e){if(s.length<=1)return s;let t=s.length;for(let r=s.length-1;r>0&&e(s.charCodeAt(r));r--)t=r;return s.slice(0,t)}function _s(s){return s===47}function Uu(s,e=""){hi(s,e);const t=li(s,_s),r=di(t,_s);return e?ci(r,e):r}function ks(s){return s===47||s===92}function Wu(s){return s>=97&&s<=122||s>=65&&s<=90}function Vu(s,e=""){hi(s,e);let t=0;if(s.length>=2){const c=s.charCodeAt(0);Wu(c)&&s.charCodeAt(1)===58&&(t=2)}const r=li(s,ks,t),i=di(r,ks);return e?ci(i,e):i}function Bt(s,e=""){return xu?Vu(s,e):Uu(s,e)}class Fn{constructor(e,t){I(this,"consumed",!1);I(this,"fileData");I(this,"filename");this.fileData=e,t??(t=this.guessFilename(e)),this.filename=t}guessFilename(e){if(typeof e=="string")return Bt(e);if(typeof e=="object"){if("url"in e)return Bt(e.url);if(e instanceof URL)return Bt(e.pathname)||Bt(e.hostname)}}toRaw(){if(this.consumed)throw new Error("Cannot reuse InputFile data source!");const e=this.fileData;return e instanceof Blob?e.stream():e instanceof URL?Es(e):"url"in e?Es(e.url):(e instanceof Uint8Array||(this.consumed=!0),e)}}async function*Es(s){const{body:e}=await fetch(s);if(e===null)throw new Error(`Download failed, no response body from '${s}'`);yield*e}function Rn(s){return s instanceof Fn||typeof s=="object"&&s!==null&&Object.values(s).some(e=>Array.isArray(e)?e.some(Rn):e instanceof Fn||Rn(e))}function fi(s){return JSON.stringify(s,(e,t)=>t??void 0)}function Ms(s){return{method:"POST",headers:{"content-type":"application/json",connection:"keep-alive"},body:fi(s)}}async function*ju(s,e){try{yield*s}catch(t){e(t)}}function qu(s,e){const t=Gu(),r=Hu(s,t),i=ju(r,e),c=Nu(i);return{method:"POST",headers:{"content-type":`multipart/form-data; boundary=${t}`,connection:"keep-alive"},body:c}}function Gu(){return"----------"+mi(32)}function mi(s=16){return Array.from(Array(s)).map(()=>Math.random().toString(36)[2]||0).join("")}const vt=new TextEncoder;async function*Hu(s,e){const t=Pn(s);yield vt.encode(`--${e}\r
`);const r=vt.encode(`\r
--${e}\r
`);let i=!0;for(const[c,l]of Object.entries(s))l!=null&&(i||(yield r),yield zu(c,typeof l=="object"?fi(l):l),i=!1);for(const{id:c,origin:l,file:p}of t)i||(yield r),yield*Zu(c,l,p),i=!1;yield vt.encode(`\r
--${e}--\r
`)}function Pn(s){return typeof s!="object"||s===null?[]:Object.entries(s).flatMap(([e,t])=>{if(Array.isArray(t))return t.flatMap(r=>Pn(r));if(t instanceof Fn){const r=mi();Object.assign(s,{[e]:`attach://${r}`});const i=e==="media"&&"type"in s&&typeof s.type=="string"?s.type:e;return{id:r,origin:i,file:t}}else return Pn(t)})}function zu(s,e){return vt.encode(`content-disposition:form-data;name="${s}"\r
\r
${e}`)}async function*Zu(s,e,t){const r=t.filename||`${e}.${Yu(e)}`;if(r.includes("\r")||r.includes(`
`))throw new Error(`File paths cannot contain carriage-return (\\r) or newline (\\n) characters! Filename for property '${e}' was:
"""
${r}
"""`);yield vt.encode(`content-disposition:form-data;name="${s}";filename=${r}\r
content-type:application/octet-stream\r
\r
`);const i=await t.toRaw();i instanceof Uint8Array?yield i:yield*i}function Yu(s){switch(s){case"certificate":return"pem";case"photo":case"thumbnail":return"jpg";case"voice":return"ogg";case"audio":return"mp3";case"animation":case"video":case"video_note":return"mp4";case"sticker":return"webp";default:return"dat"}}const Qu=Z("grammy:core");function Ju(s,e){return(t,r,i)=>e(s,t,r,i)}class Ku{constructor(e,t={},r={}){I(this,"token");I(this,"webhookReplyEnvelope");I(this,"options");I(this,"fetch");I(this,"hasUsedWebhookReply");I(this,"installedTransformers");I(this,"call");this.token=e,this.webhookReplyEnvelope=r,this.hasUsedWebhookReply=!1,this.installedTransformers=[],this.call=async(d,g,C)=>{const v=g??{};Qu(`Calling ${d}`),C!==void 0&&ic(d,v,C);const T=this.options,A=Rn(v);if(this.webhookReplyEnvelope.send!==void 0&&!this.hasUsedWebhookReply&&!A&&T.canUseWebhookReply(d)){this.hasUsedWebhookReply=!0;const ae=Ms({...v,method:d});return await this.webhookReplyEnvelope.send(ae.body),{ok:!0,result:!0}}const _=sc(C),k=nc(_,T.timeoutSeconds,d),R=rc(_),N=T.buildUrl(T.apiRoot,this.token,d,T.environment),G=A?qu(v,ae=>R.catch(ae)):Ms(v),Y=_.signal,V={...T.baseFetchConfig,signal:Y,...G},ne=[this.fetch(N instanceof URL?N.href:N,V).catch(Lu(d,T.sensitiveLogs)),R.promise,k.promise];try{return await(await Promise.race(ne)).json()}finally{k.handle!==void 0&&clearTimeout(k.handle)}};const i=t.apiRoot??"https://api.telegram.org",c=t.environment??"prod",{fetch:l}=t,p=l??fetch;if(this.options={apiRoot:i,environment:c,buildUrl:t.buildUrl??ec,timeoutSeconds:t.timeoutSeconds??500,baseFetchConfig:{...Fu(),...t.baseFetchConfig},canUseWebhookReply:t.canUseWebhookReply??(()=>!1),sensitiveLogs:t.sensitiveLogs??!1,fetch:(...d)=>p(...d)},this.fetch=this.options.fetch,this.options.apiRoot.endsWith("/"))throw new Error(`Remove the trailing '/' from the 'apiRoot' option (use '${this.options.apiRoot.substring(0,this.options.apiRoot.length-1)}' instead of '${this.options.apiRoot}')`)}use(...e){return this.call=e.reduce(Ju,this.call),this.installedTransformers.push(...e),this}async callApi(e,t,r){const i=await this.call(e,t,r);if(i.ok)return i.result;throw Ru(i,e,t)}}function Xu(s,e,t){const r=new Ku(s,e,t),i={get(d,g){return g==="toJSON"?"__internal":g==="getMe"||g==="getWebhookInfo"||g==="getForumTopicIconStickers"||g==="getAvailableGifts"||g==="logOut"||g==="close"?r.callApi.bind(r,g,{}):r.callApi.bind(r,g)},...tc},c=new Proxy({},i),l=r.installedTransformers,p={raw:c,installedTransformers:l,use:(...d)=>(r.use(...d),p)};return p}const ec=(s,e,t,r)=>`${s}/bot${e}/${r==="test"?"test/":""}${t}`,tc={set(){return!1},defineProperty(){return!1},deleteProperty(){return!1},ownKeys(){return[]}};function nc(s,e,t){let r;return{promise:new Promise((c,l)=>{r=setTimeout(()=>{const p=`Request to '${t}' timed out after ${e} seconds`;l(new Error(p)),s.abort()},1e3*e)}),handle:r}}function rc(s){let e=r=>{throw r};return{promise:new Promise((r,i)=>{e=c=>{i(c),s.abort()}}),catch:e}}function sc(s){const e=new AbortController;if(s===void 0)return e;const t=s;function r(){e.abort(),t.removeEventListener("abort",r)}return t.aborted?r():t.addEventListener("abort",r),{abort:r,signal:e.signal}}function ic(s,e,t){if(typeof(t==null?void 0:t.addEventListener)=="function")return;let r=JSON.stringify(e);r.length>20&&(r=r.substring(0,16)+" ...");let i=JSON.stringify(t);throw i.length>20&&(i=i.substring(0,16)+" ..."),new Error(`Incorrect abort signal instance found! You passed two payloads to '${s}' but you should merge the second one containing '${i}' into the first one containing '${r}'! If you are using context shortcuts, you may want to use a method on 'ctx.api' instead.

If you want to prevent such mistakes in the future, consider using TypeScript. https://www.typescriptlang.org/`)}class Os{constructor(e,t,r){I(this,"token");I(this,"options");I(this,"raw");I(this,"config");this.token=e,this.options=t;const{raw:i,use:c,installedTransformers:l}=Xu(e,t,r);this.raw=i,this.config={use:c,installedTransformers:()=>l.slice()}}getUpdates(e,t){return this.raw.getUpdates({...e},t)}setWebhook(e,t,r){return this.raw.setWebhook({url:e,...t},r)}deleteWebhook(e,t){return this.raw.deleteWebhook({...e},t)}getWebhookInfo(e){return this.raw.getWebhookInfo(e)}getMe(e){return this.raw.getMe(e)}logOut(e){return this.raw.logOut(e)}close(e){return this.raw.close(e)}sendMessage(e,t,r,i){return this.raw.sendMessage({chat_id:e,text:t,...r},i)}forwardMessage(e,t,r,i,c){return this.raw.forwardMessage({chat_id:e,from_chat_id:t,message_id:r,...i},c)}forwardMessages(e,t,r,i,c){return this.raw.forwardMessages({chat_id:e,from_chat_id:t,message_ids:r,...i},c)}copyMessage(e,t,r,i,c){return this.raw.copyMessage({chat_id:e,from_chat_id:t,message_id:r,...i},c)}copyMessages(e,t,r,i,c){return this.raw.copyMessages({chat_id:e,from_chat_id:t,message_ids:r,...i},c)}sendPhoto(e,t,r,i){return this.raw.sendPhoto({chat_id:e,photo:t,...r},i)}sendAudio(e,t,r,i){return this.raw.sendAudio({chat_id:e,audio:t,...r},i)}sendDocument(e,t,r,i){return this.raw.sendDocument({chat_id:e,document:t,...r},i)}sendVideo(e,t,r,i){return this.raw.sendVideo({chat_id:e,video:t,...r},i)}sendAnimation(e,t,r,i){return this.raw.sendAnimation({chat_id:e,animation:t,...r},i)}sendVoice(e,t,r,i){return this.raw.sendVoice({chat_id:e,voice:t,...r},i)}sendVideoNote(e,t,r,i){return this.raw.sendVideoNote({chat_id:e,video_note:t,...r},i)}sendMediaGroup(e,t,r,i){return this.raw.sendMediaGroup({chat_id:e,media:t,...r},i)}sendLocation(e,t,r,i,c){return this.raw.sendLocation({chat_id:e,latitude:t,longitude:r,...i},c)}editMessageLiveLocation(e,t,r,i,c,l){return this.raw.editMessageLiveLocation({chat_id:e,message_id:t,latitude:r,longitude:i,...c},l)}editMessageLiveLocationInline(e,t,r,i,c){return this.raw.editMessageLiveLocation({inline_message_id:e,latitude:t,longitude:r,...i},c)}stopMessageLiveLocation(e,t,r,i){return this.raw.stopMessageLiveLocation({chat_id:e,message_id:t,...r},i)}stopMessageLiveLocationInline(e,t,r){return this.raw.stopMessageLiveLocation({inline_message_id:e,...t},r)}sendPaidMedia(e,t,r,i,c){return this.raw.sendPaidMedia({chat_id:e,star_count:t,media:r,...i},c)}sendVenue(e,t,r,i,c,l,p){return this.raw.sendVenue({chat_id:e,latitude:t,longitude:r,title:i,address:c,...l},p)}sendContact(e,t,r,i,c){return this.raw.sendContact({chat_id:e,phone_number:t,first_name:r,...i},c)}sendPoll(e,t,r,i,c){return this.raw.sendPoll({chat_id:e,question:t,options:r,...i},c)}sendDice(e,t,r,i){return this.raw.sendDice({chat_id:e,emoji:t,...r},i)}setMessageReaction(e,t,r,i,c){return this.raw.setMessageReaction({chat_id:e,message_id:t,reaction:r,...i},c)}sendChatAction(e,t,r,i){return this.raw.sendChatAction({chat_id:e,action:t,...r},i)}getUserProfilePhotos(e,t,r){return this.raw.getUserProfilePhotos({user_id:e,...t},r)}setUserEmojiStatus(e,t,r){return this.raw.setUserEmojiStatus({user_id:e,...t},r)}getUserChatBoosts(e,t,r){return this.raw.getUserChatBoosts({chat_id:e,user_id:t},r)}getBusinessConnection(e,t){return this.raw.getBusinessConnection({business_connection_id:e},t)}getFile(e,t){return this.raw.getFile({file_id:e},t)}kickChatMember(...e){return this.banChatMember(...e)}banChatMember(e,t,r,i){return this.raw.banChatMember({chat_id:e,user_id:t,...r},i)}unbanChatMember(e,t,r,i){return this.raw.unbanChatMember({chat_id:e,user_id:t,...r},i)}restrictChatMember(e,t,r,i,c){return this.raw.restrictChatMember({chat_id:e,user_id:t,permissions:r,...i},c)}promoteChatMember(e,t,r,i){return this.raw.promoteChatMember({chat_id:e,user_id:t,...r},i)}setChatAdministratorCustomTitle(e,t,r,i){return this.raw.setChatAdministratorCustomTitle({chat_id:e,user_id:t,custom_title:r},i)}banChatSenderChat(e,t,r){return this.raw.banChatSenderChat({chat_id:e,sender_chat_id:t},r)}unbanChatSenderChat(e,t,r){return this.raw.unbanChatSenderChat({chat_id:e,sender_chat_id:t},r)}setChatPermissions(e,t,r,i){return this.raw.setChatPermissions({chat_id:e,permissions:t,...r},i)}exportChatInviteLink(e,t){return this.raw.exportChatInviteLink({chat_id:e},t)}createChatInviteLink(e,t,r){return this.raw.createChatInviteLink({chat_id:e,...t},r)}editChatInviteLink(e,t,r,i){return this.raw.editChatInviteLink({chat_id:e,invite_link:t,...r},i)}createChatSubscriptionInviteLink(e,t,r,i,c){return this.raw.createChatSubscriptionInviteLink({chat_id:e,subscription_period:t,subscription_price:r,...i},c)}editChatSubscriptionInviteLink(e,t,r,i){return this.raw.editChatSubscriptionInviteLink({chat_id:e,invite_link:t,...r},i)}revokeChatInviteLink(e,t,r){return this.raw.revokeChatInviteLink({chat_id:e,invite_link:t},r)}approveChatJoinRequest(e,t,r){return this.raw.approveChatJoinRequest({chat_id:e,user_id:t},r)}declineChatJoinRequest(e,t,r){return this.raw.declineChatJoinRequest({chat_id:e,user_id:t},r)}setChatPhoto(e,t,r){return this.raw.setChatPhoto({chat_id:e,photo:t},r)}deleteChatPhoto(e,t){return this.raw.deleteChatPhoto({chat_id:e},t)}setChatTitle(e,t,r){return this.raw.setChatTitle({chat_id:e,title:t},r)}setChatDescription(e,t,r){return this.raw.setChatDescription({chat_id:e,description:t},r)}pinChatMessage(e,t,r,i){return this.raw.pinChatMessage({chat_id:e,message_id:t,...r},i)}unpinChatMessage(e,t,r,i){return this.raw.unpinChatMessage({chat_id:e,message_id:t,...r},i)}unpinAllChatMessages(e,t){return this.raw.unpinAllChatMessages({chat_id:e},t)}leaveChat(e,t){return this.raw.leaveChat({chat_id:e},t)}getChat(e,t){return this.raw.getChat({chat_id:e},t)}getChatAdministrators(e,t){return this.raw.getChatAdministrators({chat_id:e},t)}getChatMembersCount(...e){return this.getChatMemberCount(...e)}getChatMemberCount(e,t){return this.raw.getChatMemberCount({chat_id:e},t)}getChatMember(e,t,r){return this.raw.getChatMember({chat_id:e,user_id:t},r)}setChatStickerSet(e,t,r){return this.raw.setChatStickerSet({chat_id:e,sticker_set_name:t},r)}deleteChatStickerSet(e,t){return this.raw.deleteChatStickerSet({chat_id:e},t)}getForumTopicIconStickers(e){return this.raw.getForumTopicIconStickers(e)}createForumTopic(e,t,r,i){return this.raw.createForumTopic({chat_id:e,name:t,...r},i)}editForumTopic(e,t,r,i){return this.raw.editForumTopic({chat_id:e,message_thread_id:t,...r},i)}closeForumTopic(e,t,r){return this.raw.closeForumTopic({chat_id:e,message_thread_id:t},r)}reopenForumTopic(e,t,r){return this.raw.reopenForumTopic({chat_id:e,message_thread_id:t},r)}deleteForumTopic(e,t,r){return this.raw.deleteForumTopic({chat_id:e,message_thread_id:t},r)}unpinAllForumTopicMessages(e,t,r){return this.raw.unpinAllForumTopicMessages({chat_id:e,message_thread_id:t},r)}editGeneralForumTopic(e,t,r){return this.raw.editGeneralForumTopic({chat_id:e,name:t},r)}closeGeneralForumTopic(e,t){return this.raw.closeGeneralForumTopic({chat_id:e},t)}reopenGeneralForumTopic(e,t){return this.raw.reopenGeneralForumTopic({chat_id:e},t)}hideGeneralForumTopic(e,t){return this.raw.hideGeneralForumTopic({chat_id:e},t)}unhideGeneralForumTopic(e,t){return this.raw.unhideGeneralForumTopic({chat_id:e},t)}unpinAllGeneralForumTopicMessages(e,t){return this.raw.unpinAllGeneralForumTopicMessages({chat_id:e},t)}answerCallbackQuery(e,t,r){return this.raw.answerCallbackQuery({callback_query_id:e,...t},r)}setMyName(e,t,r){return this.raw.setMyName({name:e,...t},r)}getMyName(e,t){return this.raw.getMyName(e??{},t)}setMyCommands(e,t,r){return this.raw.setMyCommands({commands:e,...t},r)}deleteMyCommands(e,t){return this.raw.deleteMyCommands({...e},t)}getMyCommands(e,t){return this.raw.getMyCommands({...e},t)}setMyDescription(e,t,r){return this.raw.setMyDescription({description:e,...t},r)}getMyDescription(e,t){return this.raw.getMyDescription({...e},t)}setMyShortDescription(e,t,r){return this.raw.setMyShortDescription({short_description:e,...t},r)}getMyShortDescription(e,t){return this.raw.getMyShortDescription({...e},t)}setChatMenuButton(e,t){return this.raw.setChatMenuButton({...e},t)}getChatMenuButton(e,t){return this.raw.getChatMenuButton({...e},t)}setMyDefaultAdministratorRights(e,t){return this.raw.setMyDefaultAdministratorRights({...e},t)}getMyDefaultAdministratorRights(e,t){return this.raw.getMyDefaultAdministratorRights({...e},t)}editMessageText(e,t,r,i,c){return this.raw.editMessageText({chat_id:e,message_id:t,text:r,...i},c)}editMessageTextInline(e,t,r,i){return this.raw.editMessageText({inline_message_id:e,text:t,...r},i)}editMessageCaption(e,t,r,i){return this.raw.editMessageCaption({chat_id:e,message_id:t,...r},i)}editMessageCaptionInline(e,t,r){return this.raw.editMessageCaption({inline_message_id:e,...t},r)}editMessageMedia(e,t,r,i,c){return this.raw.editMessageMedia({chat_id:e,message_id:t,media:r,...i},c)}editMessageMediaInline(e,t,r,i){return this.raw.editMessageMedia({inline_message_id:e,media:t,...r},i)}editMessageReplyMarkup(e,t,r,i){return this.raw.editMessageReplyMarkup({chat_id:e,message_id:t,...r},i)}editMessageReplyMarkupInline(e,t,r){return this.raw.editMessageReplyMarkup({inline_message_id:e,...t},r)}stopPoll(e,t,r,i){return this.raw.stopPoll({chat_id:e,message_id:t,...r},i)}deleteMessage(e,t,r){return this.raw.deleteMessage({chat_id:e,message_id:t},r)}deleteMessages(e,t,r){return this.raw.deleteMessages({chat_id:e,message_ids:t},r)}deleteBusinessMessages(e,t,r){return this.raw.deleteBusinessMessages({business_connection_id:e,message_ids:t},r)}setBusinessAccountName(e,t,r,i){return this.raw.setBusinessAccountName({business_connection_id:e,first_name:t,...r},i)}setBusinessAccountUsername(e,t,r){return this.raw.setBusinessAccountUsername({business_connection_id:e,username:t},r)}setBusinessAccountBio(e,t,r){return this.raw.setBusinessAccountBio({business_connection_id:e,bio:t},r)}setBusinessAccountProfilePhoto(e,t,r,i){return this.raw.setBusinessAccountProfilePhoto({business_connection_id:e,photo:t,...r},i)}removeBusinessAccountProfilePhoto(e,t,r){return this.raw.removeBusinessAccountProfilePhoto({business_connection_id:e,...t},r)}setBusinessAccountGiftSettings(e,t,r,i){return this.raw.setBusinessAccountGiftSettings({business_connection_id:e,show_gift_button:t,accepted_gift_types:r},i)}getBusinessAccountStarBalance(e,t){return this.raw.getBusinessAccountStarBalance({business_connection_id:e},t)}transferBusinessAccountStars(e,t,r){return this.raw.transferBusinessAccountStars({business_connection_id:e,star_count:t},r)}getBusinessAccountGifts(e,t,r){return this.raw.getBusinessAccountGifts({business_connection_id:e,...t},r)}convertGiftToStars(e,t,r){return this.raw.convertGiftToStars({business_connection_id:e,owned_gift_id:t},r)}upgradeGift(e,t,r,i){return this.raw.upgradeGift({business_connection_id:e,owned_gift_id:t,...r},i)}transferGift(e,t,r,i,c){return this.raw.transferGift({business_connection_id:e,owned_gift_id:t,new_owner_chat_id:r,star_count:i},c)}postStory(e,t,r,i,c){return this.raw.postStory({business_connection_id:e,content:t,active_period:r,...i},c)}editStory(e,t,r,i,c){return this.raw.editStory({business_connection_id:e,story_id:t,content:r,...i},c)}deleteStory(e,t,r){return this.raw.deleteStory({business_connection_id:e,story_id:t},r)}sendSticker(e,t,r,i){return this.raw.sendSticker({chat_id:e,sticker:t,...r},i)}getStickerSet(e,t){return this.raw.getStickerSet({name:e},t)}getCustomEmojiStickers(e,t){return this.raw.getCustomEmojiStickers({custom_emoji_ids:e},t)}uploadStickerFile(e,t,r,i){return this.raw.uploadStickerFile({user_id:e,sticker_format:t,sticker:r},i)}createNewStickerSet(e,t,r,i,c,l){return this.raw.createNewStickerSet({user_id:e,name:t,title:r,stickers:i,...c},l)}addStickerToSet(e,t,r,i){return this.raw.addStickerToSet({user_id:e,name:t,sticker:r},i)}setStickerPositionInSet(e,t,r){return this.raw.setStickerPositionInSet({sticker:e,position:t},r)}deleteStickerFromSet(e,t){return this.raw.deleteStickerFromSet({sticker:e},t)}replaceStickerInSet(e,t,r,i,c){return this.raw.replaceStickerInSet({user_id:e,name:t,old_sticker:r,sticker:i},c)}setStickerEmojiList(e,t,r){return this.raw.setStickerEmojiList({sticker:e,emoji_list:t},r)}setStickerKeywords(e,t,r){return this.raw.setStickerKeywords({sticker:e,keywords:t},r)}setStickerMaskPosition(e,t,r){return this.raw.setStickerMaskPosition({sticker:e,mask_position:t},r)}setStickerSetTitle(e,t,r){return this.raw.setStickerSetTitle({name:e,title:t},r)}deleteStickerSet(e,t){return this.raw.deleteStickerSet({name:e},t)}setStickerSetThumbnail(e,t,r,i,c){return this.raw.setStickerSetThumbnail({name:e,user_id:t,thumbnail:r,format:i},c)}setCustomEmojiStickerSetThumbnail(e,t,r){return this.raw.setCustomEmojiStickerSetThumbnail({name:e,custom_emoji_id:t},r)}getAvailableGifts(e){return this.raw.getAvailableGifts(e)}sendGift(e,t,r,i){return this.raw.sendGift({user_id:e,gift_id:t,...r},i)}giftPremiumSubscription(e,t,r,i,c){return this.raw.giftPremiumSubscription({user_id:e,month_count:t,star_count:r,...i},c)}sendGiftToChannel(e,t,r,i){return this.raw.sendGift({chat_id:e,gift_id:t,...r},i)}answerInlineQuery(e,t,r,i){return this.raw.answerInlineQuery({inline_query_id:e,results:t,...r},i)}answerWebAppQuery(e,t,r){return this.raw.answerWebAppQuery({web_app_query_id:e,result:t},r)}savePreparedInlineMessage(e,t,r,i){return this.raw.savePreparedInlineMessage({user_id:e,result:t,...r},i)}sendInvoice(e,t,r,i,c,l,p,d){return this.raw.sendInvoice({chat_id:e,title:t,description:r,payload:i,currency:c,prices:l,...p},d)}createInvoiceLink(e,t,r,i,c,l,p,d){return this.raw.createInvoiceLink({title:e,description:t,payload:r,provider_token:i,currency:c,prices:l,...p},d)}answerShippingQuery(e,t,r,i){return this.raw.answerShippingQuery({shipping_query_id:e,ok:t,...r},i)}answerPreCheckoutQuery(e,t,r,i){return this.raw.answerPreCheckoutQuery({pre_checkout_query_id:e,ok:t,...r},i)}getStarTransactions(e,t){return this.raw.getStarTransactions({...e},t)}refundStarPayment(e,t,r){return this.raw.refundStarPayment({user_id:e,telegram_payment_charge_id:t},r)}editUserStarSubscription(e,t,r,i){return this.raw.editUserStarSubscription({user_id:e,telegram_payment_charge_id:t,is_canceled:r},i)}verifyUser(e,t,r){return this.raw.verifyUser({user_id:e,...t},r)}verifyChat(e,t,r){return this.raw.verifyChat({chat_id:e,...t},r)}removeUserVerification(e,t){return this.raw.removeUserVerification({user_id:e},t)}removeChatVerification(e,t){return this.raw.removeChatVerification({chat_id:e},t)}readBusinessMessage(e,t,r,i){return this.raw.readBusinessMessage({business_connection_id:e,chat_id:t,message_id:r},i)}setPassportDataErrors(e,t,r){return this.raw.setPassportDataErrors({user_id:e,errors:t},r)}sendGame(e,t,r,i){return this.raw.sendGame({chat_id:e,game_short_name:t,...r},i)}setGameScore(e,t,r,i,c,l){return this.raw.setGameScore({chat_id:e,message_id:t,user_id:r,score:i,...c},l)}setGameScoreInline(e,t,r,i,c){return this.raw.setGameScore({inline_message_id:e,user_id:t,score:r,...i},c)}getGameHighScores(e,t,r,i){return this.raw.getGameHighScores({chat_id:e,message_id:t,user_id:r},i)}getGameHighScoresInline(e,t,r){return this.raw.getGameHighScores({inline_message_id:e,user_id:t},r)}}const ce=Z("grammy:bot"),ac=Z("grammy:warn"),Qe=Z("grammy:error"),pi=["message","edited_message","channel_post","edited_channel_post","business_connection","business_message","edited_business_message","deleted_business_messages","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_join_request","chat_boost","removed_chat_boost"];class oc extends ve{constructor(t,r){super();I(this,"token");I(this,"pollingRunning");I(this,"pollingAbortController");I(this,"lastTriedUpdateId");I(this,"api");I(this,"me");I(this,"mePromise");I(this,"clientConfig");I(this,"ContextConstructor");I(this,"observedUpdateTypes");I(this,"errorHandler");if(this.token=t,this.pollingRunning=!1,this.lastTriedUpdateId=0,this.observedUpdateTypes=new Set,this.errorHandler=async i=>{var c,l;throw console.error("Error in middleware while handling update",(l=(c=i.ctx)==null?void 0:c.update)==null?void 0:l.update_id,i.error),console.error("No error handler was set!"),console.error("Set your own error handler with `bot.catch = ...`"),this.pollingRunning&&(console.error("Stopping bot"),await this.stop()),i},!t)throw new Error("Empty token!");this.me=r==null?void 0:r.botInfo,this.clientConfig=r==null?void 0:r.client,this.ContextConstructor=(r==null?void 0:r.ContextConstructor)??K,this.api=new Os(t,this.clientConfig)}set botInfo(t){this.me=t}get botInfo(){if(this.me===void 0)throw new Error("Bot information unavailable! Make sure to call `await bot.init()` before accessing `bot.botInfo`!");return this.me}on(t,...r){for(const[i]of Xs(t).flatMap(ei))this.observedUpdateTypes.add(i);return super.on(t,...r)}reaction(t,...r){return this.observedUpdateTypes.add("message_reaction"),super.reaction(t,...r)}isInited(){return this.me!==void 0}async init(t){if(!this.isInited()){ce("Initializing bot"),this.mePromise??(this.mePromise=Ds(()=>this.api.getMe(t),t));let r;try{r=await this.mePromise}finally{this.mePromise=void 0}this.me===void 0?this.me=r:ce("Bot info was set by now, will not overwrite")}ce(`I am ${this.me.username}!`)}async handleUpdates(t){for(const r of t){this.lastTriedUpdateId=r.update_id;try{await this.handleUpdate(r)}catch(i){if(i instanceof Nn)await this.errorHandler(i);else throw console.error("FATAL: grammY unable to handle:",i),i}}}async handleUpdate(t,r){if(this.me===void 0)throw new Error("Bot not initialized! Either call `await bot.init()`, or directly set the `botInfo` option in the `Bot` constructor to specify a known bot info object.");ce(`Processing update ${t.update_id}`);const i=new Os(this.token,this.clientConfig,r),c=this.api.config.installedTransformers();c.length>0&&i.config.use(...c);const l=new this.ContextConstructor(t,i,this.me);try{await ni(this.middleware(),l)}catch(p){throw Qe(`Error in middleware for update ${t.update_id}`),new Nn(p,l)}}async start(t){var i,c,l;const r=[];if(this.isInited()||r.push(this.init((i=this.pollingAbortController)==null?void 0:i.signal)),this.pollingRunning){await Promise.all(r),ce("Simple long polling already running!");return}this.pollingRunning=!0,this.pollingAbortController=new AbortController;try{r.push(Ds(async()=>{var p;await this.api.deleteWebhook({drop_pending_updates:t==null?void 0:t.drop_pending_updates},(p=this.pollingAbortController)==null?void 0:p.signal)},(c=this.pollingAbortController)==null?void 0:c.signal)),await Promise.all(r),await((l=t==null?void 0:t.onStart)==null?void 0:l.call(t,this.botInfo))}catch(p){throw this.pollingRunning=!1,this.pollingAbortController=void 0,p}this.pollingRunning&&(uc(this.observedUpdateTypes,t==null?void 0:t.allowed_updates),this.use=cc,ce("Starting simple long polling"),await this.loop(t),ce("Middleware is done running"))}async stop(){var t;if(this.pollingRunning){ce("Stopping bot, saving update offset"),this.pollingRunning=!1,(t=this.pollingAbortController)==null||t.abort();const r=this.lastTriedUpdateId+1;await this.api.getUpdates({offset:r,limit:1}).finally(()=>this.pollingAbortController=void 0)}else ce("Bot is not running!")}isRunning(){return this.pollingRunning}catch(t){this.errorHandler=t}async loop(t){const r=t==null?void 0:t.limit,i=(t==null?void 0:t.timeout)??30;let c=(t==null?void 0:t.allowed_updates)??[];try{for(;this.pollingRunning;){const l=await this.fetchUpdates({limit:r,timeout:i,allowed_updates:c});if(l===void 0)break;await this.handleUpdates(l),c=void 0}}finally{this.pollingRunning=!1}}async fetchUpdates({limit:t,timeout:r,allowed_updates:i}){var p;const c=this.lastTriedUpdateId+1;let l;do try{l=await this.api.getUpdates({offset:c,limit:t,timeout:r,allowed_updates:i},(p=this.pollingAbortController)==null?void 0:p.signal)}catch(d){await this.handlePollingError(d)}while(l===void 0&&this.pollingRunning);return l}async handlePollingError(t){if(!this.pollingRunning){ce("Pending getUpdates request cancelled");return}let r=3;if(t instanceof zn){if(Qe(t.message),t.error_code===401||t.error_code===409)throw t;t.error_code===429&&(Qe("Bot API server is closing."),r=t.parameters.retry_after??r)}else Qe(t);Qe(`Call to getUpdates failed, retrying in ${r} seconds ...`),await Ln(r)}}async function Ds(s,e){let r=50;async function i(l){let p=!1,d="rethrow";if(l instanceof ui)p=!0,d="retry";else if(l instanceof zn){if(l.error_code>=500)p=!0,d="retry";else if(l.error_code===429){const g=l.parameters.retry_after;typeof g=="number"?(await Ln(g,e),r=50):p=!0,d="retry"}}if(p){r!==50&&await Ln(r,e);const g=20*60*1e3;r=Math.min(g,2*r)}return d}let c={ok:!1};for(;!c.ok;)try{c={ok:!0,value:await s()}}catch(l){switch(Qe(l),await i(l)){case"retry":continue;case"rethrow":throw l}}return c.value}async function Ln(s,e){let t,r;function i(){r==null||r(new Error("Aborted delay")),t!==void 0&&clearTimeout(t)}try{await new Promise((c,l)=>{if(r=l,e!=null&&e.aborted){i();return}e==null||e.addEventListener("abort",i),t=setTimeout(c,1e3*s)})}finally{e==null||e.removeEventListener("abort",i)}}function uc(s,e=pi){const t=Array.from(s).filter(r=>!e.includes(r));t.length>0&&ac(`You registered listeners for the following update types, but you did not specify them in \`allowed_updates\` so they may not be received: ${t.map(r=>`'${r}'`).join(", ")}`)}function cc(){throw new Error(`It looks like you are registering more listeners on your bot from within other listeners! This means that every time your bot handles a message like this one, new listeners will be added. This list grows until your machine crashes, so grammY throws this error to tell you that you should probably do things a bit differently. If you're unsure how to resolve this problem, you can ask in the group chat: https://telegram.me/grammyjs

On the other hand, if you actually know what you're doing and you do need to install further middleware while your bot is running, consider installing a composer instance on your bot, and in turn augment the composer after the fact. This way, you can circumvent this protection against memory leaks.`)}[...pi];const lc=Z("grammy:session");function hc(s={}){return s.type==="multi"?fc(s):dc(s)}function dc(s){const{initial:e,storage:t,getSessionKey:r,custom:i}=yi(s);return async(c,l)=>{const p=new gi(t,c,"session",e),d=await r(c);await p.init(d,{custom:i,lazy:!1}),await l(),await p.finish()}}function fc(s){const e=Object.keys(s).filter(r=>r!=="type"),t=Object.fromEntries(e.map(r=>[r,yi(s[r])]));return async(r,i)=>{r.session={};const c=await Promise.all(e.map(async l=>{const{initial:p,storage:d,getSessionKey:g,custom:C}=t[l],v=new gi(d,r.session,l,p),T=await g(r);return await v.init(T,{custom:C,lazy:!1}),v}));await i(),r.session==null&&c.forEach(l=>l.delete()),await Promise.all(c.map(l=>l.finish()))}}class gi{constructor(e,t,r,i){I(this,"storage");I(this,"obj");I(this,"prop");I(this,"initial");I(this,"key");I(this,"value");I(this,"promise");I(this,"fetching");I(this,"read");I(this,"wrote");this.storage=e,this.obj=t,this.prop=r,this.initial=i,this.fetching=!1,this.read=!1,this.wrote=!1}load(){if(this.key!==void 0&&!this.wrote)return this.promise===void 0&&(this.fetching=!0,this.promise=Promise.resolve(this.storage.read(this.key)).then(e=>{var t;return this.fetching=!1,this.wrote?this.value:e!==void 0?(this.value=e,e):(e=(t=this.initial)==null?void 0:t.call(this),e!==void 0&&(this.wrote=!0,this.value=e),e)})),this.promise}async init(e,t){this.key=e,t.lazy||await this.load(),Object.defineProperty(this.obj,this.prop,{enumerable:!0,get:()=>{if(e===void 0){const r=Ns("access",t);throw new Error(r)}return this.read=!0,!t.lazy||this.wrote?this.value:(this.load(),this.fetching?this.promise:this.value)},set:r=>{if(e===void 0){const i=Ns("assign",t);throw new Error(i)}this.wrote=!0,this.fetching=!1,this.value=r}})}delete(){Object.assign(this.obj,{[this.prop]:void 0})}async finish(){if(this.key!==void 0&&(this.read&&await this.load(),this.read||this.wrote)){const e=await this.value;e==null?await this.storage.delete(this.key):await this.storage.write(this.key,e)}}}function yi(s={}){let{prefix:e="",getSessionKey:t=As,initial:r,storage:i}=s;return i==null&&(lc("Storing session data in memory, all data will be lost when the bot restarts."),i=new mc),{initial:r,storage:i,getSessionKey:async l=>{const p=await t(l);return p===void 0?void 0:e+p},custom:t!==As}}function As(s){var e;return(e=s.chatId)==null?void 0:e.toString()}function Ns(s,e){const{lazy:t=!1,custom:r}=e;return`Cannot ${s} ${t?"lazy ":""}session data because ${r?"the custom `getSessionKey` function returned undefined for this update":"this update does not belong to a chat, so the session key is undefined"}!`}class mc{constructor(e){I(this,"timeToLive");I(this,"storage");this.timeToLive=e,this.storage=new Map}read(e){const t=this.storage.get(e);if(t!==void 0){if(t.expires!==void 0&&t.expires<Date.now()){this.delete(e);return}return t.session}}readAll(){return this.readAllValues()}readAllKeys(){return Array.from(this.storage.keys())}readAllValues(){return Array.from(this.storage.keys()).map(e=>this.read(e)).filter(e=>e!==void 0)}readAllEntries(){return Array.from(this.storage.keys()).map(e=>[e,this.read(e)]).filter(e=>e[1]!==void 0)}has(e){return this.storage.has(e)}write(e,t){this.storage.set(e,pc(t,this.timeToLive))}delete(e){this.storage.delete(e)}}function pc(s,e){if(e!==void 0&&e<1/0){const t=Date.now();return{session:s,expires:t+e}}else return{session:s}}Z("grammy:error");async function Fs(s){let e=new FormData;if(s.document instanceof Buffer){const t=new Blob([s.document],{type:s.contentType});e.append("document",t,s.documentName)}else if(s.document instanceof File)e.append("document",s.document,s.documentName);else if(s.document instanceof FormData)e=s.document;else if(s.document instanceof ReadableStream){const t=[],r=s.document.getReader();for(;;){const{done:c,value:l}=await r.read();if(c)break;t.push(l)}const i=new Blob(t,{type:s.contentType});e.append("document",i,s.documentName)}return e.append("documentName",s.documentName),e}var gc=["/v1/pipes/run","/beta/chat","/beta/generate","/v1/agent/run"],he=class $n extends Error{constructor(e,t,r,i){super($n.makeMessage(e,t,r)),this.status=e,this.headers=i,this.request_id=i==null?void 0:i["lb-request-id"];const c=t;this.error=c,this.code=c==null?void 0:c.code,this.status=c==null?void 0:c.status}static makeMessage(e,t,r){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e)return new wi({cause:t instanceof Error?t:void 0});const c=t==null?void 0:t.error;switch(e){case 400:return new yc(e,c,r,i);case 401:return new wc(e,c,r,i);case 403:return new bc(e,c,r,i);case 404:return new Cc(e,c,r,i);case 409:return new vc(e,c,r,i);case 422:return new Sc(e,c,r,i);case 429:return new Tc(e,c,r,i);default:return e>=500?new Ic(e,c,r,i):new $n(e,c,r,i)}}},wi=class extends he{constructor({message:s,cause:e}){super(void 0,void 0,s||"Connection error.",void 0),this.status=void 0,e&&(this.cause=e)}},yc=class extends he{constructor(){super(...arguments),this.status=400}},wc=class extends he{constructor(){super(...arguments),this.status=401}},bc=class extends he{constructor(){super(...arguments),this.status=403}},Cc=class extends he{constructor(){super(...arguments),this.status=404}},vc=class extends he{constructor(){super(...arguments),this.status=409}},Sc=class extends he{constructor(){super(...arguments),this.status=422}},Tc=class extends he{constructor(){super(...arguments),this.status=429}},Ic=class extends he{},Rs=class Ct{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const l of _c(e,t))if(!c){if(l.data.startsWith("[DONE]")){c=!0;continue}if(l.event===null){let p;try{p=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(p&&p.error)throw new Error(p.error);yield p}else{let p;try{p=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(l.event=="error")throw new Error(p.message);yield{event:l.event,data:p}}}c=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{c||t.abort()}}return new Ct(i,t)}static fromReadableStream(e,t){let r=!1;async function*i(){const l=new bi,p=Ci(e);for await(const d of p)for(const g of l.decode(d))yield g;for(const d of l.flush())yield d}async function*c(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{for await(const p of i())l||p&&(yield JSON.parse(p));l=!0}catch(p){if(p instanceof Error&&p.name==="AbortError")return;throw p}finally{l||t.abort()}}return new Ct(c,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=c=>({next:()=>{if(c.length===0){const l=r.next();e.push(l),t.push(l)}return c.shift()}});return[new Ct(()=>i(e),this.controller),new Ct(()=>i(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new ReadableStream({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:c,done:l}=await t.next();if(l)return i.close();const p=r.encode(JSON.stringify(c)+`
`);i.enqueue(p)}catch(c){i.error(c)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}};async function*_c(s,e){if(!s.body)throw e.abort(),new Error("Attempted to iterate over a response with no body");const t=new Mc,r=new bi,i=Ci(s.body);for await(const c of kc(i))for(const l of r.decode(c)){const p=t.decode(l);p&&(yield p)}for(const c of r.flush()){const l=t.decode(c);l&&(yield l)}}async function*kc(s){let e=new Uint8Array;for await(const t of s){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let c;for(;(c=Ec(e))!==-1;)yield e.slice(0,c),e=e.slice(c)}e.length>0&&(yield e)}function Ec(s){for(let r=0;r<s.length-2;r++){if(s[r]===10&&s[r+1]===10||s[r]===13&&s[r+1]===13)return r+2;if(s[r]===13&&s[r+1]===10&&r+3<s.length&&s[r+2]===13&&s[r+3]===10)return r+4}return-1}var Mc=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(s){if(s.endsWith("\r")&&(s=s.substring(0,s.length-1)),!s){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(s),s.startsWith(":"))return null;let[e,t,r]=Oc(s,":");return r.startsWith(" ")&&(r=r.substring(1)),e==="event"?this.event=r:e==="data"&&this.data.push(r),null}},Zn=class xn{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const r=xn.NEWLINE_CHARS.has(t[t.length-1]||"");let i=t.split(xn.NEWLINE_REGEXP);return r&&i.pop(),i.length===1&&!r?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),r||(this.buffer=[i.pop()||""]),i)}decodeText(e){var t;if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Error(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return(t=this.textDecoder)!=null||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Error(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Error("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}};Zn.NEWLINE_CHARS=new Set([`
`,"\r"]);Zn.NEWLINE_REGEXP=/\r\n|[\n\r]/g;var bi=Zn;function Oc(s,e){const t=s.indexOf(e);return t!==-1?[s.substring(0,t),e,s.substring(t+e.length)]:[s,"",""]}function Ci(s){if(s[Symbol.asyncIterator])return s;const e=s.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}var Ps=class{constructor(s){this.config=s}async send({endpoint:s,...e}){var t,r,i,c,l;const p=this.buildUrl({endpoint:s}),d=this.buildHeaders({headers:e.headers});let g;try{g=await this.makeRequest({url:p,options:e,headers:d})}catch(v){throw new wi({cause:v instanceof Error?v:void 0})}if(g.ok||await this.handleErrorResponse({response:g}),gc.includes(s)){const v=g.headers.get("lb-thread-id");return e.body?(i=e.body)!=null&&i.stream&&p.includes("run")?this.handleRunResponseStream({response:g,rawResponse:e.body.rawResponse}):e.body.stream?this.handleStreamResponse({response:g}):this.handleRunResponse({response:g,threadId:v,rawResponse:(l=(c=e.body)==null?void 0:c.rawResponse)!=null?l:!1,endpoint:s}):this.handleRunResponse({response:g,threadId:null,rawResponse:(r=(t=e.body)==null?void 0:t.rawResponse)!=null?r:!1,endpoint:s})}else return g.json()}buildUrl({endpoint:s}){return`${this.config.baseUrl}${s}`}buildHeaders({headers:s}){return{"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`,...s}}async makeRequest({url:s,options:e,headers:t}){return fetch(s,{method:e.method,headers:t,body:JSON.stringify(e.body)})}async handleErrorResponse({response:s}){let e;try{e=await s.json()}catch{e=await s.text()}throw he.generate(s.status,e,s.statusText,s.headers)}handleStreamResponse({response:s}){const e=new AbortController;return{stream:Rs.fromSSEResponse(s,e),threadId:s.headers.get("lb-thread-id")}}handleRunResponseStream({response:s,rawResponse:e}){const t=new AbortController,c={stream:Rs.fromSSEResponse(s,t).toReadableStream(),threadId:s.headers.get("lb-thread-id")};return e&&(c.rawResponse={headers:Object.fromEntries(s.headers.entries())}),c}async handleRunResponse({response:s,threadId:e,rawResponse:t,endpoint:r}){let i=!1;r==="/v1/agent/run"&&(i=!0);const c=await s.json(),p={...c.raw?i?{output:c.output,...c.raw}:{completion:c.completion,...c.raw}:c};return e&&(p.threadId=e),t&&(p.rawResponse={headers:Object.fromEntries(s.headers.entries())}),p}async post(s){return this.send({...s,method:"POST"})}async get(s){return this.send({...s,method:"GET"})}async put(s){return this.send({...s,method:"PUT"})}async delete(s){return this.send({...s,method:"DELETE"})}},Dc=class{constructor(s){var e,t;this.baseUrl=(e=s==null?void 0:s.baseUrl)!=null?e:"https://api.langbase.com",this.apiKey=(t=s==null?void 0:s.apiKey)!=null?t:"",this.request=new Ps({apiKey:this.apiKey,baseUrl:this.baseUrl}),this.pipe={list:this.listPipe.bind(this),create:this.createPipe.bind(this),update:this.updatePipe.bind(this),run:this.runPipe.bind(this)},this.pipes={list:this.listPipe.bind(this),create:this.createPipe.bind(this),update:this.updatePipe.bind(this),run:this.runPipe.bind(this)},this.memory={create:this.createMemory.bind(this),delete:this.deleteMemory.bind(this),retrieve:this.retrieveMemory.bind(this),list:this.listMemory.bind(this),documents:{list:this.listDocs.bind(this),delete:this.deleteDoc.bind(this),upload:this.uploadDocs.bind(this),embedding:{retry:this.retryDocEmbed.bind(this)}}},this.memories={create:this.createMemory.bind(this),delete:this.deleteMemory.bind(this),retrieve:this.retrieveMemory.bind(this),list:this.listMemory.bind(this),documents:{list:this.listDocs.bind(this),delete:this.deleteDoc.bind(this),upload:this.uploadDocs.bind(this),embeddings:{retry:this.retryDocEmbed.bind(this)}}},this.tools={crawl:this.webCrawl.bind(this),webSearch:this.webSearch.bind(this)},this.tool={crawl:this.webCrawl.bind(this),webSearch:this.webSearch.bind(this)},this.embed=this.generateEmbeddings.bind(this),this.chunk=this.chunkDocument.bind(this),this.parse=this.parseDocument.bind(this),this.threads={create:this.createThread.bind(this),update:this.updateThread.bind(this),get:this.getThread.bind(this),delete:this.deleteThread.bind(this),append:this.appendThreadMessages.bind(this),messages:{list:this.listThreadMessages.bind(this)}},this.agent={run:this.runAgent.bind(this)}}async runPipe(s){var e;if(!((e=s.name)!=null&&e.trim())&&!s.apiKey)throw new Error("Pipe name or Pipe API key is required to run the pipe.");return typeof s.stream>"u"&&delete s.stream,s.apiKey&&(this.request=new Ps({apiKey:s.apiKey,baseUrl:this.baseUrl})),this.request.post({endpoint:"/v1/pipes/run",body:s,headers:{...s.llmKey&&{"LB-LLM-KEY":s.llmKey}}})}async createPipe(s){return this.request.post({endpoint:"/v1/pipes",body:s})}async updatePipe(s){return this.request.post({endpoint:`/v1/pipes/${s.name}`,body:s})}async listPipe(){return this.request.get({endpoint:"/v1/pipes"})}async createMemory(s){return this.request.post({endpoint:"/v1/memory",body:s})}async listMemory(){return this.request.get({endpoint:"/v1/memory"})}async deleteMemory(s){return this.request.delete({endpoint:`/v1/memory/${s.name}`})}async retrieveMemory(s){return this.request.post({endpoint:"/v1/memory/retrieve",body:s})}async listDocs(s){return this.request.get({endpoint:`/v1/memory/${s.memoryName}/documents`})}async deleteDoc(s){return this.request.delete({endpoint:`/v1/memory/${s.memoryName}/documents/${s.documentName}`})}async uploadDocs(s){try{const t=(await this.request.post({endpoint:"/v1/memory/documents",body:{memoryName:s.memoryName,fileName:s.documentName,meta:s.meta}})).signedUrl;return await fetch(t,{method:"PUT",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":s.contentType},body:s.document})}catch(e){throw e}}async retryDocEmbed(s){return this.request.get({endpoint:`/v1/memory/${s.memoryName}/documents/${s.documentName}/embeddings/retry`})}async webSearch(s){const e=s.apiKey?s.apiKey:null;return e&&delete s.apiKey,this.request.post({endpoint:"/v1/tools/web-search",body:s,headers:{...e&&{"LB-WEB-SEARCH-KEY":e}}})}async webCrawl(s){const e=s.apiKey?s.apiKey:null;return e&&delete s.apiKey,this.request.post({endpoint:"/v1/tools/crawl",body:s,headers:{...e&&{"LB-CRAWL-KEY":e}}})}async generateEmbeddings(s){return this.request.post({endpoint:"/v1/embed",body:s})}async chunkDocument(s){const e=await Fs({document:s.document,documentName:s.documentName,contentType:s.contentType});return s.chunkMaxLength&&e.append("chunkMaxLength",s.chunkMaxLength),s.chunkOverlap&&e.append("chunkOverlap",s.chunkOverlap),(await fetch(`${this.baseUrl}/v1/chunk`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`},body:e})).json()}async parseDocument(s){const e=await Fs({document:s.document,documentName:s.documentName,contentType:s.contentType});return(await fetch(`${this.baseUrl}/v1/parse`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`},body:e})).json()}async createThread(s){return this.request.post({endpoint:"/v1/threads",body:s})}async updateThread(s){return this.request.post({endpoint:`/v1/threads/${s.threadId}`,body:s})}async getThread(s){return this.request.get({endpoint:`/v1/threads/${s.threadId}`})}async deleteThread(s){return this.request.delete({endpoint:`/v1/threads/${s.threadId}`})}async appendThreadMessages(s){return this.request.post({endpoint:`/v1/threads/${s.threadId}/messages`,body:s.messages})}async listThreadMessages(s){return this.request.get({endpoint:`/v1/threads/${s.threadId}/messages`})}async runAgent(s){if(!s.apiKey)throw new Error("LLM API key is required to run this LLM.");return typeof s.stream>"u"&&delete s.stream,this.request.post({endpoint:"/v1/agent/run",body:s,headers:{...s.apiKey&&{"LB-LLM-Key":s.apiKey}}})}};const vi=new Dc({apiKey:"user_34mUZrmhfDba3XMQmUmHe8ZjK4EzJrJ5kgMgezCjBNuFT7PcDGzt28GFxJjWe6MtybC7H6c7aGkqn1b3y23L1VTd"});async function Ac({chunks:s,query:e}){const t=await Nc(s),{completion:r}=await vi.pipes.run({stream:!1,name:"ai-support-agent",messages:[{role:"system",content:t},{role:"user",content:e}]});return r}async function Nc(s){let e="";for(const r of s)e+=r.text+`
`;return`
    You're a helpful AI assistant.
    You will assist users with their queries.

    Always ensure that you provide accurate and to the point information.
    Below is some CONTEXT for you to answer the questions. ONLY answer from the CONTEXT. CONTEXT consists of multiple information chunks. Each chunk has a source mentioned at the end.

For each piece of response you provide, cite the source in brackets like so: [1].

At the end of the answer, always list each source with its corresponding number and provide the document name. like so [1] Filename.doc. If there is a URL, make it hyperlink on the name.

 If you don't know the answer, say so. Ask for more context if needed.
    ${e}`}async function Fc(s){return await vi.memories.retrieve({query:s,topK:4,memory:[{name:"knowledge-base"}]})}function Rc(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var e=s.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(r){var i=Object.getOwnPropertyDescriptor(s,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return s[r]}})}),t}var In={},bt={},Q={},Ls;function Pc(){if(Ls)return Q;Ls=1,Object.defineProperty(Q,"__esModule",{value:!0});class s extends Error{}class e extends s{constructor(n){super(`Invalid DateTime: ${n.toMessage()}`)}}class t extends s{constructor(n){super(`Invalid Interval: ${n.toMessage()}`)}}class r extends s{constructor(n){super(`Invalid Duration: ${n.toMessage()}`)}}class i extends s{}class c extends s{constructor(n){super(`Invalid unit ${n}`)}}class l extends s{}class p extends s{constructor(){super("Zone is an abstract class")}}const d="numeric",g="short",C="long",v={year:d,month:d,day:d},T={year:d,month:g,day:d},A={year:d,month:g,day:d,weekday:g},_={year:d,month:C,day:d},k={year:d,month:C,day:d,weekday:C},R={hour:d,minute:d},N={hour:d,minute:d,second:d},G={hour:d,minute:d,second:d,timeZoneName:g},Y={hour:d,minute:d,second:d,timeZoneName:C},V={hour:d,minute:d,hourCycle:"h23"},Pe={hour:d,minute:d,second:d,hourCycle:"h23"},ne={hour:d,minute:d,second:d,hourCycle:"h23",timeZoneName:g},ae={hour:d,minute:d,second:d,hourCycle:"h23",timeZoneName:C},rt={year:d,month:d,day:d,hour:d,minute:d},It={year:d,month:d,day:d,hour:d,minute:d,second:d},Qn={year:d,month:g,day:d,hour:d,minute:d},Jn={year:d,month:g,day:d,hour:d,minute:d,second:d},Ni={year:d,month:g,day:d,weekday:g,hour:d,minute:d},Kn={year:d,month:C,day:d,hour:d,minute:d,timeZoneName:g},Xn={year:d,month:C,day:d,hour:d,minute:d,second:d,timeZoneName:g},er={year:d,month:C,day:d,weekday:C,hour:d,minute:d,timeZoneName:C},tr={year:d,month:C,day:d,weekday:C,hour:d,minute:d,second:d,timeZoneName:C};class Le{get type(){throw new p}get name(){throw new p}get ianaName(){return this.name}get isUniversal(){throw new p}offsetName(n,a){throw new p}formatOffset(n,a){throw new p}offset(n){throw new p}equals(n){throw new p}get isValid(){throw new p}}let Gt=null;class st extends Le{static get instance(){return Gt===null&&(Gt=new st),Gt}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(n,{format:a,locale:u}){return Mr(n,a,u)}formatOffset(n,a){return ut(this.offset(n),a)}offset(n){return-new Date(n).getTimezoneOffset()}equals(n){return n.type==="system"}get isValid(){return!0}}const Ht=new Map;function Fi(o){let n=Ht.get(o);return n===void 0&&(n=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:o,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Ht.set(o,n)),n}const Ri={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Pi(o,n){const a=o.format(n).replace(/\u200E/g,""),u=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(a),[,h,f,m,y,b,S,E]=u;return[m,h,f,y,b,S,E]}function Li(o,n){const a=o.formatToParts(n),u=[];for(let h=0;h<a.length;h++){const{type:f,value:m}=a[h],y=Ri[f];f==="era"?u[y]=m:M(y)||(u[y]=parseInt(m,10))}return u}const zt=new Map;class oe extends Le{static create(n){let a=zt.get(n);return a===void 0&&zt.set(n,a=new oe(n)),a}static resetCache(){zt.clear(),Ht.clear()}static isValidSpecifier(n){return this.isValidZone(n)}static isValidZone(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch{return!1}}constructor(n){super(),this.zoneName=n,this.valid=oe.isValidZone(n)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(n,{format:a,locale:u}){return Mr(n,a,u,this.name)}formatOffset(n,a){return ut(this.offset(n),a)}offset(n){if(!this.valid)return NaN;const a=new Date(n);if(isNaN(a))return NaN;const u=Fi(this.name);let[h,f,m,y,b,S,E]=u.formatToParts?Li(u,a):Pi(u,a);y==="BC"&&(h=-Math.abs(h)+1);const W=Ot({year:h,month:f,day:m,hour:b===24?0:b,minute:S,second:E,millisecond:0});let D=+a;const q=D%1e3;return D-=q>=0?q:1e3+q,(W-D)/(60*1e3)}equals(n){return n.type==="iana"&&n.name===this.name}get isValid(){return this.valid}}let nr={};function $i(o,n={}){const a=JSON.stringify([o,n]);let u=nr[a];return u||(u=new Intl.ListFormat(o,n),nr[a]=u),u}const Zt=new Map;function Yt(o,n={}){const a=JSON.stringify([o,n]);let u=Zt.get(a);return u===void 0&&(u=new Intl.DateTimeFormat(o,n),Zt.set(a,u)),u}const Qt=new Map;function xi(o,n={}){const a=JSON.stringify([o,n]);let u=Qt.get(a);return u===void 0&&(u=new Intl.NumberFormat(o,n),Qt.set(a,u)),u}const Jt=new Map;function Bi(o,n={}){const{base:a,...u}=n,h=JSON.stringify([o,u]);let f=Jt.get(h);return f===void 0&&(f=new Intl.RelativeTimeFormat(o,n),Jt.set(h,f)),f}let it=null;function Ui(){return it||(it=new Intl.DateTimeFormat().resolvedOptions().locale,it)}const Kt=new Map;function rr(o){let n=Kt.get(o);return n===void 0&&(n=new Intl.DateTimeFormat(o).resolvedOptions(),Kt.set(o,n)),n}const Xt=new Map;function Wi(o){let n=Xt.get(o);if(!n){const a=new Intl.Locale(o);n="getWeekInfo"in a?a.getWeekInfo():a.weekInfo,"minimalDays"in n||(n={...sr,...n}),Xt.set(o,n)}return n}function Vi(o){const n=o.indexOf("-x-");n!==-1&&(o=o.substring(0,n));const a=o.indexOf("-u-");if(a===-1)return[o];{let u,h;try{u=Yt(o).resolvedOptions(),h=o}catch{const b=o.substring(0,a);u=Yt(b).resolvedOptions(),h=b}const{numberingSystem:f,calendar:m}=u;return[h,f,m]}}function ji(o,n,a){return(a||n)&&(o.includes("-u-")||(o+="-u"),a&&(o+=`-ca-${a}`),n&&(o+=`-nu-${n}`)),o}function qi(o){const n=[];for(let a=1;a<=12;a++){const u=O.utc(2009,a,1);n.push(o(u))}return n}function Gi(o){const n=[];for(let a=1;a<=7;a++){const u=O.utc(2016,11,13+a);n.push(o(u))}return n}function _t(o,n,a,u){const h=o.listingMode();return h==="error"?null:h==="en"?a(n):u(n)}function Hi(o){return o.numberingSystem&&o.numberingSystem!=="latn"?!1:o.numberingSystem==="latn"||!o.locale||o.locale.startsWith("en")||rr(o.locale).numberingSystem==="latn"}class zi{constructor(n,a,u){this.padTo=u.padTo||0,this.floor=u.floor||!1;const{padTo:h,floor:f,...m}=u;if(!a||Object.keys(m).length>0){const y={useGrouping:!1,...u};u.padTo>0&&(y.minimumIntegerDigits=u.padTo),this.inf=xi(n,y)}}format(n){if(this.inf){const a=this.floor?Math.floor(n):n;return this.inf.format(a)}else{const a=this.floor?Math.floor(n):cn(n,3);return j(a,this.padTo)}}}class Zi{constructor(n,a,u){this.opts=u,this.originalZone=void 0;let h;if(this.opts.timeZone)this.dt=n;else if(n.zone.type==="fixed"){const m=-1*(n.offset/60),y=m>=0?`Etc/GMT+${m}`:`Etc/GMT${m}`;n.offset!==0&&oe.create(y).valid?(h=y,this.dt=n):(h="UTC",this.dt=n.offset===0?n:n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone)}else n.zone.type==="system"?this.dt=n:n.zone.type==="iana"?(this.dt=n,h=n.zone.name):(h="UTC",this.dt=n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone);const f={...this.opts};f.timeZone=f.timeZone||h,this.dtf=Yt(a,f)}format(){return this.originalZone?this.formatToParts().map(({value:n})=>n).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const n=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?n.map(a=>{if(a.type==="timeZoneName"){const u=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...a,value:u}}else return a}):n}resolvedOptions(){return this.dtf.resolvedOptions()}}class Yi{constructor(n,a,u){this.opts={style:"long",...u},!a&&Ir()&&(this.rtf=Bi(n,u))}format(n,a){return this.rtf?this.rtf.format(n,a):ga(a,n,this.opts.numeric,this.opts.style!=="long")}formatToParts(n,a){return this.rtf?this.rtf.formatToParts(n,a):[]}}const sr={firstDay:1,minimalDays:4,weekend:[6,7]};class ${static fromOpts(n){return $.create(n.locale,n.numberingSystem,n.outputCalendar,n.weekSettings,n.defaultToEN)}static create(n,a,u,h,f=!1){const m=n||B.defaultLocale,y=m||(f?"en-US":Ui()),b=a||B.defaultNumberingSystem,S=u||B.defaultOutputCalendar,E=on(h)||B.defaultWeekSettings;return new $(y,b,S,E,m)}static resetCache(){it=null,Zt.clear(),Qt.clear(),Jt.clear(),Kt.clear(),Xt.clear()}static fromObject({locale:n,numberingSystem:a,outputCalendar:u,weekSettings:h}={}){return $.create(n,a,u,h)}constructor(n,a,u,h,f){const[m,y,b]=Vi(n);this.locale=m,this.numberingSystem=a||y||null,this.outputCalendar=u||b||null,this.weekSettings=h,this.intl=ji(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=f,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Hi(this)),this.fastNumbersCached}listingMode(){const n=this.isEnglish(),a=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return n&&a?"en":"intl"}clone(n){return!n||Object.getOwnPropertyNames(n).length===0?this:$.create(n.locale||this.specifiedLocale,n.numberingSystem||this.numberingSystem,n.outputCalendar||this.outputCalendar,on(n.weekSettings)||this.weekSettings,n.defaultToEN||!1)}redefaultToEN(n={}){return this.clone({...n,defaultToEN:!0})}redefaultToSystem(n={}){return this.clone({...n,defaultToEN:!1})}months(n,a=!1){return _t(this,n,Ar,()=>{const u=a?{month:n,day:"numeric"}:{month:n},h=a?"format":"standalone";return this.monthsCache[h][n]||(this.monthsCache[h][n]=qi(f=>this.extract(f,u,"month"))),this.monthsCache[h][n]})}weekdays(n,a=!1){return _t(this,n,Rr,()=>{const u=a?{weekday:n,year:"numeric",month:"long",day:"numeric"}:{weekday:n},h=a?"format":"standalone";return this.weekdaysCache[h][n]||(this.weekdaysCache[h][n]=Gi(f=>this.extract(f,u,"weekday"))),this.weekdaysCache[h][n]})}meridiems(){return _t(this,void 0,()=>Pr,()=>{if(!this.meridiemCache){const n={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[O.utc(2016,11,13,9),O.utc(2016,11,13,19)].map(a=>this.extract(a,n,"dayperiod"))}return this.meridiemCache})}eras(n){return _t(this,n,Lr,()=>{const a={era:n};return this.eraCache[n]||(this.eraCache[n]=[O.utc(-40,1,1),O.utc(2017,1,1)].map(u=>this.extract(u,a,"era"))),this.eraCache[n]})}extract(n,a,u){const h=this.dtFormatter(n,a),f=h.formatToParts(),m=f.find(y=>y.type.toLowerCase()===u);return m?m.value:null}numberFormatter(n={}){return new zi(this.intl,n.forceSimple||this.fastNumbers,n)}dtFormatter(n,a={}){return new Zi(n,this.intl,a)}relFormatter(n={}){return new Yi(this.intl,this.isEnglish(),n)}listFormatter(n={}){return $i(this.intl,n)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||rr(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:_r()?Wi(this.locale):sr}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(n){return this.locale===n.locale&&this.numberingSystem===n.numberingSystem&&this.outputCalendar===n.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let en=null;class H extends Le{static get utcInstance(){return en===null&&(en=new H(0)),en}static instance(n){return n===0?H.utcInstance:new H(n)}static parseSpecifier(n){if(n){const a=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(a)return new H(Dt(a[1],a[2]))}return null}constructor(n){super(),this.fixed=n}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${ut(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${ut(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(n,a){return ut(this.fixed,a)}get isUniversal(){return!0}offset(){return this.fixed}equals(n){return n.type==="fixed"&&n.fixed===this.fixed}get isValid(){return!0}}class ir extends Le{constructor(n){super(),this.zoneName=n}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function pe(o,n){if(M(o)||o===null)return n;if(o instanceof Le)return o;if(ta(o)){const a=o.toLowerCase();return a==="default"?n:a==="local"||a==="system"?st.instance:a==="utc"||a==="gmt"?H.utcInstance:H.parseSpecifier(a)||oe.create(o)}else return ge(o)?H.instance(o):typeof o=="object"&&"offset"in o&&typeof o.offset=="function"?o:new ir(o)}const tn={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},ar={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Qi=tn.hanidec.replace(/[\[|\]]/g,"").split("");function Ji(o){let n=parseInt(o,10);if(isNaN(n)){n="";for(let a=0;a<o.length;a++){const u=o.charCodeAt(a);if(o[a].search(tn.hanidec)!==-1)n+=Qi.indexOf(o[a]);else for(const h in ar){const[f,m]=ar[h];u>=f&&u<=m&&(n+=u-f)}}return parseInt(n,10)}else return n}const nn=new Map;function Ki(){nn.clear()}function re({numberingSystem:o},n=""){const a=o||"latn";let u=nn.get(a);u===void 0&&(u=new Map,nn.set(a,u));let h=u.get(n);return h===void 0&&(h=new RegExp(`${tn[a]}${n}`),u.set(n,h)),h}let or=()=>Date.now(),ur="system",cr=null,lr=null,hr=null,dr=60,fr,mr=null;class B{static get now(){return or}static set now(n){or=n}static set defaultZone(n){ur=n}static get defaultZone(){return pe(ur,st.instance)}static get defaultLocale(){return cr}static set defaultLocale(n){cr=n}static get defaultNumberingSystem(){return lr}static set defaultNumberingSystem(n){lr=n}static get defaultOutputCalendar(){return hr}static set defaultOutputCalendar(n){hr=n}static get defaultWeekSettings(){return mr}static set defaultWeekSettings(n){mr=on(n)}static get twoDigitCutoffYear(){return dr}static set twoDigitCutoffYear(n){dr=n%100}static get throwOnInvalid(){return fr}static set throwOnInvalid(n){fr=n}static resetCaches(){$.resetCache(),oe.resetCache(),O.resetCache(),Ki()}}class se{constructor(n,a){this.reason=n,this.explanation=a}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const pr=[0,31,59,90,120,151,181,212,243,273,304,334],gr=[0,31,60,91,121,152,182,213,244,274,305,335];function X(o,n){return new se("unit out of range",`you specified ${n} (of type ${typeof n}) as a ${o}, which is invalid`)}function rn(o,n,a){const u=new Date(Date.UTC(o,n-1,a));o<100&&o>=0&&u.setUTCFullYear(u.getUTCFullYear()-1900);const h=u.getUTCDay();return h===0?7:h}function yr(o,n,a){return a+(at(o)?gr:pr)[n-1]}function wr(o,n){const a=at(o)?gr:pr,u=a.findIndex(f=>f<n),h=n-a[u];return{month:u+1,day:h}}function sn(o,n){return(o-n+7)%7+1}function kt(o,n=4,a=1){const{year:u,month:h,day:f}=o,m=yr(u,h,f),y=sn(rn(u,h,f),a);let b=Math.floor((m-y+14-n)/7),S;return b<1?(S=u-1,b=ot(S,n,a)):b>ot(u,n,a)?(S=u+1,b=1):S=u,{weekYear:S,weekNumber:b,weekday:y,...Nt(o)}}function br(o,n=4,a=1){const{weekYear:u,weekNumber:h,weekday:f}=o,m=sn(rn(u,1,n),a),y=xe(u);let b=h*7+f-m-7+n,S;b<1?(S=u-1,b+=xe(S)):b>y?(S=u+1,b-=xe(u)):S=u;const{month:E,day:F}=wr(S,b);return{year:S,month:E,day:F,...Nt(o)}}function an(o){const{year:n,month:a,day:u}=o,h=yr(n,a,u);return{year:n,ordinal:h,...Nt(o)}}function Cr(o){const{year:n,ordinal:a}=o,{month:u,day:h}=wr(n,a);return{year:n,month:u,day:h,...Nt(o)}}function vr(o,n){if(!M(o.localWeekday)||!M(o.localWeekNumber)||!M(o.localWeekYear)){if(!M(o.weekday)||!M(o.weekNumber)||!M(o.weekYear))throw new i("Cannot mix locale-based week fields with ISO-based week fields");return M(o.localWeekday)||(o.weekday=o.localWeekday),M(o.localWeekNumber)||(o.weekNumber=o.localWeekNumber),M(o.localWeekYear)||(o.weekYear=o.localWeekYear),delete o.localWeekday,delete o.localWeekNumber,delete o.localWeekYear,{minDaysInFirstWeek:n.getMinDaysInFirstWeek(),startOfWeek:n.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Xi(o,n=4,a=1){const u=Et(o.weekYear),h=ee(o.weekNumber,1,ot(o.weekYear,n,a)),f=ee(o.weekday,1,7);return u?h?f?!1:X("weekday",o.weekday):X("week",o.weekNumber):X("weekYear",o.weekYear)}function ea(o){const n=Et(o.year),a=ee(o.ordinal,1,xe(o.year));return n?a?!1:X("ordinal",o.ordinal):X("year",o.year)}function Sr(o){const n=Et(o.year),a=ee(o.month,1,12),u=ee(o.day,1,Mt(o.year,o.month));return n?a?u?!1:X("day",o.day):X("month",o.month):X("year",o.year)}function Tr(o){const{hour:n,minute:a,second:u,millisecond:h}=o,f=ee(n,0,23)||n===24&&a===0&&u===0&&h===0,m=ee(a,0,59),y=ee(u,0,59),b=ee(h,0,999);return f?m?y?b?!1:X("millisecond",h):X("second",u):X("minute",a):X("hour",n)}function M(o){return typeof o>"u"}function ge(o){return typeof o=="number"}function Et(o){return typeof o=="number"&&o%1===0}function ta(o){return typeof o=="string"}function na(o){return Object.prototype.toString.call(o)==="[object Date]"}function Ir(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function _r(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function ra(o){return Array.isArray(o)?o:[o]}function kr(o,n,a){if(o.length!==0)return o.reduce((u,h)=>{const f=[n(h),h];return u&&a(u[0],f[0])===u[0]?u:f},null)[1]}function sa(o,n){return n.reduce((a,u)=>(a[u]=o[u],a),{})}function $e(o,n){return Object.prototype.hasOwnProperty.call(o,n)}function on(o){if(o==null)return null;if(typeof o!="object")throw new l("Week settings must be an object");if(!ee(o.firstDay,1,7)||!ee(o.minimalDays,1,7)||!Array.isArray(o.weekend)||o.weekend.some(n=>!ee(n,1,7)))throw new l("Invalid week settings");return{firstDay:o.firstDay,minimalDays:o.minimalDays,weekend:Array.from(o.weekend)}}function ee(o,n,a){return Et(o)&&o>=n&&o<=a}function ia(o,n){return o-n*Math.floor(o/n)}function j(o,n=2){const a=o<0;let u;return a?u="-"+(""+-o).padStart(n,"0"):u=(""+o).padStart(n,"0"),u}function ye(o){if(!(M(o)||o===null||o===""))return parseInt(o,10)}function Te(o){if(!(M(o)||o===null||o===""))return parseFloat(o)}function un(o){if(!(M(o)||o===null||o==="")){const n=parseFloat("0."+o)*1e3;return Math.floor(n)}}function cn(o,n,a=!1){const u=10**n;return(a?Math.trunc:Math.round)(o*u)/u}function at(o){return o%4===0&&(o%100!==0||o%400===0)}function xe(o){return at(o)?366:365}function Mt(o,n){const a=ia(n-1,12)+1,u=o+(n-a)/12;return a===2?at(u)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][a-1]}function Ot(o){let n=Date.UTC(o.year,o.month-1,o.day,o.hour,o.minute,o.second,o.millisecond);return o.year<100&&o.year>=0&&(n=new Date(n),n.setUTCFullYear(o.year,o.month-1,o.day)),+n}function Er(o,n,a){return-sn(rn(o,1,n),a)+n-1}function ot(o,n=4,a=1){const u=Er(o,n,a),h=Er(o+1,n,a);return(xe(o)-u+h)/7}function ln(o){return o>99?o:o>B.twoDigitCutoffYear?1900+o:2e3+o}function Mr(o,n,a,u=null){const h=new Date(o),f={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};u&&(f.timeZone=u);const m={timeZoneName:n,...f},y=new Intl.DateTimeFormat(a,m).formatToParts(h).find(b=>b.type.toLowerCase()==="timezonename");return y?y.value:null}function Dt(o,n){let a=parseInt(o,10);Number.isNaN(a)&&(a=0);const u=parseInt(n,10)||0,h=a<0||Object.is(a,-0)?-u:u;return a*60+h}function Or(o){const n=Number(o);if(typeof o=="boolean"||o===""||Number.isNaN(n))throw new l(`Invalid unit value ${o}`);return n}function At(o,n){const a={};for(const u in o)if($e(o,u)){const h=o[u];if(h==null)continue;a[n(u)]=Or(h)}return a}function ut(o,n){const a=Math.trunc(Math.abs(o/60)),u=Math.trunc(Math.abs(o%60)),h=o>=0?"+":"-";switch(n){case"short":return`${h}${j(a,2)}:${j(u,2)}`;case"narrow":return`${h}${a}${u>0?`:${u}`:""}`;case"techie":return`${h}${j(a,2)}${j(u,2)}`;default:throw new RangeError(`Value format ${n} is out of range for property format`)}}function Nt(o){return sa(o,["hour","minute","second","millisecond"])}const aa=["January","February","March","April","May","June","July","August","September","October","November","December"],Dr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],oa=["J","F","M","A","M","J","J","A","S","O","N","D"];function Ar(o){switch(o){case"narrow":return[...oa];case"short":return[...Dr];case"long":return[...aa];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Nr=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Fr=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ua=["M","T","W","T","F","S","S"];function Rr(o){switch(o){case"narrow":return[...ua];case"short":return[...Fr];case"long":return[...Nr];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Pr=["AM","PM"],ca=["Before Christ","Anno Domini"],la=["BC","AD"],ha=["B","A"];function Lr(o){switch(o){case"narrow":return[...ha];case"short":return[...la];case"long":return[...ca];default:return null}}function da(o){return Pr[o.hour<12?0:1]}function fa(o,n){return Rr(n)[o.weekday-1]}function ma(o,n){return Ar(n)[o.month-1]}function pa(o,n){return Lr(n)[o.year<0?0:1]}function ga(o,n,a="always",u=!1){const h={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},f=["hours","minutes","seconds"].indexOf(o)===-1;if(a==="auto"&&f){const F=o==="days";switch(n){case 1:return F?"tomorrow":`next ${h[o][0]}`;case-1:return F?"yesterday":`last ${h[o][0]}`;case 0:return F?"today":`this ${h[o][0]}`}}const m=Object.is(n,-0)||n<0,y=Math.abs(n),b=y===1,S=h[o],E=u?b?S[1]:S[2]||S[1]:b?h[o][0]:o;return m?`${y} ${E} ago`:`in ${y} ${E}`}function $r(o,n){let a="";for(const u of o)u.literal?a+=u.val:a+=n(u.val);return a}const ya={D:v,DD:T,DDD:_,DDDD:k,t:R,tt:N,ttt:G,tttt:Y,T:V,TT:Pe,TTT:ne,TTTT:ae,f:rt,ff:Qn,fff:Kn,ffff:er,F:It,FF:Jn,FFF:Xn,FFFF:tr};class z{static create(n,a={}){return new z(n,a)}static parseFormat(n){let a=null,u="",h=!1;const f=[];for(let m=0;m<n.length;m++){const y=n.charAt(m);y==="'"?(u.length>0&&f.push({literal:h||/^\s+$/.test(u),val:u}),a=null,u="",h=!h):h||y===a?u+=y:(u.length>0&&f.push({literal:/^\s+$/.test(u),val:u}),u=y,a=y)}return u.length>0&&f.push({literal:h||/^\s+$/.test(u),val:u}),f}static macroTokenToFormatOpts(n){return ya[n]}constructor(n,a){this.opts=a,this.loc=n,this.systemLoc=null}formatWithSystemDefault(n,a){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(n,{...this.opts,...a}).format()}dtFormatter(n,a={}){return this.loc.dtFormatter(n,{...this.opts,...a})}formatDateTime(n,a){return this.dtFormatter(n,a).format()}formatDateTimeParts(n,a){return this.dtFormatter(n,a).formatToParts()}formatInterval(n,a){return this.dtFormatter(n.start,a).dtf.formatRange(n.start.toJSDate(),n.end.toJSDate())}resolvedOptions(n,a){return this.dtFormatter(n,a).resolvedOptions()}num(n,a=0){if(this.opts.forceSimple)return j(n,a);const u={...this.opts};return a>0&&(u.padTo=a),this.loc.numberFormatter(u).format(n)}formatDateTimeFromString(n,a){const u=this.loc.listingMode()==="en",h=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",f=(D,q)=>this.loc.extract(n,D,q),m=D=>n.isOffsetFixed&&n.offset===0&&D.allowZ?"Z":n.isValid?n.zone.formatOffset(n.ts,D.format):"",y=()=>u?da(n):f({hour:"numeric",hourCycle:"h12"},"dayperiod"),b=(D,q)=>u?ma(n,D):f(q?{month:D}:{month:D,day:"numeric"},"month"),S=(D,q)=>u?fa(n,D):f(q?{weekday:D}:{weekday:D,month:"long",day:"numeric"},"weekday"),E=D=>{const q=z.macroTokenToFormatOpts(D);return q?this.formatWithSystemDefault(n,q):D},F=D=>u?pa(n,D):f({era:D},"era"),W=D=>{switch(D){case"S":return this.num(n.millisecond);case"u":case"SSS":return this.num(n.millisecond,3);case"s":return this.num(n.second);case"ss":return this.num(n.second,2);case"uu":return this.num(Math.floor(n.millisecond/10),2);case"uuu":return this.num(Math.floor(n.millisecond/100));case"m":return this.num(n.minute);case"mm":return this.num(n.minute,2);case"h":return this.num(n.hour%12===0?12:n.hour%12);case"hh":return this.num(n.hour%12===0?12:n.hour%12,2);case"H":return this.num(n.hour);case"HH":return this.num(n.hour,2);case"Z":return m({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return m({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return m({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return n.zone.offsetName(n.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return n.zone.offsetName(n.ts,{format:"long",locale:this.loc.locale});case"z":return n.zoneName;case"a":return y();case"d":return h?f({day:"numeric"},"day"):this.num(n.day);case"dd":return h?f({day:"2-digit"},"day"):this.num(n.day,2);case"c":return this.num(n.weekday);case"ccc":return S("short",!0);case"cccc":return S("long",!0);case"ccccc":return S("narrow",!0);case"E":return this.num(n.weekday);case"EEE":return S("short",!1);case"EEEE":return S("long",!1);case"EEEEE":return S("narrow",!1);case"L":return h?f({month:"numeric",day:"numeric"},"month"):this.num(n.month);case"LL":return h?f({month:"2-digit",day:"numeric"},"month"):this.num(n.month,2);case"LLL":return b("short",!0);case"LLLL":return b("long",!0);case"LLLLL":return b("narrow",!0);case"M":return h?f({month:"numeric"},"month"):this.num(n.month);case"MM":return h?f({month:"2-digit"},"month"):this.num(n.month,2);case"MMM":return b("short",!1);case"MMMM":return b("long",!1);case"MMMMM":return b("narrow",!1);case"y":return h?f({year:"numeric"},"year"):this.num(n.year);case"yy":return h?f({year:"2-digit"},"year"):this.num(n.year.toString().slice(-2),2);case"yyyy":return h?f({year:"numeric"},"year"):this.num(n.year,4);case"yyyyyy":return h?f({year:"numeric"},"year"):this.num(n.year,6);case"G":return F("short");case"GG":return F("long");case"GGGGG":return F("narrow");case"kk":return this.num(n.weekYear.toString().slice(-2),2);case"kkkk":return this.num(n.weekYear,4);case"W":return this.num(n.weekNumber);case"WW":return this.num(n.weekNumber,2);case"n":return this.num(n.localWeekNumber);case"nn":return this.num(n.localWeekNumber,2);case"ii":return this.num(n.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(n.localWeekYear,4);case"o":return this.num(n.ordinal);case"ooo":return this.num(n.ordinal,3);case"q":return this.num(n.quarter);case"qq":return this.num(n.quarter,2);case"X":return this.num(Math.floor(n.ts/1e3));case"x":return this.num(n.ts);default:return E(D)}};return $r(z.parseFormat(a),W)}formatDurationFromString(n,a){const u=b=>{switch(b[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},h=b=>S=>{const E=u(S);return E?this.num(b.get(E),S.length):S},f=z.parseFormat(a),m=f.reduce((b,{literal:S,val:E})=>S?b:b.concat(E),[]),y=n.shiftTo(...m.map(u).filter(b=>b));return $r(f,h(y))}}const xr=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Be(...o){const n=o.reduce((a,u)=>a+u.source,"");return RegExp(`^${n}$`)}function Ue(...o){return n=>o.reduce(([a,u,h],f)=>{const[m,y,b]=f(n,h);return[{...a,...m},y||u,b]},[{},null,1]).slice(0,2)}function We(o,...n){if(o==null)return[null,null];for(const[a,u]of n){const h=a.exec(o);if(h)return u(h)}return[null,null]}function Br(...o){return(n,a)=>{const u={};let h;for(h=0;h<o.length;h++)u[o[h]]=ye(n[a+h]);return[u,null,a+h]}}const Ur=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,wa=`(?:${Ur.source}?(?:\\[(${xr.source})\\])?)?`,hn=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Wr=RegExp(`${hn.source}${wa}`),dn=RegExp(`(?:T${Wr.source})?`),ba=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Ca=/(\d{4})-?W(\d\d)(?:-?(\d))?/,va=/(\d{4})-?(\d{3})/,Sa=Br("weekYear","weekNumber","weekDay"),Ta=Br("year","ordinal"),Ia=/(\d{4})-(\d\d)-(\d\d)/,Vr=RegExp(`${hn.source} ?(?:${Ur.source}|(${xr.source}))?`),_a=RegExp(`(?: ${Vr.source})?`);function Ve(o,n,a){const u=o[n];return M(u)?a:ye(u)}function ka(o,n){return[{year:Ve(o,n),month:Ve(o,n+1,1),day:Ve(o,n+2,1)},null,n+3]}function je(o,n){return[{hours:Ve(o,n,0),minutes:Ve(o,n+1,0),seconds:Ve(o,n+2,0),milliseconds:un(o[n+3])},null,n+4]}function ct(o,n){const a=!o[n]&&!o[n+1],u=Dt(o[n+1],o[n+2]),h=a?null:H.instance(u);return[{},h,n+3]}function lt(o,n){const a=o[n]?oe.create(o[n]):null;return[{},a,n+1]}const Ea=RegExp(`^T?${hn.source}$`),Ma=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Oa(o){const[n,a,u,h,f,m,y,b,S]=o,E=n[0]==="-",F=b&&b[0]==="-",W=(D,q=!1)=>D!==void 0&&(q||D&&E)?-D:D;return[{years:W(Te(a)),months:W(Te(u)),weeks:W(Te(h)),days:W(Te(f)),hours:W(Te(m)),minutes:W(Te(y)),seconds:W(Te(b),b==="-0"),milliseconds:W(un(S),F)}]}const Da={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function fn(o,n,a,u,h,f,m){const y={year:n.length===2?ln(ye(n)):ye(n),month:Dr.indexOf(a)+1,day:ye(u),hour:ye(h),minute:ye(f)};return m&&(y.second=ye(m)),o&&(y.weekday=o.length>3?Nr.indexOf(o)+1:Fr.indexOf(o)+1),y}const Aa=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Na(o){const[,n,a,u,h,f,m,y,b,S,E,F]=o,W=fn(n,h,u,a,f,m,y);let D;return b?D=Da[b]:S?D=0:D=Dt(E,F),[W,new H(D)]}function Fa(o){return o.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Ra=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Pa=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,La=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function jr(o){const[,n,a,u,h,f,m,y]=o;return[fn(n,h,u,a,f,m,y),H.utcInstance]}function $a(o){const[,n,a,u,h,f,m,y]=o;return[fn(n,y,a,u,h,f,m),H.utcInstance]}const xa=Be(ba,dn),Ba=Be(Ca,dn),Ua=Be(va,dn),Wa=Be(Wr),qr=Ue(ka,je,ct,lt),Va=Ue(Sa,je,ct,lt),ja=Ue(Ta,je,ct,lt),qa=Ue(je,ct,lt);function Ga(o){return We(o,[xa,qr],[Ba,Va],[Ua,ja],[Wa,qa])}function Ha(o){return We(Fa(o),[Aa,Na])}function za(o){return We(o,[Ra,jr],[Pa,jr],[La,$a])}function Za(o){return We(o,[Ma,Oa])}const Ya=Ue(je);function Qa(o){return We(o,[Ea,Ya])}const Ja=Be(Ia,_a),Ka=Be(Vr),Xa=Ue(je,ct,lt);function eo(o){return We(o,[Ja,qr],[Ka,Xa])}const Gr="Invalid Duration",Hr={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},to={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Hr},te=146097/400,qe=146097/4800,no={years:{quarters:4,months:12,weeks:te/7,days:te,hours:te*24,minutes:te*24*60,seconds:te*24*60*60,milliseconds:te*24*60*60*1e3},quarters:{months:3,weeks:te/28,days:te/4,hours:te*24/4,minutes:te*24*60/4,seconds:te*24*60*60/4,milliseconds:te*24*60*60*1e3/4},months:{weeks:qe/7,days:qe,hours:qe*24,minutes:qe*24*60,seconds:qe*24*60*60,milliseconds:qe*24*60*60*1e3},...Hr},Ie=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],ro=Ie.slice(0).reverse();function we(o,n,a=!1){const u={values:a?n.values:{...o.values,...n.values||{}},loc:o.loc.clone(n.loc),conversionAccuracy:n.conversionAccuracy||o.conversionAccuracy,matrix:n.matrix||o.matrix};return new P(u)}function zr(o,n){var a;let u=(a=n.milliseconds)!=null?a:0;for(const h of ro.slice(1))n[h]&&(u+=n[h]*o[h].milliseconds);return u}function Zr(o,n){const a=zr(o,n)<0?-1:1;Ie.reduceRight((u,h)=>{if(M(n[h]))return u;if(u){const f=n[u]*a,m=o[h][u],y=Math.floor(f/m);n[h]+=y*a,n[u]-=y*m*a}return h},null),Ie.reduce((u,h)=>{if(M(n[h]))return u;if(u){const f=n[u]%1;n[u]-=f,n[h]+=f*o[u][h]}return h},null)}function so(o){const n={};for(const[a,u]of Object.entries(o))u!==0&&(n[a]=u);return n}class P{constructor(n){const a=n.conversionAccuracy==="longterm"||!1;let u=a?no:to;n.matrix&&(u=n.matrix),this.values=n.values,this.loc=n.loc||$.create(),this.conversionAccuracy=a?"longterm":"casual",this.invalid=n.invalid||null,this.matrix=u,this.isLuxonDuration=!0}static fromMillis(n,a){return P.fromObject({milliseconds:n},a)}static fromObject(n,a={}){if(n==null||typeof n!="object")throw new l(`Duration.fromObject: argument expected to be an object, got ${n===null?"null":typeof n}`);return new P({values:At(n,P.normalizeUnit),loc:$.fromObject(a),conversionAccuracy:a.conversionAccuracy,matrix:a.matrix})}static fromDurationLike(n){if(ge(n))return P.fromMillis(n);if(P.isDuration(n))return n;if(typeof n=="object")return P.fromObject(n);throw new l(`Unknown duration argument ${n} of type ${typeof n}`)}static fromISO(n,a){const[u]=Za(n);return u?P.fromObject(u,a):P.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static fromISOTime(n,a){const[u]=Qa(n);return u?P.fromObject(u,a):P.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static invalid(n,a=null){if(!n)throw new l("need to specify a reason the Duration is invalid");const u=n instanceof se?n:new se(n,a);if(B.throwOnInvalid)throw new r(u);return new P({invalid:u})}static normalizeUnit(n){const a={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[n&&n.toLowerCase()];if(!a)throw new c(n);return a}static isDuration(n){return n&&n.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(n,a={}){const u={...a,floor:a.round!==!1&&a.floor!==!1};return this.isValid?z.create(this.loc,u).formatDurationFromString(this,n):Gr}toHuman(n={}){if(!this.isValid)return Gr;const a=Ie.map(u=>{const h=this.values[u];return M(h)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...n,unit:u.slice(0,-1)}).format(h)}).filter(u=>u);return this.loc.listFormatter({type:"conjunction",style:n.listStyle||"narrow",...n}).format(a)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let n="P";return this.years!==0&&(n+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(n+=this.months+this.quarters*3+"M"),this.weeks!==0&&(n+=this.weeks+"W"),this.days!==0&&(n+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(n+="T"),this.hours!==0&&(n+=this.hours+"H"),this.minutes!==0&&(n+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(n+=cn(this.seconds+this.milliseconds/1e3,3)+"S"),n==="P"&&(n+="T0S"),n}toISOTime(n={}){if(!this.isValid)return null;const a=this.toMillis();return a<0||a>=864e5?null:(n={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...n,includeOffset:!1},O.fromMillis(a,{zone:"UTC"}).toISOTime(n))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?zr(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(n){if(!this.isValid)return this;const a=P.fromDurationLike(n),u={};for(const h of Ie)($e(a.values,h)||$e(this.values,h))&&(u[h]=a.get(h)+this.get(h));return we(this,{values:u},!0)}minus(n){if(!this.isValid)return this;const a=P.fromDurationLike(n);return this.plus(a.negate())}mapUnits(n){if(!this.isValid)return this;const a={};for(const u of Object.keys(this.values))a[u]=Or(n(this.values[u],u));return we(this,{values:a},!0)}get(n){return this[P.normalizeUnit(n)]}set(n){if(!this.isValid)return this;const a={...this.values,...At(n,P.normalizeUnit)};return we(this,{values:a})}reconfigure({locale:n,numberingSystem:a,conversionAccuracy:u,matrix:h}={}){const m={loc:this.loc.clone({locale:n,numberingSystem:a}),matrix:h,conversionAccuracy:u};return we(this,m)}as(n){return this.isValid?this.shiftTo(n).get(n):NaN}normalize(){if(!this.isValid)return this;const n=this.toObject();return Zr(this.matrix,n),we(this,{values:n},!0)}rescale(){if(!this.isValid)return this;const n=so(this.normalize().shiftToAll().toObject());return we(this,{values:n},!0)}shiftTo(...n){if(!this.isValid)return this;if(n.length===0)return this;n=n.map(m=>P.normalizeUnit(m));const a={},u={},h=this.toObject();let f;for(const m of Ie)if(n.indexOf(m)>=0){f=m;let y=0;for(const S in u)y+=this.matrix[S][m]*u[S],u[S]=0;ge(h[m])&&(y+=h[m]);const b=Math.trunc(y);a[m]=b,u[m]=(y*1e3-b*1e3)/1e3}else ge(h[m])&&(u[m]=h[m]);for(const m in u)u[m]!==0&&(a[f]+=m===f?u[m]:u[m]/this.matrix[f][m]);return Zr(this.matrix,a),we(this,{values:a},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const n={};for(const a of Object.keys(this.values))n[a]=this.values[a]===0?0:-this.values[a];return we(this,{values:n},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(n){if(!this.isValid||!n.isValid||!this.loc.equals(n.loc))return!1;function a(u,h){return u===void 0||u===0?h===void 0||h===0:u===h}for(const u of Ie)if(!a(this.values[u],n.values[u]))return!1;return!0}}const Ge="Invalid Interval";function io(o,n){return!o||!o.isValid?U.invalid("missing or invalid start"):!n||!n.isValid?U.invalid("missing or invalid end"):n<o?U.invalid("end before start",`The end of an interval must be after its start, but you had start=${o.toISO()} and end=${n.toISO()}`):null}class U{constructor(n){this.s=n.start,this.e=n.end,this.invalid=n.invalid||null,this.isLuxonInterval=!0}static invalid(n,a=null){if(!n)throw new l("need to specify a reason the Interval is invalid");const u=n instanceof se?n:new se(n,a);if(B.throwOnInvalid)throw new t(u);return new U({invalid:u})}static fromDateTimes(n,a){const u=mt(n),h=mt(a),f=io(u,h);return f??new U({start:u,end:h})}static after(n,a){const u=P.fromDurationLike(a),h=mt(n);return U.fromDateTimes(h,h.plus(u))}static before(n,a){const u=P.fromDurationLike(a),h=mt(n);return U.fromDateTimes(h.minus(u),h)}static fromISO(n,a){const[u,h]=(n||"").split("/",2);if(u&&h){let f,m;try{f=O.fromISO(u,a),m=f.isValid}catch{m=!1}let y,b;try{y=O.fromISO(h,a),b=y.isValid}catch{b=!1}if(m&&b)return U.fromDateTimes(f,y);if(m){const S=P.fromISO(h,a);if(S.isValid)return U.after(f,S)}else if(b){const S=P.fromISO(u,a);if(S.isValid)return U.before(y,S)}}return U.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static isInterval(n){return n&&n.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(n="milliseconds"){return this.isValid?this.toDuration(n).get(n):NaN}count(n="milliseconds",a){if(!this.isValid)return NaN;const u=this.start.startOf(n,a);let h;return a!=null&&a.useLocaleWeeks?h=this.end.reconfigure({locale:u.locale}):h=this.end,h=h.startOf(n,a),Math.floor(h.diff(u,n).get(n))+(h.valueOf()!==this.end.valueOf())}hasSame(n){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,n):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(n){return this.isValid?this.s>n:!1}isBefore(n){return this.isValid?this.e<=n:!1}contains(n){return this.isValid?this.s<=n&&this.e>n:!1}set({start:n,end:a}={}){return this.isValid?U.fromDateTimes(n||this.s,a||this.e):this}splitAt(...n){if(!this.isValid)return[];const a=n.map(mt).filter(m=>this.contains(m)).sort((m,y)=>m.toMillis()-y.toMillis()),u=[];let{s:h}=this,f=0;for(;h<this.e;){const m=a[f]||this.e,y=+m>+this.e?this.e:m;u.push(U.fromDateTimes(h,y)),h=y,f+=1}return u}splitBy(n){const a=P.fromDurationLike(n);if(!this.isValid||!a.isValid||a.as("milliseconds")===0)return[];let{s:u}=this,h=1,f;const m=[];for(;u<this.e;){const y=this.start.plus(a.mapUnits(b=>b*h));f=+y>+this.e?this.e:y,m.push(U.fromDateTimes(u,f)),u=f,h+=1}return m}divideEqually(n){return this.isValid?this.splitBy(this.length()/n).slice(0,n):[]}overlaps(n){return this.e>n.s&&this.s<n.e}abutsStart(n){return this.isValid?+this.e==+n.s:!1}abutsEnd(n){return this.isValid?+n.e==+this.s:!1}engulfs(n){return this.isValid?this.s<=n.s&&this.e>=n.e:!1}equals(n){return!this.isValid||!n.isValid?!1:this.s.equals(n.s)&&this.e.equals(n.e)}intersection(n){if(!this.isValid)return this;const a=this.s>n.s?this.s:n.s,u=this.e<n.e?this.e:n.e;return a>=u?null:U.fromDateTimes(a,u)}union(n){if(!this.isValid)return this;const a=this.s<n.s?this.s:n.s,u=this.e>n.e?this.e:n.e;return U.fromDateTimes(a,u)}static merge(n){const[a,u]=n.sort((h,f)=>h.s-f.s).reduce(([h,f],m)=>f?f.overlaps(m)||f.abutsStart(m)?[h,f.union(m)]:[h.concat([f]),m]:[h,m],[[],null]);return u&&a.push(u),a}static xor(n){let a=null,u=0;const h=[],f=n.map(b=>[{time:b.s,type:"s"},{time:b.e,type:"e"}]),m=Array.prototype.concat(...f),y=m.sort((b,S)=>b.time-S.time);for(const b of y)u+=b.type==="s"?1:-1,u===1?a=b.time:(a&&+a!=+b.time&&h.push(U.fromDateTimes(a,b.time)),a=null);return U.merge(h)}difference(...n){return U.xor([this].concat(n)).map(a=>this.intersection(a)).filter(a=>a&&!a.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Ge}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(n=v,a={}){return this.isValid?z.create(this.s.loc.clone(a),n).formatInterval(this):Ge}toISO(n){return this.isValid?`${this.s.toISO(n)}/${this.e.toISO(n)}`:Ge}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ge}toISOTime(n){return this.isValid?`${this.s.toISOTime(n)}/${this.e.toISOTime(n)}`:Ge}toFormat(n,{separator:a=" – "}={}){return this.isValid?`${this.s.toFormat(n)}${a}${this.e.toFormat(n)}`:Ge}toDuration(n,a){return this.isValid?this.e.diff(this.s,n,a):P.invalid(this.invalidReason)}mapEndpoints(n){return U.fromDateTimes(n(this.s),n(this.e))}}class ht{static hasDST(n=B.defaultZone){const a=O.now().setZone(n).set({month:12});return!n.isUniversal&&a.offset!==a.set({month:6}).offset}static isValidIANAZone(n){return oe.isValidZone(n)}static normalizeZone(n){return pe(n,B.defaultZone)}static getStartOfWeek({locale:n=null,locObj:a=null}={}){return(a||$.create(n)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:n=null,locObj:a=null}={}){return(a||$.create(n)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:n=null,locObj:a=null}={}){return(a||$.create(n)).getWeekendDays().slice()}static months(n="long",{locale:a=null,numberingSystem:u=null,locObj:h=null,outputCalendar:f="gregory"}={}){return(h||$.create(a,u,f)).months(n)}static monthsFormat(n="long",{locale:a=null,numberingSystem:u=null,locObj:h=null,outputCalendar:f="gregory"}={}){return(h||$.create(a,u,f)).months(n,!0)}static weekdays(n="long",{locale:a=null,numberingSystem:u=null,locObj:h=null}={}){return(h||$.create(a,u,null)).weekdays(n)}static weekdaysFormat(n="long",{locale:a=null,numberingSystem:u=null,locObj:h=null}={}){return(h||$.create(a,u,null)).weekdays(n,!0)}static meridiems({locale:n=null}={}){return $.create(n).meridiems()}static eras(n="short",{locale:a=null}={}){return $.create(a,null,"gregory").eras(n)}static features(){return{relative:Ir(),localeWeek:_r()}}}function Yr(o,n){const a=h=>h.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),u=a(n)-a(o);return Math.floor(P.fromMillis(u).as("days"))}function ao(o,n,a){const u=[["years",(b,S)=>S.year-b.year],["quarters",(b,S)=>S.quarter-b.quarter+(S.year-b.year)*4],["months",(b,S)=>S.month-b.month+(S.year-b.year)*12],["weeks",(b,S)=>{const E=Yr(b,S);return(E-E%7)/7}],["days",Yr]],h={},f=o;let m,y;for(const[b,S]of u)a.indexOf(b)>=0&&(m=b,h[b]=S(o,n),y=f.plus(h),y>n?(h[b]--,o=f.plus(h),o>n&&(y=o,h[b]--,o=f.plus(h))):o=y);return[o,h,y,m]}function oo(o,n,a,u){let[h,f,m,y]=ao(o,n,a);const b=n-h,S=a.filter(F=>["hours","minutes","seconds","milliseconds"].indexOf(F)>=0);S.length===0&&(m<n&&(m=h.plus({[y]:1})),m!==h&&(f[y]=(f[y]||0)+b/(m-h)));const E=P.fromObject(f,u);return S.length>0?P.fromMillis(b,u).shiftTo(...S).plus(E):E}const uo="missing Intl.DateTimeFormat.formatToParts support";function L(o,n=a=>a){return{regex:o,deser:([a])=>n(Ji(a))}}const Qr="[  ]",Jr=new RegExp(Qr,"g");function co(o){return o.replace(/\./g,"\\.?").replace(Jr,Qr)}function Kr(o){return o.replace(/\./g,"").replace(Jr," ").toLowerCase()}function ie(o,n){return o===null?null:{regex:RegExp(o.map(co).join("|")),deser:([a])=>o.findIndex(u=>Kr(a)===Kr(u))+n}}function Xr(o,n){return{regex:o,deser:([,a,u])=>Dt(a,u),groups:n}}function Ft(o){return{regex:o,deser:([n])=>n}}function lo(o){return o.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function ho(o,n){const a=re(n),u=re(n,"{2}"),h=re(n,"{3}"),f=re(n,"{4}"),m=re(n,"{6}"),y=re(n,"{1,2}"),b=re(n,"{1,3}"),S=re(n,"{1,6}"),E=re(n,"{1,9}"),F=re(n,"{2,4}"),W=re(n,"{4,6}"),D=ue=>({regex:RegExp(lo(ue.val)),deser:([Ze])=>Ze,literal:!0}),ze=(ue=>{if(o.literal)return D(ue);switch(ue.val){case"G":return ie(n.eras("short"),0);case"GG":return ie(n.eras("long"),0);case"y":return L(S);case"yy":return L(F,ln);case"yyyy":return L(f);case"yyyyy":return L(W);case"yyyyyy":return L(m);case"M":return L(y);case"MM":return L(u);case"MMM":return ie(n.months("short",!0),1);case"MMMM":return ie(n.months("long",!0),1);case"L":return L(y);case"LL":return L(u);case"LLL":return ie(n.months("short",!1),1);case"LLLL":return ie(n.months("long",!1),1);case"d":return L(y);case"dd":return L(u);case"o":return L(b);case"ooo":return L(h);case"HH":return L(u);case"H":return L(y);case"hh":return L(u);case"h":return L(y);case"mm":return L(u);case"m":return L(y);case"q":return L(y);case"qq":return L(u);case"s":return L(y);case"ss":return L(u);case"S":return L(b);case"SSS":return L(h);case"u":return Ft(E);case"uu":return Ft(y);case"uuu":return L(a);case"a":return ie(n.meridiems(),0);case"kkkk":return L(f);case"kk":return L(F,ln);case"W":return L(y);case"WW":return L(u);case"E":case"c":return L(a);case"EEE":return ie(n.weekdays("short",!1),1);case"EEEE":return ie(n.weekdays("long",!1),1);case"ccc":return ie(n.weekdays("short",!0),1);case"cccc":return ie(n.weekdays("long",!0),1);case"Z":case"ZZ":return Xr(new RegExp(`([+-]${y.source})(?::(${u.source}))?`),2);case"ZZZ":return Xr(new RegExp(`([+-]${y.source})(${u.source})?`),2);case"z":return Ft(/[a-z_+-/]{1,256}?/i);case" ":return Ft(/[^\S\n\r]/);default:return D(ue)}})(o)||{invalidReason:uo};return ze.token=o,ze}const fo={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function mo(o,n,a){const{type:u,value:h}=o;if(u==="literal"){const b=/^\s+$/.test(h);return{literal:!b,val:b?" ":h}}const f=n[u];let m=u;u==="hour"&&(n.hour12!=null?m=n.hour12?"hour12":"hour24":n.hourCycle!=null?n.hourCycle==="h11"||n.hourCycle==="h12"?m="hour12":m="hour24":m=a.hour12?"hour12":"hour24");let y=fo[m];if(typeof y=="object"&&(y=y[f]),y)return{literal:!1,val:y}}function po(o){return[`^${o.map(a=>a.regex).reduce((a,u)=>`${a}(${u.source})`,"")}$`,o]}function go(o,n,a){const u=o.match(n);if(u){const h={};let f=1;for(const m in a)if($e(a,m)){const y=a[m],b=y.groups?y.groups+1:1;!y.literal&&y.token&&(h[y.token.val[0]]=y.deser(u.slice(f,f+b))),f+=b}return[u,h]}else return[u,{}]}function yo(o){const n=f=>{switch(f){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let a=null,u;return M(o.z)||(a=oe.create(o.z)),M(o.Z)||(a||(a=new H(o.Z)),u=o.Z),M(o.q)||(o.M=(o.q-1)*3+1),M(o.h)||(o.h<12&&o.a===1?o.h+=12:o.h===12&&o.a===0&&(o.h=0)),o.G===0&&o.y&&(o.y=-o.y),M(o.u)||(o.S=un(o.u)),[Object.keys(o).reduce((f,m)=>{const y=n(m);return y&&(f[y]=o[m]),f},{}),a,u]}let mn=null;function wo(){return mn||(mn=O.fromMillis(1555555555555)),mn}function bo(o,n){if(o.literal)return o;const a=z.macroTokenToFormatOpts(o.val),u=rs(a,n);return u==null||u.includes(void 0)?o:u}function es(o,n){return Array.prototype.concat(...o.map(a=>bo(a,n)))}class ts{constructor(n,a){if(this.locale=n,this.format=a,this.tokens=es(z.parseFormat(a),n),this.units=this.tokens.map(u=>ho(u,n)),this.disqualifyingUnit=this.units.find(u=>u.invalidReason),!this.disqualifyingUnit){const[u,h]=po(this.units);this.regex=RegExp(u,"i"),this.handlers=h}}explainFromTokens(n){if(this.isValid){const[a,u]=go(n,this.regex,this.handlers),[h,f,m]=u?yo(u):[null,null,void 0];if($e(u,"a")&&$e(u,"H"))throw new i("Can't include meridiem when specifying 24-hour format");return{input:n,tokens:this.tokens,regex:this.regex,rawMatches:a,matches:u,result:h,zone:f,specificOffset:m}}else return{input:n,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function ns(o,n,a){return new ts(o,a).explainFromTokens(n)}function Co(o,n,a){const{result:u,zone:h,specificOffset:f,invalidReason:m}=ns(o,n,a);return[u,h,f,m]}function rs(o,n){if(!o)return null;const u=z.create(n,o).dtFormatter(wo()),h=u.formatToParts(),f=u.resolvedOptions();return h.map(m=>mo(m,o,f))}const pn="Invalid DateTime",vo=864e13;function dt(o){return new se("unsupported zone",`the zone "${o.name}" is not supported`)}function gn(o){return o.weekData===null&&(o.weekData=kt(o.c)),o.weekData}function yn(o){return o.localWeekData===null&&(o.localWeekData=kt(o.c,o.loc.getMinDaysInFirstWeek(),o.loc.getStartOfWeek())),o.localWeekData}function _e(o,n){const a={ts:o.ts,zone:o.zone,c:o.c,o:o.o,loc:o.loc,invalid:o.invalid};return new O({...a,...n,old:a})}function ss(o,n,a){let u=o-n*60*1e3;const h=a.offset(u);if(n===h)return[u,n];u-=(h-n)*60*1e3;const f=a.offset(u);return h===f?[u,h]:[o-Math.min(h,f)*60*1e3,Math.max(h,f)]}function Rt(o,n){o+=n*60*1e3;const a=new Date(o);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Pt(o,n,a){return ss(Ot(o),n,a)}function is(o,n){const a=o.o,u=o.c.year+Math.trunc(n.years),h=o.c.month+Math.trunc(n.months)+Math.trunc(n.quarters)*3,f={...o.c,year:u,month:h,day:Math.min(o.c.day,Mt(u,h))+Math.trunc(n.days)+Math.trunc(n.weeks)*7},m=P.fromObject({years:n.years-Math.trunc(n.years),quarters:n.quarters-Math.trunc(n.quarters),months:n.months-Math.trunc(n.months),weeks:n.weeks-Math.trunc(n.weeks),days:n.days-Math.trunc(n.days),hours:n.hours,minutes:n.minutes,seconds:n.seconds,milliseconds:n.milliseconds}).as("milliseconds"),y=Ot(f);let[b,S]=ss(y,a,o.zone);return m!==0&&(b+=m,S=o.zone.offset(b)),{ts:b,o:S}}function He(o,n,a,u,h,f){const{setZone:m,zone:y}=a;if(o&&Object.keys(o).length!==0||n){const b=n||y,S=O.fromObject(o,{...a,zone:b,specificOffset:f});return m?S:S.setZone(y)}else return O.invalid(new se("unparsable",`the input "${h}" can't be parsed as ${u}`))}function Lt(o,n,a=!0){return o.isValid?z.create($.create("en-US"),{allowZ:a,forceSimple:!0}).formatDateTimeFromString(o,n):null}function wn(o,n){const a=o.c.year>9999||o.c.year<0;let u="";return a&&o.c.year>=0&&(u+="+"),u+=j(o.c.year,a?6:4),n?(u+="-",u+=j(o.c.month),u+="-",u+=j(o.c.day)):(u+=j(o.c.month),u+=j(o.c.day)),u}function as(o,n,a,u,h,f){let m=j(o.c.hour);return n?(m+=":",m+=j(o.c.minute),(o.c.millisecond!==0||o.c.second!==0||!a)&&(m+=":")):m+=j(o.c.minute),(o.c.millisecond!==0||o.c.second!==0||!a)&&(m+=j(o.c.second),(o.c.millisecond!==0||!u)&&(m+=".",m+=j(o.c.millisecond,3))),h&&(o.isOffsetFixed&&o.offset===0&&!f?m+="Z":o.o<0?(m+="-",m+=j(Math.trunc(-o.o/60)),m+=":",m+=j(Math.trunc(-o.o%60))):(m+="+",m+=j(Math.trunc(o.o/60)),m+=":",m+=j(Math.trunc(o.o%60)))),f&&(m+="["+o.zone.ianaName+"]"),m}const os={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},So={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},To={ordinal:1,hour:0,minute:0,second:0,millisecond:0},us=["year","month","day","hour","minute","second","millisecond"],Io=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],_o=["year","ordinal","hour","minute","second","millisecond"];function ko(o){const n={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[o.toLowerCase()];if(!n)throw new c(o);return n}function cs(o){switch(o.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return ko(o)}}function Eo(o){if(ft===void 0&&(ft=B.now()),o.type!=="iana")return o.offset(ft);const n=o.name;let a=bn.get(n);return a===void 0&&(a=o.offset(ft),bn.set(n,a)),a}function ls(o,n){const a=pe(n.zone,B.defaultZone);if(!a.isValid)return O.invalid(dt(a));const u=$.fromObject(n);let h,f;if(M(o.year))h=B.now();else{for(const b of us)M(o[b])&&(o[b]=os[b]);const m=Sr(o)||Tr(o);if(m)return O.invalid(m);const y=Eo(a);[h,f]=Pt(o,y,a)}return new O({ts:h,zone:a,loc:u,o:f})}function hs(o,n,a){const u=M(a.round)?!0:a.round,h=(m,y)=>(m=cn(m,u||a.calendary?0:2,!0),n.loc.clone(a).relFormatter(a).format(m,y)),f=m=>a.calendary?n.hasSame(o,m)?0:n.startOf(m).diff(o.startOf(m),m).get(m):n.diff(o,m).get(m);if(a.unit)return h(f(a.unit),a.unit);for(const m of a.units){const y=f(m);if(Math.abs(y)>=1)return h(y,m)}return h(o>n?-0:0,a.units[a.units.length-1])}function ds(o){let n={},a;return o.length>0&&typeof o[o.length-1]=="object"?(n=o[o.length-1],a=Array.from(o).slice(0,o.length-1)):a=Array.from(o),[n,a]}let ft;const bn=new Map;class O{constructor(n){const a=n.zone||B.defaultZone;let u=n.invalid||(Number.isNaN(n.ts)?new se("invalid input"):null)||(a.isValid?null:dt(a));this.ts=M(n.ts)?B.now():n.ts;let h=null,f=null;if(!u)if(n.old&&n.old.ts===this.ts&&n.old.zone.equals(a))[h,f]=[n.old.c,n.old.o];else{const y=ge(n.o)&&!n.old?n.o:a.offset(this.ts);h=Rt(this.ts,y),u=Number.isNaN(h.year)?new se("invalid input"):null,h=u?null:h,f=u?null:y}this._zone=a,this.loc=n.loc||$.create(),this.invalid=u,this.weekData=null,this.localWeekData=null,this.c=h,this.o=f,this.isLuxonDateTime=!0}static now(){return new O({})}static local(){const[n,a]=ds(arguments),[u,h,f,m,y,b,S]=a;return ls({year:u,month:h,day:f,hour:m,minute:y,second:b,millisecond:S},n)}static utc(){const[n,a]=ds(arguments),[u,h,f,m,y,b,S]=a;return n.zone=H.utcInstance,ls({year:u,month:h,day:f,hour:m,minute:y,second:b,millisecond:S},n)}static fromJSDate(n,a={}){const u=na(n)?n.valueOf():NaN;if(Number.isNaN(u))return O.invalid("invalid input");const h=pe(a.zone,B.defaultZone);return h.isValid?new O({ts:u,zone:h,loc:$.fromObject(a)}):O.invalid(dt(h))}static fromMillis(n,a={}){if(ge(n))return n<-864e13||n>vo?O.invalid("Timestamp out of range"):new O({ts:n,zone:pe(a.zone,B.defaultZone),loc:$.fromObject(a)});throw new l(`fromMillis requires a numerical input, but received a ${typeof n} with value ${n}`)}static fromSeconds(n,a={}){if(ge(n))return new O({ts:n*1e3,zone:pe(a.zone,B.defaultZone),loc:$.fromObject(a)});throw new l("fromSeconds requires a numerical input")}static fromObject(n,a={}){n=n||{};const u=pe(a.zone,B.defaultZone);if(!u.isValid)return O.invalid(dt(u));const h=$.fromObject(a),f=At(n,cs),{minDaysInFirstWeek:m,startOfWeek:y}=vr(f,h),b=B.now(),S=M(a.specificOffset)?u.offset(b):a.specificOffset,E=!M(f.ordinal),F=!M(f.year),W=!M(f.month)||!M(f.day),D=F||W,q=f.weekYear||f.weekNumber;if((D||E)&&q)throw new i("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(W&&E)throw new i("Can't mix ordinal dates with month/day");const ze=q||f.weekday&&!D;let ue,Ze,pt=Rt(b,S);ze?(ue=Io,Ze=So,pt=kt(pt,m,y)):E?(ue=_o,Ze=To,pt=an(pt)):(ue=us,Ze=os);let fs=!1;for(const yt of ue){const Fo=f[yt];M(Fo)?fs?f[yt]=Ze[yt]:f[yt]=pt[yt]:fs=!0}const Oo=ze?Xi(f,m,y):E?ea(f):Sr(f),ms=Oo||Tr(f);if(ms)return O.invalid(ms);const Do=ze?br(f,m,y):E?Cr(f):f,[Ao,No]=Pt(Do,S,u),gt=new O({ts:Ao,zone:u,o:No,loc:h});return f.weekday&&D&&n.weekday!==gt.weekday?O.invalid("mismatched weekday",`you can't specify both a weekday of ${f.weekday} and a date of ${gt.toISO()}`):gt.isValid?gt:O.invalid(gt.invalid)}static fromISO(n,a={}){const[u,h]=Ga(n);return He(u,h,a,"ISO 8601",n)}static fromRFC2822(n,a={}){const[u,h]=Ha(n);return He(u,h,a,"RFC 2822",n)}static fromHTTP(n,a={}){const[u,h]=za(n);return He(u,h,a,"HTTP",a)}static fromFormat(n,a,u={}){if(M(n)||M(a))throw new l("fromFormat requires an input string and a format");const{locale:h=null,numberingSystem:f=null}=u,m=$.fromOpts({locale:h,numberingSystem:f,defaultToEN:!0}),[y,b,S,E]=Co(m,n,a);return E?O.invalid(E):He(y,b,u,`format ${a}`,n,S)}static fromString(n,a,u={}){return O.fromFormat(n,a,u)}static fromSQL(n,a={}){const[u,h]=eo(n);return He(u,h,a,"SQL",n)}static invalid(n,a=null){if(!n)throw new l("need to specify a reason the DateTime is invalid");const u=n instanceof se?n:new se(n,a);if(B.throwOnInvalid)throw new e(u);return new O({invalid:u})}static isDateTime(n){return n&&n.isLuxonDateTime||!1}static parseFormatForOpts(n,a={}){const u=rs(n,$.fromObject(a));return u?u.map(h=>h?h.val:null).join(""):null}static expandFormat(n,a={}){return es(z.parseFormat(n),$.fromObject(a)).map(h=>h.val).join("")}static resetCache(){ft=void 0,bn.clear()}get(n){return this[n]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?gn(this).weekYear:NaN}get weekNumber(){return this.isValid?gn(this).weekNumber:NaN}get weekday(){return this.isValid?gn(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?yn(this).weekday:NaN}get localWeekNumber(){return this.isValid?yn(this).weekNumber:NaN}get localWeekYear(){return this.isValid?yn(this).weekYear:NaN}get ordinal(){return this.isValid?an(this.c).ordinal:NaN}get monthShort(){return this.isValid?ht.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?ht.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ht.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ht.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const n=864e5,a=6e4,u=Ot(this.c),h=this.zone.offset(u-n),f=this.zone.offset(u+n),m=this.zone.offset(u-h*a),y=this.zone.offset(u-f*a);if(m===y)return[this];const b=u-m*a,S=u-y*a,E=Rt(b,m),F=Rt(S,y);return E.hour===F.hour&&E.minute===F.minute&&E.second===F.second&&E.millisecond===F.millisecond?[_e(this,{ts:b}),_e(this,{ts:S})]:[this]}get isInLeapYear(){return at(this.year)}get daysInMonth(){return Mt(this.year,this.month)}get daysInYear(){return this.isValid?xe(this.year):NaN}get weeksInWeekYear(){return this.isValid?ot(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?ot(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(n={}){const{locale:a,numberingSystem:u,calendar:h}=z.create(this.loc.clone(n),n).resolvedOptions(this);return{locale:a,numberingSystem:u,outputCalendar:h}}toUTC(n=0,a={}){return this.setZone(H.instance(n),a)}toLocal(){return this.setZone(B.defaultZone)}setZone(n,{keepLocalTime:a=!1,keepCalendarTime:u=!1}={}){if(n=pe(n,B.defaultZone),n.equals(this.zone))return this;if(n.isValid){let h=this.ts;if(a||u){const f=n.offset(this.ts),m=this.toObject();[h]=Pt(m,f,n)}return _e(this,{ts:h,zone:n})}else return O.invalid(dt(n))}reconfigure({locale:n,numberingSystem:a,outputCalendar:u}={}){const h=this.loc.clone({locale:n,numberingSystem:a,outputCalendar:u});return _e(this,{loc:h})}setLocale(n){return this.reconfigure({locale:n})}set(n){if(!this.isValid)return this;const a=At(n,cs),{minDaysInFirstWeek:u,startOfWeek:h}=vr(a,this.loc),f=!M(a.weekYear)||!M(a.weekNumber)||!M(a.weekday),m=!M(a.ordinal),y=!M(a.year),b=!M(a.month)||!M(a.day),S=y||b,E=a.weekYear||a.weekNumber;if((S||m)&&E)throw new i("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&m)throw new i("Can't mix ordinal dates with month/day");let F;f?F=br({...kt(this.c,u,h),...a},u,h):M(a.ordinal)?(F={...this.toObject(),...a},M(a.day)&&(F.day=Math.min(Mt(F.year,F.month),F.day))):F=Cr({...an(this.c),...a});const[W,D]=Pt(F,this.o,this.zone);return _e(this,{ts:W,o:D})}plus(n){if(!this.isValid)return this;const a=P.fromDurationLike(n);return _e(this,is(this,a))}minus(n){if(!this.isValid)return this;const a=P.fromDurationLike(n).negate();return _e(this,is(this,a))}startOf(n,{useLocaleWeeks:a=!1}={}){if(!this.isValid)return this;const u={},h=P.normalizeUnit(n);switch(h){case"years":u.month=1;case"quarters":case"months":u.day=1;case"weeks":case"days":u.hour=0;case"hours":u.minute=0;case"minutes":u.second=0;case"seconds":u.millisecond=0;break}if(h==="weeks")if(a){const f=this.loc.getStartOfWeek(),{weekday:m}=this;m<f&&(u.weekNumber=this.weekNumber-1),u.weekday=f}else u.weekday=1;if(h==="quarters"){const f=Math.ceil(this.month/3);u.month=(f-1)*3+1}return this.set(u)}endOf(n,a){return this.isValid?this.plus({[n]:1}).startOf(n,a).minus(1):this}toFormat(n,a={}){return this.isValid?z.create(this.loc.redefaultToEN(a)).formatDateTimeFromString(this,n):pn}toLocaleString(n=v,a={}){return this.isValid?z.create(this.loc.clone(a),n).formatDateTime(this):pn}toLocaleParts(n={}){return this.isValid?z.create(this.loc.clone(n),n).formatDateTimeParts(this):[]}toISO({format:n="extended",suppressSeconds:a=!1,suppressMilliseconds:u=!1,includeOffset:h=!0,extendedZone:f=!1}={}){if(!this.isValid)return null;const m=n==="extended";let y=wn(this,m);return y+="T",y+=as(this,m,a,u,h,f),y}toISODate({format:n="extended"}={}){return this.isValid?wn(this,n==="extended"):null}toISOWeekDate(){return Lt(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:n=!1,suppressSeconds:a=!1,includeOffset:u=!0,includePrefix:h=!1,extendedZone:f=!1,format:m="extended"}={}){return this.isValid?(h?"T":"")+as(this,m==="extended",a,n,u,f):null}toRFC2822(){return Lt(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Lt(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?wn(this,!0):null}toSQLTime({includeOffset:n=!0,includeZone:a=!1,includeOffsetSpace:u=!0}={}){let h="HH:mm:ss.SSS";return(a||n)&&(u&&(h+=" "),a?h+="z":n&&(h+="ZZ")),Lt(this,h,!0)}toSQL(n={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(n)}`:null}toString(){return this.isValid?this.toISO():pn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(n={}){if(!this.isValid)return{};const a={...this.c};return n.includeConfig&&(a.outputCalendar=this.outputCalendar,a.numberingSystem=this.loc.numberingSystem,a.locale=this.loc.locale),a}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(n,a="milliseconds",u={}){if(!this.isValid||!n.isValid)return P.invalid("created by diffing an invalid DateTime");const h={locale:this.locale,numberingSystem:this.numberingSystem,...u},f=ra(a).map(P.normalizeUnit),m=n.valueOf()>this.valueOf(),y=m?this:n,b=m?n:this,S=oo(y,b,f,h);return m?S.negate():S}diffNow(n="milliseconds",a={}){return this.diff(O.now(),n,a)}until(n){return this.isValid?U.fromDateTimes(this,n):this}hasSame(n,a,u){if(!this.isValid)return!1;const h=n.valueOf(),f=this.setZone(n.zone,{keepLocalTime:!0});return f.startOf(a,u)<=h&&h<=f.endOf(a,u)}equals(n){return this.isValid&&n.isValid&&this.valueOf()===n.valueOf()&&this.zone.equals(n.zone)&&this.loc.equals(n.loc)}toRelative(n={}){if(!this.isValid)return null;const a=n.base||O.fromObject({},{zone:this.zone}),u=n.padding?this<a?-n.padding:n.padding:0;let h=["years","months","days","hours","minutes","seconds"],f=n.unit;return Array.isArray(n.unit)&&(h=n.unit,f=void 0),hs(a,this.plus(u),{...n,numeric:"always",units:h,unit:f})}toRelativeCalendar(n={}){return this.isValid?hs(n.base||O.fromObject({},{zone:this.zone}),this,{...n,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...n){if(!n.every(O.isDateTime))throw new l("min requires all arguments be DateTimes");return kr(n,a=>a.valueOf(),Math.min)}static max(...n){if(!n.every(O.isDateTime))throw new l("max requires all arguments be DateTimes");return kr(n,a=>a.valueOf(),Math.max)}static fromFormatExplain(n,a,u={}){const{locale:h=null,numberingSystem:f=null}=u,m=$.fromOpts({locale:h,numberingSystem:f,defaultToEN:!0});return ns(m,n,a)}static fromStringExplain(n,a,u={}){return O.fromFormatExplain(n,a,u)}static buildFormatParser(n,a={}){const{locale:u=null,numberingSystem:h=null}=a,f=$.fromOpts({locale:u,numberingSystem:h,defaultToEN:!0});return new ts(f,n)}static fromFormatParser(n,a,u={}){if(M(n)||M(a))throw new l("fromFormatParser requires an input string and a format parser");const{locale:h=null,numberingSystem:f=null}=u,m=$.fromOpts({locale:h,numberingSystem:f,defaultToEN:!0});if(!m.equals(a.locale))throw new l(`fromFormatParser called with a locale of ${m}, but the format parser was created for ${a.locale}`);const{result:y,zone:b,specificOffset:S,invalidReason:E}=a.explainFromTokens(n);return E?O.invalid(E):He(y,b,u,`format ${a.format}`,n,S)}static get DATE_SHORT(){return v}static get DATE_MED(){return T}static get DATE_MED_WITH_WEEKDAY(){return A}static get DATE_FULL(){return _}static get DATE_HUGE(){return k}static get TIME_SIMPLE(){return R}static get TIME_WITH_SECONDS(){return N}static get TIME_WITH_SHORT_OFFSET(){return G}static get TIME_WITH_LONG_OFFSET(){return Y}static get TIME_24_SIMPLE(){return V}static get TIME_24_WITH_SECONDS(){return Pe}static get TIME_24_WITH_SHORT_OFFSET(){return ne}static get TIME_24_WITH_LONG_OFFSET(){return ae}static get DATETIME_SHORT(){return rt}static get DATETIME_SHORT_WITH_SECONDS(){return It}static get DATETIME_MED(){return Qn}static get DATETIME_MED_WITH_SECONDS(){return Jn}static get DATETIME_MED_WITH_WEEKDAY(){return Ni}static get DATETIME_FULL(){return Kn}static get DATETIME_FULL_WITH_SECONDS(){return Xn}static get DATETIME_HUGE(){return er}static get DATETIME_HUGE_WITH_SECONDS(){return tr}}function mt(o){if(O.isDateTime(o))return o;if(o&&o.valueOf&&ge(o.valueOf()))return O.fromJSDate(o);if(o&&typeof o=="object")return O.fromObject(o);throw new l(`Unknown datetime argument: ${o}, of type ${typeof o}`)}const Mo="3.6.1";return Q.DateTime=O,Q.Duration=P,Q.FixedOffsetZone=H,Q.IANAZone=oe,Q.Info=ht,Q.Interval=U,Q.InvalidZone=ir,Q.Settings=B,Q.SystemZone=st,Q.VERSION=Mo,Q.Zone=Le,Q}var _n={},$s;function Lc(){return $s||($s=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.RE_RANGE=s.RE_WILDCARDS=s.PRESETS=s.TIME_UNITS_LEN=s.TIME_UNITS=s.TIME_UNITS_MAP=s.ALIASES=s.PARSE_DEFAULTS=s.CONSTRAINTS=void 0,s.CONSTRAINTS=Object.freeze({second:[0,59],minute:[0,59],hour:[0,23],dayOfMonth:[1,31],month:[1,12],dayOfWeek:[0,7]}),s.PARSE_DEFAULTS=Object.freeze({second:"0",minute:"*",hour:"*",dayOfMonth:"*",month:"*",dayOfWeek:"*"}),s.ALIASES=Object.freeze({jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}),s.TIME_UNITS_MAP=Object.freeze({SECOND:"second",MINUTE:"minute",HOUR:"hour",DAY_OF_MONTH:"dayOfMonth",MONTH:"month",DAY_OF_WEEK:"dayOfWeek"}),s.TIME_UNITS=Object.freeze(Object.values(s.TIME_UNITS_MAP)),s.TIME_UNITS_LEN=s.TIME_UNITS.length,s.PRESETS=Object.freeze({"@yearly":"0 0 0 1 1 *","@monthly":"0 0 0 1 * *","@weekly":"0 0 0 * * 0","@daily":"0 0 0 * * *","@hourly":"0 0 * * * *","@minutely":"0 * * * * *","@secondly":"* * * * * *","@weekdays":"0 0 0 * * 1-5","@weekends":"0 0 0 * * 0,6"}),s.RE_WILDCARDS=/\*/g,s.RE_RANGE=/^(\d+)(?:-(\d+))?(?:\/(\d+))?$/g}(_n)),_n}var Me={},xs;function Si(){if(xs)return Me;xs=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.ExclusiveParametersError=Me.CronError=void 0;class s extends Error{}Me.CronError=s;class e extends s{constructor(r,i){super(`You can't specify both ${r} and ${i}`)}}return Me.ExclusiveParametersError=e,Me}var Bs;function Bn(){if(Bs)return bt;Bs=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.CronTime=void 0;const s=Pc(),e=Lc(),t=Si();class r{constructor(c,l,p){if(this.realDate=!1,this.second={},this.minute={},this.hour={},this.dayOfMonth={},this.month={},this.dayOfWeek={},l!=null&&p!=null)throw new t.ExclusiveParametersError("timeZone","utcOffset");if(l){if(!s.DateTime.fromObject({},{zone:l}).isValid)throw new t.CronError("Invalid timezone.");this.timeZone=l}if(p!=null&&(this.utcOffset=p),l==null&&p==null){const d=Intl.DateTimeFormat().resolvedOptions().timeZone;this.timeZone=d}c instanceof Date||c instanceof s.DateTime?(this.source=c instanceof Date?s.DateTime.fromJSDate(c):c,this.realDate=!0):(this.source=c,this._parse(this.source))}static validateCronExpression(c){try{return new r(c),{valid:!0}}catch(l){return{valid:!1,error:l}}}_getWeekDay(c){return c.weekday===7?0:c.weekday}sendAt(c){let l=this.realDate&&this.source instanceof s.DateTime?this.source:s.DateTime.utc();if(this.timeZone&&(l=l.setZone(this.timeZone)),this.utcOffset!==void 0){const p=this.utcOffset<0?"-":"+",d=Math.trunc(this.utcOffset/60),g=String(Math.abs(d)).padStart(2,"0"),C=Math.abs(this.utcOffset-d*60),v=String(C).padStart(2,"0"),T=`UTC${p}${g}:${v}`;if(l=l.setZone(T),!l.isValid)throw new t.CronError("ERROR: You specified an invalid UTC offset.")}if(this.realDate){if(s.DateTime.local()>l)throw new t.CronError("WARNING: Date in past. Will never be fired.");return l}if(c===void 0||isNaN(c)||c<0)return this.getNextDateFrom(l);{const p=[];for(;c>0;c--)l=this.getNextDateFrom(l),p.push(l);return p}}getTimeout(){return this.sendAt().toMillis()-s.DateTime.local().toMillis()}toString(){return this.toJSON().join(" ")}toJSON(){return e.TIME_UNITS.map(c=>this._wcOrAll(c))}getNextDateFrom(c,l){var p,d;c instanceof Date&&(c=s.DateTime.fromJSDate(c)),l?c=c.setZone(l):l=(p=c.zone.zoneName)!==null&&p!==void 0?p:c.zone.fixed;let g=s.DateTime.fromFormat(`${c.year}-${c.month}-${c.day} ${c.hour}:${c.minute}:${c.second}`,"yyyy-M-d H:m:s",{zone:"UTC"});const C=g.toMillis();if(this.realDate||g.millisecond>0&&(g=g.set({millisecond:0,second:g.second+1})),!g.isValid)throw new t.CronError("ERROR: You specified an invalid date.");const v=s.DateTime.now().plus({years:8});for(;;){if(g>v)throw new t.CronError(`Something went wrong. No execution date was found in the next 8 years.
							Please provide the following string if you would like to help debug:
							Time Zone: ${(d=l==null?void 0:l.toString())!==null&&d!==void 0?d:'""'} - Cron String: ${this.source.toString()} - UTC offset: ${g.offset} - current Date: ${s.DateTime.local().toString()}`);if(!(g.month in this.month)&&Object.keys(this.month).length!==12){g=g.plus({month:1}),g=g.set({day:1,hour:0,minute:0,second:0});continue}if(!(g.day in this.dayOfMonth)&&Object.keys(this.dayOfMonth).length!==31&&!(this._getWeekDay(g)in this.dayOfWeek&&Object.keys(this.dayOfWeek).length!==7)||!(this._getWeekDay(g)in this.dayOfWeek)&&Object.keys(this.dayOfWeek).length!==7&&!(g.day in this.dayOfMonth&&Object.keys(this.dayOfMonth).length!==31)){g=g.plus({days:1}),g=g.set({hour:0,minute:0,second:0});continue}if(!(g.hour in this.hour)&&Object.keys(this.hour).length!==24){g=g.plus({hour:1}),g=g.set({minute:0,second:0});continue}if(!(g.minute in this.minute)&&Object.keys(this.minute).length!==60){g=g.plus({minute:1}),g=g.set({second:0});continue}if(g.toMillis()===C||!(g.second in this.second)&&Object.keys(this.second).length!==60){g=g.plus({second:1});continue}break}const T=g.hour,A=g.minute;g=s.DateTime.fromFormat(`${g.year}-${g.month}-${g.day} ${g.hour}:${g.minute}:${g.second}`,"yyyy-M-d H:m:s",{zone:l});const _=s.DateTime.fromFormat(`${g.year}-1-1 0:0:0`,"yyyy-M-d H:m:s",{zone:l});if((T!==g.hour||A!==g.minute)&&_.offset!==g.offset){for(;g.minus({minute:1}).offset!==_.offset;)g=g.minus({minute:1});return g}const k=g.minus({hour:1}),R=g.minus({hour:2});(k.hour===g.hour||R.hour===k.hour)&&k>c&&(g=k);const N=g.minus({minute:30});return(N.minute===g.minute||k.minute===N.minute)&&N>c&&(g=N),g}_wcOrAll(c){if(this._hasAll(c))return"*";const l=[];for(const p in this[c])l.push(p);return l.join(",")}_hasAll(c){const l=e.CONSTRAINTS[c],p=l[0],d=c===e.TIME_UNITS_MAP.DAY_OF_WEEK?l[1]-1:l[1];for(let g=p,C=d;g<C;g++)if(!(g in this[c]))return!1;return!0}_parse(c){var l;c=c.toLowerCase(),Object.keys(e.PRESETS).includes(c)&&(c=e.PRESETS[c]),c=c.replace(/[a-z]{1,3}/gi,g=>{if(Object.keys(e.ALIASES).includes(g))return e.ALIASES[g].toString();throw new t.CronError(`Unknown alias: ${g}`)});const p=c.trim().split(/\s+/);if(p.length<e.TIME_UNITS_LEN-1)throw new t.CronError("Too few fields");if(p.length>e.TIME_UNITS_LEN)throw new t.CronError("Too many fields");const d=p.length;for(const g of e.TIME_UNITS){const C=e.TIME_UNITS.indexOf(g),v=(l=p[C-(e.TIME_UNITS_LEN-d)])!==null&&l!==void 0?l:e.PARSE_DEFAULTS[g];this._parseField(v,g)}}_parseField(c,l){const p=this[l];let d;const g=e.CONSTRAINTS[l],C=g[0],v=g[1];c.split(",").forEach(_=>{const k=_.indexOf("*");if(k!==-1&&k!==0)throw new t.CronError(`Field (${_}) has an invalid wildcard expression`)}),c=c.replace(e.RE_WILDCARDS,`${C}-${v}`);const A=c.split(",");for(const _ of A){const k=[..._.matchAll(e.RE_RANGE)][0];if((k==null?void 0:k[1])!==void 0){const[,R,N,G]=k;let Y=parseInt(R,10),V=N!==void 0?parseInt(N,10):void 0;const Pe=G!==void 0,ne=parseInt(G??"1",10);if(ne===0)throw new t.CronError(`Field (${l}) has a step of zero`);if(V!==void 0&&Y>V)throw new t.CronError(`Field (${l}) has an invalid range`);if(Y<C||V!==void 0&&V>v||V===void 0&&Y>v)throw new t.CronError(`Field value (${c}) is out of range`);Y=Math.min(Math.max(C,~~Math.abs(Y)),v),V!==void 0?V=Math.min(v,~~Math.abs(V)):V=Pe?v:Y,d=Y;do p[d]=!0,d+=ne;while(d<=V);l==="dayOfWeek"&&(!p[0]&&p[7]&&(p[0]=p[7]),delete p[7])}else throw new t.CronError(`Field (${l}) cannot be parsed`)}}}return bt.CronTime=r,bt}var Oe={};const $c={},xc=Object.freeze(Object.defineProperty({__proto__:null,default:$c},Symbol.toStringTag,{value:"Module"})),Bc=Rc(xc);var Us;function Uc(){if(Us)return Oe;Us=1;var s=Oe&&Oe.__awaiter||function(c,l,p,d){function g(C){return C instanceof p?C:new p(function(v){v(C)})}return new(p||(p=Promise))(function(C,v){function T(k){try{_(d.next(k))}catch(R){v(R)}}function A(k){try{_(d.throw(k))}catch(R){v(R)}}function _(k){k.done?C(k.value):g(k.value).then(T,A)}_((d=d.apply(c,l||[])).next())})};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.CronJob=void 0;const e=Bc,t=Si(),r=Bn();class i{get isActive(){return this._isActive}get isCallbackRunning(){return this._isCallbackRunning}constructor(l,p,d,g,C,v,T,A,_,k,R,N,G){if(this.unrefTimeout=!1,this.lastExecution=null,this.runOnce=!1,this.waitForCompletion=!1,this.threshold=250,this._isActive=!1,this._isCallbackRunning=!1,this._callbacks=[],this.context=v??this,this.waitForCompletion=!!k,this.errorHandler=R,C!=null&&A!=null)throw new t.ExclusiveParametersError("timeZone","utcOffset");C!=null?this.cronTime=new r.CronTime(l,C,null):A!=null?this.cronTime=new r.CronTime(l,null,A):this.cronTime=new r.CronTime(l,C,A),_!=null&&(this.unrefTimeout=_),d!=null&&(this.onComplete=this._fnWrap(d)),G!=null&&(this.threshold=Math.abs(G)),N!=null&&(this.name=N),this.cronTime.realDate&&(this.runOnce=!0),this.addCallback(this._fnWrap(p)),T&&(this.lastExecution=new Date,this.fireOnTick()),g&&this.start()}static from(l){if(l.timeZone!=null&&l.utcOffset!=null)throw new t.ExclusiveParametersError("timeZone","utcOffset");return l.timeZone!=null?new i(l.cronTime,l.onTick,l.onComplete,l.start,l.timeZone,l.context,l.runOnInit,l.utcOffset,l.unrefTimeout,l.waitForCompletion,l.errorHandler,l.name,l.threshold):l.utcOffset!=null?new i(l.cronTime,l.onTick,l.onComplete,l.start,null,l.context,l.runOnInit,l.utcOffset,l.unrefTimeout,l.waitForCompletion,l.errorHandler,l.name,l.threshold):new i(l.cronTime,l.onTick,l.onComplete,l.start,l.timeZone,l.context,l.runOnInit,l.utcOffset,l.unrefTimeout,l.waitForCompletion,l.errorHandler,l.name,l.threshold)}_fnWrap(l){var p,d;switch(typeof l){case"function":return l;case"string":{const[g,...C]=l.split(" ");return e.spawn.bind(void 0,g??l,C,{})}case"object":return e.spawn.bind(void 0,l.command,(p=l.args)!==null&&p!==void 0?p:[],(d=l.options)!==null&&d!==void 0?d:{})}}addCallback(l){typeof l=="function"&&this._callbacks.push(l)}setTime(l){if(!(l instanceof r.CronTime))throw new t.CronError("time must be an instance of CronTime.");const p=this._isActive;this.stop(),this.cronTime=l,l.realDate&&(this.runOnce=!0),p&&this.start()}nextDate(){return this.cronTime.sendAt()}fireOnTick(){return s(this,void 0,void 0,function*(){if(!(this.waitForCompletion&&this._isCallbackRunning)){this._isCallbackRunning=!0;try{for(const l of this._callbacks){const p=l.call(this.context,this.onComplete);this.waitForCompletion&&(yield p)}}catch(l){this.errorHandler!=null?this.errorHandler(l):console.error("[Cron] error in callback",l)}finally{this._isCallbackRunning=!1}}})}nextDates(l){return this.cronTime.sendAt(l??0)}start(){if(this._isActive)return;this._isActive=!0;const l=2147483647;let p=this.cronTime.getTimeout(),d=0,g;const C=T=>{g=Date.now(),this._timeout=setTimeout(v,T),this.unrefTimeout&&typeof this._timeout.unref=="function"&&this._timeout.unref()},v=()=>{const T=g+p-Date.now();if(T>0){let A=this.cronTime.getTimeout();A>T&&(A=T),d+=A}d?(d>l?(d-=l,p=l):(p=d,d=0),C(p)):(this.lastExecution=new Date,this._isActive=!1,this.runOnce||this.start(),this.fireOnTick())};if(p>=0)p>l&&(d=p-l,p=l),C(p);else{const T=Math.abs(p),A=`[Cron] Missed execution deadline by ${T}ms for job${this.name?` "${this.name}"`:""} with cron expression '${String(this.cronTime.source)}'`;T<=this.threshold?(console.warn(`${A}. Executing immediately.`),this.lastExecution=new Date,this.fireOnTick()):console.warn(`${A}. Skipping execution as it exceeds threshold (${this.threshold}ms).`),p=this.cronTime.getTimeout(),C(p)}}lastDate(){return this.lastExecution}_executeOnComplete(){return s(this,void 0,void 0,function*(){if(typeof this.onComplete=="function")try{yield this.onComplete.call(this.context)}catch(l){console.error("[Cron] error in onComplete callback:",l)}})}_waitForJobCompletion(){return s(this,void 0,void 0,function*(){for(;this._isCallbackRunning;)yield new Promise(l=>setTimeout(l,100))})}stop(){if(this._timeout&&clearTimeout(this._timeout),this._isActive=!1,!this.waitForCompletion){this._executeOnComplete();return}return Promise.resolve().then(()=>s(this,void 0,void 0,function*(){yield this._waitForJobCompletion(),yield this._executeOnComplete()}))}}return Oe.CronJob=i,Oe}var Ws;function Wc(){return Ws||(Ws=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.validateCronExpression=s.timeout=s.sendAt=s.CronTime=s.CronJob=void 0;const e=Bn();var t=Uc();Object.defineProperty(s,"CronJob",{enumerable:!0,get:function(){return t.CronJob}});var r=Bn();Object.defineProperty(s,"CronTime",{enumerable:!0,get:function(){return r.CronTime}});const i=l=>new e.CronTime(l).sendAt();s.sendAt=i;const c=l=>new e.CronTime(l).getTimeout();s.timeout=c,s.validateCronExpression=e.CronTime.validateCronExpression}(In)),In}var Vc=Wc();const Ti={},me=new ve;me.use(hc({initial:()=>({isActive:!1})}));me.command("start",async s=>{await s.reply(`Welcome to Daily Pin Bot!

Commands:
/setup [link] [optional message] - Setup daily pin with a link and optional message
/activate - Activate daily pins
/deactivate - Deactivate daily pins
/status - Check current setup status
/help - Show available commands`)});me.command("help",async s=>{await s.reply(`Available commands:
/setup [link] [optional message] - Setup daily pin with a link and optional message
/activate - Activate daily pins
/deactivate - Deactivate daily pins
/status - Check current setup status`)});me.command("setup",async s=>{var i;const e=(i=s.message)==null?void 0:i.text.split(" ");if(!e||e.length<2){await s.reply("Please provide a link to pin");return}const t=e[1],r=e.slice(2).join(" ")||"Daily reminder";s.session.chatId=s.chat.id.toString(),s.session.linkToPin=t,s.session.messageText=r,await s.reply(`Daily pin has been set up with link: ${t}
Message: ${r}`)});me.command("activate",async s=>{if(!s.session.chatId||!s.session.linkToPin){await s.reply("Please set up the bot first using /setup [link] [optional message]");return}s.session.isActive=!0,await s.reply("Daily pins activated! The bot will pin a message every weekday at 8:30 AM.")});me.command("deactivate",async s=>{s.session.isActive=!1,await s.reply("Daily pins deactivated.")});me.command("status",async s=>{const e=s.session.isActive?"Active":"Inactive",t=s.session.linkToPin||"Not set",r=s.session.messageText||"Not set",i=s.session.chatId||"Not set";await s.reply(`Status: ${e}
Link: ${t}
Message: ${r}
Chat ID: ${i}`)});me.on("message",s=>{s.session.isActive&&s.session.chatId&&s.session.linkToPin&&(Ti[s.session.chatId]={isActive:s.session.isActive,linkToPin:s.session.linkToPin,messageText:s.session.messageText,chatId:s.session.chatId})});async function jc(s,e,t,r){try{const i=`${r}
${t}`,c=await s.api.sendMessage(e,i);await s.api.pinChatMessage(e,c.message_id),console.log(`Sent and pinned daily message in chat ${e}`)}catch(i){console.error(`Error sending/pinning message in chat ${e}:`,i)}}function qc(s){const e=new Vc.CronJob("0 30 8 * * 1-5",()=>{console.log("Running daily pin job at 8:30 AM"),Object.values(Ti).forEach(t=>{t.isActive&&t.chatId&&t.linkToPin&&jc(s,t.chatId,t.linkToPin,t.messageText||"Daily reminder")})},null,!0,"UTC");return e.start(),console.log("Daily pin job scheduled for 8:30 AM Monday-Friday"),e}const Gc=()=>{};var Vs={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let i=s.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Hc=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const i=s[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const c=s[t++];e[r++]=String.fromCharCode((i&31)<<6|c&63)}else if(i>239&&i<365){const c=s[t++],l=s[t++],p=s[t++],d=((i&7)<<18|(c&63)<<12|(l&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const c=s[t++],l=s[t++];e[r++]=String.fromCharCode((i&15)<<12|(c&63)<<6|l&63)}}return e.join("")},_i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<s.length;i+=3){const c=s[i],l=i+1<s.length,p=l?s[i+1]:0,d=i+2<s.length,g=d?s[i+2]:0,C=c>>2,v=(c&3)<<4|p>>4;let T=(p&15)<<2|g>>6,A=g&63;d||(A=64,l||(T=64)),r.push(t[C],t[v],t[T],t[A])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Ii(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Hc(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<s.length;){const c=t[s.charAt(i++)],p=i<s.length?t[s.charAt(i)]:0;++i;const g=i<s.length?t[s.charAt(i)]:64;++i;const v=i<s.length?t[s.charAt(i)]:64;if(++i,c==null||p==null||g==null||v==null)throw new zc;const T=c<<2|p>>4;if(r.push(T),g!==64){const A=p<<4&240|g>>2;if(r.push(A),v!==64){const _=g<<6&192|v;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class zc extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Zc=function(s){const e=Ii(s);return _i.encodeByteArray(e,!0)},ki=function(s){return Zc(s).replace(/\./g,"")},Yc=function(s){try{return _i.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=()=>Qc().__FIREBASE_DEFAULTS__,Kc=()=>{if(typeof process>"u"||typeof Vs>"u")return;const s=Vs.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Xc=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Yc(s[1]);return e&&JSON.parse(e)},el=()=>{try{return Gc()||Jc()||Kc()||Xc()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},tl=()=>{var s;return(s=el())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function rl(){try{return typeof indexedDB=="object"}catch{return!1}}function sl(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var c;e(((c=i.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="FirebaseError";class Tt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=il,Object.setPrototypeOf(this,Tt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ei.prototype.create)}}class Ei{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,c=this.errors[e],l=c?al(c,r):"Error",p=`${this.serviceName}: ${l} (${i}).`;return new Tt(i,p,r)}}function al(s,e){return s.replace(ol,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ol=/\{\$([^}]+)}/g;function Un(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const c=s[i],l=e[i];if(js(c)&&js(l)){if(!Un(c,l))return!1}else if(c!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function js(s){return s!==null&&typeof s=="object"}class qt{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const De="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new nl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(i)return null;throw c}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ll(e))try{this.getOrInitializeService({instanceIdentifier:De})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:i});r.resolve(c)}catch{}}}}clearInstance(e=De){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=De){return this.instances.has(e)}getOptions(e=De){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,l]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&l.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),c=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;c.add(e),this.onInitCallbacks.set(i,c);const l=this.instances.get(i);return l&&e(l,i),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cl(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=De){return this.component?this.component.multipleInstances?e:De:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cl(s){return s===De?void 0:s}function ll(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ul(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(x||(x={}));const dl={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},fl=x.INFO,ml={[x.DEBUG]:"log",[x.VERBOSE]:"log",[x.INFO]:"info",[x.WARN]:"warn",[x.ERROR]:"error"},pl=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),i=ml[e];if(i)console[i](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gl{constructor(e){this.name=e,this._logLevel=fl,this._logHandler=pl,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in x))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dl[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,x.DEBUG,...e),this._logHandler(this,x.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,x.VERBOSE,...e),this._logHandler(this,x.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,x.INFO,...e),this._logHandler(this,x.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,x.WARN,...e),this._logHandler(this,x.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,x.ERROR,...e),this._logHandler(this,x.ERROR,...e)}}const yl=(s,e)=>e.some(t=>s instanceof t);let qs,Gs;function wl(){return qs||(qs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bl(){return Gs||(Gs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mi=new WeakMap,Wn=new WeakMap,Oi=new WeakMap,kn=new WeakMap,Yn=new WeakMap;function Cl(s){const e=new Promise((t,r)=>{const i=()=>{s.removeEventListener("success",c),s.removeEventListener("error",l)},c=()=>{t(Se(s.result)),i()},l=()=>{r(s.error),i()};s.addEventListener("success",c),s.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Mi.set(t,s)}).catch(()=>{}),Yn.set(e,s),e}function vl(s){if(Wn.has(s))return;const e=new Promise((t,r)=>{const i=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",l),s.removeEventListener("abort",l)},c=()=>{t(),i()},l=()=>{r(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",c),s.addEventListener("error",l),s.addEventListener("abort",l)});Wn.set(s,e)}let Vn={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Wn.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Oi.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Se(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Sl(s){Vn=s(Vn)}function Tl(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(En(this),e,...t);return Oi.set(r,e.sort?e.sort():[e]),Se(r)}:bl().includes(s)?function(...e){return s.apply(En(this),e),Se(Mi.get(this))}:function(...e){return Se(s.apply(En(this),e))}}function Il(s){return typeof s=="function"?Tl(s):(s instanceof IDBTransaction&&vl(s),yl(s,wl())?new Proxy(s,Vn):s)}function Se(s){if(s instanceof IDBRequest)return Cl(s);if(kn.has(s))return kn.get(s);const e=Il(s);return e!==s&&(kn.set(s,e),Yn.set(e,s)),e}const En=s=>Yn.get(s);function _l(s,e,{blocked:t,upgrade:r,blocking:i,terminated:c}={}){const l=indexedDB.open(s,e),p=Se(l);return r&&l.addEventListener("upgradeneeded",d=>{r(Se(l.result),d.oldVersion,d.newVersion,Se(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),p.then(d=>{c&&d.addEventListener("close",()=>c()),i&&d.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const kl=["get","getKey","getAll","getAllKeys","count"],El=["put","add","delete","clear"],Mn=new Map;function Hs(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Mn.get(e))return Mn.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=El.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kl.includes(t)))return;const c=async function(l,...p){const d=this.transaction(l,i?"readwrite":"readonly");let g=d.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[t](...p),i&&d.done]))[0]};return Mn.set(e,c),c}Sl(s=>({...s,get:(e,t,r)=>Hs(e,t)||s.get(e,t,r),has:(e,t)=>!!Hs(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ol(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Ol(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jn="@firebase/app",zs="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe=new gl("@firebase/app"),Dl="@firebase/app-compat",Al="@firebase/analytics-compat",Nl="@firebase/analytics",Fl="@firebase/app-check-compat",Rl="@firebase/app-check",Pl="@firebase/auth",Ll="@firebase/auth-compat",$l="@firebase/database",xl="@firebase/data-connect",Bl="@firebase/database-compat",Ul="@firebase/functions",Wl="@firebase/functions-compat",Vl="@firebase/installations",jl="@firebase/installations-compat",ql="@firebase/messaging",Gl="@firebase/messaging-compat",Hl="@firebase/performance",zl="@firebase/performance-compat",Zl="@firebase/remote-config",Yl="@firebase/remote-config-compat",Ql="@firebase/storage",Jl="@firebase/storage-compat",Kl="@firebase/firestore",Xl="@firebase/vertexai",eh="@firebase/firestore-compat",th="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="[DEFAULT]",rh={[jn]:"fire-core",[Dl]:"fire-core-compat",[Nl]:"fire-analytics",[Al]:"fire-analytics-compat",[Rl]:"fire-app-check",[Fl]:"fire-app-check-compat",[Pl]:"fire-auth",[Ll]:"fire-auth-compat",[$l]:"fire-rtdb",[xl]:"fire-data-connect",[Bl]:"fire-rtdb-compat",[Ul]:"fire-fn",[Wl]:"fire-fn-compat",[Vl]:"fire-iid",[jl]:"fire-iid-compat",[ql]:"fire-fcm",[Gl]:"fire-fcm-compat",[Hl]:"fire-perf",[zl]:"fire-perf-compat",[Zl]:"fire-rc",[Yl]:"fire-rc-compat",[Ql]:"fire-gcs",[Jl]:"fire-gcs-compat",[Kl]:"fire-fst",[eh]:"fire-fst-compat",[Xl]:"fire-vertex","fire-js":"fire-js",[th]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=new Map,sh=new Map,Gn=new Map;function Zs(s,e){try{s.container.addComponent(e)}catch(t){fe.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Hn(s){const e=s.name;if(Gn.has(e))return fe.debug(`There were multiple attempts to register component ${e}.`),!1;Gn.set(e,s);for(const t of qn.values())Zs(t,s);for(const t of sh.values())Zs(t,s);return!0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ne=new Ei("app","Firebase",ih);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ne.create("app-deleted",{appName:this._name})}}function oh(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:nh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ne.create("bad-app-name",{appName:String(i)});if(t||(t=tl()),!t)throw Ne.create("no-options");const c=qn.get(i);if(c){if(Un(t,c.options)&&Un(r,c.config))return c;throw Ne.create("duplicate-app",{appName:i})}const l=new hl(i);for(const d of Gn.values())l.addComponent(d);const p=new ah(t,r,l);return qn.set(i,p),p}function Vt(s,e,t){var r;let i=(r=rh[s])!==null&&r!==void 0?r:s;t&&(i+=`-${t}`);const c=i.match(/\s|\//),l=e.match(/\s|\//);if(c||l){const p=[`Unable to register library "${i}" with version "${e}":`];c&&p.push(`library name "${i}" contains illegal characters (whitespace or "/")`),c&&l&&p.push("and"),l&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fe.warn(p.join(" "));return}Hn(new qt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="firebase-heartbeat-database",ch=1,St="firebase-heartbeat-store";let On=null;function Di(){return On||(On=_l(uh,ch,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(St)}catch(t){console.warn(t)}}}}).catch(s=>{throw Ne.create("idb-open",{originalErrorMessage:s.message})})),On}async function lh(s){try{const t=(await Di()).transaction(St),r=await t.objectStore(St).get(Ai(s));return await t.done,r}catch(e){if(e instanceof Tt)fe.warn(e.message);else{const t=Ne.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fe.warn(t.message)}}}async function Ys(s,e){try{const r=(await Di()).transaction(St,"readwrite");await r.objectStore(St).put(e,Ai(s)),await r.done}catch(t){if(t instanceof Tt)fe.warn(t.message);else{const r=Ne.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fe.warn(r.message)}}}function Ai(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=1024,dh=30;class fh{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ph(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Qs();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(l=>l.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:i}),this._heartbeatsCache.heartbeats.length>dh){const l=gh(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fe.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Qs(),{heartbeatsToSend:r,unsentEntries:i}=mh(this._heartbeatsCache.heartbeats),c=ki(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return fe.warn(t),""}}}function Qs(){return new Date().toISOString().substring(0,10)}function mh(s,e=hh){const t=[];let r=s.slice();for(const i of s){const c=t.find(l=>l.agent===i.agent);if(c){if(c.dates.push(i.date),Js(t)>e){c.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Js(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ph{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rl()?sl().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lh(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ys(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ys(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Js(s){return ki(JSON.stringify({version:2,heartbeats:s})).length}function gh(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(s){Hn(new qt("platform-logger",e=>new Ml(e),"PRIVATE")),Hn(new qt("heartbeat",e=>new fh(e),"PRIVATE")),Vt(jn,zs,s),Vt(jn,zs,"esm2017"),Vt("fire-js","")}yh("");var wh="firebase",bh="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vt(wh,bh,"app");const Ch="7573346578:AAE2sRABKwfcYyv4j-TecH-HjrSvxnvkGeg",vh=Ch,Je=new oc(vh);Je.use(me);async function Ks(s){const e=s,t=await Fc(e),r=await Ac({chunks:t,query:e});return console.log("Completion:",r),r}async function Sh(){console.log("init ...");try{console.log("starting ..."),await Je.start(),console.log("Bot started"),Je.on("message:text",async s=>{s.reply(await Ks(s.message.text))}),Je.hears(/chat *(.+)?/,async s=>{var e;console.log(s,"ctx"),console.log(s.message,"ctx.message"),(e=s.message)!=null&&e.text&&s.reply(await Ks(s.message.text))}),Je.command("chat",async s=>{await s.reply("Hi! I can only read messages that explicitly reply to me!",{reply_markup:{force_reply:!0}})}),qc(Je)}catch(s){console.error("Failed to start the bot:",s)}}const Th={apiKey:"AIzaSyAcUmZKxPKECtpJNXmgqTuRl4-cpUKiuSU",authDomain:"test-bot-app-799e1.firebaseapp.com",projectId:"test-bot-app-799e1",storageBucket:"test-bot-app-799e1.firebasestorage.app",messagingSenderId:"107447802957",appId:"1:107447802957:web:96478207fb609157005004",measurementId:"G-8EWP5E4X9Z"};oh(Th);const Ih=async()=>{await Sh()};Ih();
