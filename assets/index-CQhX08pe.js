var No=Object.defineProperty;var Fo=(s,e,t)=>e in s?No(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var D=(s,e,t)=>Fo(s,typeof e!="symbol"?e+"":e,t);import Ro from".prisma/client/index-browser";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();const ys=new Map;function Po(s){const e=Array.isArray(s)?s:[s],t=e.join(","),r=ys.get(t)??(()=>{const a=ei(e),c=$o(a);return ys.set(t,c),c})();return a=>r(a)}function ei(s){return Array.isArray(s)?s.map(e=>e.split(":")):[s.split(":")]}function $o(s){const e=s.flatMap(a=>Lo(a,ti(a))),t=Bo(e),r=Uo(t);return a=>!!r(a.update,a)}function ti(s){const e=Wt,t=[s].flatMap(r=>{const[a,c,l]=r;if(!(a in Is))return[r];if(!a&&!c&&!l)return[r];const f=Is[a].map(g=>[g,c,l]);return c===void 0||c in Sn&&(c||l)?f:f.filter(([g])=>{var C;return!!((C=e[g])!=null&&C[c])})}).flatMap(r=>{const[a,c,l]=r;if(!(c in Sn))return[r];if(!c&&!l)return[r];const f=Sn[c].map(g=>[a,g,l]);return l===void 0?f:f.filter(([,g])=>{var C,v;return!!((v=(C=e[a])==null?void 0:C[g])!=null&&v[l])})});if(t.length===0)throw new Error(`Shortcuts in '${s.join(":")}' do not expand to any valid filter query`);return t}function Lo(s,e){if(e.length===0)throw new Error("Empty filter query given");const t=e.map(xo).filter(r=>r!==!0);if(t.length===0)return e;throw t.length===1?new Error(t[0]):new Error(`Invalid filter query '${s.join(":")}'. There are ${t.length} errors after expanding the contained shortcuts: ${t.join("; ")}`)}function xo(s){const[e,t,r,...a]=s;if(e===void 0)return"Empty filter query given";if(!(e in Wt)){const p=Object.keys(Wt);return`Invalid L1 filter '${e}' given in '${s.join(":")}'. Permitted values are: ${p.map(f=>`'${f}'`).join(", ")}.`}if(t===void 0)return!0;const c=Wt[e];if(!(t in c)){const p=Object.keys(c);return`Invalid L2 filter '${t}' given in '${s.join(":")}'. Permitted values are: ${p.map(f=>`'${f}'`).join(", ")}.`}if(r===void 0)return!0;const l=c[t];if(!(r in l)){const p=Object.keys(l);return`Invalid L3 filter '${r}' given in '${s.join(":")}'. ${p.length===0?`No further filtering is possible after '${e}:${t}'.`:`Permitted values are: ${p.map(f=>`'${f}'`).join(", ")}.`}`}return a.length===0?!0:`Cannot filter further than three levels, ':${a.join(":")}' is invalid!`}function Bo(s){const e={};for(const[t,r,a]of s){const c=e[t]??(e[t]={});if(r!==void 0){const l=c[r]??(c[r]=new Set);a!==void 0&&l.add(a)}}return e}function vn(s,e){return(t,r)=>s(t,r)||e(t,r)}function ws(s,e){return(t,r)=>{const a=s(t,r);return a&&e(a,r)}}function bs(s){return(e,t)=>s(e,t)!=null}function Uo(s){const e=Object.entries(s).map(([t,r])=>{const a=l=>l[t],c=Object.entries(r).map(([l,p])=>{const f=C=>C[l],g=Array.from(p).map(C=>C==="me"?(T,A)=>{const I=A.me.id;return Cs(T,_=>_.id===I)}:T=>Cs(T,A=>A[C]||A.type===C));return g.length===0?bs(f):ws(f,g.reduce(vn))});return c.length===0?bs(a):ws(a,c.reduce(vn))});if(e.length===0)throw new Error("Cannot create filter function for empty query");return e.reduce(vn)}function Cs(s,e){const t=r=>r!=null&&e(r);return Array.isArray(s)?s.some(t):t(s)}const vs={mention:{},hashtag:{},cashtag:{},bot_command:{},url:{},email:{},phone_number:{},bold:{},italic:{},underline:{},strikethrough:{},spoiler:{},blockquote:{},expandable_blockquote:{},code:{},pre:{},text_link:{},text_mention:{},custom_emoji:{}},Nn={me:{},is_bot:{},is_premium:{},added_to_attachment_menu:{}},Wo={user:{},hidden_user:{},chat:{},channel:{}},Vo={is_video:{},is_animated:{},premium_animation:{}},Fn={emoji:{},custom_emoji:{},paid:{}},ni={forward_origin:Wo,is_topic_message:{},is_automatic_forward:{},business_connection_id:{},text:{},animation:{},audio:{},document:{},paid_media:{},photo:{},sticker:Vo,story:{},video:{},video_note:{},voice:{},contact:{},dice:{},game:{},poll:{},venue:{},location:{},entities:vs,caption_entities:vs,caption:{},effect_id:{},paid_star_count:{},has_media_spoiler:{},new_chat_title:{},new_chat_photo:{},delete_chat_photo:{},message_auto_delete_timer_changed:{},pinned_message:{},invoice:{},proximity_alert_triggered:{},chat_background_set:{},giveaway_created:{},giveaway:{only_new_members:{},has_public_winners:{}},giveaway_winners:{only_new_members:{},was_refunded:{}},giveaway_completed:{},gift:{},unique_gift:{},paid_message_price_changed:{},video_chat_scheduled:{},video_chat_started:{},video_chat_ended:{},video_chat_participants_invited:{},web_app_data:{}},xt={...ni,new_chat_members:Nn,left_chat_member:Nn,group_chat_created:{},supergroup_chat_created:{},migrate_to_chat_id:{},migrate_from_chat_id:{},successful_payment:{},refunded_payment:{},users_shared:{},chat_shared:{},connected_website:{},write_access_allowed:{},passport_data:{},boost_added:{},forum_topic_created:{},forum_topic_edited:{name:{},icon_custom_emoji_id:{}},forum_topic_closed:{},forum_topic_reopened:{},general_forum_topic_hidden:{},general_forum_topic_unhidden:{},sender_boost_count:{}},Ss={...ni,channel_chat_created:{}},jo={can_reply:{},is_enabled:{}},qo={old_reaction:Fn,new_reaction:Fn},Ho={reactions:Fn},Go={data:{},game_short_name:{}},Ts={from:Nn},Wt={message:xt,edited_message:xt,channel_post:Ss,edited_channel_post:Ss,business_connection:jo,business_message:xt,edited_business_message:xt,deleted_business_messages:{},inline_query:{},chosen_inline_result:{},callback_query:Go,shipping_query:{},pre_checkout_query:{},poll:{},poll_answer:{},my_chat_member:Ts,chat_member:Ts,chat_join_request:{},message_reaction:qo,message_reaction_count:Ho,chat_boost:{},removed_chat_boost:{},purchased_paid_media:{}},Is={"":["message","channel_post"],msg:["message","channel_post"],edit:["edited_message","edited_channel_post"]},Sn={"":["entities","caption_entities"],media:["photo","video"],file:["photo","animation","audio","document","video","video_note","voice","sticker"]},le={filterQuery(s){const e=Po(s);return t=>e(t)},text(s){const e=le.filterQuery([":text",":caption"]),t=Ee(s);return r=>{if(!e(r))return!1;const a=r.message??r.channelPost,c=a.text??a.caption;return Me(r,c,t)}},command(s){const e=le.filterQuery(":entities:bot_command"),t=new Set,r=new Set;return qt(s).forEach(a=>{if(a.startsWith("/"))throw new Error(`Do not include '/' when registering command handlers (use '${a.substring(1)}' not '${a}')`);(a.includes("@")?t:r).add(a)}),a=>{if(!e(a))return!1;const c=a.message??a.channelPost,l=c.text??c.caption;return c.entities.some(p=>{if(p.type!=="bot_command"||p.offset!==0)return!1;const f=l.substring(1,p.length);if(r.has(f)||t.has(f))return a.match=l.substring(f.length+1).trimStart(),!0;const g=f.indexOf("@");if(g===-1)return!1;const C=f.substring(g+1).toLowerCase(),v=a.me.username.toLowerCase();if(C!==v)return!1;const T=f.substring(0,g);return r.has(T)?(a.match=l.substring(f.length+1).trimStart(),!0):!1})}},reaction(s){const e=le.filterQuery("message_reaction"),t=typeof s=="string"?[{type:"emoji",emoji:s}]:(Array.isArray(s)?s:[s]).map(l=>typeof l=="string"?{type:"emoji",emoji:l}:l),r=new Set(t.filter(l=>l.type==="emoji").map(l=>l.emoji)),a=new Set(t.filter(l=>l.type==="custom_emoji").map(l=>l.custom_emoji_id)),c=t.some(l=>l.type==="paid");return l=>{if(!e(l))return!1;const{old_reaction:p,new_reaction:f}=l.messageReaction;for(const g of f){let C=!1;if(g.type==="emoji"){for(const v of p)if(v.type==="emoji"&&v.emoji===g.emoji){C=!0;break}}else if(g.type==="custom_emoji"){for(const v of p)if(v.type==="custom_emoji"&&v.custom_emoji_id===g.custom_emoji_id){C=!0;break}}else if(g.type==="paid"){for(const v of p)if(v.type==="paid"){C=!0;break}}if(!C)if(g.type==="emoji"){if(r.has(g.emoji))return!0}else if(g.type==="custom_emoji"){if(a.has(g.custom_emoji_id))return!0}else if(g.type==="paid"){if(c)return!0}else return!0}return!1}},chatType(s){const e=new Set(qt(s));return t=>{var r;return((r=t.chat)==null?void 0:r.type)!==void 0&&e.has(t.chat.type)}},callbackQuery(s){const e=le.filterQuery("callback_query:data"),t=Ee(s);return r=>e(r)&&Me(r,r.callbackQuery.data,t)},gameQuery(s){const e=le.filterQuery("callback_query:game_short_name"),t=Ee(s);return r=>e(r)&&Me(r,r.callbackQuery.game_short_name,t)},inlineQuery(s){const e=le.filterQuery("inline_query"),t=Ee(s);return r=>e(r)&&Me(r,r.inlineQuery.query,t)},chosenInlineResult(s){const e=le.filterQuery("chosen_inline_result"),t=Ee(s);return r=>e(r)&&Me(r,r.chosenInlineResult.result_id,t)},preCheckoutQuery(s){const e=le.filterQuery("pre_checkout_query"),t=Ee(s);return r=>e(r)&&Me(r,r.preCheckoutQuery.invoice_payload,t)},shippingQuery(s){const e=le.filterQuery("shipping_query"),t=Ee(s);return r=>e(r)&&Me(r,r.shippingQuery.invoice_payload,t)}},J=class J{constructor(e,t,r){D(this,"update");D(this,"api");D(this,"me");D(this,"match");this.update=e,this.api=t,this.me=r}get message(){return this.update.message}get editedMessage(){return this.update.edited_message}get channelPost(){return this.update.channel_post}get editedChannelPost(){return this.update.edited_channel_post}get businessConnection(){return this.update.business_connection}get businessMessage(){return this.update.business_message}get editedBusinessMessage(){return this.update.edited_business_message}get deletedBusinessMessages(){return this.update.deleted_business_messages}get messageReaction(){return this.update.message_reaction}get messageReactionCount(){return this.update.message_reaction_count}get inlineQuery(){return this.update.inline_query}get chosenInlineResult(){return this.update.chosen_inline_result}get callbackQuery(){return this.update.callback_query}get shippingQuery(){return this.update.shipping_query}get preCheckoutQuery(){return this.update.pre_checkout_query}get poll(){return this.update.poll}get pollAnswer(){return this.update.poll_answer}get myChatMember(){return this.update.my_chat_member}get chatMember(){return this.update.chat_member}get chatJoinRequest(){return this.update.chat_join_request}get chatBoost(){return this.update.chat_boost}get removedChatBoost(){return this.update.removed_chat_boost}get purchasedPaidMedia(){return this.update.purchased_paid_media}get msg(){var e;return this.message??this.editedMessage??this.channelPost??this.editedChannelPost??this.businessMessage??this.editedBusinessMessage??((e=this.callbackQuery)==null?void 0:e.message)}get chat(){var e;return(e=this.msg??this.deletedBusinessMessages??this.messageReaction??this.messageReactionCount??this.myChatMember??this.chatMember??this.chatJoinRequest??this.chatBoost??this.removedChatBoost)==null?void 0:e.chat}get senderChat(){var e;return(e=this.msg)==null?void 0:e.sender_chat}get from(){var e,t,r,a;return((r=this.businessConnection??this.messageReaction??((t=((e=this.chatBoost)==null?void 0:e.boost)??this.removedChatBoost)==null?void 0:t.source))==null?void 0:r.user)??((a=this.callbackQuery??this.msg??this.inlineQuery??this.chosenInlineResult??this.shippingQuery??this.preCheckoutQuery??this.myChatMember??this.chatMember??this.chatJoinRequest??this.purchasedPaidMedia)==null?void 0:a.from)}get msgId(){var e,t,r;return((e=this.msg)==null?void 0:e.message_id)??((t=this.messageReaction)==null?void 0:t.message_id)??((r=this.messageReactionCount)==null?void 0:r.message_id)}get chatId(){var e,t;return((e=this.chat)==null?void 0:e.id)??((t=this.businessConnection)==null?void 0:t.user_chat_id)}get inlineMessageId(){var e,t;return((e=this.callbackQuery)==null?void 0:e.inline_message_id)??((t=this.chosenInlineResult)==null?void 0:t.inline_message_id)}get businessConnectionId(){var e,t,r;return((e=this.msg)==null?void 0:e.business_connection_id)??((t=this.businessConnection)==null?void 0:t.id)??((r=this.deletedBusinessMessages)==null?void 0:r.business_connection_id)}entities(e){const t=this.msg;if(t===void 0)return[];const r=t.text??t.caption;if(r===void 0)return[];let a=t.entities??t.caption_entities;if(a===void 0)return[];if(e!==void 0){const c=new Set(qt(e));a=a.filter(l=>c.has(l.type))}return a.map(c=>({...c,text:r.substring(c.offset,c.offset+c.length)}))}reactions(){const e=[],t=[],r=[],a=[],c=[],l=[],p=[],f=[];let g=!1,C=!1;const v=this.messageReaction;if(v!==void 0){const{old_reaction:T,new_reaction:A}=v;for(const I of A)I.type==="emoji"?e.push(I.emoji):I.type==="custom_emoji"?c.push(I.custom_emoji_id):I.type==="paid"&&(g=C=!0);for(const I of T)I.type==="emoji"?a.push(I.emoji):I.type==="custom_emoji"?f.push(I.custom_emoji_id):I.type==="paid"&&(C=!1);t.push(...e),l.push(...c);for(let I=0;I<a.length;I++){const _=t.length;if(_===0)break;const R=a[I];for(let N=0;N<_;N++)if(R===t[N]){r.push(R),a.splice(I,1),t.splice(N,1),I--;break}}for(let I=0;I<f.length;I++){const _=l.length;if(_===0)break;const R=f[I];for(let N=0;N<_;N++)if(R===l[N]){p.push(R),f.splice(I,1),l.splice(N,1),I--;break}}}return{emoji:e,emojiAdded:t,emojiKept:r,emojiRemoved:a,customEmoji:c,customEmojiAdded:l,customEmojiKept:p,customEmojiRemoved:f,paid:g,paidAdded:C}}has(e){return J.has.filterQuery(e)(this)}hasText(e){return J.has.text(e)(this)}hasCommand(e){return J.has.command(e)(this)}hasReaction(e){return J.has.reaction(e)(this)}hasChatType(e){return J.has.chatType(e)(this)}hasCallbackQuery(e){return J.has.callbackQuery(e)(this)}hasGameQuery(e){return J.has.gameQuery(e)(this)}hasInlineQuery(e){return J.has.inlineQuery(e)(this)}hasChosenInlineResult(e){return J.has.chosenInlineResult(e)(this)}hasPreCheckoutQuery(e){return J.has.preCheckoutQuery(e)(this)}hasShippingQuery(e){return J.has.shippingQuery(e)(this)}reply(e,t,r){return this.api.sendMessage(w(this.chatId,"sendMessage"),e,{business_connection_id:this.businessConnectionId,...t},r)}forwardMessage(e,t,r){return this.api.forwardMessage(e,w(this.chatId,"forwardMessage"),w(this.msgId,"forwardMessage"),t,r)}forwardMessages(e,t,r,a){return this.api.forwardMessages(e,w(this.chatId,"forwardMessages"),t,r,a)}copyMessage(e,t,r){return this.api.copyMessage(e,w(this.chatId,"copyMessage"),w(this.msgId,"copyMessage"),t,r)}copyMessages(e,t,r,a){return this.api.copyMessages(e,w(this.chatId,"copyMessages"),t,r,a)}replyWithPhoto(e,t,r){return this.api.sendPhoto(w(this.chatId,"sendPhoto"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithAudio(e,t,r){return this.api.sendAudio(w(this.chatId,"sendAudio"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithDocument(e,t,r){return this.api.sendDocument(w(this.chatId,"sendDocument"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithVideo(e,t,r){return this.api.sendVideo(w(this.chatId,"sendVideo"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithAnimation(e,t,r){return this.api.sendAnimation(w(this.chatId,"sendAnimation"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithVoice(e,t,r){return this.api.sendVoice(w(this.chatId,"sendVoice"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithVideoNote(e,t,r){return this.api.sendVideoNote(w(this.chatId,"sendVideoNote"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithMediaGroup(e,t,r){return this.api.sendMediaGroup(w(this.chatId,"sendMediaGroup"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithLocation(e,t,r,a){return this.api.sendLocation(w(this.chatId,"sendLocation"),e,t,{business_connection_id:this.businessConnectionId,...r},a)}editMessageLiveLocation(e,t,r,a){const c=this.inlineMessageId;return c!==void 0?this.api.editMessageLiveLocationInline(c,e,t,{business_connection_id:this.businessConnectionId,...r},a):this.api.editMessageLiveLocation(w(this.chatId,"editMessageLiveLocation"),w(this.msgId,"editMessageLiveLocation"),e,t,{business_connection_id:this.businessConnectionId,...r},a)}stopMessageLiveLocation(e,t){const r=this.inlineMessageId;return r!==void 0?this.api.stopMessageLiveLocationInline(r,{business_connection_id:this.businessConnectionId,...e},t):this.api.stopMessageLiveLocation(w(this.chatId,"stopMessageLiveLocation"),w(this.msgId,"stopMessageLiveLocation"),{business_connection_id:this.businessConnectionId,...e},t)}sendPaidMedia(e,t,r,a){return this.api.sendPaidMedia(w(this.chatId,"sendPaidMedia"),e,t,{business_connection_id:this.businessConnectionId,...r},a)}replyWithVenue(e,t,r,a,c,l){return this.api.sendVenue(w(this.chatId,"sendVenue"),e,t,r,a,{business_connection_id:this.businessConnectionId,...c},l)}replyWithContact(e,t,r,a){return this.api.sendContact(w(this.chatId,"sendContact"),e,t,{business_connection_id:this.businessConnectionId,...r},a)}replyWithPoll(e,t,r,a){return this.api.sendPoll(w(this.chatId,"sendPoll"),e,t,{business_connection_id:this.businessConnectionId,...r},a)}replyWithDice(e,t,r){return this.api.sendDice(w(this.chatId,"sendDice"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithChatAction(e,t,r){return this.api.sendChatAction(w(this.chatId,"sendChatAction"),e,{business_connection_id:this.businessConnectionId,...t},r)}react(e,t,r){return this.api.setMessageReaction(w(this.chatId,"setMessageReaction"),w(this.msgId,"setMessageReaction"),typeof e=="string"?[{type:"emoji",emoji:e}]:(Array.isArray(e)?e:[e]).map(a=>typeof a=="string"?{type:"emoji",emoji:a}:a),t,r)}getUserProfilePhotos(e,t){return this.api.getUserProfilePhotos(w(this.from,"getUserProfilePhotos").id,e,t)}setUserEmojiStatus(e,t){return this.api.setUserEmojiStatus(w(this.from,"setUserEmojiStatus").id,e,t)}getUserChatBoosts(e,t){return this.api.getUserChatBoosts(e,w(this.from,"getUserChatBoosts").id,t)}getBusinessConnection(e){return this.api.getBusinessConnection(w(this.businessConnectionId,"getBusinessConnection"),e)}getFile(e){const t=w(this.msg,"getFile"),r=t.photo!==void 0?t.photo[t.photo.length-1]:t.animation??t.audio??t.document??t.video??t.video_note??t.voice??t.sticker;return this.api.getFile(w(r,"getFile").file_id,e)}kickAuthor(...e){return this.banAuthor(...e)}banAuthor(e,t){return this.api.banChatMember(w(this.chatId,"banAuthor"),w(this.from,"banAuthor").id,e,t)}kickChatMember(...e){return this.banChatMember(...e)}banChatMember(e,t,r){return this.api.banChatMember(w(this.chatId,"banChatMember"),e,t,r)}unbanChatMember(e,t,r){return this.api.unbanChatMember(w(this.chatId,"unbanChatMember"),e,t,r)}restrictAuthor(e,t,r){return this.api.restrictChatMember(w(this.chatId,"restrictAuthor"),w(this.from,"restrictAuthor").id,e,t,r)}restrictChatMember(e,t,r,a){return this.api.restrictChatMember(w(this.chatId,"restrictChatMember"),e,t,r,a)}promoteAuthor(e,t){return this.api.promoteChatMember(w(this.chatId,"promoteAuthor"),w(this.from,"promoteAuthor").id,e,t)}promoteChatMember(e,t,r){return this.api.promoteChatMember(w(this.chatId,"promoteChatMember"),e,t,r)}setChatAdministratorAuthorCustomTitle(e,t){return this.api.setChatAdministratorCustomTitle(w(this.chatId,"setChatAdministratorAuthorCustomTitle"),w(this.from,"setChatAdministratorAuthorCustomTitle").id,e,t)}setChatAdministratorCustomTitle(e,t,r){return this.api.setChatAdministratorCustomTitle(w(this.chatId,"setChatAdministratorCustomTitle"),e,t,r)}banChatSenderChat(e,t){return this.api.banChatSenderChat(w(this.chatId,"banChatSenderChat"),e,t)}unbanChatSenderChat(e,t){return this.api.unbanChatSenderChat(w(this.chatId,"unbanChatSenderChat"),e,t)}setChatPermissions(e,t,r){return this.api.setChatPermissions(w(this.chatId,"setChatPermissions"),e,t,r)}exportChatInviteLink(e){return this.api.exportChatInviteLink(w(this.chatId,"exportChatInviteLink"),e)}createChatInviteLink(e,t){return this.api.createChatInviteLink(w(this.chatId,"createChatInviteLink"),e,t)}editChatInviteLink(e,t,r){return this.api.editChatInviteLink(w(this.chatId,"editChatInviteLink"),e,t,r)}createChatSubscriptionInviteLink(e,t,r,a){return this.api.createChatSubscriptionInviteLink(w(this.chatId,"createChatSubscriptionInviteLink"),e,t,r,a)}editChatSubscriptionInviteLink(e,t,r){return this.api.editChatSubscriptionInviteLink(w(this.chatId,"editChatSubscriptionInviteLink"),e,t,r)}revokeChatInviteLink(e,t){return this.api.revokeChatInviteLink(w(this.chatId,"editChatInviteLink"),e,t)}approveChatJoinRequest(e,t){return this.api.approveChatJoinRequest(w(this.chatId,"approveChatJoinRequest"),e,t)}declineChatJoinRequest(e,t){return this.api.declineChatJoinRequest(w(this.chatId,"declineChatJoinRequest"),e,t)}setChatPhoto(e,t){return this.api.setChatPhoto(w(this.chatId,"setChatPhoto"),e,t)}deleteChatPhoto(e){return this.api.deleteChatPhoto(w(this.chatId,"deleteChatPhoto"),e)}setChatTitle(e,t){return this.api.setChatTitle(w(this.chatId,"setChatTitle"),e,t)}setChatDescription(e,t){return this.api.setChatDescription(w(this.chatId,"setChatDescription"),e,t)}pinChatMessage(e,t,r){return this.api.pinChatMessage(w(this.chatId,"pinChatMessage"),e,{business_connection_id:this.businessConnectionId,...t},r)}unpinChatMessage(e,t,r){return this.api.unpinChatMessage(w(this.chatId,"unpinChatMessage"),e,{business_connection_id:this.businessConnectionId,...t},r)}unpinAllChatMessages(e){return this.api.unpinAllChatMessages(w(this.chatId,"unpinAllChatMessages"),e)}leaveChat(e){return this.api.leaveChat(w(this.chatId,"leaveChat"),e)}getChat(e){return this.api.getChat(w(this.chatId,"getChat"),e)}getChatAdministrators(e){return this.api.getChatAdministrators(w(this.chatId,"getChatAdministrators"),e)}getChatMembersCount(...e){return this.getChatMemberCount(...e)}getChatMemberCount(e){return this.api.getChatMemberCount(w(this.chatId,"getChatMemberCount"),e)}getAuthor(e){return this.api.getChatMember(w(this.chatId,"getAuthor"),w(this.from,"getAuthor").id,e)}getChatMember(e,t){return this.api.getChatMember(w(this.chatId,"getChatMember"),e,t)}setChatStickerSet(e,t){return this.api.setChatStickerSet(w(this.chatId,"setChatStickerSet"),e,t)}deleteChatStickerSet(e){return this.api.deleteChatStickerSet(w(this.chatId,"deleteChatStickerSet"),e)}createForumTopic(e,t,r){return this.api.createForumTopic(w(this.chatId,"createForumTopic"),e,t,r)}editForumTopic(e,t){const r=w(this.msg,"editForumTopic"),a=w(r.message_thread_id,"editForumTopic");return this.api.editForumTopic(r.chat.id,a,e,t)}closeForumTopic(e){const t=w(this.msg,"closeForumTopic"),r=w(t.message_thread_id,"closeForumTopic");return this.api.closeForumTopic(t.chat.id,r,e)}reopenForumTopic(e){const t=w(this.msg,"reopenForumTopic"),r=w(t.message_thread_id,"reopenForumTopic");return this.api.reopenForumTopic(t.chat.id,r,e)}deleteForumTopic(e){const t=w(this.msg,"deleteForumTopic"),r=w(t.message_thread_id,"deleteForumTopic");return this.api.deleteForumTopic(t.chat.id,r,e)}unpinAllForumTopicMessages(e){const t=w(this.msg,"unpinAllForumTopicMessages"),r=w(t.message_thread_id,"unpinAllForumTopicMessages");return this.api.unpinAllForumTopicMessages(t.chat.id,r,e)}editGeneralForumTopic(e,t){return this.api.editGeneralForumTopic(w(this.chatId,"editGeneralForumTopic"),e,t)}closeGeneralForumTopic(e){return this.api.closeGeneralForumTopic(w(this.chatId,"closeGeneralForumTopic"),e)}reopenGeneralForumTopic(e){return this.api.reopenGeneralForumTopic(w(this.chatId,"reopenGeneralForumTopic"),e)}hideGeneralForumTopic(e){return this.api.hideGeneralForumTopic(w(this.chatId,"hideGeneralForumTopic"),e)}unhideGeneralForumTopic(e){return this.api.unhideGeneralForumTopic(w(this.chatId,"unhideGeneralForumTopic"),e)}unpinAllGeneralForumTopicMessages(e){return this.api.unpinAllGeneralForumTopicMessages(w(this.chatId,"unpinAllGeneralForumTopicMessages"),e)}answerCallbackQuery(e,t){return this.api.answerCallbackQuery(w(this.callbackQuery,"answerCallbackQuery").id,typeof e=="string"?{text:e}:e,t)}setChatMenuButton(e,t){return this.api.setChatMenuButton(e,t)}getChatMenuButton(e,t){return this.api.getChatMenuButton(e,t)}setMyDefaultAdministratorRights(e,t){return this.api.setMyDefaultAdministratorRights(e,t)}getMyDefaultAdministratorRights(e,t){return this.api.getMyDefaultAdministratorRights(e,t)}editMessageText(e,t,r){var c,l,p;const a=this.inlineMessageId;return a!==void 0?this.api.editMessageTextInline(a,e,{business_connection_id:this.businessConnectionId,...t},r):this.api.editMessageText(w(this.chatId,"editMessageText"),w(((c=this.msg)==null?void 0:c.message_id)??((l=this.messageReaction)==null?void 0:l.message_id)??((p=this.messageReactionCount)==null?void 0:p.message_id),"editMessageText"),e,{business_connection_id:this.businessConnectionId,...t},r)}editMessageCaption(e,t){var a,c,l;const r=this.inlineMessageId;return r!==void 0?this.api.editMessageCaptionInline(r,{business_connection_id:this.businessConnectionId,...e},t):this.api.editMessageCaption(w(this.chatId,"editMessageCaption"),w(((a=this.msg)==null?void 0:a.message_id)??((c=this.messageReaction)==null?void 0:c.message_id)??((l=this.messageReactionCount)==null?void 0:l.message_id),"editMessageCaption"),{business_connection_id:this.businessConnectionId,...e},t)}editMessageMedia(e,t,r){var c,l,p;const a=this.inlineMessageId;return a!==void 0?this.api.editMessageMediaInline(a,e,{business_connection_id:this.businessConnectionId,...t},r):this.api.editMessageMedia(w(this.chatId,"editMessageMedia"),w(((c=this.msg)==null?void 0:c.message_id)??((l=this.messageReaction)==null?void 0:l.message_id)??((p=this.messageReactionCount)==null?void 0:p.message_id),"editMessageMedia"),e,{business_connection_id:this.businessConnectionId,...t},r)}editMessageReplyMarkup(e,t){var a,c,l;const r=this.inlineMessageId;return r!==void 0?this.api.editMessageReplyMarkupInline(r,{business_connection_id:this.businessConnectionId,...e},t):this.api.editMessageReplyMarkup(w(this.chatId,"editMessageReplyMarkup"),w(((a=this.msg)==null?void 0:a.message_id)??((c=this.messageReaction)==null?void 0:c.message_id)??((l=this.messageReactionCount)==null?void 0:l.message_id),"editMessageReplyMarkup"),{business_connection_id:this.businessConnectionId,...e},t)}stopPoll(e,t){var r,a,c;return this.api.stopPoll(w(this.chatId,"stopPoll"),w(((r=this.msg)==null?void 0:r.message_id)??((a=this.messageReaction)==null?void 0:a.message_id)??((c=this.messageReactionCount)==null?void 0:c.message_id),"stopPoll"),{business_connection_id:this.businessConnectionId,...e},t)}deleteMessage(e){var t,r,a;return this.api.deleteMessage(w(this.chatId,"deleteMessage"),w(((t=this.msg)==null?void 0:t.message_id)??((r=this.messageReaction)==null?void 0:r.message_id)??((a=this.messageReactionCount)==null?void 0:a.message_id),"deleteMessage"),e)}deleteMessages(e,t){return this.api.deleteMessages(w(this.chatId,"deleteMessages"),e,t)}deleteBusinessMessages(e,t){return this.api.deleteBusinessMessages(w(this.businessConnectionId,"deleteBusinessMessages"),e,t)}setBusinessAccountName(e,t,r){return this.api.setBusinessAccountName(w(this.businessConnectionId,"setBusinessAccountName"),e,t,r)}setBusinessAccountUsername(e,t){return this.api.setBusinessAccountUsername(w(this.businessConnectionId,"setBusinessAccountUsername"),e,t)}setBusinessAccountBio(e,t){return this.api.setBusinessAccountBio(w(this.businessConnectionId,"setBusinessAccountBio"),e,t)}setBusinessAccountProfilePhoto(e,t,r){return this.api.setBusinessAccountProfilePhoto(w(this.businessConnectionId,"setBusinessAccountProfilePhoto"),e,t,r)}removeBusinessAccountProfilePhoto(e,t){return this.api.removeBusinessAccountProfilePhoto(w(this.businessConnectionId,"removeBusinessAccountProfilePhoto"),e,t)}setBusinessAccountGiftSettings(e,t,r){return this.api.setBusinessAccountGiftSettings(w(this.businessConnectionId,"setBusinessAccountGiftSettings"),e,t,r)}getBusinessAccountStarBalance(e){return this.api.getBusinessAccountStarBalance(w(this.businessConnectionId,"getBusinessAccountStarBalance"),e)}transferBusinessAccountStars(e,t){return this.api.transferBusinessAccountStars(w(this.businessConnectionId,"transferBusinessAccountStars"),e,t)}getBusinessAccountGifts(e,t){return this.api.getBusinessAccountGifts(w(this.businessConnectionId,"getBusinessAccountGifts"),e,t)}convertGiftToStars(e,t){return this.api.convertGiftToStars(w(this.businessConnectionId,"convertGiftToStars"),e,t)}upgradeGift(e,t,r){return this.api.upgradeGift(w(this.businessConnectionId,"upgradeGift"),e,t,r)}transferGift(e,t,r,a){return this.api.transferGift(w(this.businessConnectionId,"transferGift"),e,t,r,a)}postStory(e,t,r,a){return this.api.postStory(w(this.businessConnectionId,"postStory"),e,t,r,a)}editStory(e,t,r,a){return this.api.editStory(w(this.businessConnectionId,"editStory"),e,t,r,a)}deleteStory(e,t){return this.api.deleteStory(w(this.businessConnectionId,"deleteStory"),e,t)}replyWithSticker(e,t,r){return this.api.sendSticker(w(this.chatId,"sendSticker"),e,{business_connection_id:this.businessConnectionId,...t},r)}getCustomEmojiStickers(e){var t;return this.api.getCustomEmojiStickers((((t=this.msg)==null?void 0:t.entities)??[]).filter(r=>r.type==="custom_emoji").map(r=>r.custom_emoji_id),e)}replyWithGift(e,t,r){return this.api.sendGift(w(this.from,"sendGift").id,e,t,r)}giftPremiumSubscription(e,t,r,a){return this.api.giftPremiumSubscription(w(this.from,"giftPremiumSubscription").id,e,t,r,a)}replyWithGiftToChannel(e,t,r){return this.api.sendGiftToChannel(w(this.chat,"sendGift").id,e,t,r)}answerInlineQuery(e,t,r){return this.api.answerInlineQuery(w(this.inlineQuery,"answerInlineQuery").id,e,t,r)}savePreparedInlineMessage(e,t,r){return this.api.savePreparedInlineMessage(w(this.from,"savePreparedInlineMessage").id,e,t,r)}replyWithInvoice(e,t,r,a,c,l,p){return this.api.sendInvoice(w(this.chatId,"sendInvoice"),e,t,r,a,c,l,p)}answerShippingQuery(e,t,r){return this.api.answerShippingQuery(w(this.shippingQuery,"answerShippingQuery").id,e,t,r)}answerPreCheckoutQuery(e,t,r){return this.api.answerPreCheckoutQuery(w(this.preCheckoutQuery,"answerPreCheckoutQuery").id,e,typeof t=="string"?{error_message:t}:t,r)}refundStarPayment(e){var t;return this.api.refundStarPayment(w(this.from,"refundStarPayment").id,w((t=this.msg)==null?void 0:t.successful_payment,"refundStarPayment").telegram_payment_charge_id,e)}editUserStarSubscription(e,t,r){return this.api.editUserStarSubscription(w(this.from,"editUserStarSubscription").id,e,t,r)}verifyUser(e,t){return this.api.verifyUser(w(this.from,"verifyUser").id,e,t)}verifyChat(e,t){return this.api.verifyChat(w(this.chatId,"verifyChat"),e,t)}removeUserVerification(e){return this.api.removeUserVerification(w(this.from,"removeUserVerification").id,e)}removeChatVerification(e){return this.api.removeChatVerification(w(this.chatId,"removeChatVerification"),e)}readBusinessMessage(e){return this.api.readBusinessMessage(w(this.businessConnectionId,"readBusinessMessage"),w(this.chatId,"readBusinessMessage"),w(this.msgId,"readBusinessMessage"),e)}setPassportDataErrors(e,t){return this.api.setPassportDataErrors(w(this.from,"setPassportDataErrors").id,e,t)}replyWithGame(e,t,r){return this.api.sendGame(w(this.chatId,"sendGame"),e,{business_connection_id:this.businessConnectionId,...t},r)}};D(J,"has",le);let K=J;function w(s,e){if(s===void 0)throw new Error(`Missing information for API call to ${e}`);return s}function Ee(s){return qt(s).map(e=>typeof e=="string"?t=>t===e?e:null:t=>t.match(e))}function Me(s,e,t){for(const r of t){const a=r(e);if(a)return s.match=a,!0}return!1}function qt(s){return Array.isArray(s)?s:[s]}class Rn extends Error{constructor(t,r){super(zo(t));D(this,"error");D(this,"ctx");this.error=t,this.ctx=r,this.name="BotError",t instanceof Error&&(this.stack=t.stack)}}function zo(s){let e;if(s instanceof Error)e=`${s.name} in middleware: ${s.message}`;else{const t=typeof s;switch(e=`Non-error value of type ${t} thrown in middleware`,t){case"bigint":case"boolean":case"number":case"symbol":e+=`: ${s}`;break;case"string":e+=`: ${String(s).substring(0,50)}`;break;default:e+="!";break}}return e}function bt(s){return typeof s=="function"?s:(e,t)=>s.middleware()(e,t)}function _s(s,e){return async(t,r)=>{let a=!1;await s(t,async()=>{if(a)throw new Error("`next` already called before!");a=!0,await e(t,r)})}}function Tn(s,e){return e()}const Zo=()=>Promise.resolve();async function ri(s,e){await s(e,Zo)}class ve{constructor(...e){D(this,"handler");this.handler=e.length===0?Tn:e.map(bt).reduce(_s)}middleware(){return this.handler}use(...e){const t=new ve(...e);return this.handler=_s(this.handler,bt(t)),t}on(e,...t){return this.filter(K.has.filterQuery(e),...t)}hears(e,...t){return this.filter(K.has.text(e),...t)}command(e,...t){return this.filter(K.has.command(e),...t)}reaction(e,...t){return this.filter(K.has.reaction(e),...t)}chatType(e,...t){return this.filter(K.has.chatType(e),...t)}callbackQuery(e,...t){return this.filter(K.has.callbackQuery(e),...t)}gameQuery(e,...t){return this.filter(K.has.gameQuery(e),...t)}inlineQuery(e,...t){return this.filter(K.has.inlineQuery(e),...t)}chosenInlineResult(e,...t){return this.filter(K.has.chosenInlineResult(e),...t)}preCheckoutQuery(e,...t){return this.filter(K.has.preCheckoutQuery(e),...t)}shippingQuery(e,...t){return this.filter(K.has.shippingQuery(e),...t)}filter(e,...t){const r=new ve(...t);return this.branch(e,r,Tn),r}drop(e,...t){return this.filter(async r=>!await e(r),...t)}fork(...e){const t=new ve(...e),r=bt(t);return this.use((a,c)=>Promise.all([c(),ri(r,a)])),t}lazy(e){return this.use(async(t,r)=>{const a=await e(t),c=Array.isArray(a)?a:[a];await bt(new ve(...c))(t,r)})}route(e,t,r=Tn){return this.lazy(async a=>{const c=await e(a);return(c===void 0||!t[c]?r:t[c])??[]})}branch(e,t,r){return this.lazy(async a=>await e(a)?t:r)}errorBoundary(e,...t){const r=new ve(...t),a=bt(r);return this.use(async(c,l)=>{let p=!1;const f=()=>(p=!0,Promise.resolve());try{await a(c,f)}catch(g){p=!1,await e(new Rn(g,c),f)}p&&await l()}),r}}var tt=1e3,nt=tt*60,rt=nt*60,Re=rt*24,Yo=Re*7,Qo=Re*365.25,Jo=function(s,e){e=e||{};var t=typeof s;if(t==="string"&&s.length>0)return Ko(s);if(t==="number"&&isFinite(s))return e.long?eu(s):Xo(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};function Ko(s){if(s=String(s),!(s.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(e){var t=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return t*Qo;case"weeks":case"week":case"w":return t*Yo;case"days":case"day":case"d":return t*Re;case"hours":case"hour":case"hrs":case"hr":case"h":return t*rt;case"minutes":case"minute":case"mins":case"min":case"m":return t*nt;case"seconds":case"second":case"secs":case"sec":case"s":return t*tt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Xo(s){var e=Math.abs(s);return e>=Re?Math.round(s/Re)+"d":e>=rt?Math.round(s/rt)+"h":e>=nt?Math.round(s/nt)+"m":e>=tt?Math.round(s/tt)+"s":s+"ms"}function eu(s){var e=Math.abs(s);return e>=Re?Bt(s,e,Re,"day"):e>=rt?Bt(s,e,rt,"hour"):e>=nt?Bt(s,e,nt,"minute"):e>=tt?Bt(s,e,tt,"second"):s+" ms"}function Bt(s,e,t,r){var a=e>=t*1.5;return Math.round(s/t)+" "+r+(a?"s":"")}function si(){throw new Error("setTimeout has not been defined")}function ii(){throw new Error("clearTimeout has not been defined")}var be=si,Ce=ii,Xe;typeof window<"u"?Xe=window:typeof self<"u"?Xe=self:Xe={};typeof Xe.setTimeout=="function"&&(be=setTimeout);typeof Xe.clearTimeout=="function"&&(Ce=clearTimeout);function ai(s){if(be===setTimeout)return setTimeout(s,0);if((be===si||!be)&&setTimeout)return be=setTimeout,setTimeout(s,0);try{return be(s,0)}catch{try{return be.call(null,s,0)}catch{return be.call(this,s,0)}}}function tu(s){if(Ce===clearTimeout)return clearTimeout(s);if((Ce===ii||!Ce)&&clearTimeout)return Ce=clearTimeout,clearTimeout(s);try{return Ce(s)}catch{try{return Ce.call(null,s)}catch{return Ce.call(this,s)}}}var de=[],et=!1,Ne,Vt=-1;function nu(){!et||!Ne||(et=!1,Ne.length?de=Ne.concat(de):Vt=-1,de.length&&oi())}function oi(){if(!et){var s=ai(nu);et=!0;for(var e=de.length;e;){for(Ne=de,de=[];++Vt<e;)Ne&&Ne[Vt].run();Vt=-1,e=de.length}Ne=null,et=!1,tu(s)}}function ru(s){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];de.push(new ui(s,e)),de.length===1&&!et&&ai(oi)}function ui(s,e){this.fun=s,this.array=e}ui.prototype.run=function(){this.fun.apply(null,this.array)};var su="browser",iu="browser",au=!0,ou=[],uu="",cu={},lu={},hu={};function Pe(){}var du=Pe,fu=Pe,mu=Pe,pu=Pe,gu=Pe,yu=Pe,wu=Pe;function bu(s){throw new Error("process.binding is not supported")}function Cu(){return"/"}function vu(s){throw new Error("process.chdir is not supported")}function Su(){return 0}var Qe=Xe.performance||{},Tu=Qe.now||Qe.mozNow||Qe.msNow||Qe.oNow||Qe.webkitNow||function(){return new Date().getTime()};function Iu(s){var e=Tu.call(Qe)*.001,t=Math.floor(e),r=Math.floor(e%1*1e9);return s&&(t=t-s[0],r=r-s[1],r<0&&(t--,r+=1e9)),[t,r]}var _u=new Date;function ku(){var s=new Date,e=s-_u;return e/1e3}var In={nextTick:ru,title:su,browser:au,env:{NODE_ENV:"production"},argv:ou,version:uu,versions:cu,on:du,addListener:fu,once:mu,off:pu,removeListener:gu,removeAllListeners:yu,emit:wu,binding:bu,cwd:Cu,chdir:vu,umask:Su,hrtime:Iu,platform:iu,release:lu,config:hu,uptime:ku};function Eu(s,e,t){return t={path:e,exports:{},require:function(r,a){return Mu(r,a??t.path)}},s(t,t.exports),t.exports}function Mu(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function Ou(s){t.debug=t,t.default=t,t.coerce=f,t.disable=c,t.enable=a,t.enabled=l,t.humanize=Jo,t.destroy=g,Object.keys(s).forEach(C=>{t[C]=s[C]}),t.names=[],t.skips=[],t.formatters={};function e(C){let v=0;for(let T=0;T<C.length;T++)v=(v<<5)-v+C.charCodeAt(T),v|=0;return t.colors[Math.abs(v)%t.colors.length]}t.selectColor=e;function t(C){let v,T=null,A,I;function _(...R){if(!_.enabled)return;const N=_,H=Number(new Date),Y=H-(v||H);N.diff=Y,N.prev=v,N.curr=H,v=H,R[0]=t.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let V=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(ne,ae)=>{if(ne==="%%")return"%";V++;const st=t.formatters[ae];if(typeof st=="function"){const _t=R[V];ne=st.call(N,_t),R.splice(V,1),V--}return ne}),t.formatArgs.call(N,R),(N.log||t.log).apply(N,R)}return _.namespace=C,_.useColors=t.useColors(),_.color=t.selectColor(C),_.extend=r,_.destroy=t.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>T!==null?T:(A!==t.namespaces&&(A=t.namespaces,I=t.enabled(C)),I),set:R=>{T=R}}),typeof t.init=="function"&&t.init(_),_}function r(C,v){const T=t(this.namespace+(typeof v>"u"?":":v)+C);return T.log=this.log,T}function a(C){t.save(C),t.namespaces=C,t.names=[],t.skips=[];let v;const T=(typeof C=="string"?C:"").split(/[\s,]+/),A=T.length;for(v=0;v<A;v++)T[v]&&(C=T[v].replace(/\*/g,".*?"),C[0]==="-"?t.skips.push(new RegExp("^"+C.slice(1)+"$")):t.names.push(new RegExp("^"+C+"$")))}function c(){const C=[...t.names.map(p),...t.skips.map(p).map(v=>"-"+v)].join(",");return t.enable(""),C}function l(C){if(C[C.length-1]==="*")return!0;let v,T;for(v=0,T=t.skips.length;v<T;v++)if(t.skips[v].test(C))return!1;for(v=0,T=t.names.length;v<T;v++)if(t.names[v].test(C))return!0;return!1}function p(C){return C.toString().substring(2,C.toString().length-2).replace(/\.\*\?$/,"*")}function f(C){return C instanceof Error?C.stack||C.message:C}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var Du=Ou,Z=Eu(function(s,e){e.formatArgs=r,e.save=a,e.load=c,e.useColors=t,e.storage=l(),e.destroy=(()=>{let f=!1;return()=>{f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;const g="color: "+this.color;f.splice(1,0,g,"color: inherit");let C=0,v=0;f[0].replace(/%[a-zA-Z%]/g,T=>{T!=="%%"&&(C++,T==="%c"&&(v=C))}),f.splice(v,0,g)}e.log=console.debug||console.log||(()=>{});function a(f){try{f?e.storage.setItem("debug",f):e.storage.removeItem("debug")}catch{}}function c(){let f;try{f=e.storage.getItem("debug")}catch{}return!f&&typeof In<"u"&&"env"in In&&(f=In.env.DEBUG),f}function l(){try{return localStorage}catch{}}s.exports=Du(e);const{formatters:p}=s.exports;p.j=function(f){try{return JSON.stringify(f)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}}});Z.colors;Z.destroy;Z.formatArgs;Z.load;Z.log;Z.save;Z.storage;Z.useColors;const Au=s=>{const e=s[Symbol.asyncIterator]();return new ReadableStream({async pull(t){const r=await e.next();r.done?t.close():t.enqueue(r.value)}})},Nu=s=>({}),ks=Z("grammy:warn");class Yn extends Error{constructor(t,r,a,c){super(`${t} (${r.error_code}: ${r.description})`);D(this,"method");D(this,"payload");D(this,"ok");D(this,"error_code");D(this,"description");D(this,"parameters");this.method=a,this.payload=c,this.ok=!1,this.name="GrammyError",this.error_code=r.error_code,this.description=r.description,this.parameters=r.parameters??{}}}function Fu(s,e,t){switch(s.error_code){case 401:ks("Error 401 means that your bot token is wrong, talk to https://t.me/BotFather to check it.");break;case 409:ks("Error 409 means that you are running your bot several times on long polling. Consider revoking the bot token if you believe that no other instance is running.");break}return new Yn(`Call to '${e}' failed!`,s,e,t)}class ci extends Error{constructor(t,r){super(t);D(this,"error");this.error=r,this.name="HttpError"}}function Ru(s){return typeof s=="object"&&s!==null&&"status"in s&&"statusText"in s}function Pu(s,e){return t=>{let r=`Network request for '${s}' failed!`;throw Ru(t)&&(r+=` (${t.status}: ${t.statusText})`),e&&t instanceof Error&&(r+=` ${t.message}`),new ci(r,t)}}const $u=(()=>{var t,r,a;const{Deno:s}=globalThis;if(typeof((t=s==null?void 0:s.build)==null?void 0:t.os)=="string")return s.build.os;const{navigator:e}=globalThis;return(a=(r=e==null?void 0:e.appVersion)==null?void 0:r.includes)!=null&&a.call(r,"Win")?"windows":"linux"})(),Lu=$u==="windows";function xu(s){if(typeof s!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(s)}`)}function li(s,e){if(e.length>=s.length)return s;const t=s.length-e.length;for(let r=e.length-1;r>=0;--r)if(s.charCodeAt(t+r)!==e.charCodeAt(r))return s;return s.slice(0,-e.length)}function hi(s,e,t=0){let r=!1,a=s.length;for(let c=s.length-1;c>=t;--c)if(e(s.charCodeAt(c))){if(r){t=c+1;break}}else r||(r=!0,a=c+1);return s.slice(t,a)}function di(s,e){if(xu(s),s.length===0)return s;if(typeof e!="string")throw new TypeError(`Suffix must be a string. Received ${JSON.stringify(e)}`)}function fi(s,e){if(s.length<=1)return s;let t=s.length;for(let r=s.length-1;r>0&&e(s.charCodeAt(r));r--)t=r;return s.slice(0,t)}function Es(s){return s===47}function Bu(s,e=""){di(s,e);const t=hi(s,Es),r=fi(t,Es);return e?li(r,e):r}function Ms(s){return s===47||s===92}function Uu(s){return s>=97&&s<=122||s>=65&&s<=90}function Wu(s,e=""){di(s,e);let t=0;if(s.length>=2){const c=s.charCodeAt(0);Uu(c)&&s.charCodeAt(1)===58&&(t=2)}const r=hi(s,Ms,t),a=fi(r,Ms);return e?li(a,e):a}function Ut(s,e=""){return Lu?Wu(s,e):Bu(s,e)}class Pn{constructor(e,t){D(this,"consumed",!1);D(this,"fileData");D(this,"filename");this.fileData=e,t??(t=this.guessFilename(e)),this.filename=t}guessFilename(e){if(typeof e=="string")return Ut(e);if(typeof e=="object"){if("url"in e)return Ut(e.url);if(e instanceof URL)return Ut(e.pathname)||Ut(e.hostname)}}toRaw(){if(this.consumed)throw new Error("Cannot reuse InputFile data source!");const e=this.fileData;return e instanceof Blob?e.stream():e instanceof URL?Os(e):"url"in e?Os(e.url):(e instanceof Uint8Array||(this.consumed=!0),e)}}async function*Os(s){const{body:e}=await fetch(s);if(e===null)throw new Error(`Download failed, no response body from '${s}'`);yield*e}function $n(s){return s instanceof Pn||typeof s=="object"&&s!==null&&Object.values(s).some(e=>Array.isArray(e)?e.some($n):e instanceof Pn||$n(e))}function mi(s){return JSON.stringify(s,(e,t)=>t??void 0)}function Ds(s){return{method:"POST",headers:{"content-type":"application/json",connection:"keep-alive"},body:mi(s)}}async function*Vu(s,e){try{yield*s}catch(t){e(t)}}function ju(s,e){const t=qu(),r=Hu(s,t),a=Vu(r,e),c=Au(a);return{method:"POST",headers:{"content-type":`multipart/form-data; boundary=${t}`,connection:"keep-alive"},body:c}}function qu(){return"----------"+pi(32)}function pi(s=16){return Array.from(Array(s)).map(()=>Math.random().toString(36)[2]||0).join("")}const St=new TextEncoder;async function*Hu(s,e){const t=Ln(s);yield St.encode(`--${e}\r
`);const r=St.encode(`\r
--${e}\r
`);let a=!0;for(const[c,l]of Object.entries(s))l!=null&&(a||(yield r),yield Gu(c,typeof l=="object"?mi(l):l),a=!1);for(const{id:c,origin:l,file:p}of t)a||(yield r),yield*zu(c,l,p),a=!1;yield St.encode(`\r
--${e}--\r
`)}function Ln(s){return typeof s!="object"||s===null?[]:Object.entries(s).flatMap(([e,t])=>{if(Array.isArray(t))return t.flatMap(r=>Ln(r));if(t instanceof Pn){const r=pi();Object.assign(s,{[e]:`attach://${r}`});const a=e==="media"&&"type"in s&&typeof s.type=="string"?s.type:e;return{id:r,origin:a,file:t}}else return Ln(t)})}function Gu(s,e){return St.encode(`content-disposition:form-data;name="${s}"\r
\r
${e}`)}async function*zu(s,e,t){const r=t.filename||`${e}.${Zu(e)}`;if(r.includes("\r")||r.includes(`
`))throw new Error(`File paths cannot contain carriage-return (\\r) or newline (\\n) characters! Filename for property '${e}' was:
"""
${r}
"""`);yield St.encode(`content-disposition:form-data;name="${s}";filename=${r}\r
content-type:application/octet-stream\r
\r
`);const a=await t.toRaw();a instanceof Uint8Array?yield a:yield*a}function Zu(s){switch(s){case"certificate":return"pem";case"photo":case"thumbnail":return"jpg";case"voice":return"ogg";case"audio":return"mp3";case"animation":case"video":case"video_note":return"mp4";case"sticker":return"webp";default:return"dat"}}const Yu=Z("grammy:core");function Qu(s,e){return(t,r,a)=>e(s,t,r,a)}class Ju{constructor(e,t={},r={}){D(this,"token");D(this,"webhookReplyEnvelope");D(this,"options");D(this,"fetch");D(this,"hasUsedWebhookReply");D(this,"installedTransformers");D(this,"call");this.token=e,this.webhookReplyEnvelope=r,this.hasUsedWebhookReply=!1,this.installedTransformers=[],this.call=async(f,g,C)=>{const v=g??{};Yu(`Calling ${f}`),C!==void 0&&sc(f,v,C);const T=this.options,A=$n(v);if(this.webhookReplyEnvelope.send!==void 0&&!this.hasUsedWebhookReply&&!A&&T.canUseWebhookReply(f)){this.hasUsedWebhookReply=!0;const ae=Ds({...v,method:f});return await this.webhookReplyEnvelope.send(ae.body),{ok:!0,result:!0}}const I=rc(C),_=tc(I,T.timeoutSeconds,f),R=nc(I),N=T.buildUrl(T.apiRoot,this.token,f,T.environment),H=A?ju(v,ae=>R.catch(ae)):Ds(v),Y=I.signal,V={...T.baseFetchConfig,signal:Y,...H},ne=[this.fetch(N instanceof URL?N.href:N,V).catch(Pu(f,T.sensitiveLogs)),R.promise,_.promise];try{return await(await Promise.race(ne)).json()}finally{_.handle!==void 0&&clearTimeout(_.handle)}};const a=t.apiRoot??"https://api.telegram.org",c=t.environment??"prod",{fetch:l}=t,p=l??fetch;if(this.options={apiRoot:a,environment:c,buildUrl:t.buildUrl??Xu,timeoutSeconds:t.timeoutSeconds??500,baseFetchConfig:{...Nu(),...t.baseFetchConfig},canUseWebhookReply:t.canUseWebhookReply??(()=>!1),sensitiveLogs:t.sensitiveLogs??!1,fetch:(...f)=>p(...f)},this.fetch=this.options.fetch,this.options.apiRoot.endsWith("/"))throw new Error(`Remove the trailing '/' from the 'apiRoot' option (use '${this.options.apiRoot.substring(0,this.options.apiRoot.length-1)}' instead of '${this.options.apiRoot}')`)}use(...e){return this.call=e.reduce(Qu,this.call),this.installedTransformers.push(...e),this}async callApi(e,t,r){const a=await this.call(e,t,r);if(a.ok)return a.result;throw Fu(a,e,t)}}function Ku(s,e,t){const r=new Ju(s,e,t),a={get(f,g){return g==="toJSON"?"__internal":g==="getMe"||g==="getWebhookInfo"||g==="getForumTopicIconStickers"||g==="getAvailableGifts"||g==="logOut"||g==="close"?r.callApi.bind(r,g,{}):r.callApi.bind(r,g)},...ec},c=new Proxy({},a),l=r.installedTransformers,p={raw:c,installedTransformers:l,use:(...f)=>(r.use(...f),p)};return p}const Xu=(s,e,t,r)=>`${s}/bot${e}/${r==="test"?"test/":""}${t}`,ec={set(){return!1},defineProperty(){return!1},deleteProperty(){return!1},ownKeys(){return[]}};function tc(s,e,t){let r;return{promise:new Promise((c,l)=>{r=setTimeout(()=>{const p=`Request to '${t}' timed out after ${e} seconds`;l(new Error(p)),s.abort()},1e3*e)}),handle:r}}function nc(s){let e=r=>{throw r};return{promise:new Promise((r,a)=>{e=c=>{a(c),s.abort()}}),catch:e}}function rc(s){const e=new AbortController;if(s===void 0)return e;const t=s;function r(){e.abort(),t.removeEventListener("abort",r)}return t.aborted?r():t.addEventListener("abort",r),{abort:r,signal:e.signal}}function sc(s,e,t){if(typeof(t==null?void 0:t.addEventListener)=="function")return;let r=JSON.stringify(e);r.length>20&&(r=r.substring(0,16)+" ...");let a=JSON.stringify(t);throw a.length>20&&(a=a.substring(0,16)+" ..."),new Error(`Incorrect abort signal instance found! You passed two payloads to '${s}' but you should merge the second one containing '${a}' into the first one containing '${r}'! If you are using context shortcuts, you may want to use a method on 'ctx.api' instead.

If you want to prevent such mistakes in the future, consider using TypeScript. https://www.typescriptlang.org/`)}class As{constructor(e,t,r){D(this,"token");D(this,"options");D(this,"raw");D(this,"config");this.token=e,this.options=t;const{raw:a,use:c,installedTransformers:l}=Ku(e,t,r);this.raw=a,this.config={use:c,installedTransformers:()=>l.slice()}}getUpdates(e,t){return this.raw.getUpdates({...e},t)}setWebhook(e,t,r){return this.raw.setWebhook({url:e,...t},r)}deleteWebhook(e,t){return this.raw.deleteWebhook({...e},t)}getWebhookInfo(e){return this.raw.getWebhookInfo(e)}getMe(e){return this.raw.getMe(e)}logOut(e){return this.raw.logOut(e)}close(e){return this.raw.close(e)}sendMessage(e,t,r,a){return this.raw.sendMessage({chat_id:e,text:t,...r},a)}forwardMessage(e,t,r,a,c){return this.raw.forwardMessage({chat_id:e,from_chat_id:t,message_id:r,...a},c)}forwardMessages(e,t,r,a,c){return this.raw.forwardMessages({chat_id:e,from_chat_id:t,message_ids:r,...a},c)}copyMessage(e,t,r,a,c){return this.raw.copyMessage({chat_id:e,from_chat_id:t,message_id:r,...a},c)}copyMessages(e,t,r,a,c){return this.raw.copyMessages({chat_id:e,from_chat_id:t,message_ids:r,...a},c)}sendPhoto(e,t,r,a){return this.raw.sendPhoto({chat_id:e,photo:t,...r},a)}sendAudio(e,t,r,a){return this.raw.sendAudio({chat_id:e,audio:t,...r},a)}sendDocument(e,t,r,a){return this.raw.sendDocument({chat_id:e,document:t,...r},a)}sendVideo(e,t,r,a){return this.raw.sendVideo({chat_id:e,video:t,...r},a)}sendAnimation(e,t,r,a){return this.raw.sendAnimation({chat_id:e,animation:t,...r},a)}sendVoice(e,t,r,a){return this.raw.sendVoice({chat_id:e,voice:t,...r},a)}sendVideoNote(e,t,r,a){return this.raw.sendVideoNote({chat_id:e,video_note:t,...r},a)}sendMediaGroup(e,t,r,a){return this.raw.sendMediaGroup({chat_id:e,media:t,...r},a)}sendLocation(e,t,r,a,c){return this.raw.sendLocation({chat_id:e,latitude:t,longitude:r,...a},c)}editMessageLiveLocation(e,t,r,a,c,l){return this.raw.editMessageLiveLocation({chat_id:e,message_id:t,latitude:r,longitude:a,...c},l)}editMessageLiveLocationInline(e,t,r,a,c){return this.raw.editMessageLiveLocation({inline_message_id:e,latitude:t,longitude:r,...a},c)}stopMessageLiveLocation(e,t,r,a){return this.raw.stopMessageLiveLocation({chat_id:e,message_id:t,...r},a)}stopMessageLiveLocationInline(e,t,r){return this.raw.stopMessageLiveLocation({inline_message_id:e,...t},r)}sendPaidMedia(e,t,r,a,c){return this.raw.sendPaidMedia({chat_id:e,star_count:t,media:r,...a},c)}sendVenue(e,t,r,a,c,l,p){return this.raw.sendVenue({chat_id:e,latitude:t,longitude:r,title:a,address:c,...l},p)}sendContact(e,t,r,a,c){return this.raw.sendContact({chat_id:e,phone_number:t,first_name:r,...a},c)}sendPoll(e,t,r,a,c){return this.raw.sendPoll({chat_id:e,question:t,options:r,...a},c)}sendDice(e,t,r,a){return this.raw.sendDice({chat_id:e,emoji:t,...r},a)}setMessageReaction(e,t,r,a,c){return this.raw.setMessageReaction({chat_id:e,message_id:t,reaction:r,...a},c)}sendChatAction(e,t,r,a){return this.raw.sendChatAction({chat_id:e,action:t,...r},a)}getUserProfilePhotos(e,t,r){return this.raw.getUserProfilePhotos({user_id:e,...t},r)}setUserEmojiStatus(e,t,r){return this.raw.setUserEmojiStatus({user_id:e,...t},r)}getUserChatBoosts(e,t,r){return this.raw.getUserChatBoosts({chat_id:e,user_id:t},r)}getBusinessConnection(e,t){return this.raw.getBusinessConnection({business_connection_id:e},t)}getFile(e,t){return this.raw.getFile({file_id:e},t)}kickChatMember(...e){return this.banChatMember(...e)}banChatMember(e,t,r,a){return this.raw.banChatMember({chat_id:e,user_id:t,...r},a)}unbanChatMember(e,t,r,a){return this.raw.unbanChatMember({chat_id:e,user_id:t,...r},a)}restrictChatMember(e,t,r,a,c){return this.raw.restrictChatMember({chat_id:e,user_id:t,permissions:r,...a},c)}promoteChatMember(e,t,r,a){return this.raw.promoteChatMember({chat_id:e,user_id:t,...r},a)}setChatAdministratorCustomTitle(e,t,r,a){return this.raw.setChatAdministratorCustomTitle({chat_id:e,user_id:t,custom_title:r},a)}banChatSenderChat(e,t,r){return this.raw.banChatSenderChat({chat_id:e,sender_chat_id:t},r)}unbanChatSenderChat(e,t,r){return this.raw.unbanChatSenderChat({chat_id:e,sender_chat_id:t},r)}setChatPermissions(e,t,r,a){return this.raw.setChatPermissions({chat_id:e,permissions:t,...r},a)}exportChatInviteLink(e,t){return this.raw.exportChatInviteLink({chat_id:e},t)}createChatInviteLink(e,t,r){return this.raw.createChatInviteLink({chat_id:e,...t},r)}editChatInviteLink(e,t,r,a){return this.raw.editChatInviteLink({chat_id:e,invite_link:t,...r},a)}createChatSubscriptionInviteLink(e,t,r,a,c){return this.raw.createChatSubscriptionInviteLink({chat_id:e,subscription_period:t,subscription_price:r,...a},c)}editChatSubscriptionInviteLink(e,t,r,a){return this.raw.editChatSubscriptionInviteLink({chat_id:e,invite_link:t,...r},a)}revokeChatInviteLink(e,t,r){return this.raw.revokeChatInviteLink({chat_id:e,invite_link:t},r)}approveChatJoinRequest(e,t,r){return this.raw.approveChatJoinRequest({chat_id:e,user_id:t},r)}declineChatJoinRequest(e,t,r){return this.raw.declineChatJoinRequest({chat_id:e,user_id:t},r)}setChatPhoto(e,t,r){return this.raw.setChatPhoto({chat_id:e,photo:t},r)}deleteChatPhoto(e,t){return this.raw.deleteChatPhoto({chat_id:e},t)}setChatTitle(e,t,r){return this.raw.setChatTitle({chat_id:e,title:t},r)}setChatDescription(e,t,r){return this.raw.setChatDescription({chat_id:e,description:t},r)}pinChatMessage(e,t,r,a){return this.raw.pinChatMessage({chat_id:e,message_id:t,...r},a)}unpinChatMessage(e,t,r,a){return this.raw.unpinChatMessage({chat_id:e,message_id:t,...r},a)}unpinAllChatMessages(e,t){return this.raw.unpinAllChatMessages({chat_id:e},t)}leaveChat(e,t){return this.raw.leaveChat({chat_id:e},t)}getChat(e,t){return this.raw.getChat({chat_id:e},t)}getChatAdministrators(e,t){return this.raw.getChatAdministrators({chat_id:e},t)}getChatMembersCount(...e){return this.getChatMemberCount(...e)}getChatMemberCount(e,t){return this.raw.getChatMemberCount({chat_id:e},t)}getChatMember(e,t,r){return this.raw.getChatMember({chat_id:e,user_id:t},r)}setChatStickerSet(e,t,r){return this.raw.setChatStickerSet({chat_id:e,sticker_set_name:t},r)}deleteChatStickerSet(e,t){return this.raw.deleteChatStickerSet({chat_id:e},t)}getForumTopicIconStickers(e){return this.raw.getForumTopicIconStickers(e)}createForumTopic(e,t,r,a){return this.raw.createForumTopic({chat_id:e,name:t,...r},a)}editForumTopic(e,t,r,a){return this.raw.editForumTopic({chat_id:e,message_thread_id:t,...r},a)}closeForumTopic(e,t,r){return this.raw.closeForumTopic({chat_id:e,message_thread_id:t},r)}reopenForumTopic(e,t,r){return this.raw.reopenForumTopic({chat_id:e,message_thread_id:t},r)}deleteForumTopic(e,t,r){return this.raw.deleteForumTopic({chat_id:e,message_thread_id:t},r)}unpinAllForumTopicMessages(e,t,r){return this.raw.unpinAllForumTopicMessages({chat_id:e,message_thread_id:t},r)}editGeneralForumTopic(e,t,r){return this.raw.editGeneralForumTopic({chat_id:e,name:t},r)}closeGeneralForumTopic(e,t){return this.raw.closeGeneralForumTopic({chat_id:e},t)}reopenGeneralForumTopic(e,t){return this.raw.reopenGeneralForumTopic({chat_id:e},t)}hideGeneralForumTopic(e,t){return this.raw.hideGeneralForumTopic({chat_id:e},t)}unhideGeneralForumTopic(e,t){return this.raw.unhideGeneralForumTopic({chat_id:e},t)}unpinAllGeneralForumTopicMessages(e,t){return this.raw.unpinAllGeneralForumTopicMessages({chat_id:e},t)}answerCallbackQuery(e,t,r){return this.raw.answerCallbackQuery({callback_query_id:e,...t},r)}setMyName(e,t,r){return this.raw.setMyName({name:e,...t},r)}getMyName(e,t){return this.raw.getMyName(e??{},t)}setMyCommands(e,t,r){return this.raw.setMyCommands({commands:e,...t},r)}deleteMyCommands(e,t){return this.raw.deleteMyCommands({...e},t)}getMyCommands(e,t){return this.raw.getMyCommands({...e},t)}setMyDescription(e,t,r){return this.raw.setMyDescription({description:e,...t},r)}getMyDescription(e,t){return this.raw.getMyDescription({...e},t)}setMyShortDescription(e,t,r){return this.raw.setMyShortDescription({short_description:e,...t},r)}getMyShortDescription(e,t){return this.raw.getMyShortDescription({...e},t)}setChatMenuButton(e,t){return this.raw.setChatMenuButton({...e},t)}getChatMenuButton(e,t){return this.raw.getChatMenuButton({...e},t)}setMyDefaultAdministratorRights(e,t){return this.raw.setMyDefaultAdministratorRights({...e},t)}getMyDefaultAdministratorRights(e,t){return this.raw.getMyDefaultAdministratorRights({...e},t)}editMessageText(e,t,r,a,c){return this.raw.editMessageText({chat_id:e,message_id:t,text:r,...a},c)}editMessageTextInline(e,t,r,a){return this.raw.editMessageText({inline_message_id:e,text:t,...r},a)}editMessageCaption(e,t,r,a){return this.raw.editMessageCaption({chat_id:e,message_id:t,...r},a)}editMessageCaptionInline(e,t,r){return this.raw.editMessageCaption({inline_message_id:e,...t},r)}editMessageMedia(e,t,r,a,c){return this.raw.editMessageMedia({chat_id:e,message_id:t,media:r,...a},c)}editMessageMediaInline(e,t,r,a){return this.raw.editMessageMedia({inline_message_id:e,media:t,...r},a)}editMessageReplyMarkup(e,t,r,a){return this.raw.editMessageReplyMarkup({chat_id:e,message_id:t,...r},a)}editMessageReplyMarkupInline(e,t,r){return this.raw.editMessageReplyMarkup({inline_message_id:e,...t},r)}stopPoll(e,t,r,a){return this.raw.stopPoll({chat_id:e,message_id:t,...r},a)}deleteMessage(e,t,r){return this.raw.deleteMessage({chat_id:e,message_id:t},r)}deleteMessages(e,t,r){return this.raw.deleteMessages({chat_id:e,message_ids:t},r)}deleteBusinessMessages(e,t,r){return this.raw.deleteBusinessMessages({business_connection_id:e,message_ids:t},r)}setBusinessAccountName(e,t,r,a){return this.raw.setBusinessAccountName({business_connection_id:e,first_name:t,...r},a)}setBusinessAccountUsername(e,t,r){return this.raw.setBusinessAccountUsername({business_connection_id:e,username:t},r)}setBusinessAccountBio(e,t,r){return this.raw.setBusinessAccountBio({business_connection_id:e,bio:t},r)}setBusinessAccountProfilePhoto(e,t,r,a){return this.raw.setBusinessAccountProfilePhoto({business_connection_id:e,photo:t,...r},a)}removeBusinessAccountProfilePhoto(e,t,r){return this.raw.removeBusinessAccountProfilePhoto({business_connection_id:e,...t},r)}setBusinessAccountGiftSettings(e,t,r,a){return this.raw.setBusinessAccountGiftSettings({business_connection_id:e,show_gift_button:t,accepted_gift_types:r},a)}getBusinessAccountStarBalance(e,t){return this.raw.getBusinessAccountStarBalance({business_connection_id:e},t)}transferBusinessAccountStars(e,t,r){return this.raw.transferBusinessAccountStars({business_connection_id:e,star_count:t},r)}getBusinessAccountGifts(e,t,r){return this.raw.getBusinessAccountGifts({business_connection_id:e,...t},r)}convertGiftToStars(e,t,r){return this.raw.convertGiftToStars({business_connection_id:e,owned_gift_id:t},r)}upgradeGift(e,t,r,a){return this.raw.upgradeGift({business_connection_id:e,owned_gift_id:t,...r},a)}transferGift(e,t,r,a,c){return this.raw.transferGift({business_connection_id:e,owned_gift_id:t,new_owner_chat_id:r,star_count:a},c)}postStory(e,t,r,a,c){return this.raw.postStory({business_connection_id:e,content:t,active_period:r,...a},c)}editStory(e,t,r,a,c){return this.raw.editStory({business_connection_id:e,story_id:t,content:r,...a},c)}deleteStory(e,t,r){return this.raw.deleteStory({business_connection_id:e,story_id:t},r)}sendSticker(e,t,r,a){return this.raw.sendSticker({chat_id:e,sticker:t,...r},a)}getStickerSet(e,t){return this.raw.getStickerSet({name:e},t)}getCustomEmojiStickers(e,t){return this.raw.getCustomEmojiStickers({custom_emoji_ids:e},t)}uploadStickerFile(e,t,r,a){return this.raw.uploadStickerFile({user_id:e,sticker_format:t,sticker:r},a)}createNewStickerSet(e,t,r,a,c,l){return this.raw.createNewStickerSet({user_id:e,name:t,title:r,stickers:a,...c},l)}addStickerToSet(e,t,r,a){return this.raw.addStickerToSet({user_id:e,name:t,sticker:r},a)}setStickerPositionInSet(e,t,r){return this.raw.setStickerPositionInSet({sticker:e,position:t},r)}deleteStickerFromSet(e,t){return this.raw.deleteStickerFromSet({sticker:e},t)}replaceStickerInSet(e,t,r,a,c){return this.raw.replaceStickerInSet({user_id:e,name:t,old_sticker:r,sticker:a},c)}setStickerEmojiList(e,t,r){return this.raw.setStickerEmojiList({sticker:e,emoji_list:t},r)}setStickerKeywords(e,t,r){return this.raw.setStickerKeywords({sticker:e,keywords:t},r)}setStickerMaskPosition(e,t,r){return this.raw.setStickerMaskPosition({sticker:e,mask_position:t},r)}setStickerSetTitle(e,t,r){return this.raw.setStickerSetTitle({name:e,title:t},r)}deleteStickerSet(e,t){return this.raw.deleteStickerSet({name:e},t)}setStickerSetThumbnail(e,t,r,a,c){return this.raw.setStickerSetThumbnail({name:e,user_id:t,thumbnail:r,format:a},c)}setCustomEmojiStickerSetThumbnail(e,t,r){return this.raw.setCustomEmojiStickerSetThumbnail({name:e,custom_emoji_id:t},r)}getAvailableGifts(e){return this.raw.getAvailableGifts(e)}sendGift(e,t,r,a){return this.raw.sendGift({user_id:e,gift_id:t,...r},a)}giftPremiumSubscription(e,t,r,a,c){return this.raw.giftPremiumSubscription({user_id:e,month_count:t,star_count:r,...a},c)}sendGiftToChannel(e,t,r,a){return this.raw.sendGift({chat_id:e,gift_id:t,...r},a)}answerInlineQuery(e,t,r,a){return this.raw.answerInlineQuery({inline_query_id:e,results:t,...r},a)}answerWebAppQuery(e,t,r){return this.raw.answerWebAppQuery({web_app_query_id:e,result:t},r)}savePreparedInlineMessage(e,t,r,a){return this.raw.savePreparedInlineMessage({user_id:e,result:t,...r},a)}sendInvoice(e,t,r,a,c,l,p,f){return this.raw.sendInvoice({chat_id:e,title:t,description:r,payload:a,currency:c,prices:l,...p},f)}createInvoiceLink(e,t,r,a,c,l,p,f){return this.raw.createInvoiceLink({title:e,description:t,payload:r,provider_token:a,currency:c,prices:l,...p},f)}answerShippingQuery(e,t,r,a){return this.raw.answerShippingQuery({shipping_query_id:e,ok:t,...r},a)}answerPreCheckoutQuery(e,t,r,a){return this.raw.answerPreCheckoutQuery({pre_checkout_query_id:e,ok:t,...r},a)}getStarTransactions(e,t){return this.raw.getStarTransactions({...e},t)}refundStarPayment(e,t,r){return this.raw.refundStarPayment({user_id:e,telegram_payment_charge_id:t},r)}editUserStarSubscription(e,t,r,a){return this.raw.editUserStarSubscription({user_id:e,telegram_payment_charge_id:t,is_canceled:r},a)}verifyUser(e,t,r){return this.raw.verifyUser({user_id:e,...t},r)}verifyChat(e,t,r){return this.raw.verifyChat({chat_id:e,...t},r)}removeUserVerification(e,t){return this.raw.removeUserVerification({user_id:e},t)}removeChatVerification(e,t){return this.raw.removeChatVerification({chat_id:e},t)}readBusinessMessage(e,t,r,a){return this.raw.readBusinessMessage({business_connection_id:e,chat_id:t,message_id:r},a)}setPassportDataErrors(e,t,r){return this.raw.setPassportDataErrors({user_id:e,errors:t},r)}sendGame(e,t,r,a){return this.raw.sendGame({chat_id:e,game_short_name:t,...r},a)}setGameScore(e,t,r,a,c,l){return this.raw.setGameScore({chat_id:e,message_id:t,user_id:r,score:a,...c},l)}setGameScoreInline(e,t,r,a,c){return this.raw.setGameScore({inline_message_id:e,user_id:t,score:r,...a},c)}getGameHighScores(e,t,r,a){return this.raw.getGameHighScores({chat_id:e,message_id:t,user_id:r},a)}getGameHighScoresInline(e,t,r){return this.raw.getGameHighScores({inline_message_id:e,user_id:t},r)}}const ce=Z("grammy:bot"),ic=Z("grammy:warn"),Je=Z("grammy:error"),gi=["message","edited_message","channel_post","edited_channel_post","business_connection","business_message","edited_business_message","deleted_business_messages","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_join_request","chat_boost","removed_chat_boost"];class ac extends ve{constructor(t,r){super();D(this,"token");D(this,"pollingRunning");D(this,"pollingAbortController");D(this,"lastTriedUpdateId");D(this,"api");D(this,"me");D(this,"mePromise");D(this,"clientConfig");D(this,"ContextConstructor");D(this,"observedUpdateTypes");D(this,"errorHandler");if(this.token=t,this.pollingRunning=!1,this.lastTriedUpdateId=0,this.observedUpdateTypes=new Set,this.errorHandler=async a=>{var c,l;throw console.error("Error in middleware while handling update",(l=(c=a.ctx)==null?void 0:c.update)==null?void 0:l.update_id,a.error),console.error("No error handler was set!"),console.error("Set your own error handler with `bot.catch = ...`"),this.pollingRunning&&(console.error("Stopping bot"),await this.stop()),a},!t)throw new Error("Empty token!");this.me=r==null?void 0:r.botInfo,this.clientConfig=r==null?void 0:r.client,this.ContextConstructor=(r==null?void 0:r.ContextConstructor)??K,this.api=new As(t,this.clientConfig)}set botInfo(t){this.me=t}get botInfo(){if(this.me===void 0)throw new Error("Bot information unavailable! Make sure to call `await bot.init()` before accessing `bot.botInfo`!");return this.me}on(t,...r){for(const[a]of ei(t).flatMap(ti))this.observedUpdateTypes.add(a);return super.on(t,...r)}reaction(t,...r){return this.observedUpdateTypes.add("message_reaction"),super.reaction(t,...r)}isInited(){return this.me!==void 0}async init(t){if(!this.isInited()){ce("Initializing bot"),this.mePromise??(this.mePromise=Ns(()=>this.api.getMe(t),t));let r;try{r=await this.mePromise}finally{this.mePromise=void 0}this.me===void 0?this.me=r:ce("Bot info was set by now, will not overwrite")}ce(`I am ${this.me.username}!`)}async handleUpdates(t){for(const r of t){this.lastTriedUpdateId=r.update_id;try{await this.handleUpdate(r)}catch(a){if(a instanceof Rn)await this.errorHandler(a);else throw console.error("FATAL: grammY unable to handle:",a),a}}}async handleUpdate(t,r){if(this.me===void 0)throw new Error("Bot not initialized! Either call `await bot.init()`, or directly set the `botInfo` option in the `Bot` constructor to specify a known bot info object.");ce(`Processing update ${t.update_id}`);const a=new As(this.token,this.clientConfig,r),c=this.api.config.installedTransformers();c.length>0&&a.config.use(...c);const l=new this.ContextConstructor(t,a,this.me);try{await ri(this.middleware(),l)}catch(p){throw Je(`Error in middleware for update ${t.update_id}`),new Rn(p,l)}}async start(t){var a,c,l;const r=[];if(this.isInited()||r.push(this.init((a=this.pollingAbortController)==null?void 0:a.signal)),this.pollingRunning){await Promise.all(r),ce("Simple long polling already running!");return}this.pollingRunning=!0,this.pollingAbortController=new AbortController;try{r.push(Ns(async()=>{var p;await this.api.deleteWebhook({drop_pending_updates:t==null?void 0:t.drop_pending_updates},(p=this.pollingAbortController)==null?void 0:p.signal)},(c=this.pollingAbortController)==null?void 0:c.signal)),await Promise.all(r),await((l=t==null?void 0:t.onStart)==null?void 0:l.call(t,this.botInfo))}catch(p){throw this.pollingRunning=!1,this.pollingAbortController=void 0,p}this.pollingRunning&&(oc(this.observedUpdateTypes,t==null?void 0:t.allowed_updates),this.use=uc,ce("Starting simple long polling"),await this.loop(t),ce("Middleware is done running"))}async stop(){var t;if(this.pollingRunning){ce("Stopping bot, saving update offset"),this.pollingRunning=!1,(t=this.pollingAbortController)==null||t.abort();const r=this.lastTriedUpdateId+1;await this.api.getUpdates({offset:r,limit:1}).finally(()=>this.pollingAbortController=void 0)}else ce("Bot is not running!")}isRunning(){return this.pollingRunning}catch(t){this.errorHandler=t}async loop(t){const r=t==null?void 0:t.limit,a=(t==null?void 0:t.timeout)??30;let c=(t==null?void 0:t.allowed_updates)??[];try{for(;this.pollingRunning;){const l=await this.fetchUpdates({limit:r,timeout:a,allowed_updates:c});if(l===void 0)break;await this.handleUpdates(l),c=void 0}}finally{this.pollingRunning=!1}}async fetchUpdates({limit:t,timeout:r,allowed_updates:a}){var p;const c=this.lastTriedUpdateId+1;let l;do try{l=await this.api.getUpdates({offset:c,limit:t,timeout:r,allowed_updates:a},(p=this.pollingAbortController)==null?void 0:p.signal)}catch(f){await this.handlePollingError(f)}while(l===void 0&&this.pollingRunning);return l}async handlePollingError(t){if(!this.pollingRunning){ce("Pending getUpdates request cancelled");return}let r=3;if(t instanceof Yn){if(Je(t.message),t.error_code===401||t.error_code===409)throw t;t.error_code===429&&(Je("Bot API server is closing."),r=t.parameters.retry_after??r)}else Je(t);Je(`Call to getUpdates failed, retrying in ${r} seconds ...`),await xn(r)}}async function Ns(s,e){let r=50;async function a(l){let p=!1,f="rethrow";if(l instanceof ci)p=!0,f="retry";else if(l instanceof Yn){if(l.error_code>=500)p=!0,f="retry";else if(l.error_code===429){const g=l.parameters.retry_after;typeof g=="number"?(await xn(g,e),r=50):p=!0,f="retry"}}if(p){r!==50&&await xn(r,e);const g=20*60*1e3;r=Math.min(g,2*r)}return f}let c={ok:!1};for(;!c.ok;)try{c={ok:!0,value:await s()}}catch(l){switch(Je(l),await a(l)){case"retry":continue;case"rethrow":throw l}}return c.value}async function xn(s,e){let t,r;function a(){r==null||r(new Error("Aborted delay")),t!==void 0&&clearTimeout(t)}try{await new Promise((c,l)=>{if(r=l,e!=null&&e.aborted){a();return}e==null||e.addEventListener("abort",a),t=setTimeout(c,1e3*s)})}finally{e==null||e.removeEventListener("abort",a)}}function oc(s,e=gi){const t=Array.from(s).filter(r=>!e.includes(r));t.length>0&&ic(`You registered listeners for the following update types, but you did not specify them in \`allowed_updates\` so they may not be received: ${t.map(r=>`'${r}'`).join(", ")}`)}function uc(){throw new Error(`It looks like you are registering more listeners on your bot from within other listeners! This means that every time your bot handles a message like this one, new listeners will be added. This list grows until your machine crashes, so grammY throws this error to tell you that you should probably do things a bit differently. If you're unsure how to resolve this problem, you can ask in the group chat: https://telegram.me/grammyjs

On the other hand, if you actually know what you're doing and you do need to install further middleware while your bot is running, consider installing a composer instance on your bot, and in turn augment the composer after the fact. This way, you can circumvent this protection against memory leaks.`)}[...gi];Z("grammy:session");Z("grammy:error");async function Fs(s){let e=new FormData;if(s.document instanceof Buffer){const t=new Blob([s.document],{type:s.contentType});e.append("document",t,s.documentName)}else if(s.document instanceof File)e.append("document",s.document,s.documentName);else if(s.document instanceof FormData)e=s.document;else if(s.document instanceof ReadableStream){const t=[],r=s.document.getReader();for(;;){const{done:c,value:l}=await r.read();if(c)break;t.push(l)}const a=new Blob(t,{type:s.contentType});e.append("document",a,s.documentName)}return e.append("documentName",s.documentName),e}var cc=["/v1/pipes/run","/beta/chat","/beta/generate","/v1/agent/run"],he=class Bn extends Error{constructor(e,t,r,a){super(Bn.makeMessage(e,t,r)),this.status=e,this.headers=a,this.request_id=a==null?void 0:a["lb-request-id"];const c=t;this.error=c,this.code=c==null?void 0:c.code,this.status=c==null?void 0:c.status}static makeMessage(e,t,r){const a=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,t,r,a){if(!e)return new yi({cause:t instanceof Error?t:void 0});const c=t==null?void 0:t.error;switch(e){case 400:return new lc(e,c,r,a);case 401:return new hc(e,c,r,a);case 403:return new dc(e,c,r,a);case 404:return new fc(e,c,r,a);case 409:return new mc(e,c,r,a);case 422:return new pc(e,c,r,a);case 429:return new gc(e,c,r,a);default:return e>=500?new yc(e,c,r,a):new Bn(e,c,r,a)}}},yi=class extends he{constructor({message:s,cause:e}){super(void 0,void 0,s||"Connection error.",void 0),this.status=void 0,e&&(this.cause=e)}},lc=class extends he{constructor(){super(...arguments),this.status=400}},hc=class extends he{constructor(){super(...arguments),this.status=401}},dc=class extends he{constructor(){super(...arguments),this.status=403}},fc=class extends he{constructor(){super(...arguments),this.status=404}},mc=class extends he{constructor(){super(...arguments),this.status=409}},pc=class extends he{constructor(){super(...arguments),this.status=422}},gc=class extends he{constructor(){super(...arguments),this.status=429}},yc=class extends he{},Rs=class vt{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const l of wc(e,t))if(!c){if(l.data.startsWith("[DONE]")){c=!0;continue}if(l.event===null){let p;try{p=JSON.parse(l.data)}catch(f){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),f}if(p&&p.error)throw new Error(p.error);yield p}else{let p;try{p=JSON.parse(l.data)}catch(f){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),f}if(l.event=="error")throw new Error(p.message);yield{event:l.event,data:p}}}c=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{c||t.abort()}}return new vt(a,t)}static fromReadableStream(e,t){let r=!1;async function*a(){const l=new wi,p=bi(e);for await(const f of p)for(const g of l.decode(f))yield g;for(const f of l.flush())yield f}async function*c(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{for await(const p of a())l||p&&(yield JSON.parse(p));l=!0}catch(p){if(p instanceof Error&&p.name==="AbortError")return;throw p}finally{l||t.abort()}}return new vt(c,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),a=c=>({next:()=>{if(c.length===0){const l=r.next();e.push(l),t.push(l)}return c.shift()}});return[new vt(()=>a(e),this.controller),new vt(()=>a(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new ReadableStream({async start(){t=e[Symbol.asyncIterator]()},async pull(a){try{const{value:c,done:l}=await t.next();if(l)return a.close();const p=r.encode(JSON.stringify(c)+`
`);a.enqueue(p)}catch(c){a.error(c)}},async cancel(){var a;await((a=t.return)==null?void 0:a.call(t))}})}};async function*wc(s,e){if(!s.body)throw e.abort(),new Error("Attempted to iterate over a response with no body");const t=new vc,r=new wi,a=bi(s.body);for await(const c of bc(a))for(const l of r.decode(c)){const p=t.decode(l);p&&(yield p)}for(const c of r.flush()){const l=t.decode(c);l&&(yield l)}}async function*bc(s){let e=new Uint8Array;for await(const t of s){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let a=new Uint8Array(e.length+r.length);a.set(e),a.set(r,e.length),e=a;let c;for(;(c=Cc(e))!==-1;)yield e.slice(0,c),e=e.slice(c)}e.length>0&&(yield e)}function Cc(s){for(let r=0;r<s.length-2;r++){if(s[r]===10&&s[r+1]===10||s[r]===13&&s[r+1]===13)return r+2;if(s[r]===13&&s[r+1]===10&&r+3<s.length&&s[r+2]===13&&s[r+3]===10)return r+4}return-1}var vc=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(s){if(s.endsWith("\r")&&(s=s.substring(0,s.length-1)),!s){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(s),s.startsWith(":"))return null;let[e,t,r]=Sc(s,":");return r.startsWith(" ")&&(r=r.substring(1)),e==="event"?this.event=r:e==="data"&&this.data.push(r),null}},Qn=class Un{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const r=Un.NEWLINE_CHARS.has(t[t.length-1]||"");let a=t.split(Un.NEWLINE_REGEXP);return r&&a.pop(),a.length===1&&!r?(this.buffer.push(a[0]),[]):(this.buffer.length>0&&(a=[this.buffer.join("")+a[0],...a.slice(1)],this.buffer=[]),r||(this.buffer=[a.pop()||""]),a)}decodeText(e){var t;if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Error(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return(t=this.textDecoder)!=null||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Error(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Error("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}};Qn.NEWLINE_CHARS=new Set([`
`,"\r"]);Qn.NEWLINE_REGEXP=/\r\n|[\n\r]/g;var wi=Qn;function Sc(s,e){const t=s.indexOf(e);return t!==-1?[s.substring(0,t),e,s.substring(t+e.length)]:[s,"",""]}function bi(s){if(s[Symbol.asyncIterator])return s;const e=s.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}var Ps=class{constructor(s){this.config=s}async send({endpoint:s,...e}){var t,r,a,c,l;const p=this.buildUrl({endpoint:s}),f=this.buildHeaders({headers:e.headers});let g;try{g=await this.makeRequest({url:p,options:e,headers:f})}catch(v){throw new yi({cause:v instanceof Error?v:void 0})}if(g.ok||await this.handleErrorResponse({response:g}),cc.includes(s)){const v=g.headers.get("lb-thread-id");return e.body?(a=e.body)!=null&&a.stream&&p.includes("run")?this.handleRunResponseStream({response:g,rawResponse:e.body.rawResponse}):e.body.stream?this.handleStreamResponse({response:g}):this.handleRunResponse({response:g,threadId:v,rawResponse:(l=(c=e.body)==null?void 0:c.rawResponse)!=null?l:!1,endpoint:s}):this.handleRunResponse({response:g,threadId:null,rawResponse:(r=(t=e.body)==null?void 0:t.rawResponse)!=null?r:!1,endpoint:s})}else return g.json()}buildUrl({endpoint:s}){return`${this.config.baseUrl}${s}`}buildHeaders({headers:s}){return{"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`,...s}}async makeRequest({url:s,options:e,headers:t}){return fetch(s,{method:e.method,headers:t,body:JSON.stringify(e.body)})}async handleErrorResponse({response:s}){let e;try{e=await s.json()}catch{e=await s.text()}throw he.generate(s.status,e,s.statusText,s.headers)}handleStreamResponse({response:s}){const e=new AbortController;return{stream:Rs.fromSSEResponse(s,e),threadId:s.headers.get("lb-thread-id")}}handleRunResponseStream({response:s,rawResponse:e}){const t=new AbortController,c={stream:Rs.fromSSEResponse(s,t).toReadableStream(),threadId:s.headers.get("lb-thread-id")};return e&&(c.rawResponse={headers:Object.fromEntries(s.headers.entries())}),c}async handleRunResponse({response:s,threadId:e,rawResponse:t,endpoint:r}){let a=!1;r==="/v1/agent/run"&&(a=!0);const c=await s.json(),p={...c.raw?a?{output:c.output,...c.raw}:{completion:c.completion,...c.raw}:c};return e&&(p.threadId=e),t&&(p.rawResponse={headers:Object.fromEntries(s.headers.entries())}),p}async post(s){return this.send({...s,method:"POST"})}async get(s){return this.send({...s,method:"GET"})}async put(s){return this.send({...s,method:"PUT"})}async delete(s){return this.send({...s,method:"DELETE"})}},Tc=class{constructor(s){var e,t;this.baseUrl=(e=s==null?void 0:s.baseUrl)!=null?e:"https://api.langbase.com",this.apiKey=(t=s==null?void 0:s.apiKey)!=null?t:"",this.request=new Ps({apiKey:this.apiKey,baseUrl:this.baseUrl}),this.pipe={list:this.listPipe.bind(this),create:this.createPipe.bind(this),update:this.updatePipe.bind(this),run:this.runPipe.bind(this)},this.pipes={list:this.listPipe.bind(this),create:this.createPipe.bind(this),update:this.updatePipe.bind(this),run:this.runPipe.bind(this)},this.memory={create:this.createMemory.bind(this),delete:this.deleteMemory.bind(this),retrieve:this.retrieveMemory.bind(this),list:this.listMemory.bind(this),documents:{list:this.listDocs.bind(this),delete:this.deleteDoc.bind(this),upload:this.uploadDocs.bind(this),embedding:{retry:this.retryDocEmbed.bind(this)}}},this.memories={create:this.createMemory.bind(this),delete:this.deleteMemory.bind(this),retrieve:this.retrieveMemory.bind(this),list:this.listMemory.bind(this),documents:{list:this.listDocs.bind(this),delete:this.deleteDoc.bind(this),upload:this.uploadDocs.bind(this),embeddings:{retry:this.retryDocEmbed.bind(this)}}},this.tools={crawl:this.webCrawl.bind(this),webSearch:this.webSearch.bind(this)},this.tool={crawl:this.webCrawl.bind(this),webSearch:this.webSearch.bind(this)},this.embed=this.generateEmbeddings.bind(this),this.chunk=this.chunkDocument.bind(this),this.parse=this.parseDocument.bind(this),this.threads={create:this.createThread.bind(this),update:this.updateThread.bind(this),get:this.getThread.bind(this),delete:this.deleteThread.bind(this),append:this.appendThreadMessages.bind(this),messages:{list:this.listThreadMessages.bind(this)}},this.agent={run:this.runAgent.bind(this)}}async runPipe(s){var e;if(!((e=s.name)!=null&&e.trim())&&!s.apiKey)throw new Error("Pipe name or Pipe API key is required to run the pipe.");return typeof s.stream>"u"&&delete s.stream,s.apiKey&&(this.request=new Ps({apiKey:s.apiKey,baseUrl:this.baseUrl})),this.request.post({endpoint:"/v1/pipes/run",body:s,headers:{...s.llmKey&&{"LB-LLM-KEY":s.llmKey}}})}async createPipe(s){return this.request.post({endpoint:"/v1/pipes",body:s})}async updatePipe(s){return this.request.post({endpoint:`/v1/pipes/${s.name}`,body:s})}async listPipe(){return this.request.get({endpoint:"/v1/pipes"})}async createMemory(s){return this.request.post({endpoint:"/v1/memory",body:s})}async listMemory(){return this.request.get({endpoint:"/v1/memory"})}async deleteMemory(s){return this.request.delete({endpoint:`/v1/memory/${s.name}`})}async retrieveMemory(s){return this.request.post({endpoint:"/v1/memory/retrieve",body:s})}async listDocs(s){return this.request.get({endpoint:`/v1/memory/${s.memoryName}/documents`})}async deleteDoc(s){return this.request.delete({endpoint:`/v1/memory/${s.memoryName}/documents/${s.documentName}`})}async uploadDocs(s){try{const t=(await this.request.post({endpoint:"/v1/memory/documents",body:{memoryName:s.memoryName,fileName:s.documentName,meta:s.meta}})).signedUrl;return await fetch(t,{method:"PUT",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":s.contentType},body:s.document})}catch(e){throw e}}async retryDocEmbed(s){return this.request.get({endpoint:`/v1/memory/${s.memoryName}/documents/${s.documentName}/embeddings/retry`})}async webSearch(s){const e=s.apiKey?s.apiKey:null;return e&&delete s.apiKey,this.request.post({endpoint:"/v1/tools/web-search",body:s,headers:{...e&&{"LB-WEB-SEARCH-KEY":e}}})}async webCrawl(s){const e=s.apiKey?s.apiKey:null;return e&&delete s.apiKey,this.request.post({endpoint:"/v1/tools/crawl",body:s,headers:{...e&&{"LB-CRAWL-KEY":e}}})}async generateEmbeddings(s){return this.request.post({endpoint:"/v1/embed",body:s})}async chunkDocument(s){const e=await Fs({document:s.document,documentName:s.documentName,contentType:s.contentType});return s.chunkMaxLength&&e.append("chunkMaxLength",s.chunkMaxLength),s.chunkOverlap&&e.append("chunkOverlap",s.chunkOverlap),(await fetch(`${this.baseUrl}/v1/chunk`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`},body:e})).json()}async parseDocument(s){const e=await Fs({document:s.document,documentName:s.documentName,contentType:s.contentType});return(await fetch(`${this.baseUrl}/v1/parse`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`},body:e})).json()}async createThread(s){return this.request.post({endpoint:"/v1/threads",body:s})}async updateThread(s){return this.request.post({endpoint:`/v1/threads/${s.threadId}`,body:s})}async getThread(s){return this.request.get({endpoint:`/v1/threads/${s.threadId}`})}async deleteThread(s){return this.request.delete({endpoint:`/v1/threads/${s.threadId}`})}async appendThreadMessages(s){return this.request.post({endpoint:`/v1/threads/${s.threadId}/messages`,body:s.messages})}async listThreadMessages(s){return this.request.get({endpoint:`/v1/threads/${s.threadId}/messages`})}async runAgent(s){if(!s.apiKey)throw new Error("LLM API key is required to run this LLM.");return typeof s.stream>"u"&&delete s.stream,this.request.post({endpoint:"/v1/agent/run",body:s,headers:{...s.apiKey&&{"LB-LLM-Key":s.apiKey}}})}};const Ci=new Tc({apiKey:"user_34mUZrmhfDba3XMQmUmHe8ZjK4EzJrJ5kgMgezCjBNuFT7PcDGzt28GFxJjWe6MtybC7H6c7aGkqn1b3y23L1VTd"});async function Ic({chunks:s,query:e}){const t=await _c(s),{completion:r}=await Ci.pipes.run({stream:!1,name:"ai-support-agent",messages:[{role:"system",content:t},{role:"user",content:e}]});return r}async function _c(s){let e="";for(const r of s)e+=r.text+`
`;return`
    You're a helpful AI assistant.
    You will assist users with their queries.

    Always ensure that you provide accurate and to the point information.
    Below is some CONTEXT for you to answer the questions. ONLY answer from the CONTEXT. CONTEXT consists of multiple information chunks. Each chunk has a source mentioned at the end.

For each piece of response you provide, cite the source in brackets like so: [1].

At the end of the answer, always list each source with its corresponding number and provide the document name. like so [1] Filename.doc. If there is a URL, make it hyperlink on the name.

 If you don't know the answer, say so. Ask for more context if needed.
    ${e}`}async function kc(s){return await Ci.memories.retrieve({query:s,topK:4,memory:[{name:"knowledge-base"}]})}function Ec(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var e=s.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(r){var a=Object.getOwnPropertyDescriptor(s,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return s[r]}})}),t}var _n={},Ct={},Q={},$s;function Mc(){if($s)return Q;$s=1,Object.defineProperty(Q,"__esModule",{value:!0});class s extends Error{}class e extends s{constructor(n){super(`Invalid DateTime: ${n.toMessage()}`)}}class t extends s{constructor(n){super(`Invalid Interval: ${n.toMessage()}`)}}class r extends s{constructor(n){super(`Invalid Duration: ${n.toMessage()}`)}}class a extends s{}class c extends s{constructor(n){super(`Invalid unit ${n}`)}}class l extends s{}class p extends s{constructor(){super("Zone is an abstract class")}}const f="numeric",g="short",C="long",v={year:f,month:f,day:f},T={year:f,month:g,day:f},A={year:f,month:g,day:f,weekday:g},I={year:f,month:C,day:f},_={year:f,month:C,day:f,weekday:C},R={hour:f,minute:f},N={hour:f,minute:f,second:f},H={hour:f,minute:f,second:f,timeZoneName:g},Y={hour:f,minute:f,second:f,timeZoneName:C},V={hour:f,minute:f,hourCycle:"h23"},$e={hour:f,minute:f,second:f,hourCycle:"h23"},ne={hour:f,minute:f,second:f,hourCycle:"h23",timeZoneName:g},ae={hour:f,minute:f,second:f,hourCycle:"h23",timeZoneName:C},st={year:f,month:f,day:f,hour:f,minute:f},_t={year:f,month:f,day:f,hour:f,minute:f,second:f},Kn={year:f,month:g,day:f,hour:f,minute:f},Xn={year:f,month:g,day:f,hour:f,minute:f,second:f},Di={year:f,month:g,day:f,weekday:g,hour:f,minute:f},er={year:f,month:C,day:f,hour:f,minute:f,timeZoneName:g},tr={year:f,month:C,day:f,hour:f,minute:f,second:f,timeZoneName:g},nr={year:f,month:C,day:f,weekday:C,hour:f,minute:f,timeZoneName:C},rr={year:f,month:C,day:f,weekday:C,hour:f,minute:f,second:f,timeZoneName:C};class Le{get type(){throw new p}get name(){throw new p}get ianaName(){return this.name}get isUniversal(){throw new p}offsetName(n,i){throw new p}formatOffset(n,i){throw new p}offset(n){throw new p}equals(n){throw new p}get isValid(){throw new p}}let Gt=null;class it extends Le{static get instance(){return Gt===null&&(Gt=new it),Gt}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(n,{format:i,locale:u}){return Dr(n,i,u)}formatOffset(n,i){return ct(this.offset(n),i)}offset(n){return-new Date(n).getTimezoneOffset()}equals(n){return n.type==="system"}get isValid(){return!0}}const zt=new Map;function Ai(o){let n=zt.get(o);return n===void 0&&(n=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:o,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),zt.set(o,n)),n}const Ni={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Fi(o,n){const i=o.format(n).replace(/\u200E/g,""),u=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,h,d,m,y,b,S,k]=u;return[m,h,d,y,b,S,k]}function Ri(o,n){const i=o.formatToParts(n),u=[];for(let h=0;h<i.length;h++){const{type:d,value:m}=i[h],y=Ni[d];d==="era"?u[y]=m:E(y)||(u[y]=parseInt(m,10))}return u}const Zt=new Map;class oe extends Le{static create(n){let i=Zt.get(n);return i===void 0&&Zt.set(n,i=new oe(n)),i}static resetCache(){Zt.clear(),zt.clear()}static isValidSpecifier(n){return this.isValidZone(n)}static isValidZone(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch{return!1}}constructor(n){super(),this.zoneName=n,this.valid=oe.isValidZone(n)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(n,{format:i,locale:u}){return Dr(n,i,u,this.name)}formatOffset(n,i){return ct(this.offset(n),i)}offset(n){if(!this.valid)return NaN;const i=new Date(n);if(isNaN(i))return NaN;const u=Ai(this.name);let[h,d,m,y,b,S,k]=u.formatToParts?Ri(u,i):Fi(u,i);y==="BC"&&(h=-Math.abs(h)+1);const W=Dt({year:h,month:d,day:m,hour:b===24?0:b,minute:S,second:k,millisecond:0});let O=+i;const q=O%1e3;return O-=q>=0?q:1e3+q,(W-O)/(60*1e3)}equals(n){return n.type==="iana"&&n.name===this.name}get isValid(){return this.valid}}let sr={};function Pi(o,n={}){const i=JSON.stringify([o,n]);let u=sr[i];return u||(u=new Intl.ListFormat(o,n),sr[i]=u),u}const Yt=new Map;function Qt(o,n={}){const i=JSON.stringify([o,n]);let u=Yt.get(i);return u===void 0&&(u=new Intl.DateTimeFormat(o,n),Yt.set(i,u)),u}const Jt=new Map;function $i(o,n={}){const i=JSON.stringify([o,n]);let u=Jt.get(i);return u===void 0&&(u=new Intl.NumberFormat(o,n),Jt.set(i,u)),u}const Kt=new Map;function Li(o,n={}){const{base:i,...u}=n,h=JSON.stringify([o,u]);let d=Kt.get(h);return d===void 0&&(d=new Intl.RelativeTimeFormat(o,n),Kt.set(h,d)),d}let at=null;function xi(){return at||(at=new Intl.DateTimeFormat().resolvedOptions().locale,at)}const Xt=new Map;function ir(o){let n=Xt.get(o);return n===void 0&&(n=new Intl.DateTimeFormat(o).resolvedOptions(),Xt.set(o,n)),n}const en=new Map;function Bi(o){let n=en.get(o);if(!n){const i=new Intl.Locale(o);n="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in n||(n={...ar,...n}),en.set(o,n)}return n}function Ui(o){const n=o.indexOf("-x-");n!==-1&&(o=o.substring(0,n));const i=o.indexOf("-u-");if(i===-1)return[o];{let u,h;try{u=Qt(o).resolvedOptions(),h=o}catch{const b=o.substring(0,i);u=Qt(b).resolvedOptions(),h=b}const{numberingSystem:d,calendar:m}=u;return[h,d,m]}}function Wi(o,n,i){return(i||n)&&(o.includes("-u-")||(o+="-u"),i&&(o+=`-ca-${i}`),n&&(o+=`-nu-${n}`)),o}function Vi(o){const n=[];for(let i=1;i<=12;i++){const u=M.utc(2009,i,1);n.push(o(u))}return n}function ji(o){const n=[];for(let i=1;i<=7;i++){const u=M.utc(2016,11,13+i);n.push(o(u))}return n}function kt(o,n,i,u){const h=o.listingMode();return h==="error"?null:h==="en"?i(n):u(n)}function qi(o){return o.numberingSystem&&o.numberingSystem!=="latn"?!1:o.numberingSystem==="latn"||!o.locale||o.locale.startsWith("en")||ir(o.locale).numberingSystem==="latn"}class Hi{constructor(n,i,u){this.padTo=u.padTo||0,this.floor=u.floor||!1;const{padTo:h,floor:d,...m}=u;if(!i||Object.keys(m).length>0){const y={useGrouping:!1,...u};u.padTo>0&&(y.minimumIntegerDigits=u.padTo),this.inf=$i(n,y)}}format(n){if(this.inf){const i=this.floor?Math.floor(n):n;return this.inf.format(i)}else{const i=this.floor?Math.floor(n):ln(n,3);return j(i,this.padTo)}}}class Gi{constructor(n,i,u){this.opts=u,this.originalZone=void 0;let h;if(this.opts.timeZone)this.dt=n;else if(n.zone.type==="fixed"){const m=-1*(n.offset/60),y=m>=0?`Etc/GMT+${m}`:`Etc/GMT${m}`;n.offset!==0&&oe.create(y).valid?(h=y,this.dt=n):(h="UTC",this.dt=n.offset===0?n:n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone)}else n.zone.type==="system"?this.dt=n:n.zone.type==="iana"?(this.dt=n,h=n.zone.name):(h="UTC",this.dt=n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone);const d={...this.opts};d.timeZone=d.timeZone||h,this.dtf=Qt(i,d)}format(){return this.originalZone?this.formatToParts().map(({value:n})=>n).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const n=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?n.map(i=>{if(i.type==="timeZoneName"){const u=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:u}}else return i}):n}resolvedOptions(){return this.dtf.resolvedOptions()}}class zi{constructor(n,i,u){this.opts={style:"long",...u},!i&&kr()&&(this.rtf=Li(n,u))}format(n,i){return this.rtf?this.rtf.format(n,i):ma(i,n,this.opts.numeric,this.opts.style!=="long")}formatToParts(n,i){return this.rtf?this.rtf.formatToParts(n,i):[]}}const ar={firstDay:1,minimalDays:4,weekend:[6,7]};class L{static fromOpts(n){return L.create(n.locale,n.numberingSystem,n.outputCalendar,n.weekSettings,n.defaultToEN)}static create(n,i,u,h,d=!1){const m=n||B.defaultLocale,y=m||(d?"en-US":xi()),b=i||B.defaultNumberingSystem,S=u||B.defaultOutputCalendar,k=un(h)||B.defaultWeekSettings;return new L(y,b,S,k,m)}static resetCache(){at=null,Yt.clear(),Jt.clear(),Kt.clear(),Xt.clear(),en.clear()}static fromObject({locale:n,numberingSystem:i,outputCalendar:u,weekSettings:h}={}){return L.create(n,i,u,h)}constructor(n,i,u,h,d){const[m,y,b]=Ui(n);this.locale=m,this.numberingSystem=i||y||null,this.outputCalendar=u||b||null,this.weekSettings=h,this.intl=Wi(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=d,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=qi(this)),this.fastNumbersCached}listingMode(){const n=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return n&&i?"en":"intl"}clone(n){return!n||Object.getOwnPropertyNames(n).length===0?this:L.create(n.locale||this.specifiedLocale,n.numberingSystem||this.numberingSystem,n.outputCalendar||this.outputCalendar,un(n.weekSettings)||this.weekSettings,n.defaultToEN||!1)}redefaultToEN(n={}){return this.clone({...n,defaultToEN:!0})}redefaultToSystem(n={}){return this.clone({...n,defaultToEN:!1})}months(n,i=!1){return kt(this,n,Fr,()=>{const u=i?{month:n,day:"numeric"}:{month:n},h=i?"format":"standalone";return this.monthsCache[h][n]||(this.monthsCache[h][n]=Vi(d=>this.extract(d,u,"month"))),this.monthsCache[h][n]})}weekdays(n,i=!1){return kt(this,n,$r,()=>{const u=i?{weekday:n,year:"numeric",month:"long",day:"numeric"}:{weekday:n},h=i?"format":"standalone";return this.weekdaysCache[h][n]||(this.weekdaysCache[h][n]=ji(d=>this.extract(d,u,"weekday"))),this.weekdaysCache[h][n]})}meridiems(){return kt(this,void 0,()=>Lr,()=>{if(!this.meridiemCache){const n={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[M.utc(2016,11,13,9),M.utc(2016,11,13,19)].map(i=>this.extract(i,n,"dayperiod"))}return this.meridiemCache})}eras(n){return kt(this,n,xr,()=>{const i={era:n};return this.eraCache[n]||(this.eraCache[n]=[M.utc(-40,1,1),M.utc(2017,1,1)].map(u=>this.extract(u,i,"era"))),this.eraCache[n]})}extract(n,i,u){const h=this.dtFormatter(n,i),d=h.formatToParts(),m=d.find(y=>y.type.toLowerCase()===u);return m?m.value:null}numberFormatter(n={}){return new Hi(this.intl,n.forceSimple||this.fastNumbers,n)}dtFormatter(n,i={}){return new Gi(n,this.intl,i)}relFormatter(n={}){return new zi(this.intl,this.isEnglish(),n)}listFormatter(n={}){return Pi(this.intl,n)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||ir(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Er()?Bi(this.locale):ar}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(n){return this.locale===n.locale&&this.numberingSystem===n.numberingSystem&&this.outputCalendar===n.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let tn=null;class G extends Le{static get utcInstance(){return tn===null&&(tn=new G(0)),tn}static instance(n){return n===0?G.utcInstance:new G(n)}static parseSpecifier(n){if(n){const i=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new G(At(i[1],i[2]))}return null}constructor(n){super(),this.fixed=n}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${ct(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${ct(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(n,i){return ct(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(n){return n.type==="fixed"&&n.fixed===this.fixed}get isValid(){return!0}}class or extends Le{constructor(n){super(),this.zoneName=n}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function pe(o,n){if(E(o)||o===null)return n;if(o instanceof Le)return o;if(Xi(o)){const i=o.toLowerCase();return i==="default"?n:i==="local"||i==="system"?it.instance:i==="utc"||i==="gmt"?G.utcInstance:G.parseSpecifier(i)||oe.create(o)}else return ge(o)?G.instance(o):typeof o=="object"&&"offset"in o&&typeof o.offset=="function"?o:new or(o)}const nn={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},ur={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Zi=nn.hanidec.replace(/[\[|\]]/g,"").split("");function Yi(o){let n=parseInt(o,10);if(isNaN(n)){n="";for(let i=0;i<o.length;i++){const u=o.charCodeAt(i);if(o[i].search(nn.hanidec)!==-1)n+=Zi.indexOf(o[i]);else for(const h in ur){const[d,m]=ur[h];u>=d&&u<=m&&(n+=u-d)}}return parseInt(n,10)}else return n}const rn=new Map;function Qi(){rn.clear()}function re({numberingSystem:o},n=""){const i=o||"latn";let u=rn.get(i);u===void 0&&(u=new Map,rn.set(i,u));let h=u.get(n);return h===void 0&&(h=new RegExp(`${nn[i]}${n}`),u.set(n,h)),h}let cr=()=>Date.now(),lr="system",hr=null,dr=null,fr=null,mr=60,pr,gr=null;class B{static get now(){return cr}static set now(n){cr=n}static set defaultZone(n){lr=n}static get defaultZone(){return pe(lr,it.instance)}static get defaultLocale(){return hr}static set defaultLocale(n){hr=n}static get defaultNumberingSystem(){return dr}static set defaultNumberingSystem(n){dr=n}static get defaultOutputCalendar(){return fr}static set defaultOutputCalendar(n){fr=n}static get defaultWeekSettings(){return gr}static set defaultWeekSettings(n){gr=un(n)}static get twoDigitCutoffYear(){return mr}static set twoDigitCutoffYear(n){mr=n%100}static get throwOnInvalid(){return pr}static set throwOnInvalid(n){pr=n}static resetCaches(){L.resetCache(),oe.resetCache(),M.resetCache(),Qi()}}class se{constructor(n,i){this.reason=n,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const yr=[0,31,59,90,120,151,181,212,243,273,304,334],wr=[0,31,60,91,121,152,182,213,244,274,305,335];function X(o,n){return new se("unit out of range",`you specified ${n} (of type ${typeof n}) as a ${o}, which is invalid`)}function sn(o,n,i){const u=new Date(Date.UTC(o,n-1,i));o<100&&o>=0&&u.setUTCFullYear(u.getUTCFullYear()-1900);const h=u.getUTCDay();return h===0?7:h}function br(o,n,i){return i+(ot(o)?wr:yr)[n-1]}function Cr(o,n){const i=ot(o)?wr:yr,u=i.findIndex(d=>d<n),h=n-i[u];return{month:u+1,day:h}}function an(o,n){return(o-n+7)%7+1}function Et(o,n=4,i=1){const{year:u,month:h,day:d}=o,m=br(u,h,d),y=an(sn(u,h,d),i);let b=Math.floor((m-y+14-n)/7),S;return b<1?(S=u-1,b=ut(S,n,i)):b>ut(u,n,i)?(S=u+1,b=1):S=u,{weekYear:S,weekNumber:b,weekday:y,...Ft(o)}}function vr(o,n=4,i=1){const{weekYear:u,weekNumber:h,weekday:d}=o,m=an(sn(u,1,n),i),y=Be(u);let b=h*7+d-m-7+n,S;b<1?(S=u-1,b+=Be(S)):b>y?(S=u+1,b-=Be(u)):S=u;const{month:k,day:F}=Cr(S,b);return{year:S,month:k,day:F,...Ft(o)}}function on(o){const{year:n,month:i,day:u}=o,h=br(n,i,u);return{year:n,ordinal:h,...Ft(o)}}function Sr(o){const{year:n,ordinal:i}=o,{month:u,day:h}=Cr(n,i);return{year:n,month:u,day:h,...Ft(o)}}function Tr(o,n){if(!E(o.localWeekday)||!E(o.localWeekNumber)||!E(o.localWeekYear)){if(!E(o.weekday)||!E(o.weekNumber)||!E(o.weekYear))throw new a("Cannot mix locale-based week fields with ISO-based week fields");return E(o.localWeekday)||(o.weekday=o.localWeekday),E(o.localWeekNumber)||(o.weekNumber=o.localWeekNumber),E(o.localWeekYear)||(o.weekYear=o.localWeekYear),delete o.localWeekday,delete o.localWeekNumber,delete o.localWeekYear,{minDaysInFirstWeek:n.getMinDaysInFirstWeek(),startOfWeek:n.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Ji(o,n=4,i=1){const u=Mt(o.weekYear),h=ee(o.weekNumber,1,ut(o.weekYear,n,i)),d=ee(o.weekday,1,7);return u?h?d?!1:X("weekday",o.weekday):X("week",o.weekNumber):X("weekYear",o.weekYear)}function Ki(o){const n=Mt(o.year),i=ee(o.ordinal,1,Be(o.year));return n?i?!1:X("ordinal",o.ordinal):X("year",o.year)}function Ir(o){const n=Mt(o.year),i=ee(o.month,1,12),u=ee(o.day,1,Ot(o.year,o.month));return n?i?u?!1:X("day",o.day):X("month",o.month):X("year",o.year)}function _r(o){const{hour:n,minute:i,second:u,millisecond:h}=o,d=ee(n,0,23)||n===24&&i===0&&u===0&&h===0,m=ee(i,0,59),y=ee(u,0,59),b=ee(h,0,999);return d?m?y?b?!1:X("millisecond",h):X("second",u):X("minute",i):X("hour",n)}function E(o){return typeof o>"u"}function ge(o){return typeof o=="number"}function Mt(o){return typeof o=="number"&&o%1===0}function Xi(o){return typeof o=="string"}function ea(o){return Object.prototype.toString.call(o)==="[object Date]"}function kr(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Er(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function ta(o){return Array.isArray(o)?o:[o]}function Mr(o,n,i){if(o.length!==0)return o.reduce((u,h)=>{const d=[n(h),h];return u&&i(u[0],d[0])===u[0]?u:d},null)[1]}function na(o,n){return n.reduce((i,u)=>(i[u]=o[u],i),{})}function xe(o,n){return Object.prototype.hasOwnProperty.call(o,n)}function un(o){if(o==null)return null;if(typeof o!="object")throw new l("Week settings must be an object");if(!ee(o.firstDay,1,7)||!ee(o.minimalDays,1,7)||!Array.isArray(o.weekend)||o.weekend.some(n=>!ee(n,1,7)))throw new l("Invalid week settings");return{firstDay:o.firstDay,minimalDays:o.minimalDays,weekend:Array.from(o.weekend)}}function ee(o,n,i){return Mt(o)&&o>=n&&o<=i}function ra(o,n){return o-n*Math.floor(o/n)}function j(o,n=2){const i=o<0;let u;return i?u="-"+(""+-o).padStart(n,"0"):u=(""+o).padStart(n,"0"),u}function ye(o){if(!(E(o)||o===null||o===""))return parseInt(o,10)}function Ie(o){if(!(E(o)||o===null||o===""))return parseFloat(o)}function cn(o){if(!(E(o)||o===null||o==="")){const n=parseFloat("0."+o)*1e3;return Math.floor(n)}}function ln(o,n,i=!1){const u=10**n;return(i?Math.trunc:Math.round)(o*u)/u}function ot(o){return o%4===0&&(o%100!==0||o%400===0)}function Be(o){return ot(o)?366:365}function Ot(o,n){const i=ra(n-1,12)+1,u=o+(n-i)/12;return i===2?ot(u)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Dt(o){let n=Date.UTC(o.year,o.month-1,o.day,o.hour,o.minute,o.second,o.millisecond);return o.year<100&&o.year>=0&&(n=new Date(n),n.setUTCFullYear(o.year,o.month-1,o.day)),+n}function Or(o,n,i){return-an(sn(o,1,n),i)+n-1}function ut(o,n=4,i=1){const u=Or(o,n,i),h=Or(o+1,n,i);return(Be(o)-u+h)/7}function hn(o){return o>99?o:o>B.twoDigitCutoffYear?1900+o:2e3+o}function Dr(o,n,i,u=null){const h=new Date(o),d={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};u&&(d.timeZone=u);const m={timeZoneName:n,...d},y=new Intl.DateTimeFormat(i,m).formatToParts(h).find(b=>b.type.toLowerCase()==="timezonename");return y?y.value:null}function At(o,n){let i=parseInt(o,10);Number.isNaN(i)&&(i=0);const u=parseInt(n,10)||0,h=i<0||Object.is(i,-0)?-u:u;return i*60+h}function Ar(o){const n=Number(o);if(typeof o=="boolean"||o===""||Number.isNaN(n))throw new l(`Invalid unit value ${o}`);return n}function Nt(o,n){const i={};for(const u in o)if(xe(o,u)){const h=o[u];if(h==null)continue;i[n(u)]=Ar(h)}return i}function ct(o,n){const i=Math.trunc(Math.abs(o/60)),u=Math.trunc(Math.abs(o%60)),h=o>=0?"+":"-";switch(n){case"short":return`${h}${j(i,2)}:${j(u,2)}`;case"narrow":return`${h}${i}${u>0?`:${u}`:""}`;case"techie":return`${h}${j(i,2)}${j(u,2)}`;default:throw new RangeError(`Value format ${n} is out of range for property format`)}}function Ft(o){return na(o,["hour","minute","second","millisecond"])}const sa=["January","February","March","April","May","June","July","August","September","October","November","December"],Nr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ia=["J","F","M","A","M","J","J","A","S","O","N","D"];function Fr(o){switch(o){case"narrow":return[...ia];case"short":return[...Nr];case"long":return[...sa];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Rr=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Pr=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],aa=["M","T","W","T","F","S","S"];function $r(o){switch(o){case"narrow":return[...aa];case"short":return[...Pr];case"long":return[...Rr];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Lr=["AM","PM"],oa=["Before Christ","Anno Domini"],ua=["BC","AD"],ca=["B","A"];function xr(o){switch(o){case"narrow":return[...ca];case"short":return[...ua];case"long":return[...oa];default:return null}}function la(o){return Lr[o.hour<12?0:1]}function ha(o,n){return $r(n)[o.weekday-1]}function da(o,n){return Fr(n)[o.month-1]}function fa(o,n){return xr(n)[o.year<0?0:1]}function ma(o,n,i="always",u=!1){const h={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},d=["hours","minutes","seconds"].indexOf(o)===-1;if(i==="auto"&&d){const F=o==="days";switch(n){case 1:return F?"tomorrow":`next ${h[o][0]}`;case-1:return F?"yesterday":`last ${h[o][0]}`;case 0:return F?"today":`this ${h[o][0]}`}}const m=Object.is(n,-0)||n<0,y=Math.abs(n),b=y===1,S=h[o],k=u?b?S[1]:S[2]||S[1]:b?h[o][0]:o;return m?`${y} ${k} ago`:`in ${y} ${k}`}function Br(o,n){let i="";for(const u of o)u.literal?i+=u.val:i+=n(u.val);return i}const pa={D:v,DD:T,DDD:I,DDDD:_,t:R,tt:N,ttt:H,tttt:Y,T:V,TT:$e,TTT:ne,TTTT:ae,f:st,ff:Kn,fff:er,ffff:nr,F:_t,FF:Xn,FFF:tr,FFFF:rr};class z{static create(n,i={}){return new z(n,i)}static parseFormat(n){let i=null,u="",h=!1;const d=[];for(let m=0;m<n.length;m++){const y=n.charAt(m);y==="'"?(u.length>0&&d.push({literal:h||/^\s+$/.test(u),val:u}),i=null,u="",h=!h):h||y===i?u+=y:(u.length>0&&d.push({literal:/^\s+$/.test(u),val:u}),u=y,i=y)}return u.length>0&&d.push({literal:h||/^\s+$/.test(u),val:u}),d}static macroTokenToFormatOpts(n){return pa[n]}constructor(n,i){this.opts=i,this.loc=n,this.systemLoc=null}formatWithSystemDefault(n,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(n,{...this.opts,...i}).format()}dtFormatter(n,i={}){return this.loc.dtFormatter(n,{...this.opts,...i})}formatDateTime(n,i){return this.dtFormatter(n,i).format()}formatDateTimeParts(n,i){return this.dtFormatter(n,i).formatToParts()}formatInterval(n,i){return this.dtFormatter(n.start,i).dtf.formatRange(n.start.toJSDate(),n.end.toJSDate())}resolvedOptions(n,i){return this.dtFormatter(n,i).resolvedOptions()}num(n,i=0){if(this.opts.forceSimple)return j(n,i);const u={...this.opts};return i>0&&(u.padTo=i),this.loc.numberFormatter(u).format(n)}formatDateTimeFromString(n,i){const u=this.loc.listingMode()==="en",h=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",d=(O,q)=>this.loc.extract(n,O,q),m=O=>n.isOffsetFixed&&n.offset===0&&O.allowZ?"Z":n.isValid?n.zone.formatOffset(n.ts,O.format):"",y=()=>u?la(n):d({hour:"numeric",hourCycle:"h12"},"dayperiod"),b=(O,q)=>u?da(n,O):d(q?{month:O}:{month:O,day:"numeric"},"month"),S=(O,q)=>u?ha(n,O):d(q?{weekday:O}:{weekday:O,month:"long",day:"numeric"},"weekday"),k=O=>{const q=z.macroTokenToFormatOpts(O);return q?this.formatWithSystemDefault(n,q):O},F=O=>u?fa(n,O):d({era:O},"era"),W=O=>{switch(O){case"S":return this.num(n.millisecond);case"u":case"SSS":return this.num(n.millisecond,3);case"s":return this.num(n.second);case"ss":return this.num(n.second,2);case"uu":return this.num(Math.floor(n.millisecond/10),2);case"uuu":return this.num(Math.floor(n.millisecond/100));case"m":return this.num(n.minute);case"mm":return this.num(n.minute,2);case"h":return this.num(n.hour%12===0?12:n.hour%12);case"hh":return this.num(n.hour%12===0?12:n.hour%12,2);case"H":return this.num(n.hour);case"HH":return this.num(n.hour,2);case"Z":return m({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return m({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return m({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return n.zone.offsetName(n.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return n.zone.offsetName(n.ts,{format:"long",locale:this.loc.locale});case"z":return n.zoneName;case"a":return y();case"d":return h?d({day:"numeric"},"day"):this.num(n.day);case"dd":return h?d({day:"2-digit"},"day"):this.num(n.day,2);case"c":return this.num(n.weekday);case"ccc":return S("short",!0);case"cccc":return S("long",!0);case"ccccc":return S("narrow",!0);case"E":return this.num(n.weekday);case"EEE":return S("short",!1);case"EEEE":return S("long",!1);case"EEEEE":return S("narrow",!1);case"L":return h?d({month:"numeric",day:"numeric"},"month"):this.num(n.month);case"LL":return h?d({month:"2-digit",day:"numeric"},"month"):this.num(n.month,2);case"LLL":return b("short",!0);case"LLLL":return b("long",!0);case"LLLLL":return b("narrow",!0);case"M":return h?d({month:"numeric"},"month"):this.num(n.month);case"MM":return h?d({month:"2-digit"},"month"):this.num(n.month,2);case"MMM":return b("short",!1);case"MMMM":return b("long",!1);case"MMMMM":return b("narrow",!1);case"y":return h?d({year:"numeric"},"year"):this.num(n.year);case"yy":return h?d({year:"2-digit"},"year"):this.num(n.year.toString().slice(-2),2);case"yyyy":return h?d({year:"numeric"},"year"):this.num(n.year,4);case"yyyyyy":return h?d({year:"numeric"},"year"):this.num(n.year,6);case"G":return F("short");case"GG":return F("long");case"GGGGG":return F("narrow");case"kk":return this.num(n.weekYear.toString().slice(-2),2);case"kkkk":return this.num(n.weekYear,4);case"W":return this.num(n.weekNumber);case"WW":return this.num(n.weekNumber,2);case"n":return this.num(n.localWeekNumber);case"nn":return this.num(n.localWeekNumber,2);case"ii":return this.num(n.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(n.localWeekYear,4);case"o":return this.num(n.ordinal);case"ooo":return this.num(n.ordinal,3);case"q":return this.num(n.quarter);case"qq":return this.num(n.quarter,2);case"X":return this.num(Math.floor(n.ts/1e3));case"x":return this.num(n.ts);default:return k(O)}};return Br(z.parseFormat(i),W)}formatDurationFromString(n,i){const u=b=>{switch(b[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},h=b=>S=>{const k=u(S);return k?this.num(b.get(k),S.length):S},d=z.parseFormat(i),m=d.reduce((b,{literal:S,val:k})=>S?b:b.concat(k),[]),y=n.shiftTo(...m.map(u).filter(b=>b));return Br(d,h(y))}}const Ur=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ue(...o){const n=o.reduce((i,u)=>i+u.source,"");return RegExp(`^${n}$`)}function We(...o){return n=>o.reduce(([i,u,h],d)=>{const[m,y,b]=d(n,h);return[{...i,...m},y||u,b]},[{},null,1]).slice(0,2)}function Ve(o,...n){if(o==null)return[null,null];for(const[i,u]of n){const h=i.exec(o);if(h)return u(h)}return[null,null]}function Wr(...o){return(n,i)=>{const u={};let h;for(h=0;h<o.length;h++)u[o[h]]=ye(n[i+h]);return[u,null,i+h]}}const Vr=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,ga=`(?:${Vr.source}?(?:\\[(${Ur.source})\\])?)?`,dn=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,jr=RegExp(`${dn.source}${ga}`),fn=RegExp(`(?:T${jr.source})?`),ya=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,wa=/(\d{4})-?W(\d\d)(?:-?(\d))?/,ba=/(\d{4})-?(\d{3})/,Ca=Wr("weekYear","weekNumber","weekDay"),va=Wr("year","ordinal"),Sa=/(\d{4})-(\d\d)-(\d\d)/,qr=RegExp(`${dn.source} ?(?:${Vr.source}|(${Ur.source}))?`),Ta=RegExp(`(?: ${qr.source})?`);function je(o,n,i){const u=o[n];return E(u)?i:ye(u)}function Ia(o,n){return[{year:je(o,n),month:je(o,n+1,1),day:je(o,n+2,1)},null,n+3]}function qe(o,n){return[{hours:je(o,n,0),minutes:je(o,n+1,0),seconds:je(o,n+2,0),milliseconds:cn(o[n+3])},null,n+4]}function lt(o,n){const i=!o[n]&&!o[n+1],u=At(o[n+1],o[n+2]),h=i?null:G.instance(u);return[{},h,n+3]}function ht(o,n){const i=o[n]?oe.create(o[n]):null;return[{},i,n+1]}const _a=RegExp(`^T?${dn.source}$`),ka=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Ea(o){const[n,i,u,h,d,m,y,b,S]=o,k=n[0]==="-",F=b&&b[0]==="-",W=(O,q=!1)=>O!==void 0&&(q||O&&k)?-O:O;return[{years:W(Ie(i)),months:W(Ie(u)),weeks:W(Ie(h)),days:W(Ie(d)),hours:W(Ie(m)),minutes:W(Ie(y)),seconds:W(Ie(b),b==="-0"),milliseconds:W(cn(S),F)}]}const Ma={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function mn(o,n,i,u,h,d,m){const y={year:n.length===2?hn(ye(n)):ye(n),month:Nr.indexOf(i)+1,day:ye(u),hour:ye(h),minute:ye(d)};return m&&(y.second=ye(m)),o&&(y.weekday=o.length>3?Rr.indexOf(o)+1:Pr.indexOf(o)+1),y}const Oa=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Da(o){const[,n,i,u,h,d,m,y,b,S,k,F]=o,W=mn(n,h,u,i,d,m,y);let O;return b?O=Ma[b]:S?O=0:O=At(k,F),[W,new G(O)]}function Aa(o){return o.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Na=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Fa=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Ra=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Hr(o){const[,n,i,u,h,d,m,y]=o;return[mn(n,h,u,i,d,m,y),G.utcInstance]}function Pa(o){const[,n,i,u,h,d,m,y]=o;return[mn(n,y,i,u,h,d,m),G.utcInstance]}const $a=Ue(ya,fn),La=Ue(wa,fn),xa=Ue(ba,fn),Ba=Ue(jr),Gr=We(Ia,qe,lt,ht),Ua=We(Ca,qe,lt,ht),Wa=We(va,qe,lt,ht),Va=We(qe,lt,ht);function ja(o){return Ve(o,[$a,Gr],[La,Ua],[xa,Wa],[Ba,Va])}function qa(o){return Ve(Aa(o),[Oa,Da])}function Ha(o){return Ve(o,[Na,Hr],[Fa,Hr],[Ra,Pa])}function Ga(o){return Ve(o,[ka,Ea])}const za=We(qe);function Za(o){return Ve(o,[_a,za])}const Ya=Ue(Sa,Ta),Qa=Ue(qr),Ja=We(qe,lt,ht);function Ka(o){return Ve(o,[Ya,Gr],[Qa,Ja])}const zr="Invalid Duration",Zr={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Xa={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Zr},te=146097/400,He=146097/4800,eo={years:{quarters:4,months:12,weeks:te/7,days:te,hours:te*24,minutes:te*24*60,seconds:te*24*60*60,milliseconds:te*24*60*60*1e3},quarters:{months:3,weeks:te/28,days:te/4,hours:te*24/4,minutes:te*24*60/4,seconds:te*24*60*60/4,milliseconds:te*24*60*60*1e3/4},months:{weeks:He/7,days:He,hours:He*24,minutes:He*24*60,seconds:He*24*60*60,milliseconds:He*24*60*60*1e3},...Zr},_e=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],to=_e.slice(0).reverse();function we(o,n,i=!1){const u={values:i?n.values:{...o.values,...n.values||{}},loc:o.loc.clone(n.loc),conversionAccuracy:n.conversionAccuracy||o.conversionAccuracy,matrix:n.matrix||o.matrix};return new P(u)}function Yr(o,n){var i;let u=(i=n.milliseconds)!=null?i:0;for(const h of to.slice(1))n[h]&&(u+=n[h]*o[h].milliseconds);return u}function Qr(o,n){const i=Yr(o,n)<0?-1:1;_e.reduceRight((u,h)=>{if(E(n[h]))return u;if(u){const d=n[u]*i,m=o[h][u],y=Math.floor(d/m);n[h]+=y*i,n[u]-=y*m*i}return h},null),_e.reduce((u,h)=>{if(E(n[h]))return u;if(u){const d=n[u]%1;n[u]-=d,n[h]+=d*o[u][h]}return h},null)}function no(o){const n={};for(const[i,u]of Object.entries(o))u!==0&&(n[i]=u);return n}class P{constructor(n){const i=n.conversionAccuracy==="longterm"||!1;let u=i?eo:Xa;n.matrix&&(u=n.matrix),this.values=n.values,this.loc=n.loc||L.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=n.invalid||null,this.matrix=u,this.isLuxonDuration=!0}static fromMillis(n,i){return P.fromObject({milliseconds:n},i)}static fromObject(n,i={}){if(n==null||typeof n!="object")throw new l(`Duration.fromObject: argument expected to be an object, got ${n===null?"null":typeof n}`);return new P({values:Nt(n,P.normalizeUnit),loc:L.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(n){if(ge(n))return P.fromMillis(n);if(P.isDuration(n))return n;if(typeof n=="object")return P.fromObject(n);throw new l(`Unknown duration argument ${n} of type ${typeof n}`)}static fromISO(n,i){const[u]=Ga(n);return u?P.fromObject(u,i):P.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static fromISOTime(n,i){const[u]=Za(n);return u?P.fromObject(u,i):P.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static invalid(n,i=null){if(!n)throw new l("need to specify a reason the Duration is invalid");const u=n instanceof se?n:new se(n,i);if(B.throwOnInvalid)throw new r(u);return new P({invalid:u})}static normalizeUnit(n){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[n&&n.toLowerCase()];if(!i)throw new c(n);return i}static isDuration(n){return n&&n.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(n,i={}){const u={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?z.create(this.loc,u).formatDurationFromString(this,n):zr}toHuman(n={}){if(!this.isValid)return zr;const i=_e.map(u=>{const h=this.values[u];return E(h)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...n,unit:u.slice(0,-1)}).format(h)}).filter(u=>u);return this.loc.listFormatter({type:"conjunction",style:n.listStyle||"narrow",...n}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let n="P";return this.years!==0&&(n+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(n+=this.months+this.quarters*3+"M"),this.weeks!==0&&(n+=this.weeks+"W"),this.days!==0&&(n+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(n+="T"),this.hours!==0&&(n+=this.hours+"H"),this.minutes!==0&&(n+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(n+=ln(this.seconds+this.milliseconds/1e3,3)+"S"),n==="P"&&(n+="T0S"),n}toISOTime(n={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(n={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...n,includeOffset:!1},M.fromMillis(i,{zone:"UTC"}).toISOTime(n))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Yr(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(n){if(!this.isValid)return this;const i=P.fromDurationLike(n),u={};for(const h of _e)(xe(i.values,h)||xe(this.values,h))&&(u[h]=i.get(h)+this.get(h));return we(this,{values:u},!0)}minus(n){if(!this.isValid)return this;const i=P.fromDurationLike(n);return this.plus(i.negate())}mapUnits(n){if(!this.isValid)return this;const i={};for(const u of Object.keys(this.values))i[u]=Ar(n(this.values[u],u));return we(this,{values:i},!0)}get(n){return this[P.normalizeUnit(n)]}set(n){if(!this.isValid)return this;const i={...this.values,...Nt(n,P.normalizeUnit)};return we(this,{values:i})}reconfigure({locale:n,numberingSystem:i,conversionAccuracy:u,matrix:h}={}){const m={loc:this.loc.clone({locale:n,numberingSystem:i}),matrix:h,conversionAccuracy:u};return we(this,m)}as(n){return this.isValid?this.shiftTo(n).get(n):NaN}normalize(){if(!this.isValid)return this;const n=this.toObject();return Qr(this.matrix,n),we(this,{values:n},!0)}rescale(){if(!this.isValid)return this;const n=no(this.normalize().shiftToAll().toObject());return we(this,{values:n},!0)}shiftTo(...n){if(!this.isValid)return this;if(n.length===0)return this;n=n.map(m=>P.normalizeUnit(m));const i={},u={},h=this.toObject();let d;for(const m of _e)if(n.indexOf(m)>=0){d=m;let y=0;for(const S in u)y+=this.matrix[S][m]*u[S],u[S]=0;ge(h[m])&&(y+=h[m]);const b=Math.trunc(y);i[m]=b,u[m]=(y*1e3-b*1e3)/1e3}else ge(h[m])&&(u[m]=h[m]);for(const m in u)u[m]!==0&&(i[d]+=m===d?u[m]:u[m]/this.matrix[d][m]);return Qr(this.matrix,i),we(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const n={};for(const i of Object.keys(this.values))n[i]=this.values[i]===0?0:-this.values[i];return we(this,{values:n},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(n){if(!this.isValid||!n.isValid||!this.loc.equals(n.loc))return!1;function i(u,h){return u===void 0||u===0?h===void 0||h===0:u===h}for(const u of _e)if(!i(this.values[u],n.values[u]))return!1;return!0}}const Ge="Invalid Interval";function ro(o,n){return!o||!o.isValid?U.invalid("missing or invalid start"):!n||!n.isValid?U.invalid("missing or invalid end"):n<o?U.invalid("end before start",`The end of an interval must be after its start, but you had start=${o.toISO()} and end=${n.toISO()}`):null}class U{constructor(n){this.s=n.start,this.e=n.end,this.invalid=n.invalid||null,this.isLuxonInterval=!0}static invalid(n,i=null){if(!n)throw new l("need to specify a reason the Interval is invalid");const u=n instanceof se?n:new se(n,i);if(B.throwOnInvalid)throw new t(u);return new U({invalid:u})}static fromDateTimes(n,i){const u=pt(n),h=pt(i),d=ro(u,h);return d??new U({start:u,end:h})}static after(n,i){const u=P.fromDurationLike(i),h=pt(n);return U.fromDateTimes(h,h.plus(u))}static before(n,i){const u=P.fromDurationLike(i),h=pt(n);return U.fromDateTimes(h.minus(u),h)}static fromISO(n,i){const[u,h]=(n||"").split("/",2);if(u&&h){let d,m;try{d=M.fromISO(u,i),m=d.isValid}catch{m=!1}let y,b;try{y=M.fromISO(h,i),b=y.isValid}catch{b=!1}if(m&&b)return U.fromDateTimes(d,y);if(m){const S=P.fromISO(h,i);if(S.isValid)return U.after(d,S)}else if(b){const S=P.fromISO(u,i);if(S.isValid)return U.before(y,S)}}return U.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static isInterval(n){return n&&n.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(n="milliseconds"){return this.isValid?this.toDuration(n).get(n):NaN}count(n="milliseconds",i){if(!this.isValid)return NaN;const u=this.start.startOf(n,i);let h;return i!=null&&i.useLocaleWeeks?h=this.end.reconfigure({locale:u.locale}):h=this.end,h=h.startOf(n,i),Math.floor(h.diff(u,n).get(n))+(h.valueOf()!==this.end.valueOf())}hasSame(n){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,n):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(n){return this.isValid?this.s>n:!1}isBefore(n){return this.isValid?this.e<=n:!1}contains(n){return this.isValid?this.s<=n&&this.e>n:!1}set({start:n,end:i}={}){return this.isValid?U.fromDateTimes(n||this.s,i||this.e):this}splitAt(...n){if(!this.isValid)return[];const i=n.map(pt).filter(m=>this.contains(m)).sort((m,y)=>m.toMillis()-y.toMillis()),u=[];let{s:h}=this,d=0;for(;h<this.e;){const m=i[d]||this.e,y=+m>+this.e?this.e:m;u.push(U.fromDateTimes(h,y)),h=y,d+=1}return u}splitBy(n){const i=P.fromDurationLike(n);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:u}=this,h=1,d;const m=[];for(;u<this.e;){const y=this.start.plus(i.mapUnits(b=>b*h));d=+y>+this.e?this.e:y,m.push(U.fromDateTimes(u,d)),u=d,h+=1}return m}divideEqually(n){return this.isValid?this.splitBy(this.length()/n).slice(0,n):[]}overlaps(n){return this.e>n.s&&this.s<n.e}abutsStart(n){return this.isValid?+this.e==+n.s:!1}abutsEnd(n){return this.isValid?+n.e==+this.s:!1}engulfs(n){return this.isValid?this.s<=n.s&&this.e>=n.e:!1}equals(n){return!this.isValid||!n.isValid?!1:this.s.equals(n.s)&&this.e.equals(n.e)}intersection(n){if(!this.isValid)return this;const i=this.s>n.s?this.s:n.s,u=this.e<n.e?this.e:n.e;return i>=u?null:U.fromDateTimes(i,u)}union(n){if(!this.isValid)return this;const i=this.s<n.s?this.s:n.s,u=this.e>n.e?this.e:n.e;return U.fromDateTimes(i,u)}static merge(n){const[i,u]=n.sort((h,d)=>h.s-d.s).reduce(([h,d],m)=>d?d.overlaps(m)||d.abutsStart(m)?[h,d.union(m)]:[h.concat([d]),m]:[h,m],[[],null]);return u&&i.push(u),i}static xor(n){let i=null,u=0;const h=[],d=n.map(b=>[{time:b.s,type:"s"},{time:b.e,type:"e"}]),m=Array.prototype.concat(...d),y=m.sort((b,S)=>b.time-S.time);for(const b of y)u+=b.type==="s"?1:-1,u===1?i=b.time:(i&&+i!=+b.time&&h.push(U.fromDateTimes(i,b.time)),i=null);return U.merge(h)}difference(...n){return U.xor([this].concat(n)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Ge}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(n=v,i={}){return this.isValid?z.create(this.s.loc.clone(i),n).formatInterval(this):Ge}toISO(n){return this.isValid?`${this.s.toISO(n)}/${this.e.toISO(n)}`:Ge}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ge}toISOTime(n){return this.isValid?`${this.s.toISOTime(n)}/${this.e.toISOTime(n)}`:Ge}toFormat(n,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(n)}${i}${this.e.toFormat(n)}`:Ge}toDuration(n,i){return this.isValid?this.e.diff(this.s,n,i):P.invalid(this.invalidReason)}mapEndpoints(n){return U.fromDateTimes(n(this.s),n(this.e))}}class dt{static hasDST(n=B.defaultZone){const i=M.now().setZone(n).set({month:12});return!n.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(n){return oe.isValidZone(n)}static normalizeZone(n){return pe(n,B.defaultZone)}static getStartOfWeek({locale:n=null,locObj:i=null}={}){return(i||L.create(n)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:n=null,locObj:i=null}={}){return(i||L.create(n)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:n=null,locObj:i=null}={}){return(i||L.create(n)).getWeekendDays().slice()}static months(n="long",{locale:i=null,numberingSystem:u=null,locObj:h=null,outputCalendar:d="gregory"}={}){return(h||L.create(i,u,d)).months(n)}static monthsFormat(n="long",{locale:i=null,numberingSystem:u=null,locObj:h=null,outputCalendar:d="gregory"}={}){return(h||L.create(i,u,d)).months(n,!0)}static weekdays(n="long",{locale:i=null,numberingSystem:u=null,locObj:h=null}={}){return(h||L.create(i,u,null)).weekdays(n)}static weekdaysFormat(n="long",{locale:i=null,numberingSystem:u=null,locObj:h=null}={}){return(h||L.create(i,u,null)).weekdays(n,!0)}static meridiems({locale:n=null}={}){return L.create(n).meridiems()}static eras(n="short",{locale:i=null}={}){return L.create(i,null,"gregory").eras(n)}static features(){return{relative:kr(),localeWeek:Er()}}}function Jr(o,n){const i=h=>h.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),u=i(n)-i(o);return Math.floor(P.fromMillis(u).as("days"))}function so(o,n,i){const u=[["years",(b,S)=>S.year-b.year],["quarters",(b,S)=>S.quarter-b.quarter+(S.year-b.year)*4],["months",(b,S)=>S.month-b.month+(S.year-b.year)*12],["weeks",(b,S)=>{const k=Jr(b,S);return(k-k%7)/7}],["days",Jr]],h={},d=o;let m,y;for(const[b,S]of u)i.indexOf(b)>=0&&(m=b,h[b]=S(o,n),y=d.plus(h),y>n?(h[b]--,o=d.plus(h),o>n&&(y=o,h[b]--,o=d.plus(h))):o=y);return[o,h,y,m]}function io(o,n,i,u){let[h,d,m,y]=so(o,n,i);const b=n-h,S=i.filter(F=>["hours","minutes","seconds","milliseconds"].indexOf(F)>=0);S.length===0&&(m<n&&(m=h.plus({[y]:1})),m!==h&&(d[y]=(d[y]||0)+b/(m-h)));const k=P.fromObject(d,u);return S.length>0?P.fromMillis(b,u).shiftTo(...S).plus(k):k}const ao="missing Intl.DateTimeFormat.formatToParts support";function $(o,n=i=>i){return{regex:o,deser:([i])=>n(Yi(i))}}const Kr="[ ]",Xr=new RegExp(Kr,"g");function oo(o){return o.replace(/\./g,"\\.?").replace(Xr,Kr)}function es(o){return o.replace(/\./g,"").replace(Xr," ").toLowerCase()}function ie(o,n){return o===null?null:{regex:RegExp(o.map(oo).join("|")),deser:([i])=>o.findIndex(u=>es(i)===es(u))+n}}function ts(o,n){return{regex:o,deser:([,i,u])=>At(i,u),groups:n}}function Rt(o){return{regex:o,deser:([n])=>n}}function uo(o){return o.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function co(o,n){const i=re(n),u=re(n,"{2}"),h=re(n,"{3}"),d=re(n,"{4}"),m=re(n,"{6}"),y=re(n,"{1,2}"),b=re(n,"{1,3}"),S=re(n,"{1,6}"),k=re(n,"{1,9}"),F=re(n,"{2,4}"),W=re(n,"{4,6}"),O=ue=>({regex:RegExp(uo(ue.val)),deser:([Ye])=>Ye,literal:!0}),Ze=(ue=>{if(o.literal)return O(ue);switch(ue.val){case"G":return ie(n.eras("short"),0);case"GG":return ie(n.eras("long"),0);case"y":return $(S);case"yy":return $(F,hn);case"yyyy":return $(d);case"yyyyy":return $(W);case"yyyyyy":return $(m);case"M":return $(y);case"MM":return $(u);case"MMM":return ie(n.months("short",!0),1);case"MMMM":return ie(n.months("long",!0),1);case"L":return $(y);case"LL":return $(u);case"LLL":return ie(n.months("short",!1),1);case"LLLL":return ie(n.months("long",!1),1);case"d":return $(y);case"dd":return $(u);case"o":return $(b);case"ooo":return $(h);case"HH":return $(u);case"H":return $(y);case"hh":return $(u);case"h":return $(y);case"mm":return $(u);case"m":return $(y);case"q":return $(y);case"qq":return $(u);case"s":return $(y);case"ss":return $(u);case"S":return $(b);case"SSS":return $(h);case"u":return Rt(k);case"uu":return Rt(y);case"uuu":return $(i);case"a":return ie(n.meridiems(),0);case"kkkk":return $(d);case"kk":return $(F,hn);case"W":return $(y);case"WW":return $(u);case"E":case"c":return $(i);case"EEE":return ie(n.weekdays("short",!1),1);case"EEEE":return ie(n.weekdays("long",!1),1);case"ccc":return ie(n.weekdays("short",!0),1);case"cccc":return ie(n.weekdays("long",!0),1);case"Z":case"ZZ":return ts(new RegExp(`([+-]${y.source})(?::(${u.source}))?`),2);case"ZZZ":return ts(new RegExp(`([+-]${y.source})(${u.source})?`),2);case"z":return Rt(/[a-z_+-/]{1,256}?/i);case" ":return Rt(/[^\S\n\r]/);default:return O(ue)}})(o)||{invalidReason:ao};return Ze.token=o,Ze}const lo={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function ho(o,n,i){const{type:u,value:h}=o;if(u==="literal"){const b=/^\s+$/.test(h);return{literal:!b,val:b?" ":h}}const d=n[u];let m=u;u==="hour"&&(n.hour12!=null?m=n.hour12?"hour12":"hour24":n.hourCycle!=null?n.hourCycle==="h11"||n.hourCycle==="h12"?m="hour12":m="hour24":m=i.hour12?"hour12":"hour24");let y=lo[m];if(typeof y=="object"&&(y=y[d]),y)return{literal:!1,val:y}}function fo(o){return[`^${o.map(i=>i.regex).reduce((i,u)=>`${i}(${u.source})`,"")}$`,o]}function mo(o,n,i){const u=o.match(n);if(u){const h={};let d=1;for(const m in i)if(xe(i,m)){const y=i[m],b=y.groups?y.groups+1:1;!y.literal&&y.token&&(h[y.token.val[0]]=y.deser(u.slice(d,d+b))),d+=b}return[u,h]}else return[u,{}]}function po(o){const n=d=>{switch(d){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,u;return E(o.z)||(i=oe.create(o.z)),E(o.Z)||(i||(i=new G(o.Z)),u=o.Z),E(o.q)||(o.M=(o.q-1)*3+1),E(o.h)||(o.h<12&&o.a===1?o.h+=12:o.h===12&&o.a===0&&(o.h=0)),o.G===0&&o.y&&(o.y=-o.y),E(o.u)||(o.S=cn(o.u)),[Object.keys(o).reduce((d,m)=>{const y=n(m);return y&&(d[y]=o[m]),d},{}),i,u]}let pn=null;function go(){return pn||(pn=M.fromMillis(1555555555555)),pn}function yo(o,n){if(o.literal)return o;const i=z.macroTokenToFormatOpts(o.val),u=is(i,n);return u==null||u.includes(void 0)?o:u}function ns(o,n){return Array.prototype.concat(...o.map(i=>yo(i,n)))}class rs{constructor(n,i){if(this.locale=n,this.format=i,this.tokens=ns(z.parseFormat(i),n),this.units=this.tokens.map(u=>co(u,n)),this.disqualifyingUnit=this.units.find(u=>u.invalidReason),!this.disqualifyingUnit){const[u,h]=fo(this.units);this.regex=RegExp(u,"i"),this.handlers=h}}explainFromTokens(n){if(this.isValid){const[i,u]=mo(n,this.regex,this.handlers),[h,d,m]=u?po(u):[null,null,void 0];if(xe(u,"a")&&xe(u,"H"))throw new a("Can't include meridiem when specifying 24-hour format");return{input:n,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:u,result:h,zone:d,specificOffset:m}}else return{input:n,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function ss(o,n,i){return new rs(o,i).explainFromTokens(n)}function wo(o,n,i){const{result:u,zone:h,specificOffset:d,invalidReason:m}=ss(o,n,i);return[u,h,d,m]}function is(o,n){if(!o)return null;const u=z.create(n,o).dtFormatter(go()),h=u.formatToParts(),d=u.resolvedOptions();return h.map(m=>ho(m,o,d))}const gn="Invalid DateTime",bo=864e13;function ft(o){return new se("unsupported zone",`the zone "${o.name}" is not supported`)}function yn(o){return o.weekData===null&&(o.weekData=Et(o.c)),o.weekData}function wn(o){return o.localWeekData===null&&(o.localWeekData=Et(o.c,o.loc.getMinDaysInFirstWeek(),o.loc.getStartOfWeek())),o.localWeekData}function ke(o,n){const i={ts:o.ts,zone:o.zone,c:o.c,o:o.o,loc:o.loc,invalid:o.invalid};return new M({...i,...n,old:i})}function as(o,n,i){let u=o-n*60*1e3;const h=i.offset(u);if(n===h)return[u,n];u-=(h-n)*60*1e3;const d=i.offset(u);return h===d?[u,h]:[o-Math.min(h,d)*60*1e3,Math.max(h,d)]}function Pt(o,n){o+=n*60*1e3;const i=new Date(o);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function $t(o,n,i){return as(Dt(o),n,i)}function os(o,n){const i=o.o,u=o.c.year+Math.trunc(n.years),h=o.c.month+Math.trunc(n.months)+Math.trunc(n.quarters)*3,d={...o.c,year:u,month:h,day:Math.min(o.c.day,Ot(u,h))+Math.trunc(n.days)+Math.trunc(n.weeks)*7},m=P.fromObject({years:n.years-Math.trunc(n.years),quarters:n.quarters-Math.trunc(n.quarters),months:n.months-Math.trunc(n.months),weeks:n.weeks-Math.trunc(n.weeks),days:n.days-Math.trunc(n.days),hours:n.hours,minutes:n.minutes,seconds:n.seconds,milliseconds:n.milliseconds}).as("milliseconds"),y=Dt(d);let[b,S]=as(y,i,o.zone);return m!==0&&(b+=m,S=o.zone.offset(b)),{ts:b,o:S}}function ze(o,n,i,u,h,d){const{setZone:m,zone:y}=i;if(o&&Object.keys(o).length!==0||n){const b=n||y,S=M.fromObject(o,{...i,zone:b,specificOffset:d});return m?S:S.setZone(y)}else return M.invalid(new se("unparsable",`the input "${h}" can't be parsed as ${u}`))}function Lt(o,n,i=!0){return o.isValid?z.create(L.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(o,n):null}function bn(o,n){const i=o.c.year>9999||o.c.year<0;let u="";return i&&o.c.year>=0&&(u+="+"),u+=j(o.c.year,i?6:4),n?(u+="-",u+=j(o.c.month),u+="-",u+=j(o.c.day)):(u+=j(o.c.month),u+=j(o.c.day)),u}function us(o,n,i,u,h,d){let m=j(o.c.hour);return n?(m+=":",m+=j(o.c.minute),(o.c.millisecond!==0||o.c.second!==0||!i)&&(m+=":")):m+=j(o.c.minute),(o.c.millisecond!==0||o.c.second!==0||!i)&&(m+=j(o.c.second),(o.c.millisecond!==0||!u)&&(m+=".",m+=j(o.c.millisecond,3))),h&&(o.isOffsetFixed&&o.offset===0&&!d?m+="Z":o.o<0?(m+="-",m+=j(Math.trunc(-o.o/60)),m+=":",m+=j(Math.trunc(-o.o%60))):(m+="+",m+=j(Math.trunc(o.o/60)),m+=":",m+=j(Math.trunc(o.o%60)))),d&&(m+="["+o.zone.ianaName+"]"),m}const cs={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Co={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},vo={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ls=["year","month","day","hour","minute","second","millisecond"],So=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],To=["year","ordinal","hour","minute","second","millisecond"];function Io(o){const n={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[o.toLowerCase()];if(!n)throw new c(o);return n}function hs(o){switch(o.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Io(o)}}function _o(o){if(mt===void 0&&(mt=B.now()),o.type!=="iana")return o.offset(mt);const n=o.name;let i=Cn.get(n);return i===void 0&&(i=o.offset(mt),Cn.set(n,i)),i}function ds(o,n){const i=pe(n.zone,B.defaultZone);if(!i.isValid)return M.invalid(ft(i));const u=L.fromObject(n);let h,d;if(E(o.year))h=B.now();else{for(const b of ls)E(o[b])&&(o[b]=cs[b]);const m=Ir(o)||_r(o);if(m)return M.invalid(m);const y=_o(i);[h,d]=$t(o,y,i)}return new M({ts:h,zone:i,loc:u,o:d})}function fs(o,n,i){const u=E(i.round)?!0:i.round,h=(m,y)=>(m=ln(m,u||i.calendary?0:2,!0),n.loc.clone(i).relFormatter(i).format(m,y)),d=m=>i.calendary?n.hasSame(o,m)?0:n.startOf(m).diff(o.startOf(m),m).get(m):n.diff(o,m).get(m);if(i.unit)return h(d(i.unit),i.unit);for(const m of i.units){const y=d(m);if(Math.abs(y)>=1)return h(y,m)}return h(o>n?-0:0,i.units[i.units.length-1])}function ms(o){let n={},i;return o.length>0&&typeof o[o.length-1]=="object"?(n=o[o.length-1],i=Array.from(o).slice(0,o.length-1)):i=Array.from(o),[n,i]}let mt;const Cn=new Map;class M{constructor(n){const i=n.zone||B.defaultZone;let u=n.invalid||(Number.isNaN(n.ts)?new se("invalid input"):null)||(i.isValid?null:ft(i));this.ts=E(n.ts)?B.now():n.ts;let h=null,d=null;if(!u)if(n.old&&n.old.ts===this.ts&&n.old.zone.equals(i))[h,d]=[n.old.c,n.old.o];else{const y=ge(n.o)&&!n.old?n.o:i.offset(this.ts);h=Pt(this.ts,y),u=Number.isNaN(h.year)?new se("invalid input"):null,h=u?null:h,d=u?null:y}this._zone=i,this.loc=n.loc||L.create(),this.invalid=u,this.weekData=null,this.localWeekData=null,this.c=h,this.o=d,this.isLuxonDateTime=!0}static now(){return new M({})}static local(){const[n,i]=ms(arguments),[u,h,d,m,y,b,S]=i;return ds({year:u,month:h,day:d,hour:m,minute:y,second:b,millisecond:S},n)}static utc(){const[n,i]=ms(arguments),[u,h,d,m,y,b,S]=i;return n.zone=G.utcInstance,ds({year:u,month:h,day:d,hour:m,minute:y,second:b,millisecond:S},n)}static fromJSDate(n,i={}){const u=ea(n)?n.valueOf():NaN;if(Number.isNaN(u))return M.invalid("invalid input");const h=pe(i.zone,B.defaultZone);return h.isValid?new M({ts:u,zone:h,loc:L.fromObject(i)}):M.invalid(ft(h))}static fromMillis(n,i={}){if(ge(n))return n<-864e13||n>bo?M.invalid("Timestamp out of range"):new M({ts:n,zone:pe(i.zone,B.defaultZone),loc:L.fromObject(i)});throw new l(`fromMillis requires a numerical input, but received a ${typeof n} with value ${n}`)}static fromSeconds(n,i={}){if(ge(n))return new M({ts:n*1e3,zone:pe(i.zone,B.defaultZone),loc:L.fromObject(i)});throw new l("fromSeconds requires a numerical input")}static fromObject(n,i={}){n=n||{};const u=pe(i.zone,B.defaultZone);if(!u.isValid)return M.invalid(ft(u));const h=L.fromObject(i),d=Nt(n,hs),{minDaysInFirstWeek:m,startOfWeek:y}=Tr(d,h),b=B.now(),S=E(i.specificOffset)?u.offset(b):i.specificOffset,k=!E(d.ordinal),F=!E(d.year),W=!E(d.month)||!E(d.day),O=F||W,q=d.weekYear||d.weekNumber;if((O||k)&&q)throw new a("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(W&&k)throw new a("Can't mix ordinal dates with month/day");const Ze=q||d.weekday&&!O;let ue,Ye,gt=Pt(b,S);Ze?(ue=So,Ye=Co,gt=Et(gt,m,y)):k?(ue=To,Ye=vo,gt=on(gt)):(ue=ls,Ye=cs);let ps=!1;for(const wt of ue){const Ao=d[wt];E(Ao)?ps?d[wt]=Ye[wt]:d[wt]=gt[wt]:ps=!0}const Eo=Ze?Ji(d,m,y):k?Ki(d):Ir(d),gs=Eo||_r(d);if(gs)return M.invalid(gs);const Mo=Ze?vr(d,m,y):k?Sr(d):d,[Oo,Do]=$t(Mo,S,u),yt=new M({ts:Oo,zone:u,o:Do,loc:h});return d.weekday&&O&&n.weekday!==yt.weekday?M.invalid("mismatched weekday",`you can't specify both a weekday of ${d.weekday} and a date of ${yt.toISO()}`):yt.isValid?yt:M.invalid(yt.invalid)}static fromISO(n,i={}){const[u,h]=ja(n);return ze(u,h,i,"ISO 8601",n)}static fromRFC2822(n,i={}){const[u,h]=qa(n);return ze(u,h,i,"RFC 2822",n)}static fromHTTP(n,i={}){const[u,h]=Ha(n);return ze(u,h,i,"HTTP",i)}static fromFormat(n,i,u={}){if(E(n)||E(i))throw new l("fromFormat requires an input string and a format");const{locale:h=null,numberingSystem:d=null}=u,m=L.fromOpts({locale:h,numberingSystem:d,defaultToEN:!0}),[y,b,S,k]=wo(m,n,i);return k?M.invalid(k):ze(y,b,u,`format ${i}`,n,S)}static fromString(n,i,u={}){return M.fromFormat(n,i,u)}static fromSQL(n,i={}){const[u,h]=Ka(n);return ze(u,h,i,"SQL",n)}static invalid(n,i=null){if(!n)throw new l("need to specify a reason the DateTime is invalid");const u=n instanceof se?n:new se(n,i);if(B.throwOnInvalid)throw new e(u);return new M({invalid:u})}static isDateTime(n){return n&&n.isLuxonDateTime||!1}static parseFormatForOpts(n,i={}){const u=is(n,L.fromObject(i));return u?u.map(h=>h?h.val:null).join(""):null}static expandFormat(n,i={}){return ns(z.parseFormat(n),L.fromObject(i)).map(h=>h.val).join("")}static resetCache(){mt=void 0,Cn.clear()}get(n){return this[n]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?yn(this).weekYear:NaN}get weekNumber(){return this.isValid?yn(this).weekNumber:NaN}get weekday(){return this.isValid?yn(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?wn(this).weekday:NaN}get localWeekNumber(){return this.isValid?wn(this).weekNumber:NaN}get localWeekYear(){return this.isValid?wn(this).weekYear:NaN}get ordinal(){return this.isValid?on(this.c).ordinal:NaN}get monthShort(){return this.isValid?dt.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?dt.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?dt.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?dt.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const n=864e5,i=6e4,u=Dt(this.c),h=this.zone.offset(u-n),d=this.zone.offset(u+n),m=this.zone.offset(u-h*i),y=this.zone.offset(u-d*i);if(m===y)return[this];const b=u-m*i,S=u-y*i,k=Pt(b,m),F=Pt(S,y);return k.hour===F.hour&&k.minute===F.minute&&k.second===F.second&&k.millisecond===F.millisecond?[ke(this,{ts:b}),ke(this,{ts:S})]:[this]}get isInLeapYear(){return ot(this.year)}get daysInMonth(){return Ot(this.year,this.month)}get daysInYear(){return this.isValid?Be(this.year):NaN}get weeksInWeekYear(){return this.isValid?ut(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?ut(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(n={}){const{locale:i,numberingSystem:u,calendar:h}=z.create(this.loc.clone(n),n).resolvedOptions(this);return{locale:i,numberingSystem:u,outputCalendar:h}}toUTC(n=0,i={}){return this.setZone(G.instance(n),i)}toLocal(){return this.setZone(B.defaultZone)}setZone(n,{keepLocalTime:i=!1,keepCalendarTime:u=!1}={}){if(n=pe(n,B.defaultZone),n.equals(this.zone))return this;if(n.isValid){let h=this.ts;if(i||u){const d=n.offset(this.ts),m=this.toObject();[h]=$t(m,d,n)}return ke(this,{ts:h,zone:n})}else return M.invalid(ft(n))}reconfigure({locale:n,numberingSystem:i,outputCalendar:u}={}){const h=this.loc.clone({locale:n,numberingSystem:i,outputCalendar:u});return ke(this,{loc:h})}setLocale(n){return this.reconfigure({locale:n})}set(n){if(!this.isValid)return this;const i=Nt(n,hs),{minDaysInFirstWeek:u,startOfWeek:h}=Tr(i,this.loc),d=!E(i.weekYear)||!E(i.weekNumber)||!E(i.weekday),m=!E(i.ordinal),y=!E(i.year),b=!E(i.month)||!E(i.day),S=y||b,k=i.weekYear||i.weekNumber;if((S||m)&&k)throw new a("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&m)throw new a("Can't mix ordinal dates with month/day");let F;d?F=vr({...Et(this.c,u,h),...i},u,h):E(i.ordinal)?(F={...this.toObject(),...i},E(i.day)&&(F.day=Math.min(Ot(F.year,F.month),F.day))):F=Sr({...on(this.c),...i});const[W,O]=$t(F,this.o,this.zone);return ke(this,{ts:W,o:O})}plus(n){if(!this.isValid)return this;const i=P.fromDurationLike(n);return ke(this,os(this,i))}minus(n){if(!this.isValid)return this;const i=P.fromDurationLike(n).negate();return ke(this,os(this,i))}startOf(n,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const u={},h=P.normalizeUnit(n);switch(h){case"years":u.month=1;case"quarters":case"months":u.day=1;case"weeks":case"days":u.hour=0;case"hours":u.minute=0;case"minutes":u.second=0;case"seconds":u.millisecond=0;break}if(h==="weeks")if(i){const d=this.loc.getStartOfWeek(),{weekday:m}=this;m<d&&(u.weekNumber=this.weekNumber-1),u.weekday=d}else u.weekday=1;if(h==="quarters"){const d=Math.ceil(this.month/3);u.month=(d-1)*3+1}return this.set(u)}endOf(n,i){return this.isValid?this.plus({[n]:1}).startOf(n,i).minus(1):this}toFormat(n,i={}){return this.isValid?z.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,n):gn}toLocaleString(n=v,i={}){return this.isValid?z.create(this.loc.clone(i),n).formatDateTime(this):gn}toLocaleParts(n={}){return this.isValid?z.create(this.loc.clone(n),n).formatDateTimeParts(this):[]}toISO({format:n="extended",suppressSeconds:i=!1,suppressMilliseconds:u=!1,includeOffset:h=!0,extendedZone:d=!1}={}){if(!this.isValid)return null;const m=n==="extended";let y=bn(this,m);return y+="T",y+=us(this,m,i,u,h,d),y}toISODate({format:n="extended"}={}){return this.isValid?bn(this,n==="extended"):null}toISOWeekDate(){return Lt(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:n=!1,suppressSeconds:i=!1,includeOffset:u=!0,includePrefix:h=!1,extendedZone:d=!1,format:m="extended"}={}){return this.isValid?(h?"T":"")+us(this,m==="extended",i,n,u,d):null}toRFC2822(){return Lt(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Lt(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?bn(this,!0):null}toSQLTime({includeOffset:n=!0,includeZone:i=!1,includeOffsetSpace:u=!0}={}){let h="HH:mm:ss.SSS";return(i||n)&&(u&&(h+=" "),i?h+="z":n&&(h+="ZZ")),Lt(this,h,!0)}toSQL(n={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(n)}`:null}toString(){return this.isValid?this.toISO():gn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(n={}){if(!this.isValid)return{};const i={...this.c};return n.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(n,i="milliseconds",u={}){if(!this.isValid||!n.isValid)return P.invalid("created by diffing an invalid DateTime");const h={locale:this.locale,numberingSystem:this.numberingSystem,...u},d=ta(i).map(P.normalizeUnit),m=n.valueOf()>this.valueOf(),y=m?this:n,b=m?n:this,S=io(y,b,d,h);return m?S.negate():S}diffNow(n="milliseconds",i={}){return this.diff(M.now(),n,i)}until(n){return this.isValid?U.fromDateTimes(this,n):this}hasSame(n,i,u){if(!this.isValid)return!1;const h=n.valueOf(),d=this.setZone(n.zone,{keepLocalTime:!0});return d.startOf(i,u)<=h&&h<=d.endOf(i,u)}equals(n){return this.isValid&&n.isValid&&this.valueOf()===n.valueOf()&&this.zone.equals(n.zone)&&this.loc.equals(n.loc)}toRelative(n={}){if(!this.isValid)return null;const i=n.base||M.fromObject({},{zone:this.zone}),u=n.padding?this<i?-n.padding:n.padding:0;let h=["years","months","days","hours","minutes","seconds"],d=n.unit;return Array.isArray(n.unit)&&(h=n.unit,d=void 0),fs(i,this.plus(u),{...n,numeric:"always",units:h,unit:d})}toRelativeCalendar(n={}){return this.isValid?fs(n.base||M.fromObject({},{zone:this.zone}),this,{...n,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...n){if(!n.every(M.isDateTime))throw new l("min requires all arguments be DateTimes");return Mr(n,i=>i.valueOf(),Math.min)}static max(...n){if(!n.every(M.isDateTime))throw new l("max requires all arguments be DateTimes");return Mr(n,i=>i.valueOf(),Math.max)}static fromFormatExplain(n,i,u={}){const{locale:h=null,numberingSystem:d=null}=u,m=L.fromOpts({locale:h,numberingSystem:d,defaultToEN:!0});return ss(m,n,i)}static fromStringExplain(n,i,u={}){return M.fromFormatExplain(n,i,u)}static buildFormatParser(n,i={}){const{locale:u=null,numberingSystem:h=null}=i,d=L.fromOpts({locale:u,numberingSystem:h,defaultToEN:!0});return new rs(d,n)}static fromFormatParser(n,i,u={}){if(E(n)||E(i))throw new l("fromFormatParser requires an input string and a format parser");const{locale:h=null,numberingSystem:d=null}=u,m=L.fromOpts({locale:h,numberingSystem:d,defaultToEN:!0});if(!m.equals(i.locale))throw new l(`fromFormatParser called with a locale of ${m}, but the format parser was created for ${i.locale}`);const{result:y,zone:b,specificOffset:S,invalidReason:k}=i.explainFromTokens(n);return k?M.invalid(k):ze(y,b,u,`format ${i.format}`,n,S)}static get DATE_SHORT(){return v}static get DATE_MED(){return T}static get DATE_MED_WITH_WEEKDAY(){return A}static get DATE_FULL(){return I}static get DATE_HUGE(){return _}static get TIME_SIMPLE(){return R}static get TIME_WITH_SECONDS(){return N}static get TIME_WITH_SHORT_OFFSET(){return H}static get TIME_WITH_LONG_OFFSET(){return Y}static get TIME_24_SIMPLE(){return V}static get TIME_24_WITH_SECONDS(){return $e}static get TIME_24_WITH_SHORT_OFFSET(){return ne}static get TIME_24_WITH_LONG_OFFSET(){return ae}static get DATETIME_SHORT(){return st}static get DATETIME_SHORT_WITH_SECONDS(){return _t}static get DATETIME_MED(){return Kn}static get DATETIME_MED_WITH_SECONDS(){return Xn}static get DATETIME_MED_WITH_WEEKDAY(){return Di}static get DATETIME_FULL(){return er}static get DATETIME_FULL_WITH_SECONDS(){return tr}static get DATETIME_HUGE(){return nr}static get DATETIME_HUGE_WITH_SECONDS(){return rr}}function pt(o){if(M.isDateTime(o))return o;if(o&&o.valueOf&&ge(o.valueOf()))return M.fromJSDate(o);if(o&&typeof o=="object")return M.fromObject(o);throw new l(`Unknown datetime argument: ${o}, of type ${typeof o}`)}const ko="3.6.1";return Q.DateTime=M,Q.Duration=P,Q.FixedOffsetZone=G,Q.IANAZone=oe,Q.Info=dt,Q.Interval=U,Q.InvalidZone=or,Q.Settings=B,Q.SystemZone=it,Q.VERSION=ko,Q.Zone=Le,Q}var kn={},Ls;function Oc(){return Ls||(Ls=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.RE_RANGE=s.RE_WILDCARDS=s.PRESETS=s.TIME_UNITS_LEN=s.TIME_UNITS=s.TIME_UNITS_MAP=s.ALIASES=s.PARSE_DEFAULTS=s.CONSTRAINTS=void 0,s.CONSTRAINTS=Object.freeze({second:[0,59],minute:[0,59],hour:[0,23],dayOfMonth:[1,31],month:[1,12],dayOfWeek:[0,7]}),s.PARSE_DEFAULTS=Object.freeze({second:"0",minute:"*",hour:"*",dayOfMonth:"*",month:"*",dayOfWeek:"*"}),s.ALIASES=Object.freeze({jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}),s.TIME_UNITS_MAP=Object.freeze({SECOND:"second",MINUTE:"minute",HOUR:"hour",DAY_OF_MONTH:"dayOfMonth",MONTH:"month",DAY_OF_WEEK:"dayOfWeek"}),s.TIME_UNITS=Object.freeze(Object.values(s.TIME_UNITS_MAP)),s.TIME_UNITS_LEN=s.TIME_UNITS.length,s.PRESETS=Object.freeze({"@yearly":"0 0 0 1 1 *","@monthly":"0 0 0 1 * *","@weekly":"0 0 0 * * 0","@daily":"0 0 0 * * *","@hourly":"0 0 * * * *","@minutely":"0 * * * * *","@secondly":"* * * * * *","@weekdays":"0 0 0 * * 1-5","@weekends":"0 0 0 * * 0,6"}),s.RE_WILDCARDS=/\*/g,s.RE_RANGE=/^(\d+)(?:-(\d+))?(?:\/(\d+))?$/g}(kn)),kn}var Oe={},xs;function vi(){if(xs)return Oe;xs=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.ExclusiveParametersError=Oe.CronError=void 0;class s extends Error{}Oe.CronError=s;class e extends s{constructor(r,a){super(`You can't specify both ${r} and ${a}`)}}return Oe.ExclusiveParametersError=e,Oe}var Bs;function Wn(){if(Bs)return Ct;Bs=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.CronTime=void 0;const s=Mc(),e=Oc(),t=vi();class r{constructor(c,l,p){if(this.realDate=!1,this.second={},this.minute={},this.hour={},this.dayOfMonth={},this.month={},this.dayOfWeek={},l!=null&&p!=null)throw new t.ExclusiveParametersError("timeZone","utcOffset");if(l){if(!s.DateTime.fromObject({},{zone:l}).isValid)throw new t.CronError("Invalid timezone.");this.timeZone=l}if(p!=null&&(this.utcOffset=p),l==null&&p==null){const f=Intl.DateTimeFormat().resolvedOptions().timeZone;this.timeZone=f}c instanceof Date||c instanceof s.DateTime?(this.source=c instanceof Date?s.DateTime.fromJSDate(c):c,this.realDate=!0):(this.source=c,this._parse(this.source))}static validateCronExpression(c){try{return new r(c),{valid:!0}}catch(l){return{valid:!1,error:l}}}_getWeekDay(c){return c.weekday===7?0:c.weekday}sendAt(c){let l=this.realDate&&this.source instanceof s.DateTime?this.source:s.DateTime.utc();if(this.timeZone&&(l=l.setZone(this.timeZone)),this.utcOffset!==void 0){const p=this.utcOffset<0?"-":"+",f=Math.trunc(this.utcOffset/60),g=String(Math.abs(f)).padStart(2,"0"),C=Math.abs(this.utcOffset-f*60),v=String(C).padStart(2,"0"),T=`UTC${p}${g}:${v}`;if(l=l.setZone(T),!l.isValid)throw new t.CronError("ERROR: You specified an invalid UTC offset.")}if(this.realDate){if(s.DateTime.local()>l)throw new t.CronError("WARNING: Date in past. Will never be fired.");return l}if(c===void 0||isNaN(c)||c<0)return this.getNextDateFrom(l);{const p=[];for(;c>0;c--)l=this.getNextDateFrom(l),p.push(l);return p}}getTimeout(){return this.sendAt().toMillis()-s.DateTime.local().toMillis()}toString(){return this.toJSON().join(" ")}toJSON(){return e.TIME_UNITS.map(c=>this._wcOrAll(c))}getNextDateFrom(c,l){var p,f;c instanceof Date&&(c=s.DateTime.fromJSDate(c)),l?c=c.setZone(l):l=(p=c.zone.zoneName)!==null&&p!==void 0?p:c.zone.fixed;let g=s.DateTime.fromFormat(`${c.year}-${c.month}-${c.day} ${c.hour}:${c.minute}:${c.second}`,"yyyy-M-d H:m:s",{zone:"UTC"});const C=g.toMillis();if(this.realDate||g.millisecond>0&&(g=g.set({millisecond:0,second:g.second+1})),!g.isValid)throw new t.CronError("ERROR: You specified an invalid date.");const v=s.DateTime.now().plus({years:8});for(;;){if(g>v)throw new t.CronError(`Something went wrong. No execution date was found in the next 8 years.
							Please provide the following string if you would like to help debug:
							Time Zone: ${(f=l==null?void 0:l.toString())!==null&&f!==void 0?f:'""'} - Cron String: ${this.source.toString()} - UTC offset: ${g.offset} - current Date: ${s.DateTime.local().toString()}`);if(!(g.month in this.month)&&Object.keys(this.month).length!==12){g=g.plus({month:1}),g=g.set({day:1,hour:0,minute:0,second:0});continue}if(!(g.day in this.dayOfMonth)&&Object.keys(this.dayOfMonth).length!==31&&!(this._getWeekDay(g)in this.dayOfWeek&&Object.keys(this.dayOfWeek).length!==7)||!(this._getWeekDay(g)in this.dayOfWeek)&&Object.keys(this.dayOfWeek).length!==7&&!(g.day in this.dayOfMonth&&Object.keys(this.dayOfMonth).length!==31)){g=g.plus({days:1}),g=g.set({hour:0,minute:0,second:0});continue}if(!(g.hour in this.hour)&&Object.keys(this.hour).length!==24){g=g.plus({hour:1}),g=g.set({minute:0,second:0});continue}if(!(g.minute in this.minute)&&Object.keys(this.minute).length!==60){g=g.plus({minute:1}),g=g.set({second:0});continue}if(g.toMillis()===C||!(g.second in this.second)&&Object.keys(this.second).length!==60){g=g.plus({second:1});continue}break}const T=g.hour,A=g.minute;g=s.DateTime.fromFormat(`${g.year}-${g.month}-${g.day} ${g.hour}:${g.minute}:${g.second}`,"yyyy-M-d H:m:s",{zone:l});const I=s.DateTime.fromFormat(`${g.year}-1-1 0:0:0`,"yyyy-M-d H:m:s",{zone:l});if((T!==g.hour||A!==g.minute)&&I.offset!==g.offset){for(;g.minus({minute:1}).offset!==I.offset;)g=g.minus({minute:1});return g}const _=g.minus({hour:1}),R=g.minus({hour:2});(_.hour===g.hour||R.hour===_.hour)&&_>c&&(g=_);const N=g.minus({minute:30});return(N.minute===g.minute||_.minute===N.minute)&&N>c&&(g=N),g}_wcOrAll(c){if(this._hasAll(c))return"*";const l=[];for(const p in this[c])l.push(p);return l.join(",")}_hasAll(c){const l=e.CONSTRAINTS[c],p=l[0],f=c===e.TIME_UNITS_MAP.DAY_OF_WEEK?l[1]-1:l[1];for(let g=p,C=f;g<C;g++)if(!(g in this[c]))return!1;return!0}_parse(c){var l;c=c.toLowerCase(),Object.keys(e.PRESETS).includes(c)&&(c=e.PRESETS[c]),c=c.replace(/[a-z]{1,3}/gi,g=>{if(Object.keys(e.ALIASES).includes(g))return e.ALIASES[g].toString();throw new t.CronError(`Unknown alias: ${g}`)});const p=c.trim().split(/\s+/);if(p.length<e.TIME_UNITS_LEN-1)throw new t.CronError("Too few fields");if(p.length>e.TIME_UNITS_LEN)throw new t.CronError("Too many fields");const f=p.length;for(const g of e.TIME_UNITS){const C=e.TIME_UNITS.indexOf(g),v=(l=p[C-(e.TIME_UNITS_LEN-f)])!==null&&l!==void 0?l:e.PARSE_DEFAULTS[g];this._parseField(v,g)}}_parseField(c,l){const p=this[l];let f;const g=e.CONSTRAINTS[l],C=g[0],v=g[1];c.split(",").forEach(I=>{const _=I.indexOf("*");if(_!==-1&&_!==0)throw new t.CronError(`Field (${I}) has an invalid wildcard expression`)}),c=c.replace(e.RE_WILDCARDS,`${C}-${v}`);const A=c.split(",");for(const I of A){const _=[...I.matchAll(e.RE_RANGE)][0];if((_==null?void 0:_[1])!==void 0){const[,R,N,H]=_;let Y=parseInt(R,10),V=N!==void 0?parseInt(N,10):void 0;const $e=H!==void 0,ne=parseInt(H??"1",10);if(ne===0)throw new t.CronError(`Field (${l}) has a step of zero`);if(V!==void 0&&Y>V)throw new t.CronError(`Field (${l}) has an invalid range`);if(Y<C||V!==void 0&&V>v||V===void 0&&Y>v)throw new t.CronError(`Field value (${c}) is out of range`);Y=Math.min(Math.max(C,~~Math.abs(Y)),v),V!==void 0?V=Math.min(v,~~Math.abs(V)):V=$e?v:Y,f=Y;do p[f]=!0,f+=ne;while(f<=V);l==="dayOfWeek"&&(!p[0]&&p[7]&&(p[0]=p[7]),delete p[7])}else throw new t.CronError(`Field (${l}) cannot be parsed`)}}}return Ct.CronTime=r,Ct}var De={};const Dc={},Ac=Object.freeze(Object.defineProperty({__proto__:null,default:Dc},Symbol.toStringTag,{value:"Module"})),Nc=Ec(Ac);var Us;function Fc(){if(Us)return De;Us=1;var s=De&&De.__awaiter||function(c,l,p,f){function g(C){return C instanceof p?C:new p(function(v){v(C)})}return new(p||(p=Promise))(function(C,v){function T(_){try{I(f.next(_))}catch(R){v(R)}}function A(_){try{I(f.throw(_))}catch(R){v(R)}}function I(_){_.done?C(_.value):g(_.value).then(T,A)}I((f=f.apply(c,l||[])).next())})};Object.defineProperty(De,"__esModule",{value:!0}),De.CronJob=void 0;const e=Nc,t=vi(),r=Wn();class a{get isActive(){return this._isActive}get isCallbackRunning(){return this._isCallbackRunning}constructor(l,p,f,g,C,v,T,A,I,_,R,N,H){if(this.unrefTimeout=!1,this.lastExecution=null,this.runOnce=!1,this.waitForCompletion=!1,this.threshold=250,this._isActive=!1,this._isCallbackRunning=!1,this._callbacks=[],this.context=v??this,this.waitForCompletion=!!_,this.errorHandler=R,C!=null&&A!=null)throw new t.ExclusiveParametersError("timeZone","utcOffset");C!=null?this.cronTime=new r.CronTime(l,C,null):A!=null?this.cronTime=new r.CronTime(l,null,A):this.cronTime=new r.CronTime(l,C,A),I!=null&&(this.unrefTimeout=I),f!=null&&(this.onComplete=this._fnWrap(f)),H!=null&&(this.threshold=Math.abs(H)),N!=null&&(this.name=N),this.cronTime.realDate&&(this.runOnce=!0),this.addCallback(this._fnWrap(p)),T&&(this.lastExecution=new Date,this.fireOnTick()),g&&this.start()}static from(l){if(l.timeZone!=null&&l.utcOffset!=null)throw new t.ExclusiveParametersError("timeZone","utcOffset");return l.timeZone!=null?new a(l.cronTime,l.onTick,l.onComplete,l.start,l.timeZone,l.context,l.runOnInit,l.utcOffset,l.unrefTimeout,l.waitForCompletion,l.errorHandler,l.name,l.threshold):l.utcOffset!=null?new a(l.cronTime,l.onTick,l.onComplete,l.start,null,l.context,l.runOnInit,l.utcOffset,l.unrefTimeout,l.waitForCompletion,l.errorHandler,l.name,l.threshold):new a(l.cronTime,l.onTick,l.onComplete,l.start,l.timeZone,l.context,l.runOnInit,l.utcOffset,l.unrefTimeout,l.waitForCompletion,l.errorHandler,l.name,l.threshold)}_fnWrap(l){var p,f;switch(typeof l){case"function":return l;case"string":{const[g,...C]=l.split(" ");return e.spawn.bind(void 0,g??l,C,{})}case"object":return e.spawn.bind(void 0,l.command,(p=l.args)!==null&&p!==void 0?p:[],(f=l.options)!==null&&f!==void 0?f:{})}}addCallback(l){typeof l=="function"&&this._callbacks.push(l)}setTime(l){if(!(l instanceof r.CronTime))throw new t.CronError("time must be an instance of CronTime.");const p=this._isActive;this.stop(),this.cronTime=l,l.realDate&&(this.runOnce=!0),p&&this.start()}nextDate(){return this.cronTime.sendAt()}fireOnTick(){return s(this,void 0,void 0,function*(){if(!(this.waitForCompletion&&this._isCallbackRunning)){this._isCallbackRunning=!0;try{for(const l of this._callbacks){const p=l.call(this.context,this.onComplete);this.waitForCompletion&&(yield p)}}catch(l){this.errorHandler!=null?this.errorHandler(l):console.error("[Cron] error in callback",l)}finally{this._isCallbackRunning=!1}}})}nextDates(l){return this.cronTime.sendAt(l??0)}start(){if(this._isActive)return;this._isActive=!0;const l=2147483647;let p=this.cronTime.getTimeout(),f=0,g;const C=T=>{g=Date.now(),this._timeout=setTimeout(v,T),this.unrefTimeout&&typeof this._timeout.unref=="function"&&this._timeout.unref()},v=()=>{const T=g+p-Date.now();if(T>0){let A=this.cronTime.getTimeout();A>T&&(A=T),f+=A}f?(f>l?(f-=l,p=l):(p=f,f=0),C(p)):(this.lastExecution=new Date,this._isActive=!1,this.runOnce||this.start(),this.fireOnTick())};if(p>=0)p>l&&(f=p-l,p=l),C(p);else{const T=Math.abs(p),A=`[Cron] Missed execution deadline by ${T}ms for job${this.name?` "${this.name}"`:""} with cron expression '${String(this.cronTime.source)}'`;T<=this.threshold?(console.warn(`${A}. Executing immediately.`),this.lastExecution=new Date,this.fireOnTick()):console.warn(`${A}. Skipping execution as it exceeds threshold (${this.threshold}ms).`),p=this.cronTime.getTimeout(),C(p)}}lastDate(){return this.lastExecution}_executeOnComplete(){return s(this,void 0,void 0,function*(){if(typeof this.onComplete=="function")try{yield this.onComplete.call(this.context)}catch(l){console.error("[Cron] error in onComplete callback:",l)}})}_waitForJobCompletion(){return s(this,void 0,void 0,function*(){for(;this._isCallbackRunning;)yield new Promise(l=>setTimeout(l,100))})}stop(){if(this._timeout&&clearTimeout(this._timeout),this._isActive=!1,!this.waitForCompletion){this._executeOnComplete();return}return Promise.resolve().then(()=>s(this,void 0,void 0,function*(){yield this._waitForJobCompletion(),yield this._executeOnComplete()}))}}return De.CronJob=a,De}var Ws;function Rc(){return Ws||(Ws=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.validateCronExpression=s.timeout=s.sendAt=s.CronTime=s.CronJob=void 0;const e=Wn();var t=Fc();Object.defineProperty(s,"CronJob",{enumerable:!0,get:function(){return t.CronJob}});var r=Wn();Object.defineProperty(s,"CronTime",{enumerable:!0,get:function(){return r.CronTime}});const a=l=>new e.CronTime(l).sendAt();s.sendAt=a;const c=l=>new e.CronTime(l).getTimeout();s.timeout=c,s.validateCronExpression=e.CronTime.validateCronExpression}(_n)),_n}var Pc=Rc(),En,Vs;function $c(){return Vs||(Vs=1,En=Ro),En}var Lc=$c();const Te=new Lc.PrismaClient,xc={},me=new ve;me.use(async(s,e)=>{if(!s.chat)return e();const t=s.chat.id.toString();let r=await Te.session.findUnique({where:{chatId:t}});r?s.session={chatId:r.chatId,linkToPin:r.linkToPin,messageText:r.messageText,isActive:r.isActive}:s.session={isActive:!1},await e()});me.command("start",async s=>{await s.reply(`Welcome to Daily Pin Bot!

Commands:
/setup [link] [optional message] - Setup daily pin with a link and optional message
/activate - Activate daily pins
/deactivate - Deactivate daily pins
/status - Check current setup status
/help - Show available commands`)});me.command("help",async s=>{await s.reply(`Available commands:
/setup [link] [optional message] - Setup daily pin with a link and optional message
/activate - Activate daily pins
/deactivate - Deactivate daily pins
/status - Check current setup status`)});me.command("setup",async s=>{var c;const e=(c=s.message)==null?void 0:c.text.split(" ");if(!e||e.length<2){await s.reply("Please provide a link to pin");return}const t=s.chat.id.toString(),r=e[1],a=e.slice(2).join(" ")||"Daily reminder";await Te.session.upsert({where:{chatId:t},update:{linkToPin:r,messageText:a},create:{chatId:t,linkToPin:r,messageText:a,isActive:!1}}),await s.reply(`Daily pin has been set up with link: ${r}
Message: ${a}`)});me.command("activate",async s=>{const e=s.chat.id.toString(),t=await Te.session.findUnique({where:{chatId:e}});if(!t||!t.linkToPin){await s.reply("Please set up the bot first using /setup [link] [optional message]");return}await Te.session.update({where:{chatId:e},data:{isActive:!0}}),await s.reply("Daily pins activated! The bot will pin a message every weekday at 8:30 AM.")});me.command("deactivate",async s=>{const e=s.chat.id.toString();await Te.session.update({where:{chatId:e},data:{isActive:!1}}),await s.reply("Daily pins deactivated.")});me.command("status",async s=>{const e=s.chat.id.toString(),t=await Te.session.findUnique({where:{chatId:e}});if(!t){await s.reply("No setup found. Please use /setup to configure the bot.");return}const r=t.isActive?"Active":"Inactive";await s.reply(`Status: ${r}
Link: ${t.linkToPin}
Message: ${t.messageText}
Chat ID: ${e}`)});me.on("message",s=>{s.session.isActive&&s.session.chatId&&s.session.linkToPin&&(xc[s.session.chatId]={isActive:s.session.isActive,linkToPin:s.session.linkToPin,messageText:s.session.messageText,chatId:s.session.chatId})});async function Bc(s,e,t,r){try{const a=`${r}
${t}`,c=await s.api.sendMessage(e,a);await s.api.pinChatMessage(e,c.message_id),console.log(`Sent and pinned message to ${e}`)}catch(a){console.error(`Error sending/pinning to ${e}:`,a)}}function Uc(s){const e=new Pc.CronJob("0 30 8 * * 1-5",async()=>{console.log("Running daily pin job at 8:30 AM");const t=await Te.session.findMany({where:{isActive:!0}});for(const r of t)await Bc(s,r.chatId,r.linkToPin,r.messageText)},null,!0,"UTC");return e.start(),e}const Wc=()=>{};var js={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Vc=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const c=s[t++];e[r++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=s[t++],l=s[t++],p=s[t++],f=((a&7)<<18|(c&63)<<12|(l&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const c=s[t++],l=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(c&63)<<6|l&63)}}return e.join("")},Ti={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const c=s[a],l=a+1<s.length,p=l?s[a+1]:0,f=a+2<s.length,g=f?s[a+2]:0,C=c>>2,v=(c&3)<<4|p>>4;let T=(p&15)<<2|g>>6,A=g&63;f||(A=64,l||(T=64)),r.push(t[C],t[v],t[T],t[A])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Si(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Vc(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const c=t[s.charAt(a++)],p=a<s.length?t[s.charAt(a)]:0;++a;const g=a<s.length?t[s.charAt(a)]:64;++a;const v=a<s.length?t[s.charAt(a)]:64;if(++a,c==null||p==null||g==null||v==null)throw new jc;const T=c<<2|p>>4;if(r.push(T),g!==64){const A=p<<4&240|g>>2;if(r.push(A),v!==64){const I=g<<6&192|v;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class jc extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qc=function(s){const e=Si(s);return Ti.encodeByteArray(e,!0)},Ii=function(s){return qc(s).replace(/\./g,"")},Hc=function(s){try{return Ti.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=()=>Gc().__FIREBASE_DEFAULTS__,Zc=()=>{if(typeof process>"u"||typeof js>"u")return;const s=js.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Yc=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Hc(s[1]);return e&&JSON.parse(e)},Qc=()=>{try{return Wc()||zc()||Zc()||Yc()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Jc=()=>{var s;return(s=Qc())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Xc(){try{return typeof indexedDB=="object"}catch{return!1}}function el(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl="FirebaseError";class It extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=tl,Object.setPrototypeOf(this,It.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_i.prototype.create)}}class _i{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],l=c?nl(c,r):"Error",p=`${this.serviceName}: ${l} (${a}).`;return new It(a,p,r)}}function nl(s,e){return s.replace(rl,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const rl=/\{\$([^}]+)}/g;function Vn(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const c=s[a],l=e[a];if(qs(c)&&qs(l)){if(!Vn(c,l))return!1}else if(c!==l)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function qs(s){return s!==null&&typeof s=="object"}class Ht{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Kc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(al(e))try{this.getOrInitializeService({instanceIdentifier:Ae})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});r.resolve(c)}catch{}}}}clearInstance(e=Ae){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ae){return this.instances.has(e)}getOptions(e=Ae){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,l]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&l.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),c=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;c.add(e),this.onInitCallbacks.set(a,c);const l=this.instances.get(a);return l&&e(l,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:il(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ae){return this.component?this.component.multipleInstances?e:Ae:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function il(s){return s===Ae?void 0:s}function al(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sl(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(x||(x={}));const ul={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},cl=x.INFO,ll={[x.DEBUG]:"log",[x.VERBOSE]:"log",[x.INFO]:"info",[x.WARN]:"warn",[x.ERROR]:"error"},hl=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=ll[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dl{constructor(e){this.name=e,this._logLevel=cl,this._logHandler=hl,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in x))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ul[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,x.DEBUG,...e),this._logHandler(this,x.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,x.VERBOSE,...e),this._logHandler(this,x.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,x.INFO,...e),this._logHandler(this,x.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,x.WARN,...e),this._logHandler(this,x.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,x.ERROR,...e),this._logHandler(this,x.ERROR,...e)}}const fl=(s,e)=>e.some(t=>s instanceof t);let Hs,Gs;function ml(){return Hs||(Hs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pl(){return Gs||(Gs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ki=new WeakMap,jn=new WeakMap,Ei=new WeakMap,Mn=new WeakMap,Jn=new WeakMap;function gl(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",c),s.removeEventListener("error",l)},c=()=>{t(Se(s.result)),a()},l=()=>{r(s.error),a()};s.addEventListener("success",c),s.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&ki.set(t,s)}).catch(()=>{}),Jn.set(e,s),e}function yl(s){if(jn.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",l),s.removeEventListener("abort",l)},c=()=>{t(),a()},l=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",c),s.addEventListener("error",l),s.addEventListener("abort",l)});jn.set(s,e)}let qn={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return jn.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Ei.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Se(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function wl(s){qn=s(qn)}function bl(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(On(this),e,...t);return Ei.set(r,e.sort?e.sort():[e]),Se(r)}:pl().includes(s)?function(...e){return s.apply(On(this),e),Se(ki.get(this))}:function(...e){return Se(s.apply(On(this),e))}}function Cl(s){return typeof s=="function"?bl(s):(s instanceof IDBTransaction&&yl(s),fl(s,ml())?new Proxy(s,qn):s)}function Se(s){if(s instanceof IDBRequest)return gl(s);if(Mn.has(s))return Mn.get(s);const e=Cl(s);return e!==s&&(Mn.set(s,e),Jn.set(e,s)),e}const On=s=>Jn.get(s);function vl(s,e,{blocked:t,upgrade:r,blocking:a,terminated:c}={}){const l=indexedDB.open(s,e),p=Se(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Se(l.result),f.oldVersion,f.newVersion,Se(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),p.then(f=>{c&&f.addEventListener("close",()=>c()),a&&f.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const Sl=["get","getKey","getAll","getAllKeys","count"],Tl=["put","add","delete","clear"],Dn=new Map;function zs(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Dn.get(e))return Dn.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=Tl.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||Sl.includes(t)))return;const c=async function(l,...p){const f=this.transaction(l,a?"readwrite":"readonly");let g=f.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[t](...p),a&&f.done]))[0]};return Dn.set(e,c),c}wl(s=>({...s,get:(e,t,r)=>zs(e,t)||s.get(e,t,r),has:(e,t)=>!!zs(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_l(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function _l(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hn="@firebase/app",Zs="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe=new dl("@firebase/app"),kl="@firebase/app-compat",El="@firebase/analytics-compat",Ml="@firebase/analytics",Ol="@firebase/app-check-compat",Dl="@firebase/app-check",Al="@firebase/auth",Nl="@firebase/auth-compat",Fl="@firebase/database",Rl="@firebase/data-connect",Pl="@firebase/database-compat",$l="@firebase/functions",Ll="@firebase/functions-compat",xl="@firebase/installations",Bl="@firebase/installations-compat",Ul="@firebase/messaging",Wl="@firebase/messaging-compat",Vl="@firebase/performance",jl="@firebase/performance-compat",ql="@firebase/remote-config",Hl="@firebase/remote-config-compat",Gl="@firebase/storage",zl="@firebase/storage-compat",Zl="@firebase/firestore",Yl="@firebase/vertexai",Ql="@firebase/firestore-compat",Jl="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl="[DEFAULT]",Xl={[Hn]:"fire-core",[kl]:"fire-core-compat",[Ml]:"fire-analytics",[El]:"fire-analytics-compat",[Dl]:"fire-app-check",[Ol]:"fire-app-check-compat",[Al]:"fire-auth",[Nl]:"fire-auth-compat",[Fl]:"fire-rtdb",[Rl]:"fire-data-connect",[Pl]:"fire-rtdb-compat",[$l]:"fire-fn",[Ll]:"fire-fn-compat",[xl]:"fire-iid",[Bl]:"fire-iid-compat",[Ul]:"fire-fcm",[Wl]:"fire-fcm-compat",[Vl]:"fire-perf",[jl]:"fire-perf-compat",[ql]:"fire-rc",[Hl]:"fire-rc-compat",[Gl]:"fire-gcs",[zl]:"fire-gcs-compat",[Zl]:"fire-fst",[Ql]:"fire-fst-compat",[Yl]:"fire-vertex","fire-js":"fire-js",[Jl]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new Map,eh=new Map,zn=new Map;function Ys(s,e){try{s.container.addComponent(e)}catch(t){fe.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Zn(s){const e=s.name;if(zn.has(e))return fe.debug(`There were multiple attempts to register component ${e}.`),!1;zn.set(e,s);for(const t of Gn.values())Ys(t,s);for(const t of eh.values())Ys(t,s);return!0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fe=new _i("app","Firebase",th);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ht("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fe.create("app-deleted",{appName:this._name})}}function rh(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Kl,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw Fe.create("bad-app-name",{appName:String(a)});if(t||(t=Jc()),!t)throw Fe.create("no-options");const c=Gn.get(a);if(c){if(Vn(t,c.options)&&Vn(r,c.config))return c;throw Fe.create("duplicate-app",{appName:a})}const l=new ol(a);for(const f of zn.values())l.addComponent(f);const p=new nh(t,r,l);return Gn.set(a,p),p}function jt(s,e,t){var r;let a=(r=Xl[s])!==null&&r!==void 0?r:s;t&&(a+=`-${t}`);const c=a.match(/\s|\//),l=e.match(/\s|\//);if(c||l){const p=[`Unable to register library "${a}" with version "${e}":`];c&&p.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&l&&p.push("and"),l&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fe.warn(p.join(" "));return}Zn(new Ht(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="firebase-heartbeat-database",ih=1,Tt="firebase-heartbeat-store";let An=null;function Mi(){return An||(An=vl(sh,ih,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Tt)}catch(t){console.warn(t)}}}}).catch(s=>{throw Fe.create("idb-open",{originalErrorMessage:s.message})})),An}async function ah(s){try{const t=(await Mi()).transaction(Tt),r=await t.objectStore(Tt).get(Oi(s));return await t.done,r}catch(e){if(e instanceof It)fe.warn(e.message);else{const t=Fe.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fe.warn(t.message)}}}async function Qs(s,e){try{const r=(await Mi()).transaction(Tt,"readwrite");await r.objectStore(Tt).put(e,Oi(s)),await r.done}catch(t){if(t instanceof It)fe.warn(t.message);else{const r=Fe.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fe.warn(r.message)}}}function Oi(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=1024,uh=30;class ch{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hh(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Js();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(l=>l.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>uh){const l=dh(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fe.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Js(),{heartbeatsToSend:r,unsentEntries:a}=lh(this._heartbeatsCache.heartbeats),c=Ii(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return fe.warn(t),""}}}function Js(){return new Date().toISOString().substring(0,10)}function lh(s,e=oh){const t=[];let r=s.slice();for(const a of s){const c=t.find(l=>l.agent===a.agent);if(c){if(c.dates.push(a.date),Ks(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Ks(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class hh{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xc()?el().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ah(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Qs(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Qs(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Ks(s){return Ii(JSON.stringify({version:2,heartbeats:s})).length}function dh(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(s){Zn(new Ht("platform-logger",e=>new Il(e),"PRIVATE")),Zn(new Ht("heartbeat",e=>new ch(e),"PRIVATE")),jt(Hn,Zs,s),jt(Hn,Zs,"esm2017"),jt("fire-js","")}fh("");var mh="firebase",ph="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jt(mh,ph,"app");const gh="7573346578:AAE2sRABKwfcYyv4j-TecH-HjrSvxnvkGeg",yh=gh,Ke=new ac(yh);Ke.use(me);async function Xs(s){const e=s,t=await kc(e),r=await Ic({chunks:t,query:e});return console.log("Completion:",r),r}async function wh(){console.log("init ...");try{console.log("starting ..."),await Ke.start(),console.log("Bot started"),Ke.on("message:text",async s=>{s.reply(await Xs(s.message.text))}),Ke.hears(/chat *(.+)?/,async s=>{var e;console.log(s,"ctx"),console.log(s.message,"ctx.message"),(e=s.message)!=null&&e.text&&s.reply(await Xs(s.message.text))}),Ke.command("chat",async s=>{await s.reply("Hi! I can only read messages that explicitly reply to me!",{reply_markup:{force_reply:!0}})}),Uc(Ke)}catch(s){console.error("Failed to start the bot:",s)}}const bh={apiKey:"AIzaSyAcUmZKxPKECtpJNXmgqTuRl4-cpUKiuSU",authDomain:"test-bot-app-799e1.firebaseapp.com",projectId:"test-bot-app-799e1",storageBucket:"test-bot-app-799e1.firebasestorage.app",messagingSenderId:"107447802957",appId:"1:107447802957:web:96478207fb609157005004",measurementId:"G-8EWP5E4X9Z"};rh(bh);const Ch=async()=>{await wh()};Ch().catch(s=>{console.error(s),process.exit(1)}).finally(async()=>{await Te.$disconnect()});
