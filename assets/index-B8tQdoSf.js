var lc=Object.defineProperty;var hc=(r,e,t)=>e in r?lc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var D=(r,e,t)=>hc(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const l of u.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(i){if(i.ep)return;i.ep=!0;const u=t(i);fetch(i.href,u)}})();const Ws=new Map;function dc(r){const e=Array.isArray(r)?r:[r],t=e.join(","),s=Ws.get(t)??(()=>{const i=ki(e),u=fc(i);return Ws.set(t,u),u})();return i=>s(i)}function ki(r){return Array.isArray(r)?r.map(e=>e.split(":")):[r.split(":")]}function fc(r){const e=r.flatMap(i=>mc(i,Mi(i))),t=gc(e),s=yc(t);return i=>!!s(i.update,i)}function Mi(r){const e=rn,t=[r].flatMap(s=>{const[i,u,l]=s;if(!(i in Zs))return[s];if(!i&&!u&&!l)return[s];const d=Zs[i].map(p=>[p,u,l]);return u===void 0||u in Wn&&(u||l)?d:d.filter(([p])=>{var C;return!!((C=e[p])!=null&&C[u])})}).flatMap(s=>{const[i,u,l]=s;if(!(u in Wn))return[s];if(!u&&!l)return[s];const d=Wn[u].map(p=>[i,p,l]);return l===void 0?d:d.filter(([,p])=>{var C,v;return!!((v=(C=e[i])==null?void 0:C[p])!=null&&v[l])})});if(t.length===0)throw new Error(`Shortcuts in '${r.join(":")}' do not expand to any valid filter query`);return t}function mc(r,e){if(e.length===0)throw new Error("Empty filter query given");const t=e.map(pc).filter(s=>s!==!0);if(t.length===0)return e;throw t.length===1?new Error(t[0]):new Error(`Invalid filter query '${r.join(":")}'. There are ${t.length} errors after expanding the contained shortcuts: ${t.join("; ")}`)}function pc(r){const[e,t,s,...i]=r;if(e===void 0)return"Empty filter query given";if(!(e in rn)){const m=Object.keys(rn);return`Invalid L1 filter '${e}' given in '${r.join(":")}'. Permitted values are: ${m.map(d=>`'${d}'`).join(", ")}.`}if(t===void 0)return!0;const u=rn[e];if(!(t in u)){const m=Object.keys(u);return`Invalid L2 filter '${t}' given in '${r.join(":")}'. Permitted values are: ${m.map(d=>`'${d}'`).join(", ")}.`}if(s===void 0)return!0;const l=u[t];if(!(s in l)){const m=Object.keys(l);return`Invalid L3 filter '${s}' given in '${r.join(":")}'. ${m.length===0?`No further filtering is possible after '${e}:${t}'.`:`Permitted values are: ${m.map(d=>`'${d}'`).join(", ")}.`}`}return i.length===0?!0:`Cannot filter further than three levels, ':${i.join(":")}' is invalid!`}function gc(r){const e={};for(const[t,s,i]of r){const u=e[t]??(e[t]={});if(s!==void 0){const l=u[s]??(u[s]=new Set);i!==void 0&&l.add(i)}}return e}function Un(r,e){return(t,s)=>r(t,s)||e(t,s)}function js(r,e){return(t,s)=>{const i=r(t,s);return i&&e(i,s)}}function Vs(r){return(e,t)=>r(e,t)!=null}function yc(r){const e=Object.entries(r).map(([t,s])=>{const i=l=>l[t],u=Object.entries(s).map(([l,m])=>{const d=C=>C[l],p=Array.from(m).map(C=>C==="me"?(T,A)=>{const _=A.me.id;return qs(T,I=>I.id===_)}:T=>qs(T,A=>A[C]||A.type===C));return p.length===0?Vs(d):js(d,p.reduce(Un))});return u.length===0?Vs(i):js(i,u.reduce(Un))});if(e.length===0)throw new Error("Cannot create filter function for empty query");return e.reduce(Un)}function qs(r,e){const t=s=>s!=null&&e(s);return Array.isArray(r)?r.some(t):t(r)}const Hs={mention:{},hashtag:{},cashtag:{},bot_command:{},url:{},email:{},phone_number:{},bold:{},italic:{},underline:{},strikethrough:{},spoiler:{},blockquote:{},expandable_blockquote:{},code:{},pre:{},text_link:{},text_mention:{},custom_emoji:{}},Xn={me:{},is_bot:{},is_premium:{},added_to_attachment_menu:{}},wc={user:{},hidden_user:{},chat:{},channel:{}},bc={is_video:{},is_animated:{},premium_animation:{}},er={emoji:{},custom_emoji:{},paid:{}},Oi={forward_origin:wc,is_topic_message:{},is_automatic_forward:{},business_connection_id:{},text:{},animation:{},audio:{},document:{},paid_media:{},photo:{},sticker:bc,story:{},video:{},video_note:{},voice:{},contact:{},dice:{},game:{},poll:{},venue:{},location:{},entities:Hs,caption_entities:Hs,caption:{},link_preview_options:{url:{},prefer_small_media:{},prefer_large_media:{},show_above_text:{}},effect_id:{},paid_star_count:{},has_media_spoiler:{},new_chat_title:{},new_chat_photo:{},delete_chat_photo:{},message_auto_delete_timer_changed:{},pinned_message:{},invoice:{},proximity_alert_triggered:{},chat_background_set:{},giveaway_created:{},giveaway:{only_new_members:{},has_public_winners:{}},giveaway_winners:{only_new_members:{},was_refunded:{}},giveaway_completed:{},gift:{},unique_gift:{},paid_message_price_changed:{},video_chat_scheduled:{},video_chat_started:{},video_chat_ended:{},video_chat_participants_invited:{},web_app_data:{}},Zt={...Oi,new_chat_members:Xn,left_chat_member:Xn,group_chat_created:{},supergroup_chat_created:{},migrate_to_chat_id:{},migrate_from_chat_id:{},successful_payment:{},refunded_payment:{},users_shared:{},chat_shared:{},connected_website:{},write_access_allowed:{},passport_data:{},boost_added:{},forum_topic_created:{},forum_topic_edited:{name:{},icon_custom_emoji_id:{}},forum_topic_closed:{},forum_topic_reopened:{},general_forum_topic_hidden:{},general_forum_topic_unhidden:{},sender_boost_count:{}},Gs={...Oi,channel_chat_created:{}},Cc={can_reply:{},is_enabled:{}},vc={old_reaction:er,new_reaction:er},Sc={reactions:er},Tc={data:{},game_short_name:{}},zs={from:Xn},rn={message:Zt,edited_message:Zt,channel_post:Gs,edited_channel_post:Gs,business_connection:Cc,business_message:Zt,edited_business_message:Zt,deleted_business_messages:{},inline_query:{},chosen_inline_result:{},callback_query:Tc,shipping_query:{},pre_checkout_query:{},poll:{},poll_answer:{},my_chat_member:zs,chat_member:zs,chat_join_request:{},message_reaction:vc,message_reaction_count:Sc,chat_boost:{},removed_chat_boost:{},purchased_paid_media:{}},Zs={"":["message","channel_post"],msg:["message","channel_post"],edit:["edited_message","edited_channel_post"]},Wn={"":["entities","caption_entities"],media:["photo","video"],file:["photo","animation","audio","document","video","video_note","voice","sticker"]},he={filterQuery(r){const e=dc(r);return t=>e(t)},text(r){const e=he.filterQuery([":text",":caption"]),t=ke(r);return s=>{if(!e(s))return!1;const i=s.message??s.channelPost,u=i.text??i.caption;return Me(s,u,t)}},command(r){const e=he.filterQuery(":entities:bot_command"),t=new Set,s=new Set;return an(r).forEach(i=>{if(i.startsWith("/"))throw new Error(`Do not include '/' when registering command handlers (use '${i.substring(1)}' not '${i}')`);(i.includes("@")?t:s).add(i)}),i=>{if(!e(i))return!1;const u=i.message??i.channelPost,l=u.text??u.caption;return u.entities.some(m=>{if(m.type!=="bot_command"||m.offset!==0)return!1;const d=l.substring(1,m.length);if(s.has(d)||t.has(d))return i.match=l.substring(d.length+1).trimStart(),!0;const p=d.indexOf("@");if(p===-1)return!1;const C=d.substring(p+1).toLowerCase(),v=i.me.username.toLowerCase();if(C!==v)return!1;const T=d.substring(0,p);return s.has(T)?(i.match=l.substring(d.length+1).trimStart(),!0):!1})}},reaction(r){const e=he.filterQuery("message_reaction"),t=typeof r=="string"?[{type:"emoji",emoji:r}]:(Array.isArray(r)?r:[r]).map(l=>typeof l=="string"?{type:"emoji",emoji:l}:l),s=new Set(t.filter(l=>l.type==="emoji").map(l=>l.emoji)),i=new Set(t.filter(l=>l.type==="custom_emoji").map(l=>l.custom_emoji_id)),u=t.some(l=>l.type==="paid");return l=>{if(!e(l))return!1;const{old_reaction:m,new_reaction:d}=l.messageReaction;for(const p of d){let C=!1;if(p.type==="emoji"){for(const v of m)if(v.type==="emoji"&&v.emoji===p.emoji){C=!0;break}}else if(p.type==="custom_emoji"){for(const v of m)if(v.type==="custom_emoji"&&v.custom_emoji_id===p.custom_emoji_id){C=!0;break}}else if(p.type==="paid"){for(const v of m)if(v.type==="paid"){C=!0;break}}if(!C)if(p.type==="emoji"){if(s.has(p.emoji))return!0}else if(p.type==="custom_emoji"){if(i.has(p.custom_emoji_id))return!0}else if(p.type==="paid"){if(u)return!0}else return!0}return!1}},chatType(r){const e=new Set(an(r));return t=>{var s;return((s=t.chat)==null?void 0:s.type)!==void 0&&e.has(t.chat.type)}},callbackQuery(r){const e=he.filterQuery("callback_query:data"),t=ke(r);return s=>e(s)&&Me(s,s.callbackQuery.data,t)},gameQuery(r){const e=he.filterQuery("callback_query:game_short_name"),t=ke(r);return s=>e(s)&&Me(s,s.callbackQuery.game_short_name,t)},inlineQuery(r){const e=he.filterQuery("inline_query"),t=ke(r);return s=>e(s)&&Me(s,s.inlineQuery.query,t)},chosenInlineResult(r){const e=he.filterQuery("chosen_inline_result"),t=ke(r);return s=>e(s)&&Me(s,s.chosenInlineResult.result_id,t)},preCheckoutQuery(r){const e=he.filterQuery("pre_checkout_query"),t=ke(r);return s=>e(s)&&Me(s,s.preCheckoutQuery.invoice_payload,t)},shippingQuery(r){const e=he.filterQuery("shipping_query"),t=ke(r);return s=>e(s)&&Me(s,s.shippingQuery.invoice_payload,t)}},Q=class Q{constructor(e,t,s){D(this,"update");D(this,"api");D(this,"me");D(this,"match");this.update=e,this.api=t,this.me=s}get message(){return this.update.message}get editedMessage(){return this.update.edited_message}get channelPost(){return this.update.channel_post}get editedChannelPost(){return this.update.edited_channel_post}get businessConnection(){return this.update.business_connection}get businessMessage(){return this.update.business_message}get editedBusinessMessage(){return this.update.edited_business_message}get deletedBusinessMessages(){return this.update.deleted_business_messages}get messageReaction(){return this.update.message_reaction}get messageReactionCount(){return this.update.message_reaction_count}get inlineQuery(){return this.update.inline_query}get chosenInlineResult(){return this.update.chosen_inline_result}get callbackQuery(){return this.update.callback_query}get shippingQuery(){return this.update.shipping_query}get preCheckoutQuery(){return this.update.pre_checkout_query}get poll(){return this.update.poll}get pollAnswer(){return this.update.poll_answer}get myChatMember(){return this.update.my_chat_member}get chatMember(){return this.update.chat_member}get chatJoinRequest(){return this.update.chat_join_request}get chatBoost(){return this.update.chat_boost}get removedChatBoost(){return this.update.removed_chat_boost}get purchasedPaidMedia(){return this.update.purchased_paid_media}get msg(){var e;return this.message??this.editedMessage??this.channelPost??this.editedChannelPost??this.businessMessage??this.editedBusinessMessage??((e=this.callbackQuery)==null?void 0:e.message)}get chat(){var e;return(e=this.msg??this.deletedBusinessMessages??this.messageReaction??this.messageReactionCount??this.myChatMember??this.chatMember??this.chatJoinRequest??this.chatBoost??this.removedChatBoost)==null?void 0:e.chat}get senderChat(){var e;return(e=this.msg)==null?void 0:e.sender_chat}get from(){var e,t,s,i;return((s=this.businessConnection??this.messageReaction??((t=((e=this.chatBoost)==null?void 0:e.boost)??this.removedChatBoost)==null?void 0:t.source))==null?void 0:s.user)??((i=this.callbackQuery??this.msg??this.inlineQuery??this.chosenInlineResult??this.shippingQuery??this.preCheckoutQuery??this.myChatMember??this.chatMember??this.chatJoinRequest??this.purchasedPaidMedia)==null?void 0:i.from)}get msgId(){var e,t,s;return((e=this.msg)==null?void 0:e.message_id)??((t=this.messageReaction)==null?void 0:t.message_id)??((s=this.messageReactionCount)==null?void 0:s.message_id)}get chatId(){var e,t;return((e=this.chat)==null?void 0:e.id)??((t=this.businessConnection)==null?void 0:t.user_chat_id)}get inlineMessageId(){var e,t;return((e=this.callbackQuery)==null?void 0:e.inline_message_id)??((t=this.chosenInlineResult)==null?void 0:t.inline_message_id)}get businessConnectionId(){var e,t,s;return((e=this.msg)==null?void 0:e.business_connection_id)??((t=this.businessConnection)==null?void 0:t.id)??((s=this.deletedBusinessMessages)==null?void 0:s.business_connection_id)}entities(e){const t=this.msg;if(t===void 0)return[];const s=t.text??t.caption;if(s===void 0)return[];let i=t.entities??t.caption_entities;if(i===void 0)return[];if(e!==void 0){const u=new Set(an(e));i=i.filter(l=>u.has(l.type))}return i.map(u=>({...u,text:s.substring(u.offset,u.offset+u.length)}))}reactions(){const e=[],t=[],s=[],i=[],u=[],l=[],m=[],d=[];let p=!1,C=!1;const v=this.messageReaction;if(v!==void 0){const{old_reaction:T,new_reaction:A}=v;for(const _ of A)_.type==="emoji"?e.push(_.emoji):_.type==="custom_emoji"?u.push(_.custom_emoji_id):_.type==="paid"&&(p=C=!0);for(const _ of T)_.type==="emoji"?i.push(_.emoji):_.type==="custom_emoji"?d.push(_.custom_emoji_id):_.type==="paid"&&(C=!1);t.push(...e),l.push(...u);for(let _=0;_<i.length;_++){const I=t.length;if(I===0)break;const $=i[_];for(let N=0;N<I;N++)if($===t[N]){s.push($),i.splice(_,1),t.splice(N,1),_--;break}}for(let _=0;_<d.length;_++){const I=l.length;if(I===0)break;const $=d[_];for(let N=0;N<I;N++)if($===l[N]){m.push($),d.splice(_,1),l.splice(N,1),_--;break}}}return{emoji:e,emojiAdded:t,emojiKept:s,emojiRemoved:i,customEmoji:u,customEmojiAdded:l,customEmojiKept:m,customEmojiRemoved:d,paid:p,paidAdded:C}}has(e){return Q.has.filterQuery(e)(this)}hasText(e){return Q.has.text(e)(this)}hasCommand(e){return Q.has.command(e)(this)}hasReaction(e){return Q.has.reaction(e)(this)}hasChatType(e){return Q.has.chatType(e)(this)}hasCallbackQuery(e){return Q.has.callbackQuery(e)(this)}hasGameQuery(e){return Q.has.gameQuery(e)(this)}hasInlineQuery(e){return Q.has.inlineQuery(e)(this)}hasChosenInlineResult(e){return Q.has.chosenInlineResult(e)(this)}hasPreCheckoutQuery(e){return Q.has.preCheckoutQuery(e)(this)}hasShippingQuery(e){return Q.has.shippingQuery(e)(this)}reply(e,t,s){return this.api.sendMessage(w(this.chatId,"sendMessage"),e,{business_connection_id:this.businessConnectionId,...t},s)}forwardMessage(e,t,s){return this.api.forwardMessage(e,w(this.chatId,"forwardMessage"),w(this.msgId,"forwardMessage"),t,s)}forwardMessages(e,t,s,i){return this.api.forwardMessages(e,w(this.chatId,"forwardMessages"),t,s,i)}copyMessage(e,t,s){return this.api.copyMessage(e,w(this.chatId,"copyMessage"),w(this.msgId,"copyMessage"),t,s)}copyMessages(e,t,s,i){return this.api.copyMessages(e,w(this.chatId,"copyMessages"),t,s,i)}replyWithPhoto(e,t,s){return this.api.sendPhoto(w(this.chatId,"sendPhoto"),e,{business_connection_id:this.businessConnectionId,...t},s)}replyWithAudio(e,t,s){return this.api.sendAudio(w(this.chatId,"sendAudio"),e,{business_connection_id:this.businessConnectionId,...t},s)}replyWithDocument(e,t,s){return this.api.sendDocument(w(this.chatId,"sendDocument"),e,{business_connection_id:this.businessConnectionId,...t},s)}replyWithVideo(e,t,s){return this.api.sendVideo(w(this.chatId,"sendVideo"),e,{business_connection_id:this.businessConnectionId,...t},s)}replyWithAnimation(e,t,s){return this.api.sendAnimation(w(this.chatId,"sendAnimation"),e,{business_connection_id:this.businessConnectionId,...t},s)}replyWithVoice(e,t,s){return this.api.sendVoice(w(this.chatId,"sendVoice"),e,{business_connection_id:this.businessConnectionId,...t},s)}replyWithVideoNote(e,t,s){return this.api.sendVideoNote(w(this.chatId,"sendVideoNote"),e,{business_connection_id:this.businessConnectionId,...t},s)}replyWithMediaGroup(e,t,s){return this.api.sendMediaGroup(w(this.chatId,"sendMediaGroup"),e,{business_connection_id:this.businessConnectionId,...t},s)}replyWithLocation(e,t,s,i){return this.api.sendLocation(w(this.chatId,"sendLocation"),e,t,{business_connection_id:this.businessConnectionId,...s},i)}editMessageLiveLocation(e,t,s,i){const u=this.inlineMessageId;return u!==void 0?this.api.editMessageLiveLocationInline(u,e,t,{business_connection_id:this.businessConnectionId,...s},i):this.api.editMessageLiveLocation(w(this.chatId,"editMessageLiveLocation"),w(this.msgId,"editMessageLiveLocation"),e,t,{business_connection_id:this.businessConnectionId,...s},i)}stopMessageLiveLocation(e,t){const s=this.inlineMessageId;return s!==void 0?this.api.stopMessageLiveLocationInline(s,{business_connection_id:this.businessConnectionId,...e},t):this.api.stopMessageLiveLocation(w(this.chatId,"stopMessageLiveLocation"),w(this.msgId,"stopMessageLiveLocation"),{business_connection_id:this.businessConnectionId,...e},t)}sendPaidMedia(e,t,s,i){return this.api.sendPaidMedia(w(this.chatId,"sendPaidMedia"),e,t,{business_connection_id:this.businessConnectionId,...s},i)}replyWithVenue(e,t,s,i,u,l){return this.api.sendVenue(w(this.chatId,"sendVenue"),e,t,s,i,{business_connection_id:this.businessConnectionId,...u},l)}replyWithContact(e,t,s,i){return this.api.sendContact(w(this.chatId,"sendContact"),e,t,{business_connection_id:this.businessConnectionId,...s},i)}replyWithPoll(e,t,s,i){return this.api.sendPoll(w(this.chatId,"sendPoll"),e,t,{business_connection_id:this.businessConnectionId,...s},i)}replyWithDice(e,t,s){return this.api.sendDice(w(this.chatId,"sendDice"),e,{business_connection_id:this.businessConnectionId,...t},s)}replyWithChatAction(e,t,s){return this.api.sendChatAction(w(this.chatId,"sendChatAction"),e,{business_connection_id:this.businessConnectionId,...t},s)}react(e,t,s){return this.api.setMessageReaction(w(this.chatId,"setMessageReaction"),w(this.msgId,"setMessageReaction"),typeof e=="string"?[{type:"emoji",emoji:e}]:(Array.isArray(e)?e:[e]).map(i=>typeof i=="string"?{type:"emoji",emoji:i}:i),t,s)}getUserProfilePhotos(e,t){return this.api.getUserProfilePhotos(w(this.from,"getUserProfilePhotos").id,e,t)}setUserEmojiStatus(e,t){return this.api.setUserEmojiStatus(w(this.from,"setUserEmojiStatus").id,e,t)}getUserChatBoosts(e,t){return this.api.getUserChatBoosts(e,w(this.from,"getUserChatBoosts").id,t)}getBusinessConnection(e){return this.api.getBusinessConnection(w(this.businessConnectionId,"getBusinessConnection"),e)}getFile(e){const t=w(this.msg,"getFile"),s=t.photo!==void 0?t.photo[t.photo.length-1]:t.animation??t.audio??t.document??t.video??t.video_note??t.voice??t.sticker;return this.api.getFile(w(s,"getFile").file_id,e)}kickAuthor(...e){return this.banAuthor(...e)}banAuthor(e,t){return this.api.banChatMember(w(this.chatId,"banAuthor"),w(this.from,"banAuthor").id,e,t)}kickChatMember(...e){return this.banChatMember(...e)}banChatMember(e,t,s){return this.api.banChatMember(w(this.chatId,"banChatMember"),e,t,s)}unbanChatMember(e,t,s){return this.api.unbanChatMember(w(this.chatId,"unbanChatMember"),e,t,s)}restrictAuthor(e,t,s){return this.api.restrictChatMember(w(this.chatId,"restrictAuthor"),w(this.from,"restrictAuthor").id,e,t,s)}restrictChatMember(e,t,s,i){return this.api.restrictChatMember(w(this.chatId,"restrictChatMember"),e,t,s,i)}promoteAuthor(e,t){return this.api.promoteChatMember(w(this.chatId,"promoteAuthor"),w(this.from,"promoteAuthor").id,e,t)}promoteChatMember(e,t,s){return this.api.promoteChatMember(w(this.chatId,"promoteChatMember"),e,t,s)}setChatAdministratorAuthorCustomTitle(e,t){return this.api.setChatAdministratorCustomTitle(w(this.chatId,"setChatAdministratorAuthorCustomTitle"),w(this.from,"setChatAdministratorAuthorCustomTitle").id,e,t)}setChatAdministratorCustomTitle(e,t,s){return this.api.setChatAdministratorCustomTitle(w(this.chatId,"setChatAdministratorCustomTitle"),e,t,s)}banChatSenderChat(e,t){return this.api.banChatSenderChat(w(this.chatId,"banChatSenderChat"),e,t)}unbanChatSenderChat(e,t){return this.api.unbanChatSenderChat(w(this.chatId,"unbanChatSenderChat"),e,t)}setChatPermissions(e,t,s){return this.api.setChatPermissions(w(this.chatId,"setChatPermissions"),e,t,s)}exportChatInviteLink(e){return this.api.exportChatInviteLink(w(this.chatId,"exportChatInviteLink"),e)}createChatInviteLink(e,t){return this.api.createChatInviteLink(w(this.chatId,"createChatInviteLink"),e,t)}editChatInviteLink(e,t,s){return this.api.editChatInviteLink(w(this.chatId,"editChatInviteLink"),e,t,s)}createChatSubscriptionInviteLink(e,t,s,i){return this.api.createChatSubscriptionInviteLink(w(this.chatId,"createChatSubscriptionInviteLink"),e,t,s,i)}editChatSubscriptionInviteLink(e,t,s){return this.api.editChatSubscriptionInviteLink(w(this.chatId,"editChatSubscriptionInviteLink"),e,t,s)}revokeChatInviteLink(e,t){return this.api.revokeChatInviteLink(w(this.chatId,"editChatInviteLink"),e,t)}approveChatJoinRequest(e,t){return this.api.approveChatJoinRequest(w(this.chatId,"approveChatJoinRequest"),e,t)}declineChatJoinRequest(e,t){return this.api.declineChatJoinRequest(w(this.chatId,"declineChatJoinRequest"),e,t)}setChatPhoto(e,t){return this.api.setChatPhoto(w(this.chatId,"setChatPhoto"),e,t)}deleteChatPhoto(e){return this.api.deleteChatPhoto(w(this.chatId,"deleteChatPhoto"),e)}setChatTitle(e,t){return this.api.setChatTitle(w(this.chatId,"setChatTitle"),e,t)}setChatDescription(e,t){return this.api.setChatDescription(w(this.chatId,"setChatDescription"),e,t)}pinChatMessage(e,t,s){return this.api.pinChatMessage(w(this.chatId,"pinChatMessage"),e,{business_connection_id:this.businessConnectionId,...t},s)}unpinChatMessage(e,t,s){return this.api.unpinChatMessage(w(this.chatId,"unpinChatMessage"),e,{business_connection_id:this.businessConnectionId,...t},s)}unpinAllChatMessages(e){return this.api.unpinAllChatMessages(w(this.chatId,"unpinAllChatMessages"),e)}leaveChat(e){return this.api.leaveChat(w(this.chatId,"leaveChat"),e)}getChat(e){return this.api.getChat(w(this.chatId,"getChat"),e)}getChatAdministrators(e){return this.api.getChatAdministrators(w(this.chatId,"getChatAdministrators"),e)}getChatMembersCount(...e){return this.getChatMemberCount(...e)}getChatMemberCount(e){return this.api.getChatMemberCount(w(this.chatId,"getChatMemberCount"),e)}getAuthor(e){return this.api.getChatMember(w(this.chatId,"getAuthor"),w(this.from,"getAuthor").id,e)}getChatMember(e,t){return this.api.getChatMember(w(this.chatId,"getChatMember"),e,t)}setChatStickerSet(e,t){return this.api.setChatStickerSet(w(this.chatId,"setChatStickerSet"),e,t)}deleteChatStickerSet(e){return this.api.deleteChatStickerSet(w(this.chatId,"deleteChatStickerSet"),e)}createForumTopic(e,t,s){return this.api.createForumTopic(w(this.chatId,"createForumTopic"),e,t,s)}editForumTopic(e,t){const s=w(this.msg,"editForumTopic"),i=w(s.message_thread_id,"editForumTopic");return this.api.editForumTopic(s.chat.id,i,e,t)}closeForumTopic(e){const t=w(this.msg,"closeForumTopic"),s=w(t.message_thread_id,"closeForumTopic");return this.api.closeForumTopic(t.chat.id,s,e)}reopenForumTopic(e){const t=w(this.msg,"reopenForumTopic"),s=w(t.message_thread_id,"reopenForumTopic");return this.api.reopenForumTopic(t.chat.id,s,e)}deleteForumTopic(e){const t=w(this.msg,"deleteForumTopic"),s=w(t.message_thread_id,"deleteForumTopic");return this.api.deleteForumTopic(t.chat.id,s,e)}unpinAllForumTopicMessages(e){const t=w(this.msg,"unpinAllForumTopicMessages"),s=w(t.message_thread_id,"unpinAllForumTopicMessages");return this.api.unpinAllForumTopicMessages(t.chat.id,s,e)}editGeneralForumTopic(e,t){return this.api.editGeneralForumTopic(w(this.chatId,"editGeneralForumTopic"),e,t)}closeGeneralForumTopic(e){return this.api.closeGeneralForumTopic(w(this.chatId,"closeGeneralForumTopic"),e)}reopenGeneralForumTopic(e){return this.api.reopenGeneralForumTopic(w(this.chatId,"reopenGeneralForumTopic"),e)}hideGeneralForumTopic(e){return this.api.hideGeneralForumTopic(w(this.chatId,"hideGeneralForumTopic"),e)}unhideGeneralForumTopic(e){return this.api.unhideGeneralForumTopic(w(this.chatId,"unhideGeneralForumTopic"),e)}unpinAllGeneralForumTopicMessages(e){return this.api.unpinAllGeneralForumTopicMessages(w(this.chatId,"unpinAllGeneralForumTopicMessages"),e)}answerCallbackQuery(e,t){return this.api.answerCallbackQuery(w(this.callbackQuery,"answerCallbackQuery").id,typeof e=="string"?{text:e}:e,t)}setChatMenuButton(e,t){return this.api.setChatMenuButton(e,t)}getChatMenuButton(e,t){return this.api.getChatMenuButton(e,t)}setMyDefaultAdministratorRights(e,t){return this.api.setMyDefaultAdministratorRights(e,t)}getMyDefaultAdministratorRights(e,t){return this.api.getMyDefaultAdministratorRights(e,t)}editMessageText(e,t,s){var u,l,m;const i=this.inlineMessageId;return i!==void 0?this.api.editMessageTextInline(i,e,{business_connection_id:this.businessConnectionId,...t},s):this.api.editMessageText(w(this.chatId,"editMessageText"),w(((u=this.msg)==null?void 0:u.message_id)??((l=this.messageReaction)==null?void 0:l.message_id)??((m=this.messageReactionCount)==null?void 0:m.message_id),"editMessageText"),e,{business_connection_id:this.businessConnectionId,...t},s)}editMessageCaption(e,t){var i,u,l;const s=this.inlineMessageId;return s!==void 0?this.api.editMessageCaptionInline(s,{business_connection_id:this.businessConnectionId,...e},t):this.api.editMessageCaption(w(this.chatId,"editMessageCaption"),w(((i=this.msg)==null?void 0:i.message_id)??((u=this.messageReaction)==null?void 0:u.message_id)??((l=this.messageReactionCount)==null?void 0:l.message_id),"editMessageCaption"),{business_connection_id:this.businessConnectionId,...e},t)}editMessageMedia(e,t,s){var u,l,m;const i=this.inlineMessageId;return i!==void 0?this.api.editMessageMediaInline(i,e,{business_connection_id:this.businessConnectionId,...t},s):this.api.editMessageMedia(w(this.chatId,"editMessageMedia"),w(((u=this.msg)==null?void 0:u.message_id)??((l=this.messageReaction)==null?void 0:l.message_id)??((m=this.messageReactionCount)==null?void 0:m.message_id),"editMessageMedia"),e,{business_connection_id:this.businessConnectionId,...t},s)}editMessageReplyMarkup(e,t){var i,u,l;const s=this.inlineMessageId;return s!==void 0?this.api.editMessageReplyMarkupInline(s,{business_connection_id:this.businessConnectionId,...e},t):this.api.editMessageReplyMarkup(w(this.chatId,"editMessageReplyMarkup"),w(((i=this.msg)==null?void 0:i.message_id)??((u=this.messageReaction)==null?void 0:u.message_id)??((l=this.messageReactionCount)==null?void 0:l.message_id),"editMessageReplyMarkup"),{business_connection_id:this.businessConnectionId,...e},t)}stopPoll(e,t){var s,i,u;return this.api.stopPoll(w(this.chatId,"stopPoll"),w(((s=this.msg)==null?void 0:s.message_id)??((i=this.messageReaction)==null?void 0:i.message_id)??((u=this.messageReactionCount)==null?void 0:u.message_id),"stopPoll"),{business_connection_id:this.businessConnectionId,...e},t)}deleteMessage(e){var t,s,i;return this.api.deleteMessage(w(this.chatId,"deleteMessage"),w(((t=this.msg)==null?void 0:t.message_id)??((s=this.messageReaction)==null?void 0:s.message_id)??((i=this.messageReactionCount)==null?void 0:i.message_id),"deleteMessage"),e)}deleteMessages(e,t){return this.api.deleteMessages(w(this.chatId,"deleteMessages"),e,t)}deleteBusinessMessages(e,t){return this.api.deleteBusinessMessages(w(this.businessConnectionId,"deleteBusinessMessages"),e,t)}setBusinessAccountName(e,t,s){return this.api.setBusinessAccountName(w(this.businessConnectionId,"setBusinessAccountName"),e,t,s)}setBusinessAccountUsername(e,t){return this.api.setBusinessAccountUsername(w(this.businessConnectionId,"setBusinessAccountUsername"),e,t)}setBusinessAccountBio(e,t){return this.api.setBusinessAccountBio(w(this.businessConnectionId,"setBusinessAccountBio"),e,t)}setBusinessAccountProfilePhoto(e,t,s){return this.api.setBusinessAccountProfilePhoto(w(this.businessConnectionId,"setBusinessAccountProfilePhoto"),e,t,s)}removeBusinessAccountProfilePhoto(e,t){return this.api.removeBusinessAccountProfilePhoto(w(this.businessConnectionId,"removeBusinessAccountProfilePhoto"),e,t)}setBusinessAccountGiftSettings(e,t,s){return this.api.setBusinessAccountGiftSettings(w(this.businessConnectionId,"setBusinessAccountGiftSettings"),e,t,s)}getBusinessAccountStarBalance(e){return this.api.getBusinessAccountStarBalance(w(this.businessConnectionId,"getBusinessAccountStarBalance"),e)}transferBusinessAccountStars(e,t){return this.api.transferBusinessAccountStars(w(this.businessConnectionId,"transferBusinessAccountStars"),e,t)}getBusinessAccountGifts(e,t){return this.api.getBusinessAccountGifts(w(this.businessConnectionId,"getBusinessAccountGifts"),e,t)}convertGiftToStars(e,t){return this.api.convertGiftToStars(w(this.businessConnectionId,"convertGiftToStars"),e,t)}upgradeGift(e,t,s){return this.api.upgradeGift(w(this.businessConnectionId,"upgradeGift"),e,t,s)}transferGift(e,t,s,i){return this.api.transferGift(w(this.businessConnectionId,"transferGift"),e,t,s,i)}postStory(e,t,s,i){return this.api.postStory(w(this.businessConnectionId,"postStory"),e,t,s,i)}editStory(e,t,s,i){return this.api.editStory(w(this.businessConnectionId,"editStory"),e,t,s,i)}deleteStory(e,t){return this.api.deleteStory(w(this.businessConnectionId,"deleteStory"),e,t)}replyWithSticker(e,t,s){return this.api.sendSticker(w(this.chatId,"sendSticker"),e,{business_connection_id:this.businessConnectionId,...t},s)}getCustomEmojiStickers(e){var t;return this.api.getCustomEmojiStickers((((t=this.msg)==null?void 0:t.entities)??[]).filter(s=>s.type==="custom_emoji").map(s=>s.custom_emoji_id),e)}replyWithGift(e,t,s){return this.api.sendGift(w(this.from,"sendGift").id,e,t,s)}giftPremiumSubscription(e,t,s,i){return this.api.giftPremiumSubscription(w(this.from,"giftPremiumSubscription").id,e,t,s,i)}replyWithGiftToChannel(e,t,s){return this.api.sendGiftToChannel(w(this.chat,"sendGift").id,e,t,s)}answerInlineQuery(e,t,s){return this.api.answerInlineQuery(w(this.inlineQuery,"answerInlineQuery").id,e,t,s)}savePreparedInlineMessage(e,t,s){return this.api.savePreparedInlineMessage(w(this.from,"savePreparedInlineMessage").id,e,t,s)}replyWithInvoice(e,t,s,i,u,l,m){return this.api.sendInvoice(w(this.chatId,"sendInvoice"),e,t,s,i,u,l,m)}answerShippingQuery(e,t,s){return this.api.answerShippingQuery(w(this.shippingQuery,"answerShippingQuery").id,e,t,s)}answerPreCheckoutQuery(e,t,s){return this.api.answerPreCheckoutQuery(w(this.preCheckoutQuery,"answerPreCheckoutQuery").id,e,typeof t=="string"?{error_message:t}:t,s)}refundStarPayment(e){var t;return this.api.refundStarPayment(w(this.from,"refundStarPayment").id,w((t=this.msg)==null?void 0:t.successful_payment,"refundStarPayment").telegram_payment_charge_id,e)}editUserStarSubscription(e,t,s){return this.api.editUserStarSubscription(w(this.from,"editUserStarSubscription").id,e,t,s)}verifyUser(e,t){return this.api.verifyUser(w(this.from,"verifyUser").id,e,t)}verifyChat(e,t){return this.api.verifyChat(w(this.chatId,"verifyChat"),e,t)}removeUserVerification(e){return this.api.removeUserVerification(w(this.from,"removeUserVerification").id,e)}removeChatVerification(e){return this.api.removeChatVerification(w(this.chatId,"removeChatVerification"),e)}readBusinessMessage(e){return this.api.readBusinessMessage(w(this.businessConnectionId,"readBusinessMessage"),w(this.chatId,"readBusinessMessage"),w(this.msgId,"readBusinessMessage"),e)}setPassportDataErrors(e,t){return this.api.setPassportDataErrors(w(this.from,"setPassportDataErrors").id,e,t)}replyWithGame(e,t,s){return this.api.sendGame(w(this.chatId,"sendGame"),e,{business_connection_id:this.businessConnectionId,...t},s)}};D(Q,"has",he);let K=Q;function w(r,e){if(r===void 0)throw new Error(`Missing information for API call to ${e}`);return r}function ke(r){return an(r).map(e=>typeof e=="string"?t=>t===e?e:null:t=>t.match(e))}function Me(r,e,t){for(const s of t){const i=s(e);if(i)return r.match=i,!0}return!1}function an(r){return Array.isArray(r)?r:[r]}class tr extends Error{constructor(t,s){super(_c(t));D(this,"error");D(this,"ctx");this.error=t,this.ctx=s,this.name="BotError",t instanceof Error&&(this.stack=t.stack)}}function _c(r){let e;if(r instanceof Error)e=`${r.name} in middleware: ${r.message}`;else{const t=typeof r;switch(e=`Non-error value of type ${t} thrown in middleware`,t){case"bigint":case"boolean":case"number":case"symbol":e+=`: ${r}`;break;case"string":e+=`: ${String(r).substring(0,50)}`;break;default:e+="!";break}}return e}function Et(r){return typeof r=="function"?r:(e,t)=>r.middleware()(e,t)}function Ys(r,e){return async(t,s)=>{let i=!1;await r(t,async()=>{if(i)throw new Error("`next` already called before!");i=!0,await e(t,s)})}}function jn(r,e){return e()}const Ic=()=>Promise.resolve();async function Ai(r,e){await r(e,Ic)}class Se{constructor(...e){D(this,"handler");this.handler=e.length===0?jn:e.map(Et).reduce(Ys)}middleware(){return this.handler}use(...e){const t=new Se(...e);return this.handler=Ys(this.handler,Et(t)),t}on(e,...t){return this.filter(K.has.filterQuery(e),...t)}hears(e,...t){return this.filter(K.has.text(e),...t)}command(e,...t){return this.filter(K.has.command(e),...t)}reaction(e,...t){return this.filter(K.has.reaction(e),...t)}chatType(e,...t){return this.filter(K.has.chatType(e),...t)}callbackQuery(e,...t){return this.filter(K.has.callbackQuery(e),...t)}gameQuery(e,...t){return this.filter(K.has.gameQuery(e),...t)}inlineQuery(e,...t){return this.filter(K.has.inlineQuery(e),...t)}chosenInlineResult(e,...t){return this.filter(K.has.chosenInlineResult(e),...t)}preCheckoutQuery(e,...t){return this.filter(K.has.preCheckoutQuery(e),...t)}shippingQuery(e,...t){return this.filter(K.has.shippingQuery(e),...t)}filter(e,...t){const s=new Se(...t);return this.branch(e,s,jn),s}drop(e,...t){return this.filter(async s=>!await e(s),...t)}fork(...e){const t=new Se(...e),s=Et(t);return this.use((i,u)=>Promise.all([u(),Ai(s,i)])),t}lazy(e){return this.use(async(t,s)=>{const i=await e(t),u=Array.isArray(i)?i:[i];await Et(new Se(...u))(t,s)})}route(e,t,s=jn){return this.lazy(async i=>{const u=await e(i);return(u===void 0||!t[u]?s:t[u])??[]})}branch(e,t,s){return this.lazy(async i=>await e(i)?t:s)}errorBoundary(e,...t){const s=new Se(...t),i=Et(s);return this.use(async(u,l)=>{let m=!1;const d=()=>(m=!0,Promise.resolve());try{await i(u,d)}catch(p){m=!1,await e(new tr(p,u),d)}m&&await l()}),s}}var it=1e3,ot=it*60,at=ot*60,Le=at*24,Ec=Le*7,kc=Le*365.25,Mc=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Oc(r);if(t==="number"&&isFinite(r))return e.long?Dc(r):Ac(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Oc(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),s=(e[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return t*kc;case"weeks":case"week":case"w":return t*Ec;case"days":case"day":case"d":return t*Le;case"hours":case"hour":case"hrs":case"hr":case"h":return t*at;case"minutes":case"minute":case"mins":case"min":case"m":return t*ot;case"seconds":case"second":case"secs":case"sec":case"s":return t*it;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Ac(r){var e=Math.abs(r);return e>=Le?Math.round(r/Le)+"d":e>=at?Math.round(r/at)+"h":e>=ot?Math.round(r/ot)+"m":e>=it?Math.round(r/it)+"s":r+"ms"}function Dc(r){var e=Math.abs(r);return e>=Le?Yt(r,e,Le,"day"):e>=at?Yt(r,e,at,"hour"):e>=ot?Yt(r,e,ot,"minute"):e>=it?Yt(r,e,it,"second"):r+" ms"}function Yt(r,e,t,s){var i=e>=t*1.5;return Math.round(r/t)+" "+s+(i?"s":"")}function Di(){throw new Error("setTimeout has not been defined")}function Ni(){throw new Error("clearTimeout has not been defined")}var Ce=Di,ve=Ni,rt;typeof window<"u"?rt=window:typeof self<"u"?rt=self:rt={};typeof rt.setTimeout=="function"&&(Ce=setTimeout);typeof rt.clearTimeout=="function"&&(ve=clearTimeout);function Fi(r){if(Ce===setTimeout)return setTimeout(r,0);if((Ce===Di||!Ce)&&setTimeout)return Ce=setTimeout,setTimeout(r,0);try{return Ce(r,0)}catch{try{return Ce.call(null,r,0)}catch{return Ce.call(this,r,0)}}}function Nc(r){if(ve===clearTimeout)return clearTimeout(r);if((ve===Ni||!ve)&&clearTimeout)return ve=clearTimeout,clearTimeout(r);try{return ve(r)}catch{try{return ve.call(null,r)}catch{return ve.call(this,r)}}}var me=[],st=!1,Fe,sn=-1;function Fc(){!st||!Fe||(st=!1,Fe.length?me=Fe.concat(me):sn=-1,me.length&&$i())}function $i(){if(!st){var r=Fi(Fc);st=!0;for(var e=me.length;e;){for(Fe=me,me=[];++sn<e;)Fe&&Fe[sn].run();sn=-1,e=me.length}Fe=null,st=!1,Nc(r)}}function $c(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];me.push(new xi(r,e)),me.length===1&&!st&&Fi($i)}function xi(r,e){this.fun=r,this.array=e}xi.prototype.run=function(){this.fun.apply(null,this.array)};var xc="browser",Lc="browser",Rc=!0,Pc=[],Bc="",Uc={},Wc={},jc={};function Re(){}var Vc=Re,qc=Re,Hc=Re,Gc=Re,zc=Re,Zc=Re,Yc=Re;function Jc(r){throw new Error("process.binding is not supported")}function Qc(){return"/"}function Kc(r){throw new Error("process.chdir is not supported")}function Xc(){return 0}var et=rt.performance||{},eu=et.now||et.mozNow||et.msNow||et.oNow||et.webkitNow||function(){return new Date().getTime()};function tu(r){var e=eu.call(et)*.001,t=Math.floor(e),s=Math.floor(e%1*1e9);return r&&(t=t-r[0],s=s-r[1],s<0&&(t--,s+=1e9)),[t,s]}var nu=new Date;function ru(){var r=new Date,e=r-nu;return e/1e3}var Vn={nextTick:$c,title:xc,browser:Rc,env:{NODE_ENV:"production"},argv:Pc,version:Bc,versions:Uc,on:Vc,addListener:qc,once:Hc,off:Gc,removeListener:zc,removeAllListeners:Zc,emit:Yc,binding:Jc,cwd:Qc,chdir:Kc,umask:Xc,hrtime:tu,platform:Lc,release:Wc,config:jc,uptime:ru};function su(r,e,t){return t={path:e,exports:{},require:function(s,i){return iu(s,i??t.path)}},r(t,t.exports),t.exports}function iu(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function ou(r){t.debug=t,t.default=t,t.coerce=d,t.disable=u,t.enable=i,t.enabled=l,t.humanize=Mc,t.destroy=p,Object.keys(r).forEach(C=>{t[C]=r[C]}),t.names=[],t.skips=[],t.formatters={};function e(C){let v=0;for(let T=0;T<C.length;T++)v=(v<<5)-v+C.charCodeAt(T),v|=0;return t.colors[Math.abs(v)%t.colors.length]}t.selectColor=e;function t(C){let v,T=null,A,_;function I(...$){if(!I.enabled)return;const N=I,H=Number(new Date),Y=H-(v||H);N.diff=Y,N.prev=v,N.curr=H,v=H,$[0]=t.coerce($[0]),typeof $[0]!="string"&&$.unshift("%O");let j=0;$[0]=$[0].replace(/%([a-zA-Z%])/g,(re,ae)=>{if(re==="%%")return"%";j++;const ht=t.formatters[ae];if(typeof ht=="function"){const xt=$[j];re=ht.call(N,xt),$.splice(j,1),j--}return re}),t.formatArgs.call(N,$),(N.log||t.log).apply(N,$)}return I.namespace=C,I.useColors=t.useColors(),I.color=t.selectColor(C),I.extend=s,I.destroy=t.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>T!==null?T:(A!==t.namespaces&&(A=t.namespaces,_=t.enabled(C)),_),set:$=>{T=$}}),typeof t.init=="function"&&t.init(I),I}function s(C,v){const T=t(this.namespace+(typeof v>"u"?":":v)+C);return T.log=this.log,T}function i(C){t.save(C),t.namespaces=C,t.names=[],t.skips=[];let v;const T=(typeof C=="string"?C:"").split(/[\s,]+/),A=T.length;for(v=0;v<A;v++)T[v]&&(C=T[v].replace(/\*/g,".*?"),C[0]==="-"?t.skips.push(new RegExp("^"+C.slice(1)+"$")):t.names.push(new RegExp("^"+C+"$")))}function u(){const C=[...t.names.map(m),...t.skips.map(m).map(v=>"-"+v)].join(",");return t.enable(""),C}function l(C){if(C[C.length-1]==="*")return!0;let v,T;for(v=0,T=t.skips.length;v<T;v++)if(t.skips[v].test(C))return!1;for(v=0,T=t.names.length;v<T;v++)if(t.names[v].test(C))return!0;return!1}function m(C){return C.toString().substring(2,C.toString().length-2).replace(/\.\*\?$/,"*")}function d(C){return C instanceof Error?C.stack||C.message:C}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var au=ou,Z=su(function(r,e){e.formatArgs=s,e.save=i,e.load=u,e.useColors=t,e.storage=l(),e.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;d.splice(1,0,p,"color: inherit");let C=0,v=0;d[0].replace(/%[a-zA-Z%]/g,T=>{T!=="%%"&&(C++,T==="%c"&&(v=C))}),d.splice(v,0,p)}e.log=console.debug||console.log||(()=>{});function i(d){try{d?e.storage.setItem("debug",d):e.storage.removeItem("debug")}catch{}}function u(){let d;try{d=e.storage.getItem("debug")}catch{}return!d&&typeof Vn<"u"&&"env"in Vn&&(d=Vn.env.DEBUG),d}function l(){try{return localStorage}catch{}}r.exports=au(e);const{formatters:m}=r.exports;m.j=function(d){try{return JSON.stringify(d)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}});Z.colors;Z.destroy;Z.formatArgs;Z.load;Z.log;Z.save;Z.storage;Z.useColors;const cu=r=>{const e=r[Symbol.asyncIterator]();return new ReadableStream({async pull(t){const s=await e.next();s.done?t.close():t.enqueue(s.value)}})},uu=r=>({}),Js=Z("grammy:warn");class wr extends Error{constructor(t,s,i,u){super(`${t} (${s.error_code}: ${s.description})`);D(this,"method");D(this,"payload");D(this,"ok");D(this,"error_code");D(this,"description");D(this,"parameters");this.method=i,this.payload=u,this.ok=!1,this.name="GrammyError",this.error_code=s.error_code,this.description=s.description,this.parameters=s.parameters??{}}}function lu(r,e,t){switch(r.error_code){case 401:Js("Error 401 means that your bot token is wrong, talk to https://t.me/BotFather to check it.");break;case 409:Js("Error 409 means that you are running your bot several times on long polling. Consider revoking the bot token if you believe that no other instance is running.");break}return new wr(`Call to '${e}' failed!`,r,e,t)}class Li extends Error{constructor(t,s){super(t);D(this,"error");this.error=s,this.name="HttpError"}}function hu(r){return typeof r=="object"&&r!==null&&"status"in r&&"statusText"in r}function du(r,e){return t=>{let s=`Network request for '${r}' failed!`;throw hu(t)&&(s+=` (${t.status}: ${t.statusText})`),e&&t instanceof Error&&(s+=` ${t.message}`),new Li(s,t)}}const fu=(()=>{var t,s,i;const{Deno:r}=globalThis;if(typeof((t=r==null?void 0:r.build)==null?void 0:t.os)=="string")return r.build.os;const{navigator:e}=globalThis;return(i=(s=e==null?void 0:e.appVersion)==null?void 0:s.includes)!=null&&i.call(s,"Win")?"windows":"linux"})(),mu=fu==="windows";function pu(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function Ri(r,e){if(e.length>=r.length)return r;const t=r.length-e.length;for(let s=e.length-1;s>=0;--s)if(r.charCodeAt(t+s)!==e.charCodeAt(s))return r;return r.slice(0,-e.length)}function Pi(r,e,t=0){let s=!1,i=r.length;for(let u=r.length-1;u>=t;--u)if(e(r.charCodeAt(u))){if(s){t=u+1;break}}else s||(s=!0,i=u+1);return r.slice(t,i)}function Bi(r,e){if(pu(r),r.length===0)return r;if(typeof e!="string")throw new TypeError(`Suffix must be a string. Received ${JSON.stringify(e)}`)}function Ui(r,e){if(r.length<=1)return r;let t=r.length;for(let s=r.length-1;s>0&&e(r.charCodeAt(s));s--)t=s;return r.slice(0,t)}function Qs(r){return r===47}function gu(r,e=""){Bi(r,e);const t=Pi(r,Qs),s=Ui(t,Qs);return e?Ri(s,e):s}function Ks(r){return r===47||r===92}function yu(r){return r>=97&&r<=122||r>=65&&r<=90}function wu(r,e=""){Bi(r,e);let t=0;if(r.length>=2){const u=r.charCodeAt(0);yu(u)&&r.charCodeAt(1)===58&&(t=2)}const s=Pi(r,Ks,t),i=Ui(s,Ks);return e?Ri(i,e):i}function Jt(r,e=""){return mu?wu(r,e):gu(r,e)}class nr{constructor(e,t){D(this,"consumed",!1);D(this,"fileData");D(this,"filename");this.fileData=e,t??(t=this.guessFilename(e)),this.filename=t}guessFilename(e){if(typeof e=="string")return Jt(e);if(typeof e=="object"){if("url"in e)return Jt(e.url);if(e instanceof URL)return Jt(e.pathname)||Jt(e.hostname)}}toRaw(){if(this.consumed)throw new Error("Cannot reuse InputFile data source!");const e=this.fileData;return e instanceof Blob?e.stream():e instanceof URL?Xs(e):"url"in e?Xs(e.url):(e instanceof Uint8Array||(this.consumed=!0),e)}}async function*Xs(r){const{body:e}=await fetch(r);if(e===null)throw new Error(`Download failed, no response body from '${r}'`);yield*e}function rr(r){return r instanceof nr||typeof r=="object"&&r!==null&&Object.values(r).some(e=>Array.isArray(e)?e.some(rr):e instanceof nr||rr(e))}function Wi(r){return JSON.stringify(r,(e,t)=>t??void 0)}function ei(r){return{method:"POST",headers:{"content-type":"application/json",connection:"keep-alive"},body:Wi(r)}}async function*bu(r,e){try{yield*r}catch(t){e(t)}}function Cu(r,e){const t=vu(),s=Su(r,t),i=bu(s,e),u=cu(i);return{method:"POST",headers:{"content-type":`multipart/form-data; boundary=${t}`,connection:"keep-alive"},body:u}}function vu(){return"----------"+ji(32)}function ji(r=16){return Array.from(Array(r)).map(()=>Math.random().toString(36)[2]||0).join("")}const Dt=new TextEncoder;async function*Su(r,e){const t=sr(r);yield Dt.encode(`--${e}\r
`);const s=Dt.encode(`\r
--${e}\r
`);let i=!0;for(const[u,l]of Object.entries(r))l!=null&&(i||(yield s),yield Tu(u,typeof l=="object"?Wi(l):l),i=!1);for(const{id:u,origin:l,file:m}of t)i||(yield s),yield*_u(u,l,m),i=!1;yield Dt.encode(`\r
--${e}--\r
`)}function sr(r){return typeof r!="object"||r===null?[]:Object.entries(r).flatMap(([e,t])=>{if(Array.isArray(t))return t.flatMap(s=>sr(s));if(t instanceof nr){const s=ji();Object.assign(r,{[e]:`attach://${s}`});const i=e==="media"&&"type"in r&&typeof r.type=="string"?r.type:e;return{id:s,origin:i,file:t}}else return sr(t)})}function Tu(r,e){return Dt.encode(`content-disposition:form-data;name="${r}"\r
\r
${e}`)}async function*_u(r,e,t){const s=t.filename||`${e}.${Iu(e)}`;if(s.includes("\r")||s.includes(`
`))throw new Error(`File paths cannot contain carriage-return (\\r) or newline (\\n) characters! Filename for property '${e}' was:
"""
${s}
"""`);yield Dt.encode(`content-disposition:form-data;name="${r}";filename=${s}\r
content-type:application/octet-stream\r
\r
`);const i=await t.toRaw();i instanceof Uint8Array?yield i:yield*i}function Iu(r){switch(r){case"certificate":return"pem";case"photo":case"thumbnail":return"jpg";case"voice":return"ogg";case"audio":return"mp3";case"animation":case"video":case"video_note":return"mp4";case"sticker":return"webp";default:return"dat"}}const Eu=Z("grammy:core");function ku(r,e){return(t,s,i)=>e(r,t,s,i)}class Mu{constructor(e,t={},s={}){D(this,"token");D(this,"webhookReplyEnvelope");D(this,"options");D(this,"fetch");D(this,"hasUsedWebhookReply");D(this,"installedTransformers");D(this,"call");this.token=e,this.webhookReplyEnvelope=s,this.hasUsedWebhookReply=!1,this.installedTransformers=[],this.call=async(d,p,C)=>{const v=p??{};Eu(`Calling ${d}`),C!==void 0&&xu(d,v,C);const T=this.options,A=rr(v);if(this.webhookReplyEnvelope.send!==void 0&&!this.hasUsedWebhookReply&&!A&&T.canUseWebhookReply(d)){this.hasUsedWebhookReply=!0;const ae=ei({...v,method:d});return await this.webhookReplyEnvelope.send(ae.body),{ok:!0,result:!0}}const _=$u(C),I=Nu(_,T.timeoutSeconds,d),$=Fu(_),N=T.buildUrl(T.apiRoot,this.token,d,T.environment),H=A?Cu(v,ae=>$.catch(ae)):ei(v),Y=_.signal,j={...T.baseFetchConfig,signal:Y,...H},re=[this.fetch(N instanceof URL?N.href:N,j).catch(du(d,T.sensitiveLogs)),$.promise,I.promise];try{return await(await Promise.race(re)).json()}finally{I.handle!==void 0&&clearTimeout(I.handle)}};const i=t.apiRoot??"https://api.telegram.org",u=t.environment??"prod",{fetch:l}=t,m=l??fetch;if(this.options={apiRoot:i,environment:u,buildUrl:t.buildUrl??Au,timeoutSeconds:t.timeoutSeconds??500,baseFetchConfig:{...uu(),...t.baseFetchConfig},canUseWebhookReply:t.canUseWebhookReply??(()=>!1),sensitiveLogs:t.sensitiveLogs??!1,fetch:(...d)=>m(...d)},this.fetch=this.options.fetch,this.options.apiRoot.endsWith("/"))throw new Error(`Remove the trailing '/' from the 'apiRoot' option (use '${this.options.apiRoot.substring(0,this.options.apiRoot.length-1)}' instead of '${this.options.apiRoot}')`)}use(...e){return this.call=e.reduce(ku,this.call),this.installedTransformers.push(...e),this}async callApi(e,t,s){const i=await this.call(e,t,s);if(i.ok)return i.result;throw lu(i,e,t)}}function Ou(r,e,t){const s=new Mu(r,e,t),i={get(d,p){return p==="toJSON"?"__internal":p==="getMe"||p==="getWebhookInfo"||p==="getForumTopicIconStickers"||p==="getAvailableGifts"||p==="logOut"||p==="close"?s.callApi.bind(s,p,{}):s.callApi.bind(s,p)},...Du},u=new Proxy({},i),l=s.installedTransformers,m={raw:u,installedTransformers:l,use:(...d)=>(s.use(...d),m)};return m}const Au=(r,e,t,s)=>`${r}/bot${e}/${s==="test"?"test/":""}${t}`,Du={set(){return!1},defineProperty(){return!1},deleteProperty(){return!1},ownKeys(){return[]}};function Nu(r,e,t){let s;return{promise:new Promise((u,l)=>{s=setTimeout(()=>{const m=`Request to '${t}' timed out after ${e} seconds`;l(new Error(m)),r.abort()},1e3*e)}),handle:s}}function Fu(r){let e=s=>{throw s};return{promise:new Promise((s,i)=>{e=u=>{i(u),r.abort()}}),catch:e}}function $u(r){const e=new AbortController;if(r===void 0)return e;const t=r;function s(){e.abort(),t.removeEventListener("abort",s)}return t.aborted?s():t.addEventListener("abort",s),{abort:s,signal:e.signal}}function xu(r,e,t){if(typeof(t==null?void 0:t.addEventListener)=="function")return;let s=JSON.stringify(e);s.length>20&&(s=s.substring(0,16)+" ...");let i=JSON.stringify(t);throw i.length>20&&(i=i.substring(0,16)+" ..."),new Error(`Incorrect abort signal instance found! You passed two payloads to '${r}' but you should merge the second one containing '${i}' into the first one containing '${s}'! If you are using context shortcuts, you may want to use a method on 'ctx.api' instead.

If you want to prevent such mistakes in the future, consider using TypeScript. https://www.typescriptlang.org/`)}class ti{constructor(e,t,s){D(this,"token");D(this,"options");D(this,"raw");D(this,"config");this.token=e,this.options=t;const{raw:i,use:u,installedTransformers:l}=Ou(e,t,s);this.raw=i,this.config={use:u,installedTransformers:()=>l.slice()}}getUpdates(e,t){return this.raw.getUpdates({...e},t)}setWebhook(e,t,s){return this.raw.setWebhook({url:e,...t},s)}deleteWebhook(e,t){return this.raw.deleteWebhook({...e},t)}getWebhookInfo(e){return this.raw.getWebhookInfo(e)}getMe(e){return this.raw.getMe(e)}logOut(e){return this.raw.logOut(e)}close(e){return this.raw.close(e)}sendMessage(e,t,s,i){return this.raw.sendMessage({chat_id:e,text:t,...s},i)}forwardMessage(e,t,s,i,u){return this.raw.forwardMessage({chat_id:e,from_chat_id:t,message_id:s,...i},u)}forwardMessages(e,t,s,i,u){return this.raw.forwardMessages({chat_id:e,from_chat_id:t,message_ids:s,...i},u)}copyMessage(e,t,s,i,u){return this.raw.copyMessage({chat_id:e,from_chat_id:t,message_id:s,...i},u)}copyMessages(e,t,s,i,u){return this.raw.copyMessages({chat_id:e,from_chat_id:t,message_ids:s,...i},u)}sendPhoto(e,t,s,i){return this.raw.sendPhoto({chat_id:e,photo:t,...s},i)}sendAudio(e,t,s,i){return this.raw.sendAudio({chat_id:e,audio:t,...s},i)}sendDocument(e,t,s,i){return this.raw.sendDocument({chat_id:e,document:t,...s},i)}sendVideo(e,t,s,i){return this.raw.sendVideo({chat_id:e,video:t,...s},i)}sendAnimation(e,t,s,i){return this.raw.sendAnimation({chat_id:e,animation:t,...s},i)}sendVoice(e,t,s,i){return this.raw.sendVoice({chat_id:e,voice:t,...s},i)}sendVideoNote(e,t,s,i){return this.raw.sendVideoNote({chat_id:e,video_note:t,...s},i)}sendMediaGroup(e,t,s,i){return this.raw.sendMediaGroup({chat_id:e,media:t,...s},i)}sendLocation(e,t,s,i,u){return this.raw.sendLocation({chat_id:e,latitude:t,longitude:s,...i},u)}editMessageLiveLocation(e,t,s,i,u,l){return this.raw.editMessageLiveLocation({chat_id:e,message_id:t,latitude:s,longitude:i,...u},l)}editMessageLiveLocationInline(e,t,s,i,u){return this.raw.editMessageLiveLocation({inline_message_id:e,latitude:t,longitude:s,...i},u)}stopMessageLiveLocation(e,t,s,i){return this.raw.stopMessageLiveLocation({chat_id:e,message_id:t,...s},i)}stopMessageLiveLocationInline(e,t,s){return this.raw.stopMessageLiveLocation({inline_message_id:e,...t},s)}sendPaidMedia(e,t,s,i,u){return this.raw.sendPaidMedia({chat_id:e,star_count:t,media:s,...i},u)}sendVenue(e,t,s,i,u,l,m){return this.raw.sendVenue({chat_id:e,latitude:t,longitude:s,title:i,address:u,...l},m)}sendContact(e,t,s,i,u){return this.raw.sendContact({chat_id:e,phone_number:t,first_name:s,...i},u)}sendPoll(e,t,s,i,u){return this.raw.sendPoll({chat_id:e,question:t,options:s,...i},u)}sendDice(e,t,s,i){return this.raw.sendDice({chat_id:e,emoji:t,...s},i)}setMessageReaction(e,t,s,i,u){return this.raw.setMessageReaction({chat_id:e,message_id:t,reaction:s,...i},u)}sendChatAction(e,t,s,i){return this.raw.sendChatAction({chat_id:e,action:t,...s},i)}getUserProfilePhotos(e,t,s){return this.raw.getUserProfilePhotos({user_id:e,...t},s)}setUserEmojiStatus(e,t,s){return this.raw.setUserEmojiStatus({user_id:e,...t},s)}getUserChatBoosts(e,t,s){return this.raw.getUserChatBoosts({chat_id:e,user_id:t},s)}getBusinessConnection(e,t){return this.raw.getBusinessConnection({business_connection_id:e},t)}getFile(e,t){return this.raw.getFile({file_id:e},t)}kickChatMember(...e){return this.banChatMember(...e)}banChatMember(e,t,s,i){return this.raw.banChatMember({chat_id:e,user_id:t,...s},i)}unbanChatMember(e,t,s,i){return this.raw.unbanChatMember({chat_id:e,user_id:t,...s},i)}restrictChatMember(e,t,s,i,u){return this.raw.restrictChatMember({chat_id:e,user_id:t,permissions:s,...i},u)}promoteChatMember(e,t,s,i){return this.raw.promoteChatMember({chat_id:e,user_id:t,...s},i)}setChatAdministratorCustomTitle(e,t,s,i){return this.raw.setChatAdministratorCustomTitle({chat_id:e,user_id:t,custom_title:s},i)}banChatSenderChat(e,t,s){return this.raw.banChatSenderChat({chat_id:e,sender_chat_id:t},s)}unbanChatSenderChat(e,t,s){return this.raw.unbanChatSenderChat({chat_id:e,sender_chat_id:t},s)}setChatPermissions(e,t,s,i){return this.raw.setChatPermissions({chat_id:e,permissions:t,...s},i)}exportChatInviteLink(e,t){return this.raw.exportChatInviteLink({chat_id:e},t)}createChatInviteLink(e,t,s){return this.raw.createChatInviteLink({chat_id:e,...t},s)}editChatInviteLink(e,t,s,i){return this.raw.editChatInviteLink({chat_id:e,invite_link:t,...s},i)}createChatSubscriptionInviteLink(e,t,s,i,u){return this.raw.createChatSubscriptionInviteLink({chat_id:e,subscription_period:t,subscription_price:s,...i},u)}editChatSubscriptionInviteLink(e,t,s,i){return this.raw.editChatSubscriptionInviteLink({chat_id:e,invite_link:t,...s},i)}revokeChatInviteLink(e,t,s){return this.raw.revokeChatInviteLink({chat_id:e,invite_link:t},s)}approveChatJoinRequest(e,t,s){return this.raw.approveChatJoinRequest({chat_id:e,user_id:t},s)}declineChatJoinRequest(e,t,s){return this.raw.declineChatJoinRequest({chat_id:e,user_id:t},s)}setChatPhoto(e,t,s){return this.raw.setChatPhoto({chat_id:e,photo:t},s)}deleteChatPhoto(e,t){return this.raw.deleteChatPhoto({chat_id:e},t)}setChatTitle(e,t,s){return this.raw.setChatTitle({chat_id:e,title:t},s)}setChatDescription(e,t,s){return this.raw.setChatDescription({chat_id:e,description:t},s)}pinChatMessage(e,t,s,i){return this.raw.pinChatMessage({chat_id:e,message_id:t,...s},i)}unpinChatMessage(e,t,s,i){return this.raw.unpinChatMessage({chat_id:e,message_id:t,...s},i)}unpinAllChatMessages(e,t){return this.raw.unpinAllChatMessages({chat_id:e},t)}leaveChat(e,t){return this.raw.leaveChat({chat_id:e},t)}getChat(e,t){return this.raw.getChat({chat_id:e},t)}getChatAdministrators(e,t){return this.raw.getChatAdministrators({chat_id:e},t)}getChatMembersCount(...e){return this.getChatMemberCount(...e)}getChatMemberCount(e,t){return this.raw.getChatMemberCount({chat_id:e},t)}getChatMember(e,t,s){return this.raw.getChatMember({chat_id:e,user_id:t},s)}setChatStickerSet(e,t,s){return this.raw.setChatStickerSet({chat_id:e,sticker_set_name:t},s)}deleteChatStickerSet(e,t){return this.raw.deleteChatStickerSet({chat_id:e},t)}getForumTopicIconStickers(e){return this.raw.getForumTopicIconStickers(e)}createForumTopic(e,t,s,i){return this.raw.createForumTopic({chat_id:e,name:t,...s},i)}editForumTopic(e,t,s,i){return this.raw.editForumTopic({chat_id:e,message_thread_id:t,...s},i)}closeForumTopic(e,t,s){return this.raw.closeForumTopic({chat_id:e,message_thread_id:t},s)}reopenForumTopic(e,t,s){return this.raw.reopenForumTopic({chat_id:e,message_thread_id:t},s)}deleteForumTopic(e,t,s){return this.raw.deleteForumTopic({chat_id:e,message_thread_id:t},s)}unpinAllForumTopicMessages(e,t,s){return this.raw.unpinAllForumTopicMessages({chat_id:e,message_thread_id:t},s)}editGeneralForumTopic(e,t,s){return this.raw.editGeneralForumTopic({chat_id:e,name:t},s)}closeGeneralForumTopic(e,t){return this.raw.closeGeneralForumTopic({chat_id:e},t)}reopenGeneralForumTopic(e,t){return this.raw.reopenGeneralForumTopic({chat_id:e},t)}hideGeneralForumTopic(e,t){return this.raw.hideGeneralForumTopic({chat_id:e},t)}unhideGeneralForumTopic(e,t){return this.raw.unhideGeneralForumTopic({chat_id:e},t)}unpinAllGeneralForumTopicMessages(e,t){return this.raw.unpinAllGeneralForumTopicMessages({chat_id:e},t)}answerCallbackQuery(e,t,s){return this.raw.answerCallbackQuery({callback_query_id:e,...t},s)}setMyName(e,t,s){return this.raw.setMyName({name:e,...t},s)}getMyName(e,t){return this.raw.getMyName(e??{},t)}setMyCommands(e,t,s){return this.raw.setMyCommands({commands:e,...t},s)}deleteMyCommands(e,t){return this.raw.deleteMyCommands({...e},t)}getMyCommands(e,t){return this.raw.getMyCommands({...e},t)}setMyDescription(e,t,s){return this.raw.setMyDescription({description:e,...t},s)}getMyDescription(e,t){return this.raw.getMyDescription({...e},t)}setMyShortDescription(e,t,s){return this.raw.setMyShortDescription({short_description:e,...t},s)}getMyShortDescription(e,t){return this.raw.getMyShortDescription({...e},t)}setChatMenuButton(e,t){return this.raw.setChatMenuButton({...e},t)}getChatMenuButton(e,t){return this.raw.getChatMenuButton({...e},t)}setMyDefaultAdministratorRights(e,t){return this.raw.setMyDefaultAdministratorRights({...e},t)}getMyDefaultAdministratorRights(e,t){return this.raw.getMyDefaultAdministratorRights({...e},t)}editMessageText(e,t,s,i,u){return this.raw.editMessageText({chat_id:e,message_id:t,text:s,...i},u)}editMessageTextInline(e,t,s,i){return this.raw.editMessageText({inline_message_id:e,text:t,...s},i)}editMessageCaption(e,t,s,i){return this.raw.editMessageCaption({chat_id:e,message_id:t,...s},i)}editMessageCaptionInline(e,t,s){return this.raw.editMessageCaption({inline_message_id:e,...t},s)}editMessageMedia(e,t,s,i,u){return this.raw.editMessageMedia({chat_id:e,message_id:t,media:s,...i},u)}editMessageMediaInline(e,t,s,i){return this.raw.editMessageMedia({inline_message_id:e,media:t,...s},i)}editMessageReplyMarkup(e,t,s,i){return this.raw.editMessageReplyMarkup({chat_id:e,message_id:t,...s},i)}editMessageReplyMarkupInline(e,t,s){return this.raw.editMessageReplyMarkup({inline_message_id:e,...t},s)}stopPoll(e,t,s,i){return this.raw.stopPoll({chat_id:e,message_id:t,...s},i)}deleteMessage(e,t,s){return this.raw.deleteMessage({chat_id:e,message_id:t},s)}deleteMessages(e,t,s){return this.raw.deleteMessages({chat_id:e,message_ids:t},s)}deleteBusinessMessages(e,t,s){return this.raw.deleteBusinessMessages({business_connection_id:e,message_ids:t},s)}setBusinessAccountName(e,t,s,i){return this.raw.setBusinessAccountName({business_connection_id:e,first_name:t,...s},i)}setBusinessAccountUsername(e,t,s){return this.raw.setBusinessAccountUsername({business_connection_id:e,username:t},s)}setBusinessAccountBio(e,t,s){return this.raw.setBusinessAccountBio({business_connection_id:e,bio:t},s)}setBusinessAccountProfilePhoto(e,t,s,i){return this.raw.setBusinessAccountProfilePhoto({business_connection_id:e,photo:t,...s},i)}removeBusinessAccountProfilePhoto(e,t,s){return this.raw.removeBusinessAccountProfilePhoto({business_connection_id:e,...t},s)}setBusinessAccountGiftSettings(e,t,s,i){return this.raw.setBusinessAccountGiftSettings({business_connection_id:e,show_gift_button:t,accepted_gift_types:s},i)}getBusinessAccountStarBalance(e,t){return this.raw.getBusinessAccountStarBalance({business_connection_id:e},t)}transferBusinessAccountStars(e,t,s){return this.raw.transferBusinessAccountStars({business_connection_id:e,star_count:t},s)}getBusinessAccountGifts(e,t,s){return this.raw.getBusinessAccountGifts({business_connection_id:e,...t},s)}convertGiftToStars(e,t,s){return this.raw.convertGiftToStars({business_connection_id:e,owned_gift_id:t},s)}upgradeGift(e,t,s,i){return this.raw.upgradeGift({business_connection_id:e,owned_gift_id:t,...s},i)}transferGift(e,t,s,i,u){return this.raw.transferGift({business_connection_id:e,owned_gift_id:t,new_owner_chat_id:s,star_count:i},u)}postStory(e,t,s,i,u){return this.raw.postStory({business_connection_id:e,content:t,active_period:s,...i},u)}editStory(e,t,s,i,u){return this.raw.editStory({business_connection_id:e,story_id:t,content:s,...i},u)}deleteStory(e,t,s){return this.raw.deleteStory({business_connection_id:e,story_id:t},s)}sendSticker(e,t,s,i){return this.raw.sendSticker({chat_id:e,sticker:t,...s},i)}getStickerSet(e,t){return this.raw.getStickerSet({name:e},t)}getCustomEmojiStickers(e,t){return this.raw.getCustomEmojiStickers({custom_emoji_ids:e},t)}uploadStickerFile(e,t,s,i){return this.raw.uploadStickerFile({user_id:e,sticker_format:t,sticker:s},i)}createNewStickerSet(e,t,s,i,u,l){return this.raw.createNewStickerSet({user_id:e,name:t,title:s,stickers:i,...u},l)}addStickerToSet(e,t,s,i){return this.raw.addStickerToSet({user_id:e,name:t,sticker:s},i)}setStickerPositionInSet(e,t,s){return this.raw.setStickerPositionInSet({sticker:e,position:t},s)}deleteStickerFromSet(e,t){return this.raw.deleteStickerFromSet({sticker:e},t)}replaceStickerInSet(e,t,s,i,u){return this.raw.replaceStickerInSet({user_id:e,name:t,old_sticker:s,sticker:i},u)}setStickerEmojiList(e,t,s){return this.raw.setStickerEmojiList({sticker:e,emoji_list:t},s)}setStickerKeywords(e,t,s){return this.raw.setStickerKeywords({sticker:e,keywords:t},s)}setStickerMaskPosition(e,t,s){return this.raw.setStickerMaskPosition({sticker:e,mask_position:t},s)}setStickerSetTitle(e,t,s){return this.raw.setStickerSetTitle({name:e,title:t},s)}deleteStickerSet(e,t){return this.raw.deleteStickerSet({name:e},t)}setStickerSetThumbnail(e,t,s,i,u){return this.raw.setStickerSetThumbnail({name:e,user_id:t,thumbnail:s,format:i},u)}setCustomEmojiStickerSetThumbnail(e,t,s){return this.raw.setCustomEmojiStickerSetThumbnail({name:e,custom_emoji_id:t},s)}getAvailableGifts(e){return this.raw.getAvailableGifts(e)}sendGift(e,t,s,i){return this.raw.sendGift({user_id:e,gift_id:t,...s},i)}giftPremiumSubscription(e,t,s,i,u){return this.raw.giftPremiumSubscription({user_id:e,month_count:t,star_count:s,...i},u)}sendGiftToChannel(e,t,s,i){return this.raw.sendGift({chat_id:e,gift_id:t,...s},i)}answerInlineQuery(e,t,s,i){return this.raw.answerInlineQuery({inline_query_id:e,results:t,...s},i)}answerWebAppQuery(e,t,s){return this.raw.answerWebAppQuery({web_app_query_id:e,result:t},s)}savePreparedInlineMessage(e,t,s,i){return this.raw.savePreparedInlineMessage({user_id:e,result:t,...s},i)}sendInvoice(e,t,s,i,u,l,m,d){return this.raw.sendInvoice({chat_id:e,title:t,description:s,payload:i,currency:u,prices:l,...m},d)}createInvoiceLink(e,t,s,i,u,l,m,d){return this.raw.createInvoiceLink({title:e,description:t,payload:s,provider_token:i,currency:u,prices:l,...m},d)}answerShippingQuery(e,t,s,i){return this.raw.answerShippingQuery({shipping_query_id:e,ok:t,...s},i)}answerPreCheckoutQuery(e,t,s,i){return this.raw.answerPreCheckoutQuery({pre_checkout_query_id:e,ok:t,...s},i)}getStarTransactions(e,t){return this.raw.getStarTransactions({...e},t)}refundStarPayment(e,t,s){return this.raw.refundStarPayment({user_id:e,telegram_payment_charge_id:t},s)}editUserStarSubscription(e,t,s,i){return this.raw.editUserStarSubscription({user_id:e,telegram_payment_charge_id:t,is_canceled:s},i)}verifyUser(e,t,s){return this.raw.verifyUser({user_id:e,...t},s)}verifyChat(e,t,s){return this.raw.verifyChat({chat_id:e,...t},s)}removeUserVerification(e,t){return this.raw.removeUserVerification({user_id:e},t)}removeChatVerification(e,t){return this.raw.removeChatVerification({chat_id:e},t)}readBusinessMessage(e,t,s,i){return this.raw.readBusinessMessage({business_connection_id:e,chat_id:t,message_id:s},i)}setPassportDataErrors(e,t,s){return this.raw.setPassportDataErrors({user_id:e,errors:t},s)}sendGame(e,t,s,i){return this.raw.sendGame({chat_id:e,game_short_name:t,...s},i)}setGameScore(e,t,s,i,u,l){return this.raw.setGameScore({chat_id:e,message_id:t,user_id:s,score:i,...u},l)}setGameScoreInline(e,t,s,i,u){return this.raw.setGameScore({inline_message_id:e,user_id:t,score:s,...i},u)}getGameHighScores(e,t,s,i){return this.raw.getGameHighScores({chat_id:e,message_id:t,user_id:s},i)}getGameHighScoresInline(e,t,s){return this.raw.getGameHighScores({inline_message_id:e,user_id:t},s)}}const le=Z("grammy:bot"),Lu=Z("grammy:warn"),tt=Z("grammy:error"),Vi=["message","edited_message","channel_post","edited_channel_post","business_connection","business_message","edited_business_message","deleted_business_messages","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_join_request","chat_boost","removed_chat_boost"];class Ru extends Se{constructor(t,s){super();D(this,"token");D(this,"pollingRunning");D(this,"pollingAbortController");D(this,"lastTriedUpdateId");D(this,"api");D(this,"me");D(this,"mePromise");D(this,"clientConfig");D(this,"ContextConstructor");D(this,"observedUpdateTypes");D(this,"errorHandler");if(this.token=t,this.pollingRunning=!1,this.lastTriedUpdateId=0,this.observedUpdateTypes=new Set,this.errorHandler=async i=>{var u,l;throw console.error("Error in middleware while handling update",(l=(u=i.ctx)==null?void 0:u.update)==null?void 0:l.update_id,i.error),console.error("No error handler was set!"),console.error("Set your own error handler with `bot.catch = ...`"),this.pollingRunning&&(console.error("Stopping bot"),await this.stop()),i},!t)throw new Error("Empty token!");this.me=s==null?void 0:s.botInfo,this.clientConfig=s==null?void 0:s.client,this.ContextConstructor=(s==null?void 0:s.ContextConstructor)??K,this.api=new ti(t,this.clientConfig)}set botInfo(t){this.me=t}get botInfo(){if(this.me===void 0)throw new Error("Bot information unavailable! Make sure to call `await bot.init()` before accessing `bot.botInfo`!");return this.me}on(t,...s){for(const[i]of ki(t).flatMap(Mi))this.observedUpdateTypes.add(i);return super.on(t,...s)}reaction(t,...s){return this.observedUpdateTypes.add("message_reaction"),super.reaction(t,...s)}isInited(){return this.me!==void 0}async init(t){if(!this.isInited()){le("Initializing bot"),this.mePromise??(this.mePromise=ni(()=>this.api.getMe(t),t));let s;try{s=await this.mePromise}finally{this.mePromise=void 0}this.me===void 0?this.me=s:le("Bot info was set by now, will not overwrite")}le(`I am ${this.me.username}!`)}async handleUpdates(t){for(const s of t){this.lastTriedUpdateId=s.update_id;try{await this.handleUpdate(s)}catch(i){if(i instanceof tr)await this.errorHandler(i);else throw console.error("FATAL: grammY unable to handle:",i),i}}}async handleUpdate(t,s){if(this.me===void 0)throw new Error("Bot not initialized! Either call `await bot.init()`, or directly set the `botInfo` option in the `Bot` constructor to specify a known bot info object.");le(`Processing update ${t.update_id}`);const i=new ti(this.token,this.clientConfig,s),u=this.api.config.installedTransformers();u.length>0&&i.config.use(...u);const l=new this.ContextConstructor(t,i,this.me);try{await Ai(this.middleware(),l)}catch(m){throw tt(`Error in middleware for update ${t.update_id}`),new tr(m,l)}}async start(t){var i,u,l;const s=[];if(this.isInited()||s.push(this.init((i=this.pollingAbortController)==null?void 0:i.signal)),this.pollingRunning){await Promise.all(s),le("Simple long polling already running!");return}this.pollingRunning=!0,this.pollingAbortController=new AbortController;try{s.push(ni(async()=>{var m;await this.api.deleteWebhook({drop_pending_updates:t==null?void 0:t.drop_pending_updates},(m=this.pollingAbortController)==null?void 0:m.signal)},(u=this.pollingAbortController)==null?void 0:u.signal)),await Promise.all(s),await((l=t==null?void 0:t.onStart)==null?void 0:l.call(t,this.botInfo))}catch(m){throw this.pollingRunning=!1,this.pollingAbortController=void 0,m}this.pollingRunning&&(Pu(this.observedUpdateTypes,t==null?void 0:t.allowed_updates),this.use=Bu,le("Starting simple long polling"),await this.loop(t),le("Middleware is done running"))}async stop(){var t;if(this.pollingRunning){le("Stopping bot, saving update offset"),this.pollingRunning=!1,(t=this.pollingAbortController)==null||t.abort();const s=this.lastTriedUpdateId+1;await this.api.getUpdates({offset:s,limit:1}).finally(()=>this.pollingAbortController=void 0)}else le("Bot is not running!")}isRunning(){return this.pollingRunning}catch(t){this.errorHandler=t}async loop(t){const s=t==null?void 0:t.limit,i=(t==null?void 0:t.timeout)??30;let u=(t==null?void 0:t.allowed_updates)??[];try{for(;this.pollingRunning;){const l=await this.fetchUpdates({limit:s,timeout:i,allowed_updates:u});if(l===void 0)break;await this.handleUpdates(l),u=void 0}}finally{this.pollingRunning=!1}}async fetchUpdates({limit:t,timeout:s,allowed_updates:i}){var m;const u=this.lastTriedUpdateId+1;let l;do try{l=await this.api.getUpdates({offset:u,limit:t,timeout:s,allowed_updates:i},(m=this.pollingAbortController)==null?void 0:m.signal)}catch(d){await this.handlePollingError(d)}while(l===void 0&&this.pollingRunning);return l}async handlePollingError(t){if(!this.pollingRunning){le("Pending getUpdates request cancelled");return}let s=3;if(t instanceof wr){if(tt(t.message),t.error_code===401||t.error_code===409)throw t;t.error_code===429&&(tt("Bot API server is closing."),s=t.parameters.retry_after??s)}else tt(t);tt(`Call to getUpdates failed, retrying in ${s} seconds ...`),await ir(s)}}async function ni(r,e){let s=50;async function i(l){let m=!1,d="rethrow";if(l instanceof Li)m=!0,d="retry";else if(l instanceof wr){if(l.error_code>=500)m=!0,d="retry";else if(l.error_code===429){const p=l.parameters.retry_after;typeof p=="number"?(await ir(p,e),s=50):m=!0,d="retry"}}if(m){s!==50&&await ir(s,e);const p=20*60*1e3;s=Math.min(p,2*s)}return d}let u={ok:!1};for(;!u.ok;)try{u={ok:!0,value:await r()}}catch(l){switch(tt(l),await i(l)){case"retry":continue;case"rethrow":throw l}}return u.value}async function ir(r,e){let t,s;function i(){s==null||s(new Error("Aborted delay")),t!==void 0&&clearTimeout(t)}try{await new Promise((u,l)=>{if(s=l,e!=null&&e.aborted){i();return}e==null||e.addEventListener("abort",i),t=setTimeout(u,1e3*r)})}finally{e==null||e.removeEventListener("abort",i)}}function Pu(r,e=Vi){const t=Array.from(r).filter(s=>!e.includes(s));t.length>0&&Lu(`You registered listeners for the following update types, but you did not specify them in \`allowed_updates\` so they may not be received: ${t.map(s=>`'${s}'`).join(", ")}`)}function Bu(){throw new Error(`It looks like you are registering more listeners on your bot from within other listeners! This means that every time your bot handles a message like this one, new listeners will be added. This list grows until your machine crashes, so grammY throws this error to tell you that you should probably do things a bit differently. If you're unsure how to resolve this problem, you can ask in the group chat: https://telegram.me/grammyjs

On the other hand, if you actually know what you're doing and you do need to install further middleware while your bot is running, consider installing a composer instance on your bot, and in turn augment the composer after the fact. This way, you can circumvent this protection against memory leaks.`)}[...Vi];Z("grammy:session");Z("grammy:error");async function ri(r){let e=new FormData;if(r.document instanceof Buffer){const t=new Blob([r.document],{type:r.contentType});e.append("document",t,r.documentName)}else if(r.document instanceof File)e.append("document",r.document,r.documentName);else if(r.document instanceof FormData)e=r.document;else if(r.document instanceof ReadableStream){const t=[],s=r.document.getReader();for(;;){const{done:u,value:l}=await s.read();if(u)break;t.push(l)}const i=new Blob(t,{type:r.contentType});e.append("document",i,r.documentName)}return e.append("documentName",r.documentName),e}var Uu=["/v1/pipes/run","/beta/chat","/beta/generate","/v1/agent/run"],fe=class or extends Error{constructor(e,t,s,i){super(or.makeMessage(e,t,s)),this.status=e,this.headers=i,this.request_id=i==null?void 0:i["lb-request-id"];const u=t;this.error=u,this.code=u==null?void 0:u.code,this.status=u==null?void 0:u.status}static makeMessage(e,t,s){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,s,i){if(!e)return new qi({cause:t instanceof Error?t:void 0});const u=t==null?void 0:t.error;switch(e){case 400:return new Wu(e,u,s,i);case 401:return new ju(e,u,s,i);case 403:return new Vu(e,u,s,i);case 404:return new qu(e,u,s,i);case 409:return new Hu(e,u,s,i);case 422:return new Gu(e,u,s,i);case 429:return new zu(e,u,s,i);default:return e>=500?new Zu(e,u,s,i):new or(e,u,s,i)}}},qi=class extends fe{constructor({message:r,cause:e}){super(void 0,void 0,r||"Connection error.",void 0),this.status=void 0,e&&(this.cause=e)}},Wu=class extends fe{constructor(){super(...arguments),this.status=400}},ju=class extends fe{constructor(){super(...arguments),this.status=401}},Vu=class extends fe{constructor(){super(...arguments),this.status=403}},qu=class extends fe{constructor(){super(...arguments),this.status=404}},Hu=class extends fe{constructor(){super(...arguments),this.status=409}},Gu=class extends fe{constructor(){super(...arguments),this.status=422}},zu=class extends fe{constructor(){super(...arguments),this.status=429}},Zu=class extends fe{},si=class At{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let s=!1;async function*i(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let u=!1;try{for await(const l of Yu(e,t))if(!u){if(l.data.startsWith("[DONE]")){u=!0;continue}if(l.event===null){let m;try{m=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(m&&m.error)throw new Error(m.error);yield m}else{let m;try{m=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(l.event=="error")throw new Error(m.message);yield{event:l.event,data:m}}}u=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{u||t.abort()}}return new At(i,t)}static fromReadableStream(e,t){let s=!1;async function*i(){const l=new Hi,m=Gi(e);for await(const d of m)for(const p of l.decode(d))yield p;for(const d of l.flush())yield d}async function*u(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let l=!1;try{for await(const m of i())l||m&&(yield JSON.parse(m));l=!0}catch(m){if(m instanceof Error&&m.name==="AbortError")return;throw m}finally{l||t.abort()}}return new At(u,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),i=u=>({next:()=>{if(u.length===0){const l=s.next();e.push(l),t.push(l)}return u.shift()}});return[new At(()=>i(e),this.controller),new At(()=>i(t),this.controller)]}toReadableStream(){const e=this;let t;const s=new TextEncoder;return new ReadableStream({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:u,done:l}=await t.next();if(l)return i.close();const m=s.encode(JSON.stringify(u)+`
`);i.enqueue(m)}catch(u){i.error(u)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}};async function*Yu(r,e){if(!r.body)throw e.abort(),new Error("Attempted to iterate over a response with no body");const t=new Ku,s=new Hi,i=Gi(r.body);for await(const u of Ju(i))for(const l of s.decode(u)){const m=t.decode(l);m&&(yield m)}for(const u of s.flush()){const l=t.decode(u);l&&(yield l)}}async function*Ju(r){let e=new Uint8Array;for await(const t of r){if(t==null)continue;const s=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let i=new Uint8Array(e.length+s.length);i.set(e),i.set(s,e.length),e=i;let u;for(;(u=Qu(e))!==-1;)yield e.slice(0,u),e=e.slice(u)}e.length>0&&(yield e)}function Qu(r){for(let s=0;s<r.length-2;s++){if(r[s]===10&&r[s+1]===10||r[s]===13&&r[s+1]===13)return s+2;if(r[s]===13&&r[s+1]===10&&s+3<r.length&&r[s+2]===13&&r[s+3]===10)return s+4}return-1}var Ku=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(r){if(r.endsWith("\r")&&(r=r.substring(0,r.length-1)),!r){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(r),r.startsWith(":"))return null;let[e,t,s]=Xu(r,":");return s.startsWith(" ")&&(s=s.substring(1)),e==="event"?this.event=s:e==="data"&&this.data.push(s),null}},br=class ar{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const s=ar.NEWLINE_CHARS.has(t[t.length-1]||"");let i=t.split(ar.NEWLINE_REGEXP);return s&&i.pop(),i.length===1&&!s?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),s||(this.buffer=[i.pop()||""]),i)}decodeText(e){var t;if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Error(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return(t=this.textDecoder)!=null||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Error(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Error("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}};br.NEWLINE_CHARS=new Set([`
`,"\r"]);br.NEWLINE_REGEXP=/\r\n|[\n\r]/g;var Hi=br;function Xu(r,e){const t=r.indexOf(e);return t!==-1?[r.substring(0,t),e,r.substring(t+e.length)]:[r,"",""]}function Gi(r){if(r[Symbol.asyncIterator])return r;const e=r.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}var ii=class{constructor(r){this.config=r}async send({endpoint:r,...e}){var t,s,i,u,l;const m=this.buildUrl({endpoint:r}),d=this.buildHeaders({headers:e.headers});let p;try{p=await this.makeRequest({url:m,options:e,headers:d})}catch(v){throw new qi({cause:v instanceof Error?v:void 0})}if(p.ok||await this.handleErrorResponse({response:p}),Uu.includes(r)){const v=p.headers.get("lb-thread-id");return e.body?(i=e.body)!=null&&i.stream&&m.includes("run")?this.handleRunResponseStream({response:p,rawResponse:e.body.rawResponse}):e.body.stream?this.handleStreamResponse({response:p}):this.handleRunResponse({response:p,threadId:v,rawResponse:(l=(u=e.body)==null?void 0:u.rawResponse)!=null?l:!1,endpoint:r}):this.handleRunResponse({response:p,threadId:null,rawResponse:(s=(t=e.body)==null?void 0:t.rawResponse)!=null?s:!1,endpoint:r})}else return p.json()}buildUrl({endpoint:r}){return`${this.config.baseUrl}${r}`}buildHeaders({headers:r}){return{"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`,...r}}async makeRequest({url:r,options:e,headers:t}){return fetch(r,{method:e.method,headers:t,body:JSON.stringify(e.body)})}async handleErrorResponse({response:r}){let e;try{e=await r.json()}catch{e=await r.text()}throw fe.generate(r.status,e,r.statusText,r.headers)}handleStreamResponse({response:r}){const e=new AbortController;return{stream:si.fromSSEResponse(r,e),threadId:r.headers.get("lb-thread-id")}}handleRunResponseStream({response:r,rawResponse:e}){const t=new AbortController,u={stream:si.fromSSEResponse(r,t).toReadableStream(),threadId:r.headers.get("lb-thread-id")};return e&&(u.rawResponse={headers:Object.fromEntries(r.headers.entries())}),u}async handleRunResponse({response:r,threadId:e,rawResponse:t,endpoint:s}){let i=!1;s==="/v1/agent/run"&&(i=!0);const u=await r.json(),m={...u.raw?i?{output:u.output,...u.raw}:{completion:u.completion,...u.raw}:u};return e&&(m.threadId=e),t&&(m.rawResponse={headers:Object.fromEntries(r.headers.entries())}),m}async post(r){return this.send({...r,method:"POST"})}async get(r){return this.send({...r,method:"GET"})}async put(r){return this.send({...r,method:"PUT"})}async delete(r){return this.send({...r,method:"DELETE"})}},el=class{constructor(r){var e,t;this.baseUrl=(e=r==null?void 0:r.baseUrl)!=null?e:"https://api.langbase.com",this.apiKey=(t=r==null?void 0:r.apiKey)!=null?t:"",this.request=new ii({apiKey:this.apiKey,baseUrl:this.baseUrl}),this.pipe={list:this.listPipe.bind(this),create:this.createPipe.bind(this),update:this.updatePipe.bind(this),run:this.runPipe.bind(this)},this.pipes={list:this.listPipe.bind(this),create:this.createPipe.bind(this),update:this.updatePipe.bind(this),run:this.runPipe.bind(this)},this.memory={create:this.createMemory.bind(this),delete:this.deleteMemory.bind(this),retrieve:this.retrieveMemory.bind(this),list:this.listMemory.bind(this),documents:{list:this.listDocs.bind(this),delete:this.deleteDoc.bind(this),upload:this.uploadDocs.bind(this),embedding:{retry:this.retryDocEmbed.bind(this)}}},this.memories={create:this.createMemory.bind(this),delete:this.deleteMemory.bind(this),retrieve:this.retrieveMemory.bind(this),list:this.listMemory.bind(this),documents:{list:this.listDocs.bind(this),delete:this.deleteDoc.bind(this),upload:this.uploadDocs.bind(this),embeddings:{retry:this.retryDocEmbed.bind(this)}}},this.tools={crawl:this.webCrawl.bind(this),webSearch:this.webSearch.bind(this)},this.tool={crawl:this.webCrawl.bind(this),webSearch:this.webSearch.bind(this)},this.embed=this.generateEmbeddings.bind(this),this.chunk=this.chunkDocument.bind(this),this.parse=this.parseDocument.bind(this),this.threads={create:this.createThread.bind(this),update:this.updateThread.bind(this),get:this.getThread.bind(this),delete:this.deleteThread.bind(this),append:this.appendThreadMessages.bind(this),messages:{list:this.listThreadMessages.bind(this)}},this.agent={run:this.runAgent.bind(this)}}async runPipe(r){var e;if(!((e=r.name)!=null&&e.trim())&&!r.apiKey)throw new Error("Pipe name or Pipe API key is required to run the pipe.");return typeof r.stream>"u"&&delete r.stream,r.apiKey&&(this.request=new ii({apiKey:r.apiKey,baseUrl:this.baseUrl})),this.request.post({endpoint:"/v1/pipes/run",body:r,headers:{...r.llmKey&&{"LB-LLM-KEY":r.llmKey}}})}async createPipe(r){return this.request.post({endpoint:"/v1/pipes",body:r})}async updatePipe(r){return this.request.post({endpoint:`/v1/pipes/${r.name}`,body:r})}async listPipe(){return this.request.get({endpoint:"/v1/pipes"})}async createMemory(r){return this.request.post({endpoint:"/v1/memory",body:r})}async listMemory(){return this.request.get({endpoint:"/v1/memory"})}async deleteMemory(r){return this.request.delete({endpoint:`/v1/memory/${r.name}`})}async retrieveMemory(r){return this.request.post({endpoint:"/v1/memory/retrieve",body:r})}async listDocs(r){return this.request.get({endpoint:`/v1/memory/${r.memoryName}/documents`})}async deleteDoc(r){return this.request.delete({endpoint:`/v1/memory/${r.memoryName}/documents/${r.documentName}`})}async uploadDocs(r){try{const t=(await this.request.post({endpoint:"/v1/memory/documents",body:{memoryName:r.memoryName,fileName:r.documentName,meta:r.meta}})).signedUrl;return await fetch(t,{method:"PUT",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":r.contentType},body:r.document})}catch(e){throw e}}async retryDocEmbed(r){return this.request.get({endpoint:`/v1/memory/${r.memoryName}/documents/${r.documentName}/embeddings/retry`})}async webSearch(r){const e=r.apiKey?r.apiKey:null;return e&&delete r.apiKey,this.request.post({endpoint:"/v1/tools/web-search",body:r,headers:{...e&&{"LB-WEB-SEARCH-KEY":e}}})}async webCrawl(r){const e=r.apiKey?r.apiKey:null;return e&&delete r.apiKey,this.request.post({endpoint:"/v1/tools/crawl",body:r,headers:{...e&&{"LB-CRAWL-KEY":e}}})}async generateEmbeddings(r){return this.request.post({endpoint:"/v1/embed",body:r})}async chunkDocument(r){const e=await ri({document:r.document,documentName:r.documentName,contentType:r.contentType});return r.chunkMaxLength&&e.append("chunkMaxLength",r.chunkMaxLength),r.chunkOverlap&&e.append("chunkOverlap",r.chunkOverlap),(await fetch(`${this.baseUrl}/v1/chunk`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`},body:e})).json()}async parseDocument(r){const e=await ri({document:r.document,documentName:r.documentName,contentType:r.contentType});return(await fetch(`${this.baseUrl}/v1/parse`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`},body:e})).json()}async createThread(r){return this.request.post({endpoint:"/v1/threads",body:r})}async updateThread(r){return this.request.post({endpoint:`/v1/threads/${r.threadId}`,body:r})}async getThread(r){return this.request.get({endpoint:`/v1/threads/${r.threadId}`})}async deleteThread(r){return this.request.delete({endpoint:`/v1/threads/${r.threadId}`})}async appendThreadMessages(r){return this.request.post({endpoint:`/v1/threads/${r.threadId}/messages`,body:r.messages})}async listThreadMessages(r){return this.request.get({endpoint:`/v1/threads/${r.threadId}/messages`})}async runAgent(r){if(!r.apiKey)throw new Error("LLM API key is required to run this LLM.");return typeof r.stream>"u"&&delete r.stream,this.request.post({endpoint:"/v1/agent/run",body:r,headers:{...r.apiKey&&{"LB-LLM-Key":r.apiKey}}})}};const zi=new el({apiKey:"user_34mUZrmhfDba3XMQmUmHe8ZjK4EzJrJ5kgMgezCjBNuFT7PcDGzt28GFxJjWe6MtybC7H6c7aGkqn1b3y23L1VTd"});async function tl({chunks:r,query:e}){const t=await nl(r),{completion:s}=await zi.pipes.run({stream:!1,name:"ai-support-agent",messages:[{role:"system",content:t},{role:"user",content:e}]});return s}async function nl(r){let e="";for(const s of r)e+=s.text+`
`;return`
    You're a helpful AI assistant.
    You will assist users with their queries.

    Always ensure that you provide accurate and to the point information.
    Below is some CONTEXT for you to answer the questions. ONLY answer from the CONTEXT. CONTEXT consists of multiple information chunks. Each chunk has a source mentioned at the end.

For each piece of response you provide, cite the source in brackets like so: [1].

At the end of the answer, always list each source with its corresponding number and provide the document name. like so [1] Filename.doc. If there is a URL, make it hyperlink on the name.

 If you don't know the answer, say so. Ask for more context if needed.
    ${e}`}async function rl(r){return await zi.memories.retrieve({query:r,topK:4,memory:[{name:"knowledge-base"}]})}function sl(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var i=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:function(){return r[s]}})}),t}var qn={},kt={},J={},oi;function il(){if(oi)return J;oi=1,Object.defineProperty(J,"__esModule",{value:!0});class r extends Error{}class e extends r{constructor(n){super(`Invalid DateTime: ${n.toMessage()}`)}}class t extends r{constructor(n){super(`Invalid Interval: ${n.toMessage()}`)}}class s extends r{constructor(n){super(`Invalid Duration: ${n.toMessage()}`)}}class i extends r{}class u extends r{constructor(n){super(`Invalid unit ${n}`)}}class l extends r{}class m extends r{constructor(){super("Zone is an abstract class")}}const d="numeric",p="short",C="long",v={year:d,month:d,day:d},T={year:d,month:p,day:d},A={year:d,month:p,day:d,weekday:p},_={year:d,month:C,day:d},I={year:d,month:C,day:d,weekday:C},$={hour:d,minute:d},N={hour:d,minute:d,second:d},H={hour:d,minute:d,second:d,timeZoneName:p},Y={hour:d,minute:d,second:d,timeZoneName:C},j={hour:d,minute:d,hourCycle:"h23"},Be={hour:d,minute:d,second:d,hourCycle:"h23"},re={hour:d,minute:d,second:d,hourCycle:"h23",timeZoneName:p},ae={hour:d,minute:d,second:d,hourCycle:"h23",timeZoneName:C},ht={year:d,month:d,day:d,hour:d,minute:d},xt={year:d,month:d,day:d,hour:d,minute:d,second:d},Sr={year:d,month:p,day:d,hour:d,minute:d},Tr={year:d,month:p,day:d,hour:d,minute:d,second:d},co={year:d,month:p,day:d,weekday:p,hour:d,minute:d},_r={year:d,month:C,day:d,hour:d,minute:d,timeZoneName:p},Ir={year:d,month:C,day:d,hour:d,minute:d,second:d,timeZoneName:p},Er={year:d,month:C,day:d,weekday:C,hour:d,minute:d,timeZoneName:C},kr={year:d,month:C,day:d,weekday:C,hour:d,minute:d,second:d,timeZoneName:C};class Ue{get type(){throw new m}get name(){throw new m}get ianaName(){return this.name}get isUniversal(){throw new m}offsetName(n,o){throw new m}formatOffset(n,o){throw new m}offset(n){throw new m}equals(n){throw new m}get isValid(){throw new m}}let dn=null;class dt extends Ue{static get instance(){return dn===null&&(dn=new dt),dn}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(n,{format:o,locale:c}){return es(n,o,c)}formatOffset(n,o){return gt(this.offset(n),o)}offset(n){return-new Date(n).getTimezoneOffset()}equals(n){return n.type==="system"}get isValid(){return!0}}const fn=new Map;function uo(a){let n=fn.get(a);return n===void 0&&(n=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),fn.set(a,n)),n}const lo={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function ho(a,n){const o=a.format(n).replace(/\u200E/g,""),c=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(o),[,h,f,g,y,b,S,E]=c;return[g,h,f,y,b,S,E]}function fo(a,n){const o=a.formatToParts(n),c=[];for(let h=0;h<o.length;h++){const{type:f,value:g}=o[h],y=lo[f];f==="era"?c[y]=g:k(y)||(c[y]=parseInt(g,10))}return c}const mn=new Map;class ce extends Ue{static create(n){let o=mn.get(n);return o===void 0&&mn.set(n,o=new ce(n)),o}static resetCache(){mn.clear(),fn.clear()}static isValidSpecifier(n){return this.isValidZone(n)}static isValidZone(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch{return!1}}constructor(n){super(),this.zoneName=n,this.valid=ce.isValidZone(n)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(n,{format:o,locale:c}){return es(n,o,c,this.name)}formatOffset(n,o){return gt(this.offset(n),o)}offset(n){if(!this.valid)return NaN;const o=new Date(n);if(isNaN(o))return NaN;const c=uo(this.name);let[h,f,g,y,b,S,E]=c.formatToParts?fo(c,o):ho(c,o);y==="BC"&&(h=-Math.abs(h)+1);const W=Ut({year:h,month:f,day:g,hour:b===24?0:b,minute:S,second:E,millisecond:0});let O=+o;const q=O%1e3;return O-=q>=0?q:1e3+q,(W-O)/(60*1e3)}equals(n){return n.type==="iana"&&n.name===this.name}get isValid(){return this.valid}}let Mr={};function mo(a,n={}){const o=JSON.stringify([a,n]);let c=Mr[o];return c||(c=new Intl.ListFormat(a,n),Mr[o]=c),c}const pn=new Map;function gn(a,n={}){const o=JSON.stringify([a,n]);let c=pn.get(o);return c===void 0&&(c=new Intl.DateTimeFormat(a,n),pn.set(o,c)),c}const yn=new Map;function po(a,n={}){const o=JSON.stringify([a,n]);let c=yn.get(o);return c===void 0&&(c=new Intl.NumberFormat(a,n),yn.set(o,c)),c}const wn=new Map;function go(a,n={}){const{base:o,...c}=n,h=JSON.stringify([a,c]);let f=wn.get(h);return f===void 0&&(f=new Intl.RelativeTimeFormat(a,n),wn.set(h,f)),f}let ft=null;function yo(){return ft||(ft=new Intl.DateTimeFormat().resolvedOptions().locale,ft)}const bn=new Map;function Or(a){let n=bn.get(a);return n===void 0&&(n=new Intl.DateTimeFormat(a).resolvedOptions(),bn.set(a,n)),n}const Cn=new Map;function wo(a){let n=Cn.get(a);if(!n){const o=new Intl.Locale(a);n="getWeekInfo"in o?o.getWeekInfo():o.weekInfo,"minimalDays"in n||(n={...Ar,...n}),Cn.set(a,n)}return n}function bo(a){const n=a.indexOf("-x-");n!==-1&&(a=a.substring(0,n));const o=a.indexOf("-u-");if(o===-1)return[a];{let c,h;try{c=gn(a).resolvedOptions(),h=a}catch{const b=a.substring(0,o);c=gn(b).resolvedOptions(),h=b}const{numberingSystem:f,calendar:g}=c;return[h,f,g]}}function Co(a,n,o){return(o||n)&&(a.includes("-u-")||(a+="-u"),o&&(a+=`-ca-${o}`),n&&(a+=`-nu-${n}`)),a}function vo(a){const n=[];for(let o=1;o<=12;o++){const c=M.utc(2009,o,1);n.push(a(c))}return n}function So(a){const n=[];for(let o=1;o<=7;o++){const c=M.utc(2016,11,13+o);n.push(a(c))}return n}function Lt(a,n,o,c){const h=a.listingMode();return h==="error"?null:h==="en"?o(n):c(n)}function To(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||Or(a.locale).numberingSystem==="latn"}class _o{constructor(n,o,c){this.padTo=c.padTo||0,this.floor=c.floor||!1;const{padTo:h,floor:f,...g}=c;if(!o||Object.keys(g).length>0){const y={useGrouping:!1,...c};c.padTo>0&&(y.minimumIntegerDigits=c.padTo),this.inf=po(n,y)}}format(n){if(this.inf){const o=this.floor?Math.floor(n):n;return this.inf.format(o)}else{const o=this.floor?Math.floor(n):On(n,3);return V(o,this.padTo)}}}class Io{constructor(n,o,c){this.opts=c,this.originalZone=void 0;let h;if(this.opts.timeZone)this.dt=n;else if(n.zone.type==="fixed"){const g=-1*(n.offset/60),y=g>=0?`Etc/GMT+${g}`:`Etc/GMT${g}`;n.offset!==0&&ce.create(y).valid?(h=y,this.dt=n):(h="UTC",this.dt=n.offset===0?n:n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone)}else n.zone.type==="system"?this.dt=n:n.zone.type==="iana"?(this.dt=n,h=n.zone.name):(h="UTC",this.dt=n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone);const f={...this.opts};f.timeZone=f.timeZone||h,this.dtf=gn(o,f)}format(){return this.originalZone?this.formatToParts().map(({value:n})=>n).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const n=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?n.map(o=>{if(o.type==="timeZoneName"){const c=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...o,value:c}}else return o}):n}resolvedOptions(){return this.dtf.resolvedOptions()}}class Eo{constructor(n,o,c){this.opts={style:"long",...c},!o&&Jr()&&(this.rtf=go(n,c))}format(n,o){return this.rtf?this.rtf.format(n,o):zo(o,n,this.opts.numeric,this.opts.style!=="long")}formatToParts(n,o){return this.rtf?this.rtf.formatToParts(n,o):[]}}const Ar={firstDay:1,minimalDays:4,weekend:[6,7]};class R{static fromOpts(n){return R.create(n.locale,n.numberingSystem,n.outputCalendar,n.weekSettings,n.defaultToEN)}static create(n,o,c,h,f=!1){const g=n||B.defaultLocale,y=g||(f?"en-US":yo()),b=o||B.defaultNumberingSystem,S=c||B.defaultOutputCalendar,E=kn(h)||B.defaultWeekSettings;return new R(y,b,S,E,g)}static resetCache(){ft=null,pn.clear(),yn.clear(),wn.clear(),bn.clear(),Cn.clear()}static fromObject({locale:n,numberingSystem:o,outputCalendar:c,weekSettings:h}={}){return R.create(n,o,c,h)}constructor(n,o,c,h,f){const[g,y,b]=bo(n);this.locale=g,this.numberingSystem=o||y||null,this.outputCalendar=c||b||null,this.weekSettings=h,this.intl=Co(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=f,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=To(this)),this.fastNumbersCached}listingMode(){const n=this.isEnglish(),o=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return n&&o?"en":"intl"}clone(n){return!n||Object.getOwnPropertyNames(n).length===0?this:R.create(n.locale||this.specifiedLocale,n.numberingSystem||this.numberingSystem,n.outputCalendar||this.outputCalendar,kn(n.weekSettings)||this.weekSettings,n.defaultToEN||!1)}redefaultToEN(n={}){return this.clone({...n,defaultToEN:!0})}redefaultToSystem(n={}){return this.clone({...n,defaultToEN:!1})}months(n,o=!1){return Lt(this,n,rs,()=>{const c=o?{month:n,day:"numeric"}:{month:n},h=o?"format":"standalone";return this.monthsCache[h][n]||(this.monthsCache[h][n]=vo(f=>this.extract(f,c,"month"))),this.monthsCache[h][n]})}weekdays(n,o=!1){return Lt(this,n,os,()=>{const c=o?{weekday:n,year:"numeric",month:"long",day:"numeric"}:{weekday:n},h=o?"format":"standalone";return this.weekdaysCache[h][n]||(this.weekdaysCache[h][n]=So(f=>this.extract(f,c,"weekday"))),this.weekdaysCache[h][n]})}meridiems(){return Lt(this,void 0,()=>as,()=>{if(!this.meridiemCache){const n={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[M.utc(2016,11,13,9),M.utc(2016,11,13,19)].map(o=>this.extract(o,n,"dayperiod"))}return this.meridiemCache})}eras(n){return Lt(this,n,cs,()=>{const o={era:n};return this.eraCache[n]||(this.eraCache[n]=[M.utc(-40,1,1),M.utc(2017,1,1)].map(c=>this.extract(c,o,"era"))),this.eraCache[n]})}extract(n,o,c){const h=this.dtFormatter(n,o),f=h.formatToParts(),g=f.find(y=>y.type.toLowerCase()===c);return g?g.value:null}numberFormatter(n={}){return new _o(this.intl,n.forceSimple||this.fastNumbers,n)}dtFormatter(n,o={}){return new Io(n,this.intl,o)}relFormatter(n={}){return new Eo(this.intl,this.isEnglish(),n)}listFormatter(n={}){return mo(this.intl,n)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Or(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Qr()?wo(this.locale):Ar}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(n){return this.locale===n.locale&&this.numberingSystem===n.numberingSystem&&this.outputCalendar===n.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let vn=null;class G extends Ue{static get utcInstance(){return vn===null&&(vn=new G(0)),vn}static instance(n){return n===0?G.utcInstance:new G(n)}static parseSpecifier(n){if(n){const o=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(o)return new G(Wt(o[1],o[2]))}return null}constructor(n){super(),this.fixed=n}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${gt(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${gt(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(n,o){return gt(this.fixed,o)}get isUniversal(){return!0}offset(){return this.fixed}equals(n){return n.type==="fixed"&&n.fixed===this.fixed}get isValid(){return!0}}class Dr extends Ue{constructor(n){super(),this.zoneName=n}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ge(a,n){if(k(a)||a===null)return n;if(a instanceof Ue)return a;if(No(a)){const o=a.toLowerCase();return o==="default"?n:o==="local"||o==="system"?dt.instance:o==="utc"||o==="gmt"?G.utcInstance:G.parseSpecifier(o)||ce.create(a)}else return ye(a)?G.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new Dr(a)}const Sn={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Nr={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ko=Sn.hanidec.replace(/[\[|\]]/g,"").split("");function Mo(a){let n=parseInt(a,10);if(isNaN(n)){n="";for(let o=0;o<a.length;o++){const c=a.charCodeAt(o);if(a[o].search(Sn.hanidec)!==-1)n+=ko.indexOf(a[o]);else for(const h in Nr){const[f,g]=Nr[h];c>=f&&c<=g&&(n+=c-f)}}return parseInt(n,10)}else return n}const Tn=new Map;function Oo(){Tn.clear()}function se({numberingSystem:a},n=""){const o=a||"latn";let c=Tn.get(o);c===void 0&&(c=new Map,Tn.set(o,c));let h=c.get(n);return h===void 0&&(h=new RegExp(`${Sn[o]}${n}`),c.set(n,h)),h}let Fr=()=>Date.now(),$r="system",xr=null,Lr=null,Rr=null,Pr=60,Br,Ur=null;class B{static get now(){return Fr}static set now(n){Fr=n}static set defaultZone(n){$r=n}static get defaultZone(){return ge($r,dt.instance)}static get defaultLocale(){return xr}static set defaultLocale(n){xr=n}static get defaultNumberingSystem(){return Lr}static set defaultNumberingSystem(n){Lr=n}static get defaultOutputCalendar(){return Rr}static set defaultOutputCalendar(n){Rr=n}static get defaultWeekSettings(){return Ur}static set defaultWeekSettings(n){Ur=kn(n)}static get twoDigitCutoffYear(){return Pr}static set twoDigitCutoffYear(n){Pr=n%100}static get throwOnInvalid(){return Br}static set throwOnInvalid(n){Br=n}static resetCaches(){R.resetCache(),ce.resetCache(),M.resetCache(),Oo()}}class ie{constructor(n,o){this.reason=n,this.explanation=o}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Wr=[0,31,59,90,120,151,181,212,243,273,304,334],jr=[0,31,60,91,121,152,182,213,244,274,305,335];function X(a,n){return new ie("unit out of range",`you specified ${n} (of type ${typeof n}) as a ${a}, which is invalid`)}function _n(a,n,o){const c=new Date(Date.UTC(a,n-1,o));a<100&&a>=0&&c.setUTCFullYear(c.getUTCFullYear()-1900);const h=c.getUTCDay();return h===0?7:h}function Vr(a,n,o){return o+(mt(a)?jr:Wr)[n-1]}function qr(a,n){const o=mt(a)?jr:Wr,c=o.findIndex(f=>f<n),h=n-o[c];return{month:c+1,day:h}}function In(a,n){return(a-n+7)%7+1}function Rt(a,n=4,o=1){const{year:c,month:h,day:f}=a,g=Vr(c,h,f),y=In(_n(c,h,f),o);let b=Math.floor((g-y+14-n)/7),S;return b<1?(S=c-1,b=pt(S,n,o)):b>pt(c,n,o)?(S=c+1,b=1):S=c,{weekYear:S,weekNumber:b,weekday:y,...Vt(a)}}function Hr(a,n=4,o=1){const{weekYear:c,weekNumber:h,weekday:f}=a,g=In(_n(c,1,n),o),y=je(c);let b=h*7+f-g-7+n,S;b<1?(S=c-1,b+=je(S)):b>y?(S=c+1,b-=je(c)):S=c;const{month:E,day:F}=qr(S,b);return{year:S,month:E,day:F,...Vt(a)}}function En(a){const{year:n,month:o,day:c}=a,h=Vr(n,o,c);return{year:n,ordinal:h,...Vt(a)}}function Gr(a){const{year:n,ordinal:o}=a,{month:c,day:h}=qr(n,o);return{year:n,month:c,day:h,...Vt(a)}}function zr(a,n){if(!k(a.localWeekday)||!k(a.localWeekNumber)||!k(a.localWeekYear)){if(!k(a.weekday)||!k(a.weekNumber)||!k(a.weekYear))throw new i("Cannot mix locale-based week fields with ISO-based week fields");return k(a.localWeekday)||(a.weekday=a.localWeekday),k(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),k(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:n.getMinDaysInFirstWeek(),startOfWeek:n.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Ao(a,n=4,o=1){const c=Pt(a.weekYear),h=ee(a.weekNumber,1,pt(a.weekYear,n,o)),f=ee(a.weekday,1,7);return c?h?f?!1:X("weekday",a.weekday):X("week",a.weekNumber):X("weekYear",a.weekYear)}function Do(a){const n=Pt(a.year),o=ee(a.ordinal,1,je(a.year));return n?o?!1:X("ordinal",a.ordinal):X("year",a.year)}function Zr(a){const n=Pt(a.year),o=ee(a.month,1,12),c=ee(a.day,1,Bt(a.year,a.month));return n?o?c?!1:X("day",a.day):X("month",a.month):X("year",a.year)}function Yr(a){const{hour:n,minute:o,second:c,millisecond:h}=a,f=ee(n,0,23)||n===24&&o===0&&c===0&&h===0,g=ee(o,0,59),y=ee(c,0,59),b=ee(h,0,999);return f?g?y?b?!1:X("millisecond",h):X("second",c):X("minute",o):X("hour",n)}function k(a){return typeof a>"u"}function ye(a){return typeof a=="number"}function Pt(a){return typeof a=="number"&&a%1===0}function No(a){return typeof a=="string"}function Fo(a){return Object.prototype.toString.call(a)==="[object Date]"}function Jr(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Qr(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function $o(a){return Array.isArray(a)?a:[a]}function Kr(a,n,o){if(a.length!==0)return a.reduce((c,h)=>{const f=[n(h),h];return c&&o(c[0],f[0])===c[0]?c:f},null)[1]}function xo(a,n){return n.reduce((o,c)=>(o[c]=a[c],o),{})}function We(a,n){return Object.prototype.hasOwnProperty.call(a,n)}function kn(a){if(a==null)return null;if(typeof a!="object")throw new l("Week settings must be an object");if(!ee(a.firstDay,1,7)||!ee(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(n=>!ee(n,1,7)))throw new l("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function ee(a,n,o){return Pt(a)&&a>=n&&a<=o}function Lo(a,n){return a-n*Math.floor(a/n)}function V(a,n=2){const o=a<0;let c;return o?c="-"+(""+-a).padStart(n,"0"):c=(""+a).padStart(n,"0"),c}function we(a){if(!(k(a)||a===null||a===""))return parseInt(a,10)}function _e(a){if(!(k(a)||a===null||a===""))return parseFloat(a)}function Mn(a){if(!(k(a)||a===null||a==="")){const n=parseFloat("0."+a)*1e3;return Math.floor(n)}}function On(a,n,o=!1){const c=10**n;return(o?Math.trunc:Math.round)(a*c)/c}function mt(a){return a%4===0&&(a%100!==0||a%400===0)}function je(a){return mt(a)?366:365}function Bt(a,n){const o=Lo(n-1,12)+1,c=a+(n-o)/12;return o===2?mt(c)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][o-1]}function Ut(a){let n=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(n=new Date(n),n.setUTCFullYear(a.year,a.month-1,a.day)),+n}function Xr(a,n,o){return-In(_n(a,1,n),o)+n-1}function pt(a,n=4,o=1){const c=Xr(a,n,o),h=Xr(a+1,n,o);return(je(a)-c+h)/7}function An(a){return a>99?a:a>B.twoDigitCutoffYear?1900+a:2e3+a}function es(a,n,o,c=null){const h=new Date(a),f={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};c&&(f.timeZone=c);const g={timeZoneName:n,...f},y=new Intl.DateTimeFormat(o,g).formatToParts(h).find(b=>b.type.toLowerCase()==="timezonename");return y?y.value:null}function Wt(a,n){let o=parseInt(a,10);Number.isNaN(o)&&(o=0);const c=parseInt(n,10)||0,h=o<0||Object.is(o,-0)?-c:c;return o*60+h}function ts(a){const n=Number(a);if(typeof a=="boolean"||a===""||Number.isNaN(n))throw new l(`Invalid unit value ${a}`);return n}function jt(a,n){const o={};for(const c in a)if(We(a,c)){const h=a[c];if(h==null)continue;o[n(c)]=ts(h)}return o}function gt(a,n){const o=Math.trunc(Math.abs(a/60)),c=Math.trunc(Math.abs(a%60)),h=a>=0?"+":"-";switch(n){case"short":return`${h}${V(o,2)}:${V(c,2)}`;case"narrow":return`${h}${o}${c>0?`:${c}`:""}`;case"techie":return`${h}${V(o,2)}${V(c,2)}`;default:throw new RangeError(`Value format ${n} is out of range for property format`)}}function Vt(a){return xo(a,["hour","minute","second","millisecond"])}const Ro=["January","February","March","April","May","June","July","August","September","October","November","December"],ns=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Po=["J","F","M","A","M","J","J","A","S","O","N","D"];function rs(a){switch(a){case"narrow":return[...Po];case"short":return[...ns];case"long":return[...Ro];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const ss=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],is=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Bo=["M","T","W","T","F","S","S"];function os(a){switch(a){case"narrow":return[...Bo];case"short":return[...is];case"long":return[...ss];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const as=["AM","PM"],Uo=["Before Christ","Anno Domini"],Wo=["BC","AD"],jo=["B","A"];function cs(a){switch(a){case"narrow":return[...jo];case"short":return[...Wo];case"long":return[...Uo];default:return null}}function Vo(a){return as[a.hour<12?0:1]}function qo(a,n){return os(n)[a.weekday-1]}function Ho(a,n){return rs(n)[a.month-1]}function Go(a,n){return cs(n)[a.year<0?0:1]}function zo(a,n,o="always",c=!1){const h={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},f=["hours","minutes","seconds"].indexOf(a)===-1;if(o==="auto"&&f){const F=a==="days";switch(n){case 1:return F?"tomorrow":`next ${h[a][0]}`;case-1:return F?"yesterday":`last ${h[a][0]}`;case 0:return F?"today":`this ${h[a][0]}`}}const g=Object.is(n,-0)||n<0,y=Math.abs(n),b=y===1,S=h[a],E=c?b?S[1]:S[2]||S[1]:b?h[a][0]:a;return g?`${y} ${E} ago`:`in ${y} ${E}`}function us(a,n){let o="";for(const c of a)c.literal?o+=c.val:o+=n(c.val);return o}const Zo={D:v,DD:T,DDD:_,DDDD:I,t:$,tt:N,ttt:H,tttt:Y,T:j,TT:Be,TTT:re,TTTT:ae,f:ht,ff:Sr,fff:_r,ffff:Er,F:xt,FF:Tr,FFF:Ir,FFFF:kr};class z{static create(n,o={}){return new z(n,o)}static parseFormat(n){let o=null,c="",h=!1;const f=[];for(let g=0;g<n.length;g++){const y=n.charAt(g);y==="'"?(c.length>0&&f.push({literal:h||/^\s+$/.test(c),val:c}),o=null,c="",h=!h):h||y===o?c+=y:(c.length>0&&f.push({literal:/^\s+$/.test(c),val:c}),c=y,o=y)}return c.length>0&&f.push({literal:h||/^\s+$/.test(c),val:c}),f}static macroTokenToFormatOpts(n){return Zo[n]}constructor(n,o){this.opts=o,this.loc=n,this.systemLoc=null}formatWithSystemDefault(n,o){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(n,{...this.opts,...o}).format()}dtFormatter(n,o={}){return this.loc.dtFormatter(n,{...this.opts,...o})}formatDateTime(n,o){return this.dtFormatter(n,o).format()}formatDateTimeParts(n,o){return this.dtFormatter(n,o).formatToParts()}formatInterval(n,o){return this.dtFormatter(n.start,o).dtf.formatRange(n.start.toJSDate(),n.end.toJSDate())}resolvedOptions(n,o){return this.dtFormatter(n,o).resolvedOptions()}num(n,o=0){if(this.opts.forceSimple)return V(n,o);const c={...this.opts};return o>0&&(c.padTo=o),this.loc.numberFormatter(c).format(n)}formatDateTimeFromString(n,o){const c=this.loc.listingMode()==="en",h=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",f=(O,q)=>this.loc.extract(n,O,q),g=O=>n.isOffsetFixed&&n.offset===0&&O.allowZ?"Z":n.isValid?n.zone.formatOffset(n.ts,O.format):"",y=()=>c?Vo(n):f({hour:"numeric",hourCycle:"h12"},"dayperiod"),b=(O,q)=>c?Ho(n,O):f(q?{month:O}:{month:O,day:"numeric"},"month"),S=(O,q)=>c?qo(n,O):f(q?{weekday:O}:{weekday:O,month:"long",day:"numeric"},"weekday"),E=O=>{const q=z.macroTokenToFormatOpts(O);return q?this.formatWithSystemDefault(n,q):O},F=O=>c?Go(n,O):f({era:O},"era"),W=O=>{switch(O){case"S":return this.num(n.millisecond);case"u":case"SSS":return this.num(n.millisecond,3);case"s":return this.num(n.second);case"ss":return this.num(n.second,2);case"uu":return this.num(Math.floor(n.millisecond/10),2);case"uuu":return this.num(Math.floor(n.millisecond/100));case"m":return this.num(n.minute);case"mm":return this.num(n.minute,2);case"h":return this.num(n.hour%12===0?12:n.hour%12);case"hh":return this.num(n.hour%12===0?12:n.hour%12,2);case"H":return this.num(n.hour);case"HH":return this.num(n.hour,2);case"Z":return g({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return g({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return g({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return n.zone.offsetName(n.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return n.zone.offsetName(n.ts,{format:"long",locale:this.loc.locale});case"z":return n.zoneName;case"a":return y();case"d":return h?f({day:"numeric"},"day"):this.num(n.day);case"dd":return h?f({day:"2-digit"},"day"):this.num(n.day,2);case"c":return this.num(n.weekday);case"ccc":return S("short",!0);case"cccc":return S("long",!0);case"ccccc":return S("narrow",!0);case"E":return this.num(n.weekday);case"EEE":return S("short",!1);case"EEEE":return S("long",!1);case"EEEEE":return S("narrow",!1);case"L":return h?f({month:"numeric",day:"numeric"},"month"):this.num(n.month);case"LL":return h?f({month:"2-digit",day:"numeric"},"month"):this.num(n.month,2);case"LLL":return b("short",!0);case"LLLL":return b("long",!0);case"LLLLL":return b("narrow",!0);case"M":return h?f({month:"numeric"},"month"):this.num(n.month);case"MM":return h?f({month:"2-digit"},"month"):this.num(n.month,2);case"MMM":return b("short",!1);case"MMMM":return b("long",!1);case"MMMMM":return b("narrow",!1);case"y":return h?f({year:"numeric"},"year"):this.num(n.year);case"yy":return h?f({year:"2-digit"},"year"):this.num(n.year.toString().slice(-2),2);case"yyyy":return h?f({year:"numeric"},"year"):this.num(n.year,4);case"yyyyyy":return h?f({year:"numeric"},"year"):this.num(n.year,6);case"G":return F("short");case"GG":return F("long");case"GGGGG":return F("narrow");case"kk":return this.num(n.weekYear.toString().slice(-2),2);case"kkkk":return this.num(n.weekYear,4);case"W":return this.num(n.weekNumber);case"WW":return this.num(n.weekNumber,2);case"n":return this.num(n.localWeekNumber);case"nn":return this.num(n.localWeekNumber,2);case"ii":return this.num(n.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(n.localWeekYear,4);case"o":return this.num(n.ordinal);case"ooo":return this.num(n.ordinal,3);case"q":return this.num(n.quarter);case"qq":return this.num(n.quarter,2);case"X":return this.num(Math.floor(n.ts/1e3));case"x":return this.num(n.ts);default:return E(O)}};return us(z.parseFormat(o),W)}formatDurationFromString(n,o){const c=b=>{switch(b[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},h=b=>S=>{const E=c(S);return E?this.num(b.get(E),S.length):S},f=z.parseFormat(o),g=f.reduce((b,{literal:S,val:E})=>S?b:b.concat(E),[]),y=n.shiftTo(...g.map(c).filter(b=>b));return us(f,h(y))}}const ls=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ve(...a){const n=a.reduce((o,c)=>o+c.source,"");return RegExp(`^${n}$`)}function qe(...a){return n=>a.reduce(([o,c,h],f)=>{const[g,y,b]=f(n,h);return[{...o,...g},y||c,b]},[{},null,1]).slice(0,2)}function He(a,...n){if(a==null)return[null,null];for(const[o,c]of n){const h=o.exec(a);if(h)return c(h)}return[null,null]}function hs(...a){return(n,o)=>{const c={};let h;for(h=0;h<a.length;h++)c[a[h]]=we(n[o+h]);return[c,null,o+h]}}const ds=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Yo=`(?:${ds.source}?(?:\\[(${ls.source})\\])?)?`,Dn=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,fs=RegExp(`${Dn.source}${Yo}`),Nn=RegExp(`(?:T${fs.source})?`),Jo=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Qo=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Ko=/(\d{4})-?(\d{3})/,Xo=hs("weekYear","weekNumber","weekDay"),ea=hs("year","ordinal"),ta=/(\d{4})-(\d\d)-(\d\d)/,ms=RegExp(`${Dn.source} ?(?:${ds.source}|(${ls.source}))?`),na=RegExp(`(?: ${ms.source})?`);function Ge(a,n,o){const c=a[n];return k(c)?o:we(c)}function ra(a,n){return[{year:Ge(a,n),month:Ge(a,n+1,1),day:Ge(a,n+2,1)},null,n+3]}function ze(a,n){return[{hours:Ge(a,n,0),minutes:Ge(a,n+1,0),seconds:Ge(a,n+2,0),milliseconds:Mn(a[n+3])},null,n+4]}function yt(a,n){const o=!a[n]&&!a[n+1],c=Wt(a[n+1],a[n+2]),h=o?null:G.instance(c);return[{},h,n+3]}function wt(a,n){const o=a[n]?ce.create(a[n]):null;return[{},o,n+1]}const sa=RegExp(`^T?${Dn.source}$`),ia=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function oa(a){const[n,o,c,h,f,g,y,b,S]=a,E=n[0]==="-",F=b&&b[0]==="-",W=(O,q=!1)=>O!==void 0&&(q||O&&E)?-O:O;return[{years:W(_e(o)),months:W(_e(c)),weeks:W(_e(h)),days:W(_e(f)),hours:W(_e(g)),minutes:W(_e(y)),seconds:W(_e(b),b==="-0"),milliseconds:W(Mn(S),F)}]}const aa={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Fn(a,n,o,c,h,f,g){const y={year:n.length===2?An(we(n)):we(n),month:ns.indexOf(o)+1,day:we(c),hour:we(h),minute:we(f)};return g&&(y.second=we(g)),a&&(y.weekday=a.length>3?ss.indexOf(a)+1:is.indexOf(a)+1),y}const ca=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function ua(a){const[,n,o,c,h,f,g,y,b,S,E,F]=a,W=Fn(n,h,c,o,f,g,y);let O;return b?O=aa[b]:S?O=0:O=Wt(E,F),[W,new G(O)]}function la(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const ha=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,da=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,fa=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function ps(a){const[,n,o,c,h,f,g,y]=a;return[Fn(n,h,c,o,f,g,y),G.utcInstance]}function ma(a){const[,n,o,c,h,f,g,y]=a;return[Fn(n,y,o,c,h,f,g),G.utcInstance]}const pa=Ve(Jo,Nn),ga=Ve(Qo,Nn),ya=Ve(Ko,Nn),wa=Ve(fs),gs=qe(ra,ze,yt,wt),ba=qe(Xo,ze,yt,wt),Ca=qe(ea,ze,yt,wt),va=qe(ze,yt,wt);function Sa(a){return He(a,[pa,gs],[ga,ba],[ya,Ca],[wa,va])}function Ta(a){return He(la(a),[ca,ua])}function _a(a){return He(a,[ha,ps],[da,ps],[fa,ma])}function Ia(a){return He(a,[ia,oa])}const Ea=qe(ze);function ka(a){return He(a,[sa,Ea])}const Ma=Ve(ta,na),Oa=Ve(ms),Aa=qe(ze,yt,wt);function Da(a){return He(a,[Ma,gs],[Oa,Aa])}const ys="Invalid Duration",ws={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Na={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...ws},te=146097/400,Ze=146097/4800,Fa={years:{quarters:4,months:12,weeks:te/7,days:te,hours:te*24,minutes:te*24*60,seconds:te*24*60*60,milliseconds:te*24*60*60*1e3},quarters:{months:3,weeks:te/28,days:te/4,hours:te*24/4,minutes:te*24*60/4,seconds:te*24*60*60/4,milliseconds:te*24*60*60*1e3/4},months:{weeks:Ze/7,days:Ze,hours:Ze*24,minutes:Ze*24*60,seconds:Ze*24*60*60,milliseconds:Ze*24*60*60*1e3},...ws},Ie=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],$a=Ie.slice(0).reverse();function be(a,n,o=!1){const c={values:o?n.values:{...a.values,...n.values||{}},loc:a.loc.clone(n.loc),conversionAccuracy:n.conversionAccuracy||a.conversionAccuracy,matrix:n.matrix||a.matrix};return new x(c)}function bs(a,n){var o;let c=(o=n.milliseconds)!=null?o:0;for(const h of $a.slice(1))n[h]&&(c+=n[h]*a[h].milliseconds);return c}function Cs(a,n){const o=bs(a,n)<0?-1:1;Ie.reduceRight((c,h)=>{if(k(n[h]))return c;if(c){const f=n[c]*o,g=a[h][c],y=Math.floor(f/g);n[h]+=y*o,n[c]-=y*g*o}return h},null),Ie.reduce((c,h)=>{if(k(n[h]))return c;if(c){const f=n[c]%1;n[c]-=f,n[h]+=f*a[c][h]}return h},null)}function xa(a){const n={};for(const[o,c]of Object.entries(a))c!==0&&(n[o]=c);return n}class x{constructor(n){const o=n.conversionAccuracy==="longterm"||!1;let c=o?Fa:Na;n.matrix&&(c=n.matrix),this.values=n.values,this.loc=n.loc||R.create(),this.conversionAccuracy=o?"longterm":"casual",this.invalid=n.invalid||null,this.matrix=c,this.isLuxonDuration=!0}static fromMillis(n,o){return x.fromObject({milliseconds:n},o)}static fromObject(n,o={}){if(n==null||typeof n!="object")throw new l(`Duration.fromObject: argument expected to be an object, got ${n===null?"null":typeof n}`);return new x({values:jt(n,x.normalizeUnit),loc:R.fromObject(o),conversionAccuracy:o.conversionAccuracy,matrix:o.matrix})}static fromDurationLike(n){if(ye(n))return x.fromMillis(n);if(x.isDuration(n))return n;if(typeof n=="object")return x.fromObject(n);throw new l(`Unknown duration argument ${n} of type ${typeof n}`)}static fromISO(n,o){const[c]=Ia(n);return c?x.fromObject(c,o):x.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static fromISOTime(n,o){const[c]=ka(n);return c?x.fromObject(c,o):x.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static invalid(n,o=null){if(!n)throw new l("need to specify a reason the Duration is invalid");const c=n instanceof ie?n:new ie(n,o);if(B.throwOnInvalid)throw new s(c);return new x({invalid:c})}static normalizeUnit(n){const o={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[n&&n.toLowerCase()];if(!o)throw new u(n);return o}static isDuration(n){return n&&n.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(n,o={}){const c={...o,floor:o.round!==!1&&o.floor!==!1};return this.isValid?z.create(this.loc,c).formatDurationFromString(this,n):ys}toHuman(n={}){if(!this.isValid)return ys;const o=Ie.map(c=>{const h=this.values[c];return k(h)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...n,unit:c.slice(0,-1)}).format(h)}).filter(c=>c);return this.loc.listFormatter({type:"conjunction",style:n.listStyle||"narrow",...n}).format(o)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let n="P";return this.years!==0&&(n+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(n+=this.months+this.quarters*3+"M"),this.weeks!==0&&(n+=this.weeks+"W"),this.days!==0&&(n+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(n+="T"),this.hours!==0&&(n+=this.hours+"H"),this.minutes!==0&&(n+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(n+=On(this.seconds+this.milliseconds/1e3,3)+"S"),n==="P"&&(n+="T0S"),n}toISOTime(n={}){if(!this.isValid)return null;const o=this.toMillis();return o<0||o>=864e5?null:(n={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...n,includeOffset:!1},M.fromMillis(o,{zone:"UTC"}).toISOTime(n))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?bs(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(n){if(!this.isValid)return this;const o=x.fromDurationLike(n),c={};for(const h of Ie)(We(o.values,h)||We(this.values,h))&&(c[h]=o.get(h)+this.get(h));return be(this,{values:c},!0)}minus(n){if(!this.isValid)return this;const o=x.fromDurationLike(n);return this.plus(o.negate())}mapUnits(n){if(!this.isValid)return this;const o={};for(const c of Object.keys(this.values))o[c]=ts(n(this.values[c],c));return be(this,{values:o},!0)}get(n){return this[x.normalizeUnit(n)]}set(n){if(!this.isValid)return this;const o={...this.values,...jt(n,x.normalizeUnit)};return be(this,{values:o})}reconfigure({locale:n,numberingSystem:o,conversionAccuracy:c,matrix:h}={}){const g={loc:this.loc.clone({locale:n,numberingSystem:o}),matrix:h,conversionAccuracy:c};return be(this,g)}as(n){return this.isValid?this.shiftTo(n).get(n):NaN}normalize(){if(!this.isValid)return this;const n=this.toObject();return Cs(this.matrix,n),be(this,{values:n},!0)}rescale(){if(!this.isValid)return this;const n=xa(this.normalize().shiftToAll().toObject());return be(this,{values:n},!0)}shiftTo(...n){if(!this.isValid)return this;if(n.length===0)return this;n=n.map(g=>x.normalizeUnit(g));const o={},c={},h=this.toObject();let f;for(const g of Ie)if(n.indexOf(g)>=0){f=g;let y=0;for(const S in c)y+=this.matrix[S][g]*c[S],c[S]=0;ye(h[g])&&(y+=h[g]);const b=Math.trunc(y);o[g]=b,c[g]=(y*1e3-b*1e3)/1e3}else ye(h[g])&&(c[g]=h[g]);for(const g in c)c[g]!==0&&(o[f]+=g===f?c[g]:c[g]/this.matrix[f][g]);return Cs(this.matrix,o),be(this,{values:o},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const n={};for(const o of Object.keys(this.values))n[o]=this.values[o]===0?0:-this.values[o];return be(this,{values:n},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(n){if(!this.isValid||!n.isValid||!this.loc.equals(n.loc))return!1;function o(c,h){return c===void 0||c===0?h===void 0||h===0:c===h}for(const c of Ie)if(!o(this.values[c],n.values[c]))return!1;return!0}}const Ye="Invalid Interval";function La(a,n){return!a||!a.isValid?U.invalid("missing or invalid start"):!n||!n.isValid?U.invalid("missing or invalid end"):n<a?U.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${n.toISO()}`):null}class U{constructor(n){this.s=n.start,this.e=n.end,this.invalid=n.invalid||null,this.isLuxonInterval=!0}static invalid(n,o=null){if(!n)throw new l("need to specify a reason the Interval is invalid");const c=n instanceof ie?n:new ie(n,o);if(B.throwOnInvalid)throw new t(c);return new U({invalid:c})}static fromDateTimes(n,o){const c=St(n),h=St(o),f=La(c,h);return f??new U({start:c,end:h})}static after(n,o){const c=x.fromDurationLike(o),h=St(n);return U.fromDateTimes(h,h.plus(c))}static before(n,o){const c=x.fromDurationLike(o),h=St(n);return U.fromDateTimes(h.minus(c),h)}static fromISO(n,o){const[c,h]=(n||"").split("/",2);if(c&&h){let f,g;try{f=M.fromISO(c,o),g=f.isValid}catch{g=!1}let y,b;try{y=M.fromISO(h,o),b=y.isValid}catch{b=!1}if(g&&b)return U.fromDateTimes(f,y);if(g){const S=x.fromISO(h,o);if(S.isValid)return U.after(f,S)}else if(b){const S=x.fromISO(c,o);if(S.isValid)return U.before(y,S)}}return U.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static isInterval(n){return n&&n.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(n="milliseconds"){return this.isValid?this.toDuration(n).get(n):NaN}count(n="milliseconds",o){if(!this.isValid)return NaN;const c=this.start.startOf(n,o);let h;return o!=null&&o.useLocaleWeeks?h=this.end.reconfigure({locale:c.locale}):h=this.end,h=h.startOf(n,o),Math.floor(h.diff(c,n).get(n))+(h.valueOf()!==this.end.valueOf())}hasSame(n){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,n):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(n){return this.isValid?this.s>n:!1}isBefore(n){return this.isValid?this.e<=n:!1}contains(n){return this.isValid?this.s<=n&&this.e>n:!1}set({start:n,end:o}={}){return this.isValid?U.fromDateTimes(n||this.s,o||this.e):this}splitAt(...n){if(!this.isValid)return[];const o=n.map(St).filter(g=>this.contains(g)).sort((g,y)=>g.toMillis()-y.toMillis()),c=[];let{s:h}=this,f=0;for(;h<this.e;){const g=o[f]||this.e,y=+g>+this.e?this.e:g;c.push(U.fromDateTimes(h,y)),h=y,f+=1}return c}splitBy(n){const o=x.fromDurationLike(n);if(!this.isValid||!o.isValid||o.as("milliseconds")===0)return[];let{s:c}=this,h=1,f;const g=[];for(;c<this.e;){const y=this.start.plus(o.mapUnits(b=>b*h));f=+y>+this.e?this.e:y,g.push(U.fromDateTimes(c,f)),c=f,h+=1}return g}divideEqually(n){return this.isValid?this.splitBy(this.length()/n).slice(0,n):[]}overlaps(n){return this.e>n.s&&this.s<n.e}abutsStart(n){return this.isValid?+this.e==+n.s:!1}abutsEnd(n){return this.isValid?+n.e==+this.s:!1}engulfs(n){return this.isValid?this.s<=n.s&&this.e>=n.e:!1}equals(n){return!this.isValid||!n.isValid?!1:this.s.equals(n.s)&&this.e.equals(n.e)}intersection(n){if(!this.isValid)return this;const o=this.s>n.s?this.s:n.s,c=this.e<n.e?this.e:n.e;return o>=c?null:U.fromDateTimes(o,c)}union(n){if(!this.isValid)return this;const o=this.s<n.s?this.s:n.s,c=this.e>n.e?this.e:n.e;return U.fromDateTimes(o,c)}static merge(n){const[o,c]=n.sort((h,f)=>h.s-f.s).reduce(([h,f],g)=>f?f.overlaps(g)||f.abutsStart(g)?[h,f.union(g)]:[h.concat([f]),g]:[h,g],[[],null]);return c&&o.push(c),o}static xor(n){let o=null,c=0;const h=[],f=n.map(b=>[{time:b.s,type:"s"},{time:b.e,type:"e"}]),g=Array.prototype.concat(...f),y=g.sort((b,S)=>b.time-S.time);for(const b of y)c+=b.type==="s"?1:-1,c===1?o=b.time:(o&&+o!=+b.time&&h.push(U.fromDateTimes(o,b.time)),o=null);return U.merge(h)}difference(...n){return U.xor([this].concat(n)).map(o=>this.intersection(o)).filter(o=>o&&!o.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Ye}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(n=v,o={}){return this.isValid?z.create(this.s.loc.clone(o),n).formatInterval(this):Ye}toISO(n){return this.isValid?`${this.s.toISO(n)}/${this.e.toISO(n)}`:Ye}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ye}toISOTime(n){return this.isValid?`${this.s.toISOTime(n)}/${this.e.toISOTime(n)}`:Ye}toFormat(n,{separator:o=" – "}={}){return this.isValid?`${this.s.toFormat(n)}${o}${this.e.toFormat(n)}`:Ye}toDuration(n,o){return this.isValid?this.e.diff(this.s,n,o):x.invalid(this.invalidReason)}mapEndpoints(n){return U.fromDateTimes(n(this.s),n(this.e))}}class bt{static hasDST(n=B.defaultZone){const o=M.now().setZone(n).set({month:12});return!n.isUniversal&&o.offset!==o.set({month:6}).offset}static isValidIANAZone(n){return ce.isValidZone(n)}static normalizeZone(n){return ge(n,B.defaultZone)}static getStartOfWeek({locale:n=null,locObj:o=null}={}){return(o||R.create(n)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:n=null,locObj:o=null}={}){return(o||R.create(n)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:n=null,locObj:o=null}={}){return(o||R.create(n)).getWeekendDays().slice()}static months(n="long",{locale:o=null,numberingSystem:c=null,locObj:h=null,outputCalendar:f="gregory"}={}){return(h||R.create(o,c,f)).months(n)}static monthsFormat(n="long",{locale:o=null,numberingSystem:c=null,locObj:h=null,outputCalendar:f="gregory"}={}){return(h||R.create(o,c,f)).months(n,!0)}static weekdays(n="long",{locale:o=null,numberingSystem:c=null,locObj:h=null}={}){return(h||R.create(o,c,null)).weekdays(n)}static weekdaysFormat(n="long",{locale:o=null,numberingSystem:c=null,locObj:h=null}={}){return(h||R.create(o,c,null)).weekdays(n,!0)}static meridiems({locale:n=null}={}){return R.create(n).meridiems()}static eras(n="short",{locale:o=null}={}){return R.create(o,null,"gregory").eras(n)}static features(){return{relative:Jr(),localeWeek:Qr()}}}function vs(a,n){const o=h=>h.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),c=o(n)-o(a);return Math.floor(x.fromMillis(c).as("days"))}function Ra(a,n,o){const c=[["years",(b,S)=>S.year-b.year],["quarters",(b,S)=>S.quarter-b.quarter+(S.year-b.year)*4],["months",(b,S)=>S.month-b.month+(S.year-b.year)*12],["weeks",(b,S)=>{const E=vs(b,S);return(E-E%7)/7}],["days",vs]],h={},f=a;let g,y;for(const[b,S]of c)o.indexOf(b)>=0&&(g=b,h[b]=S(a,n),y=f.plus(h),y>n?(h[b]--,a=f.plus(h),a>n&&(y=a,h[b]--,a=f.plus(h))):a=y);return[a,h,y,g]}function Pa(a,n,o,c){let[h,f,g,y]=Ra(a,n,o);const b=n-h,S=o.filter(F=>["hours","minutes","seconds","milliseconds"].indexOf(F)>=0);S.length===0&&(g<n&&(g=h.plus({[y]:1})),g!==h&&(f[y]=(f[y]||0)+b/(g-h)));const E=x.fromObject(f,c);return S.length>0?x.fromMillis(b,c).shiftTo(...S).plus(E):E}const Ba="missing Intl.DateTimeFormat.formatToParts support";function L(a,n=o=>o){return{regex:a,deser:([o])=>n(Mo(o))}}const Ss="[  ]",Ts=new RegExp(Ss,"g");function Ua(a){return a.replace(/\./g,"\\.?").replace(Ts,Ss)}function _s(a){return a.replace(/\./g,"").replace(Ts," ").toLowerCase()}function oe(a,n){return a===null?null:{regex:RegExp(a.map(Ua).join("|")),deser:([o])=>a.findIndex(c=>_s(o)===_s(c))+n}}function Is(a,n){return{regex:a,deser:([,o,c])=>Wt(o,c),groups:n}}function qt(a){return{regex:a,deser:([n])=>n}}function Wa(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function ja(a,n){const o=se(n),c=se(n,"{2}"),h=se(n,"{3}"),f=se(n,"{4}"),g=se(n,"{6}"),y=se(n,"{1,2}"),b=se(n,"{1,3}"),S=se(n,"{1,6}"),E=se(n,"{1,9}"),F=se(n,"{2,4}"),W=se(n,"{4,6}"),O=ue=>({regex:RegExp(Wa(ue.val)),deser:([Ke])=>Ke,literal:!0}),Qe=(ue=>{if(a.literal)return O(ue);switch(ue.val){case"G":return oe(n.eras("short"),0);case"GG":return oe(n.eras("long"),0);case"y":return L(S);case"yy":return L(F,An);case"yyyy":return L(f);case"yyyyy":return L(W);case"yyyyyy":return L(g);case"M":return L(y);case"MM":return L(c);case"MMM":return oe(n.months("short",!0),1);case"MMMM":return oe(n.months("long",!0),1);case"L":return L(y);case"LL":return L(c);case"LLL":return oe(n.months("short",!1),1);case"LLLL":return oe(n.months("long",!1),1);case"d":return L(y);case"dd":return L(c);case"o":return L(b);case"ooo":return L(h);case"HH":return L(c);case"H":return L(y);case"hh":return L(c);case"h":return L(y);case"mm":return L(c);case"m":return L(y);case"q":return L(y);case"qq":return L(c);case"s":return L(y);case"ss":return L(c);case"S":return L(b);case"SSS":return L(h);case"u":return qt(E);case"uu":return qt(y);case"uuu":return L(o);case"a":return oe(n.meridiems(),0);case"kkkk":return L(f);case"kk":return L(F,An);case"W":return L(y);case"WW":return L(c);case"E":case"c":return L(o);case"EEE":return oe(n.weekdays("short",!1),1);case"EEEE":return oe(n.weekdays("long",!1),1);case"ccc":return oe(n.weekdays("short",!0),1);case"cccc":return oe(n.weekdays("long",!0),1);case"Z":case"ZZ":return Is(new RegExp(`([+-]${y.source})(?::(${c.source}))?`),2);case"ZZZ":return Is(new RegExp(`([+-]${y.source})(${c.source})?`),2);case"z":return qt(/[a-z_+-/]{1,256}?/i);case" ":return qt(/[^\S\n\r]/);default:return O(ue)}})(a)||{invalidReason:Ba};return Qe.token=a,Qe}const Va={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function qa(a,n,o){const{type:c,value:h}=a;if(c==="literal"){const b=/^\s+$/.test(h);return{literal:!b,val:b?" ":h}}const f=n[c];let g=c;c==="hour"&&(n.hour12!=null?g=n.hour12?"hour12":"hour24":n.hourCycle!=null?n.hourCycle==="h11"||n.hourCycle==="h12"?g="hour12":g="hour24":g=o.hour12?"hour12":"hour24");let y=Va[g];if(typeof y=="object"&&(y=y[f]),y)return{literal:!1,val:y}}function Ha(a){return[`^${a.map(o=>o.regex).reduce((o,c)=>`${o}(${c.source})`,"")}$`,a]}function Ga(a,n,o){const c=a.match(n);if(c){const h={};let f=1;for(const g in o)if(We(o,g)){const y=o[g],b=y.groups?y.groups+1:1;!y.literal&&y.token&&(h[y.token.val[0]]=y.deser(c.slice(f,f+b))),f+=b}return[c,h]}else return[c,{}]}function za(a){const n=f=>{switch(f){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let o=null,c;return k(a.z)||(o=ce.create(a.z)),k(a.Z)||(o||(o=new G(a.Z)),c=a.Z),k(a.q)||(a.M=(a.q-1)*3+1),k(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),k(a.u)||(a.S=Mn(a.u)),[Object.keys(a).reduce((f,g)=>{const y=n(g);return y&&(f[y]=a[g]),f},{}),o,c]}let $n=null;function Za(){return $n||($n=M.fromMillis(1555555555555)),$n}function Ya(a,n){if(a.literal)return a;const o=z.macroTokenToFormatOpts(a.val),c=Os(o,n);return c==null||c.includes(void 0)?a:c}function Es(a,n){return Array.prototype.concat(...a.map(o=>Ya(o,n)))}class ks{constructor(n,o){if(this.locale=n,this.format=o,this.tokens=Es(z.parseFormat(o),n),this.units=this.tokens.map(c=>ja(c,n)),this.disqualifyingUnit=this.units.find(c=>c.invalidReason),!this.disqualifyingUnit){const[c,h]=Ha(this.units);this.regex=RegExp(c,"i"),this.handlers=h}}explainFromTokens(n){if(this.isValid){const[o,c]=Ga(n,this.regex,this.handlers),[h,f,g]=c?za(c):[null,null,void 0];if(We(c,"a")&&We(c,"H"))throw new i("Can't include meridiem when specifying 24-hour format");return{input:n,tokens:this.tokens,regex:this.regex,rawMatches:o,matches:c,result:h,zone:f,specificOffset:g}}else return{input:n,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Ms(a,n,o){return new ks(a,o).explainFromTokens(n)}function Ja(a,n,o){const{result:c,zone:h,specificOffset:f,invalidReason:g}=Ms(a,n,o);return[c,h,f,g]}function Os(a,n){if(!a)return null;const c=z.create(n,a).dtFormatter(Za()),h=c.formatToParts(),f=c.resolvedOptions();return h.map(g=>qa(g,a,f))}const xn="Invalid DateTime",Qa=864e13;function Ct(a){return new ie("unsupported zone",`the zone "${a.name}" is not supported`)}function Ln(a){return a.weekData===null&&(a.weekData=Rt(a.c)),a.weekData}function Rn(a){return a.localWeekData===null&&(a.localWeekData=Rt(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function Ee(a,n){const o={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new M({...o,...n,old:o})}function As(a,n,o){let c=a-n*60*1e3;const h=o.offset(c);if(n===h)return[c,n];c-=(h-n)*60*1e3;const f=o.offset(c);return h===f?[c,h]:[a-Math.min(h,f)*60*1e3,Math.max(h,f)]}function Ht(a,n){a+=n*60*1e3;const o=new Date(a);return{year:o.getUTCFullYear(),month:o.getUTCMonth()+1,day:o.getUTCDate(),hour:o.getUTCHours(),minute:o.getUTCMinutes(),second:o.getUTCSeconds(),millisecond:o.getUTCMilliseconds()}}function Gt(a,n,o){return As(Ut(a),n,o)}function Ds(a,n){const o=a.o,c=a.c.year+Math.trunc(n.years),h=a.c.month+Math.trunc(n.months)+Math.trunc(n.quarters)*3,f={...a.c,year:c,month:h,day:Math.min(a.c.day,Bt(c,h))+Math.trunc(n.days)+Math.trunc(n.weeks)*7},g=x.fromObject({years:n.years-Math.trunc(n.years),quarters:n.quarters-Math.trunc(n.quarters),months:n.months-Math.trunc(n.months),weeks:n.weeks-Math.trunc(n.weeks),days:n.days-Math.trunc(n.days),hours:n.hours,minutes:n.minutes,seconds:n.seconds,milliseconds:n.milliseconds}).as("milliseconds"),y=Ut(f);let[b,S]=As(y,o,a.zone);return g!==0&&(b+=g,S=a.zone.offset(b)),{ts:b,o:S}}function Je(a,n,o,c,h,f){const{setZone:g,zone:y}=o;if(a&&Object.keys(a).length!==0||n){const b=n||y,S=M.fromObject(a,{...o,zone:b,specificOffset:f});return g?S:S.setZone(y)}else return M.invalid(new ie("unparsable",`the input "${h}" can't be parsed as ${c}`))}function zt(a,n,o=!0){return a.isValid?z.create(R.create("en-US"),{allowZ:o,forceSimple:!0}).formatDateTimeFromString(a,n):null}function Pn(a,n){const o=a.c.year>9999||a.c.year<0;let c="";return o&&a.c.year>=0&&(c+="+"),c+=V(a.c.year,o?6:4),n?(c+="-",c+=V(a.c.month),c+="-",c+=V(a.c.day)):(c+=V(a.c.month),c+=V(a.c.day)),c}function Ns(a,n,o,c,h,f){let g=V(a.c.hour);return n?(g+=":",g+=V(a.c.minute),(a.c.millisecond!==0||a.c.second!==0||!o)&&(g+=":")):g+=V(a.c.minute),(a.c.millisecond!==0||a.c.second!==0||!o)&&(g+=V(a.c.second),(a.c.millisecond!==0||!c)&&(g+=".",g+=V(a.c.millisecond,3))),h&&(a.isOffsetFixed&&a.offset===0&&!f?g+="Z":a.o<0?(g+="-",g+=V(Math.trunc(-a.o/60)),g+=":",g+=V(Math.trunc(-a.o%60))):(g+="+",g+=V(Math.trunc(a.o/60)),g+=":",g+=V(Math.trunc(a.o%60)))),f&&(g+="["+a.zone.ianaName+"]"),g}const Fs={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ka={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Xa={ordinal:1,hour:0,minute:0,second:0,millisecond:0},$s=["year","month","day","hour","minute","second","millisecond"],ec=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],tc=["year","ordinal","hour","minute","second","millisecond"];function nc(a){const n={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!n)throw new u(a);return n}function xs(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return nc(a)}}function rc(a){if(vt===void 0&&(vt=B.now()),a.type!=="iana")return a.offset(vt);const n=a.name;let o=Bn.get(n);return o===void 0&&(o=a.offset(vt),Bn.set(n,o)),o}function Ls(a,n){const o=ge(n.zone,B.defaultZone);if(!o.isValid)return M.invalid(Ct(o));const c=R.fromObject(n);let h,f;if(k(a.year))h=B.now();else{for(const b of $s)k(a[b])&&(a[b]=Fs[b]);const g=Zr(a)||Yr(a);if(g)return M.invalid(g);const y=rc(o);[h,f]=Gt(a,y,o)}return new M({ts:h,zone:o,loc:c,o:f})}function Rs(a,n,o){const c=k(o.round)?!0:o.round,h=(g,y)=>(g=On(g,c||o.calendary?0:2,!0),n.loc.clone(o).relFormatter(o).format(g,y)),f=g=>o.calendary?n.hasSame(a,g)?0:n.startOf(g).diff(a.startOf(g),g).get(g):n.diff(a,g).get(g);if(o.unit)return h(f(o.unit),o.unit);for(const g of o.units){const y=f(g);if(Math.abs(y)>=1)return h(y,g)}return h(a>n?-0:0,o.units[o.units.length-1])}function Ps(a){let n={},o;return a.length>0&&typeof a[a.length-1]=="object"?(n=a[a.length-1],o=Array.from(a).slice(0,a.length-1)):o=Array.from(a),[n,o]}let vt;const Bn=new Map;class M{constructor(n){const o=n.zone||B.defaultZone;let c=n.invalid||(Number.isNaN(n.ts)?new ie("invalid input"):null)||(o.isValid?null:Ct(o));this.ts=k(n.ts)?B.now():n.ts;let h=null,f=null;if(!c)if(n.old&&n.old.ts===this.ts&&n.old.zone.equals(o))[h,f]=[n.old.c,n.old.o];else{const y=ye(n.o)&&!n.old?n.o:o.offset(this.ts);h=Ht(this.ts,y),c=Number.isNaN(h.year)?new ie("invalid input"):null,h=c?null:h,f=c?null:y}this._zone=o,this.loc=n.loc||R.create(),this.invalid=c,this.weekData=null,this.localWeekData=null,this.c=h,this.o=f,this.isLuxonDateTime=!0}static now(){return new M({})}static local(){const[n,o]=Ps(arguments),[c,h,f,g,y,b,S]=o;return Ls({year:c,month:h,day:f,hour:g,minute:y,second:b,millisecond:S},n)}static utc(){const[n,o]=Ps(arguments),[c,h,f,g,y,b,S]=o;return n.zone=G.utcInstance,Ls({year:c,month:h,day:f,hour:g,minute:y,second:b,millisecond:S},n)}static fromJSDate(n,o={}){const c=Fo(n)?n.valueOf():NaN;if(Number.isNaN(c))return M.invalid("invalid input");const h=ge(o.zone,B.defaultZone);return h.isValid?new M({ts:c,zone:h,loc:R.fromObject(o)}):M.invalid(Ct(h))}static fromMillis(n,o={}){if(ye(n))return n<-864e13||n>Qa?M.invalid("Timestamp out of range"):new M({ts:n,zone:ge(o.zone,B.defaultZone),loc:R.fromObject(o)});throw new l(`fromMillis requires a numerical input, but received a ${typeof n} with value ${n}`)}static fromSeconds(n,o={}){if(ye(n))return new M({ts:n*1e3,zone:ge(o.zone,B.defaultZone),loc:R.fromObject(o)});throw new l("fromSeconds requires a numerical input")}static fromObject(n,o={}){n=n||{};const c=ge(o.zone,B.defaultZone);if(!c.isValid)return M.invalid(Ct(c));const h=R.fromObject(o),f=jt(n,xs),{minDaysInFirstWeek:g,startOfWeek:y}=zr(f,h),b=B.now(),S=k(o.specificOffset)?c.offset(b):o.specificOffset,E=!k(f.ordinal),F=!k(f.year),W=!k(f.month)||!k(f.day),O=F||W,q=f.weekYear||f.weekNumber;if((O||E)&&q)throw new i("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(W&&E)throw new i("Can't mix ordinal dates with month/day");const Qe=q||f.weekday&&!O;let ue,Ke,Tt=Ht(b,S);Qe?(ue=ec,Ke=Ka,Tt=Rt(Tt,g,y)):E?(ue=tc,Ke=Xa,Tt=En(Tt)):(ue=$s,Ke=Fs);let Bs=!1;for(const It of ue){const uc=f[It];k(uc)?Bs?f[It]=Ke[It]:f[It]=Tt[It]:Bs=!0}const ic=Qe?Ao(f,g,y):E?Do(f):Zr(f),Us=ic||Yr(f);if(Us)return M.invalid(Us);const oc=Qe?Hr(f,g,y):E?Gr(f):f,[ac,cc]=Gt(oc,S,c),_t=new M({ts:ac,zone:c,o:cc,loc:h});return f.weekday&&O&&n.weekday!==_t.weekday?M.invalid("mismatched weekday",`you can't specify both a weekday of ${f.weekday} and a date of ${_t.toISO()}`):_t.isValid?_t:M.invalid(_t.invalid)}static fromISO(n,o={}){const[c,h]=Sa(n);return Je(c,h,o,"ISO 8601",n)}static fromRFC2822(n,o={}){const[c,h]=Ta(n);return Je(c,h,o,"RFC 2822",n)}static fromHTTP(n,o={}){const[c,h]=_a(n);return Je(c,h,o,"HTTP",o)}static fromFormat(n,o,c={}){if(k(n)||k(o))throw new l("fromFormat requires an input string and a format");const{locale:h=null,numberingSystem:f=null}=c,g=R.fromOpts({locale:h,numberingSystem:f,defaultToEN:!0}),[y,b,S,E]=Ja(g,n,o);return E?M.invalid(E):Je(y,b,c,`format ${o}`,n,S)}static fromString(n,o,c={}){return M.fromFormat(n,o,c)}static fromSQL(n,o={}){const[c,h]=Da(n);return Je(c,h,o,"SQL",n)}static invalid(n,o=null){if(!n)throw new l("need to specify a reason the DateTime is invalid");const c=n instanceof ie?n:new ie(n,o);if(B.throwOnInvalid)throw new e(c);return new M({invalid:c})}static isDateTime(n){return n&&n.isLuxonDateTime||!1}static parseFormatForOpts(n,o={}){const c=Os(n,R.fromObject(o));return c?c.map(h=>h?h.val:null).join(""):null}static expandFormat(n,o={}){return Es(z.parseFormat(n),R.fromObject(o)).map(h=>h.val).join("")}static resetCache(){vt=void 0,Bn.clear()}get(n){return this[n]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Ln(this).weekYear:NaN}get weekNumber(){return this.isValid?Ln(this).weekNumber:NaN}get weekday(){return this.isValid?Ln(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Rn(this).weekday:NaN}get localWeekNumber(){return this.isValid?Rn(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Rn(this).weekYear:NaN}get ordinal(){return this.isValid?En(this.c).ordinal:NaN}get monthShort(){return this.isValid?bt.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?bt.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?bt.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?bt.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const n=864e5,o=6e4,c=Ut(this.c),h=this.zone.offset(c-n),f=this.zone.offset(c+n),g=this.zone.offset(c-h*o),y=this.zone.offset(c-f*o);if(g===y)return[this];const b=c-g*o,S=c-y*o,E=Ht(b,g),F=Ht(S,y);return E.hour===F.hour&&E.minute===F.minute&&E.second===F.second&&E.millisecond===F.millisecond?[Ee(this,{ts:b}),Ee(this,{ts:S})]:[this]}get isInLeapYear(){return mt(this.year)}get daysInMonth(){return Bt(this.year,this.month)}get daysInYear(){return this.isValid?je(this.year):NaN}get weeksInWeekYear(){return this.isValid?pt(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?pt(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(n={}){const{locale:o,numberingSystem:c,calendar:h}=z.create(this.loc.clone(n),n).resolvedOptions(this);return{locale:o,numberingSystem:c,outputCalendar:h}}toUTC(n=0,o={}){return this.setZone(G.instance(n),o)}toLocal(){return this.setZone(B.defaultZone)}setZone(n,{keepLocalTime:o=!1,keepCalendarTime:c=!1}={}){if(n=ge(n,B.defaultZone),n.equals(this.zone))return this;if(n.isValid){let h=this.ts;if(o||c){const f=n.offset(this.ts),g=this.toObject();[h]=Gt(g,f,n)}return Ee(this,{ts:h,zone:n})}else return M.invalid(Ct(n))}reconfigure({locale:n,numberingSystem:o,outputCalendar:c}={}){const h=this.loc.clone({locale:n,numberingSystem:o,outputCalendar:c});return Ee(this,{loc:h})}setLocale(n){return this.reconfigure({locale:n})}set(n){if(!this.isValid)return this;const o=jt(n,xs),{minDaysInFirstWeek:c,startOfWeek:h}=zr(o,this.loc),f=!k(o.weekYear)||!k(o.weekNumber)||!k(o.weekday),g=!k(o.ordinal),y=!k(o.year),b=!k(o.month)||!k(o.day),S=y||b,E=o.weekYear||o.weekNumber;if((S||g)&&E)throw new i("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&g)throw new i("Can't mix ordinal dates with month/day");let F;f?F=Hr({...Rt(this.c,c,h),...o},c,h):k(o.ordinal)?(F={...this.toObject(),...o},k(o.day)&&(F.day=Math.min(Bt(F.year,F.month),F.day))):F=Gr({...En(this.c),...o});const[W,O]=Gt(F,this.o,this.zone);return Ee(this,{ts:W,o:O})}plus(n){if(!this.isValid)return this;const o=x.fromDurationLike(n);return Ee(this,Ds(this,o))}minus(n){if(!this.isValid)return this;const o=x.fromDurationLike(n).negate();return Ee(this,Ds(this,o))}startOf(n,{useLocaleWeeks:o=!1}={}){if(!this.isValid)return this;const c={},h=x.normalizeUnit(n);switch(h){case"years":c.month=1;case"quarters":case"months":c.day=1;case"weeks":case"days":c.hour=0;case"hours":c.minute=0;case"minutes":c.second=0;case"seconds":c.millisecond=0;break}if(h==="weeks")if(o){const f=this.loc.getStartOfWeek(),{weekday:g}=this;g<f&&(c.weekNumber=this.weekNumber-1),c.weekday=f}else c.weekday=1;if(h==="quarters"){const f=Math.ceil(this.month/3);c.month=(f-1)*3+1}return this.set(c)}endOf(n,o){return this.isValid?this.plus({[n]:1}).startOf(n,o).minus(1):this}toFormat(n,o={}){return this.isValid?z.create(this.loc.redefaultToEN(o)).formatDateTimeFromString(this,n):xn}toLocaleString(n=v,o={}){return this.isValid?z.create(this.loc.clone(o),n).formatDateTime(this):xn}toLocaleParts(n={}){return this.isValid?z.create(this.loc.clone(n),n).formatDateTimeParts(this):[]}toISO({format:n="extended",suppressSeconds:o=!1,suppressMilliseconds:c=!1,includeOffset:h=!0,extendedZone:f=!1}={}){if(!this.isValid)return null;const g=n==="extended";let y=Pn(this,g);return y+="T",y+=Ns(this,g,o,c,h,f),y}toISODate({format:n="extended"}={}){return this.isValid?Pn(this,n==="extended"):null}toISOWeekDate(){return zt(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:n=!1,suppressSeconds:o=!1,includeOffset:c=!0,includePrefix:h=!1,extendedZone:f=!1,format:g="extended"}={}){return this.isValid?(h?"T":"")+Ns(this,g==="extended",o,n,c,f):null}toRFC2822(){return zt(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return zt(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Pn(this,!0):null}toSQLTime({includeOffset:n=!0,includeZone:o=!1,includeOffsetSpace:c=!0}={}){let h="HH:mm:ss.SSS";return(o||n)&&(c&&(h+=" "),o?h+="z":n&&(h+="ZZ")),zt(this,h,!0)}toSQL(n={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(n)}`:null}toString(){return this.isValid?this.toISO():xn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(n={}){if(!this.isValid)return{};const o={...this.c};return n.includeConfig&&(o.outputCalendar=this.outputCalendar,o.numberingSystem=this.loc.numberingSystem,o.locale=this.loc.locale),o}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(n,o="milliseconds",c={}){if(!this.isValid||!n.isValid)return x.invalid("created by diffing an invalid DateTime");const h={locale:this.locale,numberingSystem:this.numberingSystem,...c},f=$o(o).map(x.normalizeUnit),g=n.valueOf()>this.valueOf(),y=g?this:n,b=g?n:this,S=Pa(y,b,f,h);return g?S.negate():S}diffNow(n="milliseconds",o={}){return this.diff(M.now(),n,o)}until(n){return this.isValid?U.fromDateTimes(this,n):this}hasSame(n,o,c){if(!this.isValid)return!1;const h=n.valueOf(),f=this.setZone(n.zone,{keepLocalTime:!0});return f.startOf(o,c)<=h&&h<=f.endOf(o,c)}equals(n){return this.isValid&&n.isValid&&this.valueOf()===n.valueOf()&&this.zone.equals(n.zone)&&this.loc.equals(n.loc)}toRelative(n={}){if(!this.isValid)return null;const o=n.base||M.fromObject({},{zone:this.zone}),c=n.padding?this<o?-n.padding:n.padding:0;let h=["years","months","days","hours","minutes","seconds"],f=n.unit;return Array.isArray(n.unit)&&(h=n.unit,f=void 0),Rs(o,this.plus(c),{...n,numeric:"always",units:h,unit:f})}toRelativeCalendar(n={}){return this.isValid?Rs(n.base||M.fromObject({},{zone:this.zone}),this,{...n,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...n){if(!n.every(M.isDateTime))throw new l("min requires all arguments be DateTimes");return Kr(n,o=>o.valueOf(),Math.min)}static max(...n){if(!n.every(M.isDateTime))throw new l("max requires all arguments be DateTimes");return Kr(n,o=>o.valueOf(),Math.max)}static fromFormatExplain(n,o,c={}){const{locale:h=null,numberingSystem:f=null}=c,g=R.fromOpts({locale:h,numberingSystem:f,defaultToEN:!0});return Ms(g,n,o)}static fromStringExplain(n,o,c={}){return M.fromFormatExplain(n,o,c)}static buildFormatParser(n,o={}){const{locale:c=null,numberingSystem:h=null}=o,f=R.fromOpts({locale:c,numberingSystem:h,defaultToEN:!0});return new ks(f,n)}static fromFormatParser(n,o,c={}){if(k(n)||k(o))throw new l("fromFormatParser requires an input string and a format parser");const{locale:h=null,numberingSystem:f=null}=c,g=R.fromOpts({locale:h,numberingSystem:f,defaultToEN:!0});if(!g.equals(o.locale))throw new l(`fromFormatParser called with a locale of ${g}, but the format parser was created for ${o.locale}`);const{result:y,zone:b,specificOffset:S,invalidReason:E}=o.explainFromTokens(n);return E?M.invalid(E):Je(y,b,c,`format ${o.format}`,n,S)}static get DATE_SHORT(){return v}static get DATE_MED(){return T}static get DATE_MED_WITH_WEEKDAY(){return A}static get DATE_FULL(){return _}static get DATE_HUGE(){return I}static get TIME_SIMPLE(){return $}static get TIME_WITH_SECONDS(){return N}static get TIME_WITH_SHORT_OFFSET(){return H}static get TIME_WITH_LONG_OFFSET(){return Y}static get TIME_24_SIMPLE(){return j}static get TIME_24_WITH_SECONDS(){return Be}static get TIME_24_WITH_SHORT_OFFSET(){return re}static get TIME_24_WITH_LONG_OFFSET(){return ae}static get DATETIME_SHORT(){return ht}static get DATETIME_SHORT_WITH_SECONDS(){return xt}static get DATETIME_MED(){return Sr}static get DATETIME_MED_WITH_SECONDS(){return Tr}static get DATETIME_MED_WITH_WEEKDAY(){return co}static get DATETIME_FULL(){return _r}static get DATETIME_FULL_WITH_SECONDS(){return Ir}static get DATETIME_HUGE(){return Er}static get DATETIME_HUGE_WITH_SECONDS(){return kr}}function St(a){if(M.isDateTime(a))return a;if(a&&a.valueOf&&ye(a.valueOf()))return M.fromJSDate(a);if(a&&typeof a=="object")return M.fromObject(a);throw new l(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const sc="3.6.1";return J.DateTime=M,J.Duration=x,J.FixedOffsetZone=G,J.IANAZone=ce,J.Info=bt,J.Interval=U,J.InvalidZone=Dr,J.Settings=B,J.SystemZone=dt,J.VERSION=sc,J.Zone=Ue,J}var Hn={},ai;function ol(){return ai||(ai=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RE_RANGE=r.RE_WILDCARDS=r.PRESETS=r.TIME_UNITS_LEN=r.TIME_UNITS=r.TIME_UNITS_MAP=r.ALIASES=r.PARSE_DEFAULTS=r.CONSTRAINTS=void 0,r.CONSTRAINTS=Object.freeze({second:[0,59],minute:[0,59],hour:[0,23],dayOfMonth:[1,31],month:[1,12],dayOfWeek:[0,7]}),r.PARSE_DEFAULTS=Object.freeze({second:"0",minute:"*",hour:"*",dayOfMonth:"*",month:"*",dayOfWeek:"*"}),r.ALIASES=Object.freeze({jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}),r.TIME_UNITS_MAP=Object.freeze({SECOND:"second",MINUTE:"minute",HOUR:"hour",DAY_OF_MONTH:"dayOfMonth",MONTH:"month",DAY_OF_WEEK:"dayOfWeek"}),r.TIME_UNITS=Object.freeze(Object.values(r.TIME_UNITS_MAP)),r.TIME_UNITS_LEN=r.TIME_UNITS.length,r.PRESETS=Object.freeze({"@yearly":"0 0 0 1 1 *","@monthly":"0 0 0 1 * *","@weekly":"0 0 0 * * 0","@daily":"0 0 0 * * *","@hourly":"0 0 * * * *","@minutely":"0 * * * * *","@secondly":"* * * * * *","@weekdays":"0 0 0 * * 1-5","@weekends":"0 0 0 * * 0,6"}),r.RE_WILDCARDS=/\*/g,r.RE_RANGE=/^(\d+)(?:-(\d+))?(?:\/(\d+))?$/g}(Hn)),Hn}var Oe={},ci;function Zi(){if(ci)return Oe;ci=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.ExclusiveParametersError=Oe.CronError=void 0;class r extends Error{}Oe.CronError=r;class e extends r{constructor(s,i){super(`You can't specify both ${s} and ${i}`)}}return Oe.ExclusiveParametersError=e,Oe}var ui;function cr(){if(ui)return kt;ui=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.CronTime=void 0;const r=il(),e=ol(),t=Zi();class s{constructor(u,l,m){if(this.realDate=!1,this.second={},this.minute={},this.hour={},this.dayOfMonth={},this.month={},this.dayOfWeek={},l!=null&&m!=null)throw new t.ExclusiveParametersError("timeZone","utcOffset");if(l){if(!r.DateTime.fromObject({},{zone:l}).isValid)throw new t.CronError("Invalid timezone.");this.timeZone=l}if(m!=null&&(this.utcOffset=m),l==null&&m==null){const d=Intl.DateTimeFormat().resolvedOptions().timeZone;this.timeZone=d}u instanceof Date||u instanceof r.DateTime?(this.source=u instanceof Date?r.DateTime.fromJSDate(u):u,this.realDate=!0):(this.source=u,this._parse(this.source))}static validateCronExpression(u){try{return new s(u),{valid:!0}}catch(l){return{valid:!1,error:l}}}_getWeekDay(u){return u.weekday===7?0:u.weekday}sendAt(u){let l=this.realDate&&this.source instanceof r.DateTime?this.source:r.DateTime.utc();if(this.timeZone&&(l=l.setZone(this.timeZone)),this.utcOffset!==void 0){const m=this.utcOffset<0?"-":"+",d=Math.trunc(this.utcOffset/60),p=String(Math.abs(d)).padStart(2,"0"),C=Math.abs(this.utcOffset-d*60),v=String(C).padStart(2,"0"),T=`UTC${m}${p}:${v}`;if(l=l.setZone(T),!l.isValid)throw new t.CronError("ERROR: You specified an invalid UTC offset.")}if(this.realDate){if(r.DateTime.local()>l)throw new t.CronError("WARNING: Date in past. Will never be fired.");return l}if(u===void 0||isNaN(u)||u<0)return this.getNextDateFrom(l);{const m=[];for(;u>0;u--)l=this.getNextDateFrom(l),m.push(l);return m}}getTimeout(){return this.sendAt().toMillis()-r.DateTime.local().toMillis()}toString(){return this.toJSON().join(" ")}toJSON(){return e.TIME_UNITS.map(u=>this._wcOrAll(u))}getNextDateFrom(u,l){var m,d;u instanceof Date&&(u=r.DateTime.fromJSDate(u)),l?u=u.setZone(l):l=(m=u.zone.zoneName)!==null&&m!==void 0?m:u.zone.fixed;let p=r.DateTime.fromFormat(`${u.year}-${u.month}-${u.day} ${u.hour}:${u.minute}:${u.second}`,"yyyy-M-d H:m:s",{zone:"UTC"});const C=p.toMillis();if(this.realDate||p.millisecond>0&&(p=p.set({millisecond:0,second:p.second+1})),!p.isValid)throw new t.CronError("ERROR: You specified an invalid date.");const v=r.DateTime.now().plus({years:8});for(;;){if(p>v)throw new t.CronError(`Something went wrong. No execution date was found in the next 8 years.
							Please provide the following string if you would like to help debug:
							Time Zone: ${(d=l==null?void 0:l.toString())!==null&&d!==void 0?d:'""'} - Cron String: ${this.source.toString()} - UTC offset: ${p.offset} - current Date: ${r.DateTime.local().toString()}`);if(!(p.month in this.month)&&Object.keys(this.month).length!==12){p=p.plus({month:1}),p=p.set({day:1,hour:0,minute:0,second:0});continue}if(!(p.day in this.dayOfMonth)&&Object.keys(this.dayOfMonth).length!==31&&!(this._getWeekDay(p)in this.dayOfWeek&&Object.keys(this.dayOfWeek).length!==7)||!(this._getWeekDay(p)in this.dayOfWeek)&&Object.keys(this.dayOfWeek).length!==7&&!(p.day in this.dayOfMonth&&Object.keys(this.dayOfMonth).length!==31)){p=p.plus({days:1}),p=p.set({hour:0,minute:0,second:0});continue}if(!(p.hour in this.hour)&&Object.keys(this.hour).length!==24){p=p.plus({hour:1}),p=p.set({minute:0,second:0});continue}if(!(p.minute in this.minute)&&Object.keys(this.minute).length!==60){p=p.plus({minute:1}),p=p.set({second:0});continue}if(p.toMillis()===C||!(p.second in this.second)&&Object.keys(this.second).length!==60){p=p.plus({second:1});continue}break}const T=p.hour,A=p.minute;p=r.DateTime.fromFormat(`${p.year}-${p.month}-${p.day} ${p.hour}:${p.minute}:${p.second}`,"yyyy-M-d H:m:s",{zone:l});const _=r.DateTime.fromFormat(`${p.year}-1-1 0:0:0`,"yyyy-M-d H:m:s",{zone:l});if((T!==p.hour||A!==p.minute)&&_.offset!==p.offset){for(;p.minus({minute:1}).offset!==_.offset;)p=p.minus({minute:1});return p}const I=p.minus({hour:1}),$=p.minus({hour:2});(I.hour===p.hour||$.hour===I.hour)&&I>u&&(p=I);const N=p.minus({minute:30});return(N.minute===p.minute||I.minute===N.minute)&&N>u&&(p=N),p}_wcOrAll(u){if(this._hasAll(u))return"*";const l=[];for(const m in this[u])l.push(m);return l.join(",")}_hasAll(u){const l=e.CONSTRAINTS[u],m=l[0],d=u===e.TIME_UNITS_MAP.DAY_OF_WEEK?l[1]-1:l[1];for(let p=m,C=d;p<C;p++)if(!(p in this[u]))return!1;return!0}_parse(u){var l;u=u.toLowerCase(),Object.keys(e.PRESETS).includes(u)&&(u=e.PRESETS[u]),u=u.replace(/[a-z]{1,3}/gi,p=>{if(Object.keys(e.ALIASES).includes(p))return e.ALIASES[p].toString();throw new t.CronError(`Unknown alias: ${p}`)});const m=u.trim().split(/\s+/);if(m.length<e.TIME_UNITS_LEN-1)throw new t.CronError("Too few fields");if(m.length>e.TIME_UNITS_LEN)throw new t.CronError("Too many fields");const d=m.length;for(const p of e.TIME_UNITS){const C=e.TIME_UNITS.indexOf(p),v=(l=m[C-(e.TIME_UNITS_LEN-d)])!==null&&l!==void 0?l:e.PARSE_DEFAULTS[p];this._parseField(v,p)}}_parseField(u,l){const m=this[l];let d;const p=e.CONSTRAINTS[l],C=p[0],v=p[1];u.split(",").forEach(_=>{const I=_.indexOf("*");if(I!==-1&&I!==0)throw new t.CronError(`Field (${_}) has an invalid wildcard expression`)}),u=u.replace(e.RE_WILDCARDS,`${C}-${v}`);const A=u.split(",");for(const _ of A){const I=[..._.matchAll(e.RE_RANGE)][0];if((I==null?void 0:I[1])!==void 0){const[,$,N,H]=I;let Y=parseInt($,10),j=N!==void 0?parseInt(N,10):void 0;const Be=H!==void 0,re=parseInt(H??"1",10);if(re===0)throw new t.CronError(`Field (${l}) has a step of zero`);if(j!==void 0&&Y>j)throw new t.CronError(`Field (${l}) has an invalid range`);if(Y<C||j!==void 0&&j>v||j===void 0&&Y>v)throw new t.CronError(`Field value (${u}) is out of range`);Y=Math.min(Math.max(C,~~Math.abs(Y)),v),j!==void 0?j=Math.min(v,~~Math.abs(j)):j=Be?v:Y,d=Y;do m[d]=!0,d+=re;while(d<=j);l==="dayOfWeek"&&(!m[0]&&m[7]&&(m[0]=m[7]),delete m[7])}else throw new t.CronError(`Field (${l}) cannot be parsed`)}}}return kt.CronTime=s,kt}var Ae={};const al={},cl=Object.freeze(Object.defineProperty({__proto__:null,default:al},Symbol.toStringTag,{value:"Module"})),ul=sl(cl);var li;function ll(){if(li)return Ae;li=1;var r=Ae&&Ae.__awaiter||function(u,l,m,d){function p(C){return C instanceof m?C:new m(function(v){v(C)})}return new(m||(m=Promise))(function(C,v){function T(I){try{_(d.next(I))}catch($){v($)}}function A(I){try{_(d.throw(I))}catch($){v($)}}function _(I){I.done?C(I.value):p(I.value).then(T,A)}_((d=d.apply(u,l||[])).next())})};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.CronJob=void 0;const e=ul,t=Zi(),s=cr();class i{get isActive(){return this._isActive}get isCallbackRunning(){return this._isCallbackRunning}constructor(l,m,d,p,C,v,T,A,_,I,$,N,H){if(this.unrefTimeout=!1,this.lastExecution=null,this.runOnce=!1,this.waitForCompletion=!1,this.threshold=250,this._isActive=!1,this._isCallbackRunning=!1,this._callbacks=[],this.context=v??this,this.waitForCompletion=!!I,this.errorHandler=$,C!=null&&A!=null)throw new t.ExclusiveParametersError("timeZone","utcOffset");C!=null?this.cronTime=new s.CronTime(l,C,null):A!=null?this.cronTime=new s.CronTime(l,null,A):this.cronTime=new s.CronTime(l,C,A),_!=null&&(this.unrefTimeout=_),d!=null&&(this.onComplete=this._fnWrap(d)),H!=null&&(this.threshold=Math.abs(H)),N!=null&&(this.name=N),this.cronTime.realDate&&(this.runOnce=!0),this.addCallback(this._fnWrap(m)),T&&(this.lastExecution=new Date,this.fireOnTick()),p&&this.start()}static from(l){if(l.timeZone!=null&&l.utcOffset!=null)throw new t.ExclusiveParametersError("timeZone","utcOffset");return l.timeZone!=null?new i(l.cronTime,l.onTick,l.onComplete,l.start,l.timeZone,l.context,l.runOnInit,l.utcOffset,l.unrefTimeout,l.waitForCompletion,l.errorHandler,l.name,l.threshold):l.utcOffset!=null?new i(l.cronTime,l.onTick,l.onComplete,l.start,null,l.context,l.runOnInit,l.utcOffset,l.unrefTimeout,l.waitForCompletion,l.errorHandler,l.name,l.threshold):new i(l.cronTime,l.onTick,l.onComplete,l.start,l.timeZone,l.context,l.runOnInit,l.utcOffset,l.unrefTimeout,l.waitForCompletion,l.errorHandler,l.name,l.threshold)}_fnWrap(l){var m,d;switch(typeof l){case"function":return l;case"string":{const[p,...C]=l.split(" ");return e.spawn.bind(void 0,p??l,C,{})}case"object":return e.spawn.bind(void 0,l.command,(m=l.args)!==null&&m!==void 0?m:[],(d=l.options)!==null&&d!==void 0?d:{})}}addCallback(l){typeof l=="function"&&this._callbacks.push(l)}setTime(l){if(!(l instanceof s.CronTime))throw new t.CronError("time must be an instance of CronTime.");const m=this._isActive;this.stop(),this.cronTime=l,l.realDate&&(this.runOnce=!0),m&&this.start()}nextDate(){return this.cronTime.sendAt()}fireOnTick(){return r(this,void 0,void 0,function*(){if(!(this.waitForCompletion&&this._isCallbackRunning)){this._isCallbackRunning=!0;try{for(const l of this._callbacks){const m=l.call(this.context,this.onComplete);this.waitForCompletion&&(yield m)}}catch(l){this.errorHandler!=null?this.errorHandler(l):console.error("[Cron] error in callback",l)}finally{this._isCallbackRunning=!1}}})}nextDates(l){return this.cronTime.sendAt(l??0)}start(){if(this._isActive)return;this._isActive=!0;const l=2147483647;let m=this.cronTime.getTimeout(),d=0,p;const C=T=>{p=Date.now(),this._timeout=setTimeout(v,T),this.unrefTimeout&&typeof this._timeout.unref=="function"&&this._timeout.unref()},v=()=>{const T=p+m-Date.now();if(T>0){let A=this.cronTime.getTimeout();A>T&&(A=T),d+=A}d?(d>l?(d-=l,m=l):(m=d,d=0),C(m)):(this.lastExecution=new Date,this._isActive=!1,this.runOnce||this.start(),this.fireOnTick())};if(m>=0)m>l&&(d=m-l,m=l),C(m);else{const T=Math.abs(m),A=`[Cron] Missed execution deadline by ${T}ms for job${this.name?` "${this.name}"`:""} with cron expression '${String(this.cronTime.source)}'`;T<=this.threshold?(console.warn(`${A}. Executing immediately.`),this.lastExecution=new Date,this.fireOnTick()):console.warn(`${A}. Skipping execution as it exceeds threshold (${this.threshold}ms).`),m=this.cronTime.getTimeout(),C(m)}}lastDate(){return this.lastExecution}_executeOnComplete(){return r(this,void 0,void 0,function*(){if(typeof this.onComplete=="function")try{yield this.onComplete.call(this.context)}catch(l){console.error("[Cron] error in onComplete callback:",l)}})}_waitForJobCompletion(){return r(this,void 0,void 0,function*(){for(;this._isCallbackRunning;)yield new Promise(l=>setTimeout(l,100))})}stop(){if(this._timeout&&clearTimeout(this._timeout),this._isActive=!1,!this.waitForCompletion){this._executeOnComplete();return}return Promise.resolve().then(()=>r(this,void 0,void 0,function*(){yield this._waitForJobCompletion(),yield this._executeOnComplete()}))}}return Ae.CronJob=i,Ae}var hi;function hl(){return hi||(hi=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateCronExpression=r.timeout=r.sendAt=r.CronTime=r.CronJob=void 0;const e=cr();var t=ll();Object.defineProperty(r,"CronJob",{enumerable:!0,get:function(){return t.CronJob}});var s=cr();Object.defineProperty(r,"CronTime",{enumerable:!0,get:function(){return s.CronTime}});const i=l=>new e.CronTime(l).sendAt();r.sendAt=i;const u=l=>new e.CronTime(l).getTimeout();r.timeout=u,r.validateCronExpression=e.CronTime.validateCronExpression}(qn)),qn}var dl=hl();const Mt="1.23.0";var de=[],ne=[],fl=Uint8Array,Gn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Xe=0,ml=Gn.length;Xe<ml;++Xe)de[Xe]=Gn[Xe],ne[Gn.charCodeAt(Xe)]=Xe;ne[45]=62;ne[95]=63;function pl(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var s=t===e?0:4-t%4;return[t,s]}function gl(r,e,t){return(e+t)*3/4-t}function cn(r){var e,t=pl(r),s=t[0],i=t[1],u=new fl(gl(r,s,i)),l=0,m=i>0?s-4:s,d;for(d=0;d<m;d+=4)e=ne[r.charCodeAt(d)]<<18|ne[r.charCodeAt(d+1)]<<12|ne[r.charCodeAt(d+2)]<<6|ne[r.charCodeAt(d+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=e&255;return i===2&&(e=ne[r.charCodeAt(d)]<<2|ne[r.charCodeAt(d+1)]>>4,u[l++]=e&255),i===1&&(e=ne[r.charCodeAt(d)]<<10|ne[r.charCodeAt(d+1)]<<4|ne[r.charCodeAt(d+2)]>>2,u[l++]=e>>8&255,u[l++]=e&255),u}function yl(r){return de[r>>18&63]+de[r>>12&63]+de[r>>6&63]+de[r&63]}function wl(r,e,t){for(var s,i=[],u=e;u<t;u+=3)s=(r[u]<<16&16711680)+(r[u+1]<<8&65280)+(r[u+2]&255),i.push(yl(s));return i.join("")}function un(r){for(var e,t=r.length,s=t%3,i=[],u=16383,l=0,m=t-s;l<m;l+=u)i.push(wl(r,l,l+u>m?m:l+u));return s===1?(e=r[t-1],i.push(de[e>>2]+de[e<<4&63]+"==")):s===2&&(e=(r[t-2]<<8)+r[t-1],i.push(de[e>>10]+de[e>>4&63]+de[e<<2&63]+"=")),i.join("")}function Ot(r){if(r===void 0)return{};if(!Yi(r))throw new Error(`The arguments to a Convex function must be an object. Received: ${r}`);return r}function bl(r){if(typeof r>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof r!="string")throw new Error(`Invalid deployment address: found ${r}".`);if(!(r.startsWith("http:")||r.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${r}".`);try{new URL(r)}catch{throw new Error(`Invalid deployment address: "${r}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(r.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${r}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function Yi(r){var i;const e=typeof r=="object",t=Object.getPrototypeOf(r),s=t===null||t===Object.prototype||((i=t==null?void 0:t.constructor)==null?void 0:i.name)==="Object";return e&&s}const Ji=!0,ct=BigInt("-9223372036854775808"),Cr=BigInt("9223372036854775807"),ur=BigInt("0"),Cl=BigInt("8"),vl=BigInt("256");function Qi(r){return Number.isNaN(r)||!Number.isFinite(r)||Object.is(r,-0)}function Sl(r){r<ur&&(r-=ct+ct);let e=r.toString(16);e.length%2===1&&(e="0"+e);const t=new Uint8Array(new ArrayBuffer(8));let s=0;for(const i of e.match(/.{2}/g).reverse())t.set([parseInt(i,16)],s++),r>>=Cl;return un(t)}function Tl(r){const e=cn(r);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let t=ur,s=ur;for(const i of e)t+=BigInt(i)*vl**s,s++;return t>Cr&&(t+=ct+ct),t}function _l(r){if(r<ct||Cr<r)throw new Error(`BigInt ${r} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,r,!0),un(new Uint8Array(e))}function Il(r){const e=cn(r);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const El=DataView.prototype.setBigInt64?_l:Sl,kl=DataView.prototype.getBigInt64?Il:Tl,di=1024;function Ki(r){if(r.length>di)throw new Error(`Field name ${r} exceeds maximum field name length ${di}.`);if(r.startsWith("$"))throw new Error(`Field name ${r} starts with a '$', which is reserved.`);for(let e=0;e<r.length;e+=1){const t=r.charCodeAt(e);if(t<32||t>=127)throw new Error(`Field name ${r} has invalid character '${r[e]}': Field names can only contain non-control ASCII characters`)}}function $e(r){if(r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string")return r;if(Array.isArray(r))return r.map(s=>$e(s));if(typeof r!="object")throw new Error(`Unexpected type of ${r}`);const e=Object.entries(r);if(e.length===1){const s=e[0][0];if(s==="$bytes"){if(typeof r.$bytes!="string")throw new Error(`Malformed $bytes field on ${r}`);return cn(r.$bytes).buffer}if(s==="$integer"){if(typeof r.$integer!="string")throw new Error(`Malformed $integer field on ${r}`);return kl(r.$integer)}if(s==="$float"){if(typeof r.$float!="string")throw new Error(`Malformed $float field on ${r}`);const i=cn(r.$float);if(i.byteLength!==8)throw new Error(`Received ${i.byteLength} bytes, expected 8 for $float`);const l=new DataView(i.buffer).getFloat64(0,Ji);if(!Qi(l))throw new Error(`Float ${l} should be encoded as a number`);return l}if(s==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(s==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const t={};for(const[s,i]of Object.entries(r))Ki(s),t[s]=$e(i);return t}function Nt(r){return JSON.stringify(r,(e,t)=>t===void 0?"undefined":typeof t=="bigint"?`${t.toString()}n`:t)}function lr(r,e,t,s){var l;if(r===void 0){const m=t&&` (present at path ${t} in original object ${Nt(e)})`;throw new Error(`undefined is not a valid Convex value${m}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(r===null)return r;if(typeof r=="bigint"){if(r<ct||Cr<r)throw new Error(`BigInt ${r} does not fit into a 64-bit signed integer.`);return{$integer:El(r)}}if(typeof r=="number")if(Qi(r)){const m=new ArrayBuffer(8);return new DataView(m).setFloat64(0,r,Ji),{$float:un(new Uint8Array(m))}}else return r;if(typeof r=="boolean"||typeof r=="string")return r;if(r instanceof ArrayBuffer)return{$bytes:un(new Uint8Array(r))};if(Array.isArray(r))return r.map((m,d)=>lr(m,e,t+`[${d}]`));if(r instanceof Set)throw new Error(zn(t,"Set",[...r],e));if(r instanceof Map)throw new Error(zn(t,"Map",[...r],e));if(!Yi(r)){const m=(l=r==null?void 0:r.constructor)==null?void 0:l.name,d=m?`${m} `:"";throw new Error(zn(t,d,r,e))}const i={},u=Object.entries(r);u.sort(([m,d],[p,C])=>m===p?0:m<p?-1:1);for(const[m,d]of u)d!==void 0&&(Ki(m),i[m]=lr(d,e,t+`.${m}`));return i}function zn(r,e,t,s){return r?`${e}${Nt(t)} is not a supported Convex type (present at path ${r} in original object ${Nt(s)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${Nt(t)} is not a supported Convex type.`}function Qt(r){return lr(r,r,"")}var Ml=Object.defineProperty,Ol=(r,e,t)=>e in r?Ml(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Zn=(r,e,t)=>Ol(r,typeof e!="symbol"?e+"":e,t),fi,mi;const Al=Symbol.for("ConvexError");class Kt extends(mi=Error,fi=Al,mi){constructor(e){super(typeof e=="string"?e:Nt(e)),Zn(this,"name","ConvexError"),Zn(this,"data"),Zn(this,fi,!0),this.data=e}}var Dl=Object.defineProperty,Nl=(r,e,t)=>e in r?Dl(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pi=(r,e,t)=>Nl(r,typeof e!="symbol"?e+"":e,t);const Fl="color:rgb(0, 145, 255)";function $l(r){switch(r){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}let xl=class{constructor(e){pi(this,"_onLogLineFuncs"),pi(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let t=Math.random().toString(36).substring(2,15);for(let s=0;s<10&&this._onLogLineFuncs[t]!==void 0;s++)t=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[t]=e,()=>{delete this._onLogLineFuncs[t]}}logVerbose(...e){if(this._verbose)for(const t of Object.values(this._onLogLineFuncs))t("debug",`${new Date().toISOString()}`,...e)}log(...e){for(const t of Object.values(this._onLogLineFuncs))t("info",...e)}warn(...e){for(const t of Object.values(this._onLogLineFuncs))t("warn",...e)}error(...e){for(const t of Object.values(this._onLogLineFuncs))t("error",...e)}};function Ll(r){const e=new xl(r);return e.addLogLineListener((t,...s)=>{switch(t){case"debug":console.debug(...s);break;case"info":console.log(...s);break;case"warn":console.warn(...s);break;case"error":console.error(...s);break;default:console.log(...s)}}),e}function Xt(r,e,t,s,i){const u=$l(t);typeof i=="object"&&(i=`ConvexError ${JSON.stringify(i.errorData,null,2)}`);{const l=i.match(/^\[.*?\] /);if(l===null){r.error(`[CONVEX ${u}(${s})] Could not parse console.log`);return}const m=i.slice(1,l[0].length-2),d=i.slice(l[0].length);r.log(`%c[CONVEX ${u}(${s})] [${m}]`,Fl,d)}}const ln=Symbol.for("functionName"),Rl=Symbol.for("toReferencePath");function Pl(r){return r[Rl]??null}function Bl(r){return r.startsWith("function://")}function Ul(r){let e;if(typeof r=="string")Bl(r)?e={functionHandle:r}:e={name:r};else if(r[ln])e={name:r[ln]};else{const t=Pl(r);if(!t)throw new Error(`${r} is not a functionReference`);e={reference:t}}return e}function en(r){const e=Ul(r);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof r=="string")return r;const t=r[ln];if(!t)throw new Error(`${r} is not a functionReference`);return t}function Xi(r=[]){const e={get(t,s){if(typeof s=="string"){const i=[...r,s];return Xi(i)}else if(s===ln){if(r.length<2){const l=["api",...r].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${l}\``)}const i=r.slice(0,-1).join("/"),u=r[r.length-1];return u==="default"?i:i+":"+u}else return s===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}const Wl=Xi();var jl=Object.defineProperty,Vl=(r,e,t)=>e in r?jl(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,De=(r,e,t)=>Vl(r,typeof e!="symbol"?e+"":e,t);const tn=560;class ql{constructor(e,t){if(De(this,"address"),De(this,"auth"),De(this,"adminAuth"),De(this,"encodedTsPromise"),De(this,"debug"),De(this,"fetchOptions"),De(this,"logger"),typeof t=="boolean")throw new Error("skipConvexDeploymentUrlCheck as the second argument is no longer supported. Please pass an options object, `{ skipConvexDeploymentUrlCheck: true }`.");const s=t??{};s.skipConvexDeploymentUrlCheck!==!0&&bl(e),this.logger=s.logger??Ll({verbose:!1}),this.address=e,this.debug=!0}backendUrl(){return`${this.address}/api`}get url(){return this.address}setAuth(e){this.clearAuth(),this.auth=e}setAdminAuth(e,t){if(this.clearAuth(),t!==void 0){const s=new TextEncoder().encode(JSON.stringify(t)),i=btoa(String.fromCodePoint(...s));this.adminAuth=`${e}:${i}`}else this.adminAuth=e}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(e){this.debug=e}setFetchOptions(e){this.fetchOptions=e}async consistentQuery(e,...t){const s=Ot(t[0]),i=this.getTimestamp();return await this.queryInner(e,s,{timestampPromise:i})}async getTimestamp(){return this.encodedTsPromise?this.encodedTsPromise:this.encodedTsPromise=this.getTimestampInner()}async getTimestampInner(){const e=fetch,t={"Content-Type":"application/json","Convex-Client":`npm-${Mt}`},s=await e(`${this.address}/api/query_ts`,{...this.fetchOptions,method:"POST",headers:t});if(!s.ok)throw new Error(await s.text());const{ts:i}=await s.json();return i}async query(e,...t){const s=Ot(t[0]);return await this.queryInner(e,s,{})}async queryInner(e,t,s){const i=en(e),u=[Qt(t)],l={"Content-Type":"application/json","Convex-Client":`npm-${Mt}`};this.adminAuth?l.Authorization=`Convex ${this.adminAuth}`:this.auth&&(l.Authorization=`Bearer ${this.auth}`);const m=fetch,d=s.timestampPromise?await s.timestampPromise:void 0,p=JSON.stringify({path:i,format:"convex_encoded_json",args:u,...d?{ts:d}:{}}),C=d?`${this.address}/api/query_at_ts`:`${this.address}/api/query`,v=await m(C,{...this.fetchOptions,body:p,method:"POST",headers:l});if(!v.ok&&v.status!==tn)throw new Error(await v.text());const T=await v.json();if(this.debug)for(const A of T.logLines??[])Xt(this.logger,"info","query",i,A);switch(T.status){case"success":return $e(T.value);case"error":throw T.errorData!==void 0?nn(T.errorData,new Kt(T.errorMessage)):new Error(T.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(T)}`)}}async mutation(e,...t){const s=Ot(t[0]),i=en(e),u=JSON.stringify({path:i,format:"convex_encoded_json",args:[Qt(s)]}),l={"Content-Type":"application/json","Convex-Client":`npm-${Mt}`};this.adminAuth?l.Authorization=`Convex ${this.adminAuth}`:this.auth&&(l.Authorization=`Bearer ${this.auth}`);const d=await fetch(`${this.address}/api/mutation`,{...this.fetchOptions,body:u,method:"POST",headers:l});if(!d.ok&&d.status!==tn)throw new Error(await d.text());const p=await d.json();if(this.debug)for(const C of p.logLines??[])Xt(this.logger,"info","mutation",i,C);switch(p.status){case"success":return $e(p.value);case"error":throw p.errorData!==void 0?nn(p.errorData,new Kt(p.errorMessage)):new Error(p.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(p)}`)}}async action(e,...t){const s=Ot(t[0]),i=en(e),u=JSON.stringify({path:i,format:"convex_encoded_json",args:[Qt(s)]}),l={"Content-Type":"application/json","Convex-Client":`npm-${Mt}`};this.adminAuth?l.Authorization=`Convex ${this.adminAuth}`:this.auth&&(l.Authorization=`Bearer ${this.auth}`);const d=await fetch(`${this.address}/api/action`,{...this.fetchOptions,body:u,method:"POST",headers:l});if(!d.ok&&d.status!==tn)throw new Error(await d.text());const p=await d.json();if(this.debug)for(const C of p.logLines??[])Xt(this.logger,"info","action",i,C);switch(p.status){case"success":return $e(p.value);case"error":throw p.errorData!==void 0?nn(p.errorData,new Kt(p.errorMessage)):new Error(p.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(p)}`)}}async function(e,t,...s){const i=Ot(s[0]),u=typeof e=="string"?e:en(e),l=JSON.stringify({componentPath:t,path:u,format:"convex_encoded_json",args:Qt(i)}),m={"Content-Type":"application/json","Convex-Client":`npm-${Mt}`};this.adminAuth?m.Authorization=`Convex ${this.adminAuth}`:this.auth&&(m.Authorization=`Bearer ${this.auth}`);const p=await fetch(`${this.address}/api/function`,{...this.fetchOptions,body:l,method:"POST",headers:m});if(!p.ok&&p.status!==tn)throw new Error(await p.text());const C=await p.json();if(this.debug)for(const v of C.logLines??[])Xt(this.logger,"info","any",u,v);switch(C.status){case"success":return $e(C.value);case"error":throw C.errorData!==void 0?nn(C.errorData,new Kt(C.errorMessage)):new Error(C.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(C)}`)}}}function nn(r,e){return e.data=$e(r),e}const ut=Wl,lt=new ql("https://canny-capybara-271.convex.cloud"),Pe=new Se;Pe.command("start",async r=>{await r.reply(`Welcome to Daily Pin Bot!

Commands:
/setup [link] [optional message] - Setup daily pin with a link and optional message
/activate - Activate daily pins
/deactivate - Deactivate daily pins
/status - Check current setup status
/help - Show available commands`)});Pe.command("help",async r=>{await r.reply(`Available commands:
/setup [link] [optional message] - Setup daily pin with a link and optional message
/activate - Activate daily pins
/deactivate - Deactivate daily pins
/status - Check current setup status`)});Pe.command("setup",async r=>{var u;const e=(u=r.message)==null?void 0:u.text.split(" ");if(!e||e.length<2){await r.reply("Please provide a link to pin");return}const t=r.chat.id.toString(),s=e[1],i=e.slice(2).join(" ")||"Daily reminder";await lt.mutation(ut.session.upsertSession,{chatId:t,linkToPin:s,messageText:i,isActive:!1}),await r.reply(`Daily pin has been set up with link: ${s}
Message: ${i}`)});Pe.command("activate",async r=>{const e=r.chat.id.toString(),t=await lt.query(ut.session.getSession,{chatId:e});if(!t||!t.linkToPin){await r.reply("Please set up the bot first using /setup [link] [optional message]");return}await lt.mutation(ut.session.updateSessionActive,{chatId:e,isActive:!0}),await r.reply("Daily pins activated! The bot will pin a message every weekday at 8:30 AM.")});Pe.command("deactivate",async r=>{const e=r.chat.id.toString();await lt.mutation(ut.session.updateSessionActive,{chatId:e,isActive:!1}),await r.reply("Daily pins deactivated.")});Pe.command("status",async r=>{const e=r.chat.id.toString(),t=await lt.query(ut.session.getSession,{chatId:e});if(!t){await r.reply("No setup found. Please use /setup to configure the bot.");return}const s=t.isActive?"Active":"Inactive";await r.reply(`Status: ${s}
Link: ${t.linkToPin}
Message: ${t.messageText}
Chat ID: ${e}`)});async function Hl(r,e,t,s){try{const i=`${s}
${t}`,u=await r.api.sendMessage(e,i);await r.api.pinChatMessage(e,u.message_id),console.log(`Sent and pinned message to ${e}`)}catch(i){console.error(`Error sending/pinning to ${e}:`,i)}}function Gl(r){const e=new dl.CronJob("0 30 8 * * 1-5",async()=>{console.log("Running daily pin job at 8:30 AM");const t=await lt.query(ut.session.getActiveSessions);for(const s of t)await Hl(r,s.chatId,s.linkToPin,s.messageText)},null,!0,"UTC");return e.start(),e}const zl=()=>{};var gi={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let i=r.charCodeAt(s);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Zl=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const i=r[t++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const u=r[t++];e[s++]=String.fromCharCode((i&31)<<6|u&63)}else if(i>239&&i<365){const u=r[t++],l=r[t++],m=r[t++],d=((i&7)<<18|(u&63)<<12|(l&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(d>>10)),e[s++]=String.fromCharCode(56320+(d&1023))}else{const u=r[t++],l=r[t++];e[s++]=String.fromCharCode((i&15)<<12|(u&63)<<6|l&63)}}return e.join("")},to={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<r.length;i+=3){const u=r[i],l=i+1<r.length,m=l?r[i+1]:0,d=i+2<r.length,p=d?r[i+2]:0,C=u>>2,v=(u&3)<<4|m>>4;let T=(m&15)<<2|p>>6,A=p&63;d||(A=64,l||(T=64)),s.push(t[C],t[v],t[T],t[A])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(eo(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Zl(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<r.length;){const u=t[r.charAt(i++)],m=i<r.length?t[r.charAt(i)]:0;++i;const p=i<r.length?t[r.charAt(i)]:64;++i;const v=i<r.length?t[r.charAt(i)]:64;if(++i,u==null||m==null||p==null||v==null)throw new Yl;const T=u<<2|m>>4;if(s.push(T),p!==64){const A=m<<4&240|p>>2;if(s.push(A),v!==64){const _=p<<6&192|v;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Yl extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jl=function(r){const e=eo(r);return to.encodeByteArray(e,!0)},no=function(r){return Jl(r).replace(/\./g,"")},Ql=function(r){try{return to.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=()=>Kl().__FIREBASE_DEFAULTS__,eh=()=>{if(typeof process>"u"||typeof gi>"u")return;const r=gi.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},th=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Ql(r[1]);return e&&JSON.parse(e)},nh=()=>{try{return zl()||Xl()||eh()||th()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},rh=()=>{var r;return(r=nh())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function ih(){try{return typeof indexedDB=="object"}catch{return!1}}function oh(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var u;e(((u=i.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="FirebaseError";class $t extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=ah,Object.setPrototypeOf(this,$t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ro.prototype.create)}}class ro{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},i=`${this.service}/${e}`,u=this.errors[e],l=u?ch(u,s):"Error",m=`${this.serviceName}: ${l} (${i}).`;return new $t(i,m,s)}}function ch(r,e){return r.replace(uh,(t,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const uh=/\{\$([^}]+)}/g;function hr(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const i of t){if(!s.includes(i))return!1;const u=r[i],l=e[i];if(yi(u)&&yi(l)){if(!hr(u,l))return!1}else if(u!==l)return!1}for(const i of s)if(!t.includes(i))return!1;return!0}function yi(r){return r!==null&&typeof r=="object"}class hn{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new sh;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(i)return null;throw u}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dh(e))try{this.getOrInitializeService({instanceIdentifier:Ne})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:i});s.resolve(u)}catch{}}}}clearInstance(e=Ne){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ne){return this.instances.has(e)}getOptions(e=Ne){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,l]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&l.resolve(i)}return i}onInit(e,t){var s;const i=this.normalizeInstanceIdentifier(t),u=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(i,u);const l=this.instances.get(i);return l&&e(l,i),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const i of s)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:hh(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ne){return this.component?this.component.multipleInstances?e:Ne:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hh(r){return r===Ne?void 0:r}function dh(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(P||(P={}));const mh={debug:P.DEBUG,verbose:P.VERBOSE,info:P.INFO,warn:P.WARN,error:P.ERROR,silent:P.SILENT},ph=P.INFO,gh={[P.DEBUG]:"log",[P.VERBOSE]:"log",[P.INFO]:"info",[P.WARN]:"warn",[P.ERROR]:"error"},yh=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),i=gh[e];if(i)console[i](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wh{constructor(e){this.name=e,this._logLevel=ph,this._logHandler=yh,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in P))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mh[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,P.DEBUG,...e),this._logHandler(this,P.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,P.VERBOSE,...e),this._logHandler(this,P.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,P.INFO,...e),this._logHandler(this,P.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,P.WARN,...e),this._logHandler(this,P.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,P.ERROR,...e),this._logHandler(this,P.ERROR,...e)}}const bh=(r,e)=>e.some(t=>r instanceof t);let wi,bi;function Ch(){return wi||(wi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vh(){return bi||(bi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const so=new WeakMap,dr=new WeakMap,io=new WeakMap,Yn=new WeakMap,vr=new WeakMap;function Sh(r){const e=new Promise((t,s)=>{const i=()=>{r.removeEventListener("success",u),r.removeEventListener("error",l)},u=()=>{t(Te(r.result)),i()},l=()=>{s(r.error),i()};r.addEventListener("success",u),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&so.set(t,r)}).catch(()=>{}),vr.set(e,r),e}function Th(r){if(dr.has(r))return;const e=new Promise((t,s)=>{const i=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",l),r.removeEventListener("abort",l)},u=()=>{t(),i()},l=()=>{s(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",u),r.addEventListener("error",l),r.addEventListener("abort",l)});dr.set(r,e)}let fr={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return dr.get(r);if(e==="objectStoreNames")return r.objectStoreNames||io.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Te(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function _h(r){fr=r(fr)}function Ih(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Jn(this),e,...t);return io.set(s,e.sort?e.sort():[e]),Te(s)}:vh().includes(r)?function(...e){return r.apply(Jn(this),e),Te(so.get(this))}:function(...e){return Te(r.apply(Jn(this),e))}}function Eh(r){return typeof r=="function"?Ih(r):(r instanceof IDBTransaction&&Th(r),bh(r,Ch())?new Proxy(r,fr):r)}function Te(r){if(r instanceof IDBRequest)return Sh(r);if(Yn.has(r))return Yn.get(r);const e=Eh(r);return e!==r&&(Yn.set(r,e),vr.set(e,r)),e}const Jn=r=>vr.get(r);function kh(r,e,{blocked:t,upgrade:s,blocking:i,terminated:u}={}){const l=indexedDB.open(r,e),m=Te(l);return s&&l.addEventListener("upgradeneeded",d=>{s(Te(l.result),d.oldVersion,d.newVersion,Te(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),m.then(d=>{u&&d.addEventListener("close",()=>u()),i&&d.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const Mh=["get","getKey","getAll","getAllKeys","count"],Oh=["put","add","delete","clear"],Qn=new Map;function Ci(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Qn.get(e))return Qn.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,i=Oh.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(i||Mh.includes(t)))return;const u=async function(l,...m){const d=this.transaction(l,i?"readwrite":"readonly");let p=d.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),i&&d.done]))[0]};return Qn.set(e,u),u}_h(r=>({...r,get:(e,t,s)=>Ci(e,t)||r.get(e,t,s),has:(e,t)=>!!Ci(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Dh(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Dh(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mr="@firebase/app",vi="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe=new wh("@firebase/app"),Nh="@firebase/app-compat",Fh="@firebase/analytics-compat",$h="@firebase/analytics",xh="@firebase/app-check-compat",Lh="@firebase/app-check",Rh="@firebase/auth",Ph="@firebase/auth-compat",Bh="@firebase/database",Uh="@firebase/data-connect",Wh="@firebase/database-compat",jh="@firebase/functions",Vh="@firebase/functions-compat",qh="@firebase/installations",Hh="@firebase/installations-compat",Gh="@firebase/messaging",zh="@firebase/messaging-compat",Zh="@firebase/performance",Yh="@firebase/performance-compat",Jh="@firebase/remote-config",Qh="@firebase/remote-config-compat",Kh="@firebase/storage",Xh="@firebase/storage-compat",ed="@firebase/firestore",td="@firebase/vertexai",nd="@firebase/firestore-compat",rd="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd="[DEFAULT]",id={[mr]:"fire-core",[Nh]:"fire-core-compat",[$h]:"fire-analytics",[Fh]:"fire-analytics-compat",[Lh]:"fire-app-check",[xh]:"fire-app-check-compat",[Rh]:"fire-auth",[Ph]:"fire-auth-compat",[Bh]:"fire-rtdb",[Uh]:"fire-data-connect",[Wh]:"fire-rtdb-compat",[jh]:"fire-fn",[Vh]:"fire-fn-compat",[qh]:"fire-iid",[Hh]:"fire-iid-compat",[Gh]:"fire-fcm",[zh]:"fire-fcm-compat",[Zh]:"fire-perf",[Yh]:"fire-perf-compat",[Jh]:"fire-rc",[Qh]:"fire-rc-compat",[Kh]:"fire-gcs",[Xh]:"fire-gcs-compat",[ed]:"fire-fst",[nd]:"fire-fst-compat",[td]:"fire-vertex","fire-js":"fire-js",[rd]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new Map,od=new Map,gr=new Map;function Si(r,e){try{r.container.addComponent(e)}catch(t){pe.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function yr(r){const e=r.name;if(gr.has(e))return pe.debug(`There were multiple attempts to register component ${e}.`),!1;gr.set(e,r);for(const t of pr.values())Si(t,r);for(const t of od.values())Si(t,r);return!0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xe=new ro("app","Firebase",ad);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new hn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xe.create("app-deleted",{appName:this._name})}}function ud(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:sd,automaticDataCollectionEnabled:!1},e),i=s.name;if(typeof i!="string"||!i)throw xe.create("bad-app-name",{appName:String(i)});if(t||(t=rh()),!t)throw xe.create("no-options");const u=pr.get(i);if(u){if(hr(t,u.options)&&hr(s,u.config))return u;throw xe.create("duplicate-app",{appName:i})}const l=new fh(i);for(const d of gr.values())l.addComponent(d);const m=new cd(t,s,l);return pr.set(i,m),m}function on(r,e,t){var s;let i=(s=id[r])!==null&&s!==void 0?s:r;t&&(i+=`-${t}`);const u=i.match(/\s|\//),l=e.match(/\s|\//);if(u||l){const m=[`Unable to register library "${i}" with version "${e}":`];u&&m.push(`library name "${i}" contains illegal characters (whitespace or "/")`),u&&l&&m.push("and"),l&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pe.warn(m.join(" "));return}yr(new hn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="firebase-heartbeat-database",hd=1,Ft="firebase-heartbeat-store";let Kn=null;function oo(){return Kn||(Kn=kh(ld,hd,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ft)}catch(t){console.warn(t)}}}}).catch(r=>{throw xe.create("idb-open",{originalErrorMessage:r.message})})),Kn}async function dd(r){try{const t=(await oo()).transaction(Ft),s=await t.objectStore(Ft).get(ao(r));return await t.done,s}catch(e){if(e instanceof $t)pe.warn(e.message);else{const t=xe.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pe.warn(t.message)}}}async function Ti(r,e){try{const s=(await oo()).transaction(Ft,"readwrite");await s.objectStore(Ft).put(e,ao(r)),await s.done}catch(t){if(t instanceof $t)pe.warn(t.message);else{const s=xe.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});pe.warn(s.message)}}}function ao(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=1024,md=30;class pd{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yd(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=_i();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(l=>l.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:i}),this._heartbeatsCache.heartbeats.length>md){const l=wd(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){pe.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=_i(),{heartbeatsToSend:s,unsentEntries:i}=gd(this._heartbeatsCache.heartbeats),u=no(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return pe.warn(t),""}}}function _i(){return new Date().toISOString().substring(0,10)}function gd(r,e=fd){const t=[];let s=r.slice();for(const i of r){const u=t.find(l=>l.agent===i.agent);if(u){if(u.dates.push(i.date),Ii(t)>e){u.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Ii(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class yd{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ih()?oh().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await dd(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ti(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ti(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ii(r){return no(JSON.stringify({version:2,heartbeats:r})).length}function wd(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(r){yr(new hn("platform-logger",e=>new Ah(e),"PRIVATE")),yr(new hn("heartbeat",e=>new pd(e),"PRIVATE")),on(mr,vi,r),on(mr,vi,"esm2017"),on("fire-js","")}bd("");var Cd="firebase",vd="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on(Cd,vd,"app");const Sd="7573346578:AAE2sRABKwfcYyv4j-TecH-HjrSvxnvkGeg",Td=Sd,nt=new Ru(Td);nt.use(Pe);async function Ei(r){const e=r,t=await rl(e),s=await tl({chunks:t,query:e});return console.log("Completion:",s),s}async function _d(){console.log("init ...");try{console.log("starting ..."),await nt.start(),console.log("Bot started"),nt.on("message:text",async r=>{r.reply(await Ei(r.message.text))}),nt.hears(/chat *(.+)?/,async r=>{var e;console.log(r,"ctx"),console.log(r.message,"ctx.message"),(e=r.message)!=null&&e.text&&r.reply(await Ei(r.message.text))}),nt.command("chat",async r=>{await r.reply("Hi! I can only read messages that explicitly reply to me!",{reply_markup:{force_reply:!0}})}),Gl(nt)}catch(r){console.error("Failed to start the bot:",r)}}const Id={apiKey:"AIzaSyAcUmZKxPKECtpJNXmgqTuRl4-cpUKiuSU",authDomain:"test-bot-app-799e1.firebaseapp.com",projectId:"test-bot-app-799e1",storageBucket:"test-bot-app-799e1.firebasestorage.app",messagingSenderId:"107447802957",appId:"1:107447802957:web:96478207fb609157005004",measurementId:"G-8EWP5E4X9Z"};ud(Id);const Ed=async()=>{await _d()};Ed();
